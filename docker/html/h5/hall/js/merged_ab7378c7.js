//js/egret.min_1f88eb98.js
var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i};if("undefined"==typeof global)var global=window;if("undefined"==typeof __global)var __global=global;var __define=this&&this.__define||function(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:r})},egret;!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}return Object.defineProperty(e.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),e}();t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$EventDispatcher={0:t?t:e,1:{},2:{},3:0},e}return __extends(r,i),r.prototype.$getEventMap=function(t){var e=this.$EventDispatcher,i=t?e[2]:e[1];return i},r.prototype.addEventListener=function(t,e,i,r,n){this.$addListener(t,e,i,r,n)},r.prototype.once=function(t,e,i,r,n){this.$addListener(t,e,i,r,n,!0)},r.prototype.$addListener=function(t,e,i,r,n,a){var o=this.$EventDispatcher,s=r?o[2]:o[1],h=s[t];h?0!==o[3]&&(s[t]=h=h.concat()):h=s[t]=[],this.$insertEventBin(h,t,e,i,r,n,a)},r.prototype.$insertEventBin=function(t,e,i,r,n,a,o){a=0|+a;for(var s=-1,h=t.length,c=0;h>c;c++){var l=t[c];if(l.listener==i&&l.thisObject==r&&l.target==this)return!1;-1==s&&l.priority<a&&(s=c)}var u={type:e,listener:i,thisObject:r,priority:a,target:this,useCapture:n,dispatchOnce:!!o};return-1!==s?t.splice(s,0,u):t.push(u),!0},r.prototype.removeEventListener=function(t,e,i,r){var n=this.$EventDispatcher,a=r?n[2]:n[1],o=a[t];o&&(0!==n[3]&&(a[t]=o=o.concat()),this.$removeEventBin(o,e,i),0==o.length&&(a[t]=null))},r.prototype.$removeEventBin=function(t,e,i){for(var r=t.length,n=0;r>n;n++){var a=t[n];if(a.listener==e&&a.thisObject==i&&a.target==this)return t.splice(n,1),!0}return!1},r.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},r.prototype.willTrigger=function(t){return this.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},r.prototype.$notifyListener=function(t,i){var r=this.$EventDispatcher,n=i?r[2]:r[1],a=n[t.$type];if(!a)return!0;var o=a.length;if(0==o)return!0;var s=e;r[3]++;for(var h=0;o>h;h++){var c=a[h];if(c.listener.call(c.thisObject,t),c.dispatchOnce&&s.push(c),t.$isPropagationImmediateStopped)break}for(r[3]--;s.length;){var c=s.pop();c.target.removeEventListener(c.type,c.listener,c.thisObject,c.useCapture)}return!t.$isDefaultPrevented},r.prototype.dispatchEventWith=function(e,i,r,n){if(i||this.hasEventListener(e)){var a=t.Event.create(t.Event,e,i,n);a.data=r;var o=this.dispatchEvent(a);return t.Event.release(a),o}return!0},r}(t.HashObject);t.EventDispatcher=i,__reflect(i.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.type=null,i.$id=null,i.paddingTop=0,i.paddingBottom=0,i.paddingLeft=0,i.paddingRight=0,i.$uniforms={},t.nativeRender&&egret_native.NativeDisplayObject.createFilter(i),i}return __extends(i,e),i.prototype.$toJson=function(){return""},i.prototype.updatePadding=function(){},i.prototype.onPropertyChange=function(){var e=this;e.updatePadding(),t.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(e.$id,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight),egret_native.NativeDisplayObject.setDataToFilter(e))},i}(t.HashObject);t.Filter=e,__reflect(e.prototype,"egret.Filter")}(egret||(egret={}));var egret;!function(t){function e(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function r(){var e=i.call(this)||this;return e.$children=null,e.$name="",e.$parent=null,e.$stage=null,e.$nestLevel=0,e.$useTranslate=!1,e.$matrix=new t.Matrix,e.$matrixDirty=!1,e.$x=0,e.$y=0,e.$scaleX=1,e.$scaleY=1,e.$rotation=0,e.$skewX=0,e.$skewXdeg=0,e.$skewY=0,e.$skewYdeg=0,e.$explicitWidth=0/0,e.$explicitHeight=0/0,e.$anchorOffsetX=0,e.$anchorOffsetY=0,e.$visible=!0,e.$displayList=null,e.$cacheAsBitmap=!1,e.$cacheDirty=!1,e.$alpha=1,e.$touchEnabled=r.defaultTouchEnabled,e.$scrollRect=null,e.$blendMode=0,e.$maskedObject=null,e.$mask=null,e.$maskRect=null,e.$parentDisplayList=null,e.$renderNode=null,e.$renderDirty=!1,e.$renderMode=null,t.nativeRender&&e.createNativeDisplayObject(),e}return __extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(0)},Object.defineProperty(r.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),r.prototype.$setParent=function(t){this.$parent=t},r.prototype.$onAddToStage=function(e,i){var r=this;r.$stage=e,r.$nestLevel=i,r.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(r)},r.prototype.$onRemoveFromStage=function(){var e=this;e.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(e)},r.prototype.$updateUseTransform=function(){var t=this;1==t.$scaleX&&1==t.$scaleY&&0==t.$skewX&&0==t.$skewY?t.$useTranslate=!1:t.$useTranslate=!0},Object.defineProperty(r.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),r.prototype.$getMatrix=function(){var t=this;return t.$matrixDirty&&(t.$matrixDirty=!1,t.$matrix.$updateScaleAndRotation(t.$scaleX,t.$scaleY,t.$skewX,t.$skewY)),t.$matrix.tx=t.$x,t.$matrix.ty=t.$y,t.$matrix},r.prototype.$setMatrix=function(i,r){void 0===r&&(r=!0);var n=this,a=n.$matrix;a.a=i.a,a.b=i.b,a.c=i.c,a.d=i.d,n.$x=i.tx,n.$y=i.ty,n.$matrixDirty=!1,1==a.a&&0==a.b&&0==a.c&&1==a.d?n.$useTranslate=!1:n.$useTranslate=!0,r&&(n.$scaleX=a.$getScaleX(),n.$scaleY=a.$getScaleY(),n.$skewX=i.$getSkewX(),n.$skewY=i.$getSkewY(),n.$skewXdeg=e(180*n.$skewX/Math.PI),n.$skewYdeg=e(180*n.$skewY/Math.PI),n.$rotation=e(180*n.$skewY/Math.PI)),t.nativeRender&&n.$nativeDisplayObject.setMatrix(i.a,i.b,i.c,i.d,i.tx,i.ty)},r.prototype.$getConcatenatedMatrix=function(){var e=this,i=e.$concatenatedMatrix;i||(i=e.$concatenatedMatrix=new t.Matrix),e.$parent?e.$parent.$getConcatenatedMatrix().$preMultiplyInto(e.$getMatrix(),i):i.copyFrom(e.$getMatrix());var r=e.$anchorOffsetX,n=e.$anchorOffsetY,a=e.$scrollRect;return a?i.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-a.x-r,-a.y-n),i):(0!=r||0!=n)&&i.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-r,-n),i),e.$concatenatedMatrix},r.prototype.$getInvertedConcatenatedMatrix=function(){var e=this;return e.$invertedConcatenatedMatrix||(e.$invertedConcatenatedMatrix=new t.Matrix),e.$getConcatenatedMatrix().$invertInto(e.$invertedConcatenatedMatrix),e.$invertedConcatenatedMatrix},Object.defineProperty(r.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),r.prototype.$getX=function(){return this.$x},r.prototype.$setX=function(e){var i=this;if(i.$x==e)return!1;if(i.$x=e,t.nativeRender)i.$nativeDisplayObject.setX(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}return!0},Object.defineProperty(r.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),r.prototype.$getY=function(){return this.$y},r.prototype.$setY=function(e){var i=this;if(i.$y==e)return!1;if(i.$y=e,t.nativeRender)i.$nativeDisplayObject.setY(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}return!0},Object.defineProperty(r.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleX=function(){return this.$scaleX},r.prototype.$setScaleX=function(e){var i=this;if(i.$scaleX!=e)if(i.$scaleX=e,i.$matrixDirty=!0,i.$updateUseTransform(),t.nativeRender)i.$nativeDisplayObject.setScaleX(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleY=function(){return this.$scaleY},r.prototype.$setScaleY=function(e){var i=this;if(i.$scaleY!=e)if(i.$scaleY=e,i.$matrixDirty=!0,i.$updateUseTransform(),t.nativeRender)i.$nativeDisplayObject.setScaleY(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),r.prototype.$getRotation=function(){return this.$rotation},r.prototype.$setRotation=function(i){i=e(i);var r=this;if(i!=r.$rotation){var n=i-r.$rotation,a=n/180*Math.PI;if(r.$skewX+=a,r.$skewY+=a,r.$rotation=i,r.$matrixDirty=!0,r.$updateUseTransform(),t.nativeRender)r.$nativeDisplayObject.setRotation(i);else{var o=r.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var s=r.$maskedObject;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp())}}},Object.defineProperty(r.prototype,"skewX",{get:function(){return this.$skewXdeg},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewX=function(i){var r=this;if(i!=r.$skewXdeg)if(r.$skewXdeg=i,i=e(i),i=i/180*Math.PI,r.$skewX=i,r.$matrixDirty=!0,r.$updateUseTransform(),t.nativeRender)r.$nativeDisplayObject.setSkewX(r.$skewXdeg);else{var n=r.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var a=r.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"skewY",{get:function(){return this.$skewYdeg},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewY=function(i){var r=this;if(i!=r.$skewYdeg)if(r.$skewYdeg=i,i=e(i),i=i/180*Math.PI,r.$skewY=i,r.$matrixDirty=!0,r.$updateUseTransform(),t.nativeRender)r.$nativeDisplayObject.setSkewY(r.$skewYdeg);else{var n=r.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var a=r.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){var t=this;return isNaN(t.$explicitWidth)?t.$getOriginalBounds().width:t.$explicitWidth},r.prototype.$setWidth=function(t){t=isNaN(t)?0/0:t,this.$explicitWidth!=t&&(this.$explicitWidth=t)},Object.defineProperty(r.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),r.prototype.$getHeight=function(){var t=this;return isNaN(t.$explicitHeight)?t.$getOriginalBounds().height:t.$explicitHeight},r.prototype.$setHeight=function(t){t=isNaN(t)?0/0:t,this.$explicitHeight!=t&&(this.$explicitHeight=t)},Object.defineProperty(r.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anchorOffsetX",{get:function(){return this.$anchorOffsetX},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),r.prototype.$setAnchorOffsetX=function(e){var i=this;if(i.$anchorOffsetX!=e)if(i.$anchorOffsetX=e,t.nativeRender)i.$nativeDisplayObject.setAnchorOffsetX(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"anchorOffsetY",{get:function(){return this.$anchorOffsetY},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),r.prototype.$setAnchorOffsetY=function(e){var i=this;if(i.$anchorOffsetY!=e)if(i.$anchorOffsetY=e,t.nativeRender)i.$nativeDisplayObject.setAnchorOffsetY(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),r.prototype.$setVisible=function(e){var i=this;if(i.$visible!=e)if(i.$visible=e,t.nativeRender)i.$nativeDisplayObject.setVisible(e);else{i.$updateRenderMode();var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"cacheAsBitmap",{get:function(){return this.$cacheAsBitmap},set:function(e){var i=this;i.$cacheAsBitmap=e,t.nativeRender?i.$nativeDisplayObject.setCacheAsBitmap(e):i.$setHasDisplayList(e)},enumerable:!0,configurable:!0}),r.prototype.$setHasDisplayList=function(e){var i=this,r=!!i.$displayList;if(r!=e)if(e){var n=t.sys.DisplayList.create(i);n&&(i.$displayList=n,i.$cacheDirty=!0)}else i.$displayList=null},r.prototype.$cacheDirtyUp=function(){var t=this.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},Object.defineProperty(r.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),r.prototype.$setAlpha=function(e){var i=this;if(i.$alpha!=e)if(i.$alpha=e,t.nativeRender)i.$nativeDisplayObject.setAlpha(e);else{i.$updateRenderMode();var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),r.prototype.$getTouchEnabled=function(){return this.$touchEnabled},r.prototype.$setTouchEnabled=function(t){this.$touchEnabled=!!t},Object.defineProperty(r.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),r.prototype.$setScrollRect=function(e){var i=this;if(!e&&!i.$scrollRect)return void i.$updateRenderMode();if(e?(i.$scrollRect||(i.$scrollRect=new t.Rectangle),i.$scrollRect.copyFrom(e),t.nativeRender&&i.$nativeDisplayObject.setScrollRect(e.x,e.y,e.width,e.height)):(i.$scrollRect=null,t.nativeRender&&i.$nativeDisplayObject.setScrollRect(0,0,0,0)),!t.nativeRender){i.$updateRenderMode();var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"blendMode",{get:function(){return t.sys.numberToBlendMode(this.$blendMode)},set:function(e){var i=this,r=t.sys.blendModeToNumber(e);if(i.$blendMode!=r)if(i.$blendMode=r,t.nativeRender)i.$nativeDisplayObject.setBlendMode(r);else{i.$updateRenderMode();var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var a=i.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){var t=this;return t.$mask?t.$mask:t.$maskRect},set:function(e){var i=this;if(e!==i){if(e)if(e instanceof r){if(e==i.$mask)return;e.$maskedObject&&(e.$maskedObject.mask=null),e.$maskedObject=i,i.$mask=e,t.nativeRender||e.$updateRenderMode(),i.$maskRect&&(t.nativeRender&&i.$nativeDisplayObject.setMaskRect(0,0,0,0),i.$maskRect=null),t.nativeRender&&i.$nativeDisplayObject.setMask(e.$nativeDisplayObject.id)}else i.$maskRect||(i.$maskRect=new t.Rectangle),i.$maskRect.copyFrom(e),t.nativeRender&&i.$nativeDisplayObject.setMaskRect(e.x,e.y,e.width,e.height),i.$mask&&(i.$mask.$maskedObject=null,t.nativeRender||i.$mask.$updateRenderMode()),i.mask&&(t.nativeRender&&i.$nativeDisplayObject.setMask(-1),i.$mask=null);else i.$mask&&(i.$mask.$maskedObject=null,t.nativeRender||i.$mask.$updateRenderMode()),i.mask&&(t.nativeRender&&i.$nativeDisplayObject.setMask(-1),i.$mask=null),i.$maskRect&&(t.nativeRender&&i.$nativeDisplayObject.setMaskRect(0,0,0,0),i.$maskRect=null);t.nativeRender||i.$updateRenderMode()}},enumerable:!0,configurable:!0}),r.prototype.$setMaskRect=function(e){var i=this;(e||i.$maskRect)&&(e?(i.$maskRect||(i.$maskRect=new t.Rectangle),i.$maskRect.copyFrom(e)):i.$maskRect=null)},Object.defineProperty(r.prototype,"filters",{get:function(){return this.$filters},set:function(e){var i=this,r=i.$filters;if(r||e){if(e&&e.length?(e=e.concat(),i.$filters=e,t.nativeRender&&i.$nativeDisplayObject.setFilters(e)):(i.$filters=e,t.nativeRender&&i.$nativeDisplayObject.setFilters(null)),!t.nativeRender){i.$updateRenderMode();var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var a=i.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}}else if(i.$filters=e,t.nativeRender)i.$nativeDisplayObject.setFilters(null);else{i.$updateRenderMode();var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var a=i.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),r.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},r.prototype.getBounds=function(t,e){void 0===e&&(e=!0);var i=this;return t=i.$getTransformedBounds(i,t),e&&(0!=i.$anchorOffsetX&&(t.x-=i.$anchorOffsetX),0!=i.$anchorOffsetY&&(t.y-=i.$anchorOffsetY)),t},r.prototype.$getTransformedBounds=function(e,i){var r=this,n=r.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(n),e==r)return i;var a;if(e){a=t.$TempMatrix;var o=e.$getInvertedConcatenatedMatrix();o.$preMultiplyInto(r.$getConcatenatedMatrix(),a)}else a=r.$getConcatenatedMatrix();return a.$transformBounds(i),i},r.prototype.globalToLocal=function(e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=0),t.nativeRender){egret_native.updateNativeRender();var n=egret_native.nrGlobalToLocal(this.$nativeDisplayObject.id,e,i),a=n.split(","),o=parseFloat(a[0]),s=parseFloat(a[1]);return r?r.setTo(o,s):r=new t.Point(o,s),r}var h=this.$getInvertedConcatenatedMatrix();return h.transformPoint(e,i,r)},r.prototype.localToGlobal=function(e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=0),t.nativeRender){egret_native.updateNativeRender();var n=egret_native.nrLocalToGlobal(this.$nativeDisplayObject.id,e,i),a=n.split(","),o=parseFloat(a[0]),s=parseFloat(a[1]);return r?r.setTo(o,s):r=new t.Point(o,s),r}var h=this.$getConcatenatedMatrix();return h.transformPoint(e,i,r)},r.prototype.$getOriginalBounds=function(){var t=this,e=t.$getContentBounds();t.$measureChildBounds(e);var i=t.$measureFiltersOffset(!1);return i&&(e.x+=i.minX,e.y+=i.minY,e.width+=-i.minX+i.maxX,e.height+=-i.minY+i.maxY),e},r.prototype.$measureChildBounds=function(t){},r.prototype.$getContentBounds=function(){var e=t.$TempRectangle;return e.setEmpty(),this.$measureContentBounds(e),e},r.prototype.$measureContentBounds=function(t){},r.prototype.$getRenderNode=function(){var t=this,e=t.$renderNode;return e?(t.$renderDirty&&(e.cleanBeforeRender(),t.$updateRenderNode(),t.$renderDirty=!1,e=t.$renderNode),e):null},r.prototype.$updateRenderMode=function(){var t=this;!t.$visible||t.$alpha<=0||t.$maskedObject?t.$renderMode=1:t.filters&&t.filters.length>0?t.$renderMode=2:0!==t.$blendMode||t.$mask&&t.$mask.$stage?t.$renderMode=3:t.$scrollRect||t.$maskRect?t.$renderMode=4:t.$renderMode=null},r.prototype.$measureFiltersOffset=function(e){for(var i=this,r=0,n=0,a=0,o=0;i;){var s=i.$filters;if(s&&s.length)for(var h=s.length,c=0;h>c;c++){var l=s[c];if("blur"==l.type){var u=l.blurX,p=l.blurY;r-=u,n-=p,a+=u,o+=p}else if("glow"==l.type){var u=l.blurX,p=l.blurY;r-=u,n-=p,a+=u,o+=p;var d=l.distance||0,f=l.angle||0,g=0,$=0;0!=d&&(g=d*t.NumberUtils.cos(f),g=g>0?Math.ceil(g):Math.floor(g),$=d*t.NumberUtils.sin(f),$=$>0?Math.ceil($):Math.floor($),r+=g,a+=g,n+=$,o+=$)}else if("custom"==l.type){var y=l.padding;r-=y,n-=y,a+=y,o+=y}}i=e?i.$parent:null}return r=Math.min(r,0),n=Math.min(n,0),a=Math.max(a,0),o=Math.max(o,0),{minX:r,minY:n,maxX:a,maxY:o}},r.prototype.$getConcatenatedMatrixAt=function(e,i){var r=e.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var n=this,a=e.$nestLevel;for(i.identity();n.$nestLevel>a;){var o=n.$scrollRect;o&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-o.x,-o.y)),i.concat(n.$getMatrix()),n=n.$parent}}else r.$preMultiplyInto(i,i)},r.prototype.$updateRenderNode=function(){},r.prototype.$hitTest=function(e,i){var r=this;if(!t.nativeRender&&!r.$renderNode||!r.$visible||0==r.$scaleX||0==r.$scaleY)return null;var n=r.$getInvertedConcatenatedMatrix();if(0==n.a&&0==n.b&&0==n.c&&0==n.d)return null;var a=r.$getContentBounds(),o=n.a*e+n.c*i+n.tx,s=n.b*e+n.d*i+n.ty;if(a.contains(o,s)){if(!r.$children){var h=r.$scrollRect?r.$scrollRect:r.$maskRect;if(h&&!h.contains(o,s))return null;if(r.$mask&&!r.$mask.$hitTest(e,i))return null}return r}return null},r.prototype.hitTestPoint=function(e,i,r){var n=this;if(r){var a=n.$getInvertedConcatenatedMatrix(),o=a.a*e+a.c*i+a.tx,s=a.b*e+a.d*i+a.ty,h=void 0;if(t.nativeRender){var c=t.sys.customHitTestBuffer;c.resize(3,3),egret_native.forHitTest=!0,egret_native.activateBuffer(c),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject2(n.$nativeDisplayObject.id,1-o,1-s,!0);try{h=new Uint8Array(4),egret_native.nrGetPixels(1,1,1,1,h)}catch(l){throw new Error(t.sys.tr(1039))}return egret_native.activateBuffer(null),egret_native.forHitTest=!1,0===h[3]?!1:!0}var u=n.$displayList;if(u){var c=u.renderBuffer;try{h=c.getPixels(o-u.offsetX,s-u.offsetY)}catch(l){throw new Error(t.sys.tr(1039))}}else{var c=t.sys.customHitTestBuffer;c.resize(3,3);var p=t.Matrix.create();p.identity(),p.translate(1-o,1-s),t.sys.systemRenderer.render(this,c,p,!0),t.Matrix.release(p);try{h=c.getPixels(1,1)}catch(l){throw new Error(t.sys.tr(1039))}}return 0===h[3]?!1:!0}if(0==n.$scaleX||0==n.$scaleY)return!1;var a=n.$getInvertedConcatenatedMatrix(),d=n.getBounds(null,!1),o=a.a*e+a.c*i+a.tx,s=a.b*e+a.d*i+a.ty;if(d.contains(o,s)){var f=n.$scrollRect?n.$scrollRect:n.$maskRect;return f&&!f.contains(o,s)?!1:!0}return!1},r.prototype.$addListener=function(e,n,a,o,s,h){i.prototype.$addListener.call(this,e,n,a,o,s,h);var c=e==t.Event.ENTER_FRAME;if(c||e==t.Event.RENDER){var l=c?r.$enterFrameCallBackList:r.$renderCallBackList;-1==l.indexOf(this)&&l.push(this)}},r.prototype.removeEventListener=function(e,n,a,o){i.prototype.removeEventListener.call(this,e,n,a,o);var s=e==t.Event.ENTER_FRAME;if((s||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=s?r.$enterFrameCallBackList:r.$renderCallBackList,c=h.indexOf(this);-1!==c&&h.splice(c,1)}},r.prototype.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},r.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},r.prototype.$dispatchPropagationEvent=function(t,e,i){for(var r=e.length,n=i-1,a=0;r>a;a++){var o=e[a];if(t.$currentTarget=o,n>a?t.$eventPhase=1:a==i||a==n?t.$eventPhase=2:t.$eventPhase=3,o.$notifyListener(t,i>a),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},r.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},r.defaultTouchEnabled=!1,r.$enterFrameCallBackList=[],r.$renderCallBackList=[],r}(t.EventDispatcher);t.DisplayObject=i,__reflect(i.prototype,"egret.DisplayObject")}(egret||(egret={}));var egret;!function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){var t=e.call(this)||this;return t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$rotated=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),i.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),i.prototype.$getTextureHeight=function(){return this.$textureHeight},i.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*t.$TextureScaleFactor},i.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*t.$TextureScaleFactor},Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this._setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){this.$bitmapData=e;var i=t.$TextureScaleFactor,r=e.width*i,n=e.height*i;this.$initData(0,0,r,n,0,0,r,n,e.width,e.height)},i.prototype.$initData=function(e,i,r,n,a,o,s,h,c,l,u){void 0===u&&(u=!1);var p=t.$TextureScaleFactor;this.$bitmapX=e/p,this.$bitmapY=i/p,this.$bitmapWidth=r/p,this.$bitmapHeight=n/p,this.$offsetX=a,this.$offsetY=o,this.$textureWidth=s,this.$textureHeight=h,this.$sourceWidth=c,this.$sourceHeight=l,this.$rotated=u,t.BitmapData.$invalidate(this.$bitmapData)},i.prototype.getPixel32=function(t,e){throw new Error},i.prototype.getPixels=function(t,e,i,r){throw void 0===i&&(i=1),void 0===r&&(r=1),new Error},i.prototype.toDataURL=function(t,e,i){throw new Error},i.prototype.saveToFile=function(t,e,i){throw new Error},i.prototype.dispose=function(){this.$bitmapData&&(this.disposeBitmapData&&this.$bitmapData.$dispose(),this.$bitmapData=null),t.nativeRender&&egret_native.NativeDisplayObject.disposeTexture(this)},i}(t.HashObject);t.Texture=e,__reflect(e.prototype,"egret.Texture")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n){var a=t.call(this)||this;return a.$eventPhase=2,a.$currentTarget=null,a.$target=null,a.$isDefaultPrevented=!1,a.$isPropagationStopped=!1,a.$isPropagationImmediateStopped=!1,a.$type=e,a.$bubbles=!!i,a.$cancelable=!!r,a.data=n,a}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),e.prototype.$setTarget=function(t){return this.$target=t,!0},e.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},e.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},e.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},e.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},e.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,r,n){void 0===r&&(r=!1);var a=e.create(e,i,r),o=e._getPropertyData(e);void 0!=n&&(o.data=n);var s=t.dispatchEvent(a);return e.release(a),s},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,r){var n,a=t.hasOwnProperty("eventPool");if(a&&(n=t.eventPool),n||(n=t.eventPool=[]),n.length){var o=n.pop();return o.$type=e,o.$bubbles=!!i,o.$cancelable=!!r,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$eventPhase=2,o}return new t(e,i,r)},e.release=function(t){t.clean();var e=Object.getPrototypeOf(t).constructor;e.eventPool.push(t)},e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",e}(t.HashObject);t.Event=e,__reflect(e.prototype,"egret.Event")}(egret||(egret={}));var egret;!function(t){function e(){return""}function i(t){throw new Error("#"+t)}function r(){}function n(){}t.getString=e,t.$error=i,t.$warn=r,t.$markCannotUse=n}(egret||(egret={}));var egret;!function(t){var e=[],i=Math.PI/180,r=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=r.call(this)||this;return i.x=t,i.y=e,i}return __extends(n,r),n.release=function(t){t&&e.push(t)},n.create=function(t,i){var r=e.pop();return r||(r=new n),r.setTo(t,i)},Object.defineProperty(n.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.interpolate=function(t,e,i){var r=1-i;return new n(t.x*i+e.x*r,t.y*i+e.y*r)},n.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.polar=function(e,r){return new n(e*t.NumberUtils.cos(r/i),e*t.NumberUtils.sin(r/i))},n.prototype.subtract=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},n}(t.HashObject);t.Point=r,__reflect(r.prototype,"egret.Point"),t.$TempPoint=new r}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,r,n){void 0===n&&(n=!0);var a=this,o=e.$parent;if(o==a)return a.doSetChildIndex(e,r),e;o&&o.removeChild(e),a.$children.splice(r,0,e),e.$setParent(a),t.nativeRender&&a.$nativeDisplayObject.addChildAt(e.$nativeDisplayObject.id,r);var s=a.$stage;if(s&&e.$onAddToStage(s,a.$nestLevel+1),n&&e.dispatchEventWith(t.Event.ADDED,!0),s)for(var h=i.$EVENT_ADD_TO_STAGE_LIST;h.length;){var c=h.shift();c.$stage&&n&&c.dispatchEventWith(t.Event.ADDED_TO_STAGE)}if(!t.nativeRender&&(e.$maskedObject&&e.$maskedObject.$updateRenderMode(),!a.$cacheDirty)){a.$cacheDirty=!0;var l=a.$parent;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp());var u=a.$maskedObject;u&&!u.$cacheDirty&&(u.$cacheDirty=!0,u.$cacheDirtyUp())}return this.$childAdded(e,r),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;
t=t.$parent}return!1},i.prototype.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},i.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},i.prototype.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},i.prototype.$doRemoveChild=function(e,r){void 0===r&&(r=!0),e=0|+e;var n=this,a=this.$children,o=a[e];if(this.$childRemoved(o,e),r&&o.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){o.$onRemoveFromStage();for(var s=i.$EVENT_REMOVE_FROM_STAGE_LIST;s.length>0;){var h=s.shift();r&&h.$hasAddToStage&&(h.$hasAddToStage=!1,h.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),h.$hasAddToStage=!1,h.$stage=null}}this.$displayList||this.$parentDisplayList;o.$setParent(null);var c=a.indexOf(o);if(-1!=c&&a.splice(c,1),t.nativeRender)n.$nativeDisplayObject.removeChild(o.$nativeDisplayObject.id);else if(o.$maskedObject&&o.$maskedObject.$updateRenderMode(),!n.$cacheDirty){n.$cacheDirty=!0;var l=n.$parent;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp());var u=n.$maskedObject;u&&!u.$cacheDirty&&(u.$cacheDirty=!0,u.$cacheDirtyUp())}return o},i.prototype.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(e,i){var r=this,n=this.$children.indexOf(e);if(n!=i)if(this.$childRemoved(e,n),this.$children.splice(n,1),this.$children.splice(i,0,e),this.$childAdded(e,i),t.nativeRender)this.$nativeDisplayObject.removeChild(e.$nativeDisplayObject.id),this.$nativeDisplayObject.addChildAt(e.$nativeDisplayObject.id,i);else if(!r.$cacheDirty){r.$cacheDirty=!0;var a=r.$parent;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp());var o=r.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}},i.prototype.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r||this.doSwapChildrenAt(i,r)},i.prototype.doSwapChildrenAt=function(e,i){var r=this;if(e>i){var n=i;i=e,e=n}else if(e==i)return;var a=this.$children,o=a[e],s=a[i];if(this.$childRemoved(o,e),this.$childRemoved(s,i),a[e]=s,a[i]=o,this.$childAdded(s,e),this.$childAdded(o,i),t.nativeRender)this.$nativeDisplayObject.swapChild(e,i);else if(!r.$cacheDirty){r.$cacheDirty=!0;var h=r.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=r.$maskedObject;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp())}},i.prototype.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var a=0;n>a;a++){var o=this.$children[a];o.$onAddToStage(t,i),o.$maskedObject&&o.$maskedObject.$updateRenderMode()}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,a=0,o=0,s=0,h=!1,c=-1;r>c;c++){var l=void 0;-1==c?l=e:(i[c].getBounds(t.$TempRectangle),i[c].$getMatrix().$transformBounds(t.$TempRectangle),l=t.$TempRectangle),l.isEmpty()||(h?(n=Math.min(n,l.x),a=Math.max(a,l.x+l.width),o=Math.min(o,l.y),s=Math.max(s,l.y+l.height)):(h=!0,n=l.x,a=n+l.width,o=l.y,s=o+l.height))}e.setTo(n,o,a-n,s-o)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,a=r.b*t+r.d*i+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(n,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var s=this.$children,h=!1,c=null,l=s.length-1;l>=0;l--){var u=s[l];if(!u.$maskedObject&&(c=u.$hitTest(t,i))){if(h=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:h?this:e.prototype.$hitTest.call(this,t,i)},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,__reflect(e.prototype,"egret.DisplayObjectContainer")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this)||this;return r._bitmapX=0,r._bitmapY=0,r._textureMap=t.createMap(),r.$texture=i,r._bitmapX=i.$bitmapX-i.$offsetX,r._bitmapY=i.$bitmapY-i.$offsetY,r}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,r,n,a,o,s,h,c){void 0===o&&(o=0),void 0===s&&(s=0),void 0===h&&(h=o+n),void 0===c&&(c=s+a);var l=new t.Texture;return l.disposeBitmapData=!1,l.$bitmapData=this.$texture.$bitmapData,l.$initData(this._bitmapX+i,this._bitmapY+r,n,a,o,s,h,c,this.$texture.$sourceWidth,this.$texture.$sourceHeight),this._textureMap[e]=l,l},i.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,__reflect(e.prototype,"egret.SpriteSheet")}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(t){var e;!function(e){function i(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.$locale_strings[t.$language][e];if(!n)return"{"+e+"}";for(var a=i.length,o=0;a>o;o++)n=n.replace("{"+o+"}",i[o]);return n}e.tr=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(r){var n=e.call(this)||this;return n.$texture=null,n.$bitmapData=null,n.$bitmapX=0,n.$bitmapY=0,n.$bitmapWidth=0,n.$bitmapHeight=0,n.$offsetX=0,n.$offsetY=0,n.$textureWidth=0,n.$textureHeight=0,n.$sourceWidth=0,n.$sourceHeight=0,n.$smoothing=i.defaultSmoothing,n.$explicitBitmapWidth=0/0,n.$explicitBitmapHeight=0/0,n.$scale9Grid=null,n.$fillMode="scale",n._pixelHitTest=!1,n.$renderNode=new t.sys.NormalBitmapNode,n.$setTexture(r),r&&(n.$renderNode.rotated=r.$rotated),n}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r);var n=this.$texture;n&&n.$bitmapData&&t.BitmapData.$addDisplayObject(this,n.$bitmapData)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=this.$texture;i&&t.BitmapData.$removeDisplayObject(this,i.$bitmapData)},Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){var e=this;e.$setTexture(t),t&&e.$renderNode&&(e.$renderNode.rotated=t.$rotated)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(e){var i=this,r=i.$texture;if(e==r)return!1;if(i.$texture=e,!e){r&&t.BitmapData.$removeDisplayObject(i,r.$bitmapData),i.setImageData(null,0,0,0,0,0,0,0,0,0,0),i.$renderDirty=!0;var n=i.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var a=i.$maskedObject;return a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp()),t.nativeRender&&this.setBitmapDataToWasm(null),!0}if(i.$refreshImageData(),i.$stage){if(r&&r.$bitmapData){var o=r.$bitmapData.hashCode,s=e.$bitmapData?e.$bitmapData.hashCode:-1;if(o==s){i.$renderDirty=!0;var h=i.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=i.$maskedObject;return c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp()),!0}t.BitmapData.$removeDisplayObject(i,r.$bitmapData)}t.BitmapData.$addDisplayObject(i,e.$bitmapData)}i.$renderDirty=!0;var l=i.$parent;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp());var u=i.$maskedObject;return u&&!u.$cacheDirty&&(u.$cacheDirty=!0,u.$cacheDirtyUp()),!0},i.prototype.$setBitmapData=function(t){this.$setTexture(t)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapData(t)},i.prototype.$refreshImageData=function(){var e=this.$texture;e?(t.nativeRender&&this.setBitmapDataToWasm(e),this.setImageData(e.$bitmapData,e.$bitmapX,e.$bitmapY,e.$bitmapWidth,e.$bitmapHeight,e.$offsetX,e.$offsetY,e.$getTextureWidth(),e.$getTextureHeight(),e.$sourceWidth,e.$sourceHeight)):t.nativeRender&&this.setBitmapDataToWasm(null)},i.prototype.setImageData=function(t,e,i,r,n,a,o,s,h,c,l){this.$bitmapData=t,this.$bitmapX=e,this.$bitmapY=i,this.$bitmapWidth=r,this.$bitmapHeight=n,this.$offsetX=a,this.$offsetY=o,this.$textureWidth=s,this.$textureHeight=h,this.$sourceWidth=c,this.$sourceHeight=l},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),i.prototype.$setScale9Grid=function(e){var i=this;if(i.$scale9Grid=e,i.$renderDirty=!0,t.nativeRender)e?i.$nativeDisplayObject.setScale9Grid(e.x,e.y,e.width,e.height):i.$nativeDisplayObject.setScale9Grid(0,0,-1,-1);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(e){var i=this;if(e==i.$fillMode)return!1;if(i.$fillMode=e,t.nativeRender)i.$nativeDisplayObject.setBitmapFillMode(i.$fillMode);else{i.$renderDirty=!0;var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}return!0},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){var i=this;if(e!=this.$smoothing&&(this.$smoothing=e,this.$renderNode.smoothing=e,!t.nativeRender)){var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(e){var i=this;if(0>e||e==i.$explicitBitmapWidth)return!1;if(i.$explicitBitmapWidth=e,i.$renderDirty=!0,t.nativeRender)i.$nativeDisplayObject.setWidth(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}return!0},i.prototype.$setHeight=function(e){var i=this;if(0>e||e==i.$explicitBitmapHeight)return!1;if(i.$explicitBitmapHeight=e,i.$renderDirty=!0,t.nativeRender)i.$nativeDisplayObject.setHeight(e);else{var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}return!0},i.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},i.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},i.prototype.$measureContentBounds=function(t){if(this.$bitmapData){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{var e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},i.prototype.$updateRenderNode=function(){if(this.$texture){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,r=this.scale9Grid||this.$texture.scale9Grid;r?(this.$renderNode instanceof t.sys.NormalBitmapNode&&(this.$renderNode=new t.sys.BitmapNode),t.sys.BitmapNode.$updateTextureDataWithScale9Grid(this.$renderNode,this.$bitmapData,r,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,e,i,this.$sourceWidth,this.$sourceHeight,this.$smoothing)):(this.fillMode==t.BitmapFillMode.REPEAT&&this.$renderNode instanceof t.sys.NormalBitmapNode&&(this.$renderNode=new t.sys.BitmapNode),t.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,e,i,this.$sourceWidth,this.$sourceHeight,this.$fillMode,this.$smoothing))}},Object.defineProperty(i.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);if(r&&this._pixelHitTest){var n=this.hitTestPoint(t,i,!0);n||(r=null)}return r},i.defaultSmoothing=!0,i}(t.DisplayObject);t.Bitmap=e,__reflect(e.prototype,"egret.Bitmap")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(){function t(){this.type=0,this.drawData=[],this.renderCount=0}return t.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},t.prototype.$getRenderCount=function(){return this.renderCount},t}();t.RenderNode=e,__reflect(e.prototype,"egret.sys.RenderNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}return t.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.curveTo=function(t,e,i,r){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=i,this.$data[n++]=r,this.dataPosition=n},t.prototype.cubicCurveTo=function(t,e,i,r,n,a){this.$commands[this.commandPosition++]=4;var o=this.dataPosition;this.$data[o++]=t,this.$data[o++]=e,this.$data[o++]=i,this.$data[o++]=r,this.$data[o++]=n,this.$data[o++]=a,this.dataPosition=o},t.prototype.drawRect=function(t,e,i,r){var n=t+i,a=e+r;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,a),this.lineTo(t,a),this.lineTo(t,e)},t.prototype.drawRoundRect=function(t,e,i,r,n,a){var o=.5*n|0,s=a?.5*a|0:o;if(!o||!s)return void this.drawRect(t,e,i,r);var h=.5*i,c=.5*r;if(o>h&&(o=h),s>c&&(s=c),h===o&&c===s)return void(o===s?this.drawCircle(t+o,e+s,o):this.drawEllipse(t,e,2*o,2*s));var l=t+i,u=e+r,p=t+o,d=l-o,f=e+s,g=u-s;this.moveTo(l,g),this.curveTo(l,u,d,u),this.lineTo(p,u),this.curveTo(t,u,t,g),this.lineTo(t,f),this.curveTo(t,e,p,e),this.lineTo(d,e),this.curveTo(l,e,l,f),this.lineTo(l,g)},t.prototype.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},t.prototype.drawEllipse=function(t,e,i,r){var n=.5*i,a=.5*r;t+=n,e+=a,this.arcToBezier(t,e,n,a,0,2*Math.PI)},t.prototype.drawArc=function(t,e,i,r,n,a){a?n>=r&&(n-=2*Math.PI):r>=n&&(n+=2*Math.PI),this.arcToBezier(t,e,i,i,r,n,a)},t.prototype.arcToBezier=function(t,e,i,r,n,a,o){var s=.5*Math.PI,h=n,c=h;o?(c+=-s-h%s,a>c&&(c=a)):(c+=s-h%s,c>a&&(c=a));var l=t+Math.cos(h)*i,u=e+Math.sin(h)*r;(this.$lastX!=l||this.$lastY!=u)&&this.moveTo(l,u);for(var p=Math.cos(h),d=Math.sin(h),f=0;4>f;f++){var g=c-h,$=4*Math.tan(g/4)/3,y=l-d*$*i,v=u+p*$*r;p=Math.cos(c),d=Math.sin(c),l=t+p*i,u=e+d*r;var b=l+d*$*i,m=u-p*$*r;if(this.cubicCurveTo(y,v,b,m,l,u),c===a)break;h=c,o?(c=h-s,a>c&&(c=a)):(c=h+s,c>a&&(c=a))}},t}();t.Path2D=e,__reflect(e.prototype,"egret.sys.Path2D")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.fontMapping={}}(egret||(egret={}));var egret;!function(t){function e(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t}t.createMap=e}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,a,o,s,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===a&&(a=2),void 0===o&&(o=1),void 0===s&&(s=!1),void 0===h&&(h=!1);var c=t.call(this)||this,l=c;return l.type="glow",l.$color=e,l.$blue=255&e,l.$green=(65280&e)>>8,l.$red=e>>16,l.$alpha=i,l.$blurX=r,l.$blurY=n,l.$strength=a,l.$quality=o,l.$inner=s,l.$knockout=h,l.$uniforms.color={x:c.$red/255,y:c.$green/255,z:c.$blue/255,w:1},l.$uniforms.alpha=i,l.$uniforms.blurX=r,l.$uniforms.blurY=n,l.$uniforms.strength=a,l.$uniforms.inner=s?1:0,l.$uniforms.knockout=h?0:1,l.$uniforms.dist=0,l.$uniforms.angle=0,l.$uniforms.hideObject=0,l.onPropertyChange(),c}return __extends(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.$uniforms.color.x=this.$red/255,this.$uniforms.color.y=this.$green/255,this.$uniforms.color.z=this.$blue/255)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.$uniforms.alpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){var e=this;e.$blurX!=t&&(e.$blurX=t,e.$uniforms.blurX=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){var e=this;e.$blurY!=t&&(e.$blurY=t,e.$uniforms.blurY=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.$uniforms.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.$uniforms.inner=t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.$uniforms.knockout=t?0:1)},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},e.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},e}(t.Filter);t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret||(egret={})),function(t){var e;!function(t){function e(t){var e=n[t];return void 0===e?0:e}function i(t){var e=r[t];return void 0===e?"normal":e}for(var r=["normal","add","erase"],n={},a=r.length,o=0;a>o;o++){var s=r[o];n[s]=o}t.blendModeToNumber=e,t.numberToBlendMode=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"}}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.compileProgram=function(i,r,n){var a=e.compileFragmentShader(i,n),o=e.compileVertexShader(i,r),s=i.createProgram();return i.attachShader(s,o),i.attachShader(s,a),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||t.$warn(1020),s},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null},e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(i){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(t){if(t){var e=t.glContext;e&&e.deleteTexture(t)}},e}();t.WebGLUtils=e,__reflect(e.prototype,"egret.WebGLUtils")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),t.call(this,e,i,r)||this}return __extends(e,t),e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,__reflect(e.prototype,"egret.GeolocationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var n=e.call(this,t,i,r)||this;return n._status=0,n}return __extends(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),i.dispatchHTTPStatusEvent=function(e,r){var n=t.Event.create(i,i.HTTP_STATUS);n._status=r;var a=e.dispatchEvent(n);return t.Event.release(n),a},i.HTTP_STATUS="httpStatus",i}(t.Event);t.HTTPStatusEvent=e,__reflect(e.prototype,"egret.HTTPStatusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchIOErrorEvent=function(e){var r=t.Event.create(i,i.IO_ERROR),n=e.dispatchEvent(r);return t.Event.release(r),n},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,__reflect(e.prototype,"egret.IOErrorEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.MotionEvent=e,__reflect(e.prototype,"egret.MotionEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.OrientationEvent=e,__reflect(e.prototype,"egret.OrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n,a){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===a&&(a=0);var o=e.call(this,t,i,r)||this;return o.bytesLoaded=0,o.bytesTotal=0,o.bytesLoaded=n,o.bytesTotal=a,o}return __extends(i,e),i.dispatchProgressEvent=function(e,r,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var o=t.Event.create(i,r);o.bytesLoaded=n,o.bytesTotal=a;var s=e.dispatchEvent(o);return t.Event.release(o),s},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,__reflect(e.prototype,"egret.ProgressEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchStageOrientationEvent=function(e,r){var n=t.Event.create(i,r),a=e.dispatchEvent(n);return t.Event.release(n),a},i.ORIENTATION_CHANGE="orientationChange",i}(t.Event);t.StageOrientationEvent=e,__reflect(e.prototype,"egret.StageOrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n="");var a=e.call(this,t,i,r)||this;return a.text=n,a}return __extends(i,e),i.dispatchTextEvent=function(e,r,n){var a=t.Event.create(i,r);a.text=n;var o=e.dispatchEvent(a);return t.Event.release(a),o},i.LINK="link",i}(t.Event);t.TextEvent=e,__reflect(e.prototype,"egret.TextEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return e.call(this,t,i,r)||this}return __extends(i,e),i.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,r,n,a){var o=t.Event.create(i,r,n,a),s=e.dispatchEvent(o);return t.Event.release(o),s},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,__reflect(e.prototype,"egret.TimerEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.format="image",i.$deleteSource=!0,i.source=t,i.width=t.width,i.height=t.height,i}return __extends(i,e),i.create=function(e,r,n){var a="";a="arraybuffer"===e?t.Base64Util.encode(r):r;var o="image/png";"/"===a.charAt(0)?o="image/jpeg":"R"===a.charAt(0)?o="image/gif":"i"===a.charAt(0)&&(o="image/png");var s=new Image;s.src="data:"+o+";base64,"+a,s.crossOrigin="*";var h=new i(s);return s.onload=function(){s.onload=void 0,h.source=s,h.height=s.height,h.width=s.width,n&&n(h)},h},i.prototype.$dispose=function(){"webgl"==t.Capabilities.renderMode&&this.webGLTexture&&(t.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source=null,i.$dispose(this)},i.$addDisplayObject=function(t,e){if(e){var r=e.hashCode;if(r){if(!i._displayList[r])return void(i._displayList[r]=[t]);var n=i._displayList[r];n.indexOf(t)<0&&n.push(t)}}},i.$removeDisplayObject=function(t,e){if(e){var r=e.hashCode;if(r&&i._displayList[r]){var n=i._displayList[r],a=n.indexOf(t);a>=0&&n.splice(a,1)}}},i.$invalidate=function(e){if(e){var r=e.hashCode;if(r&&i._displayList[r])for(var n=i._displayList[r],a=0;a<n.length;a++){n[a]instanceof t.Bitmap&&n[a].$refreshImageData();var o=n[a];o.$renderDirty=!0;var s=o.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var h=o.$maskedObject;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp())}}},i.$dispose=function(e){if(e){var r=e.hashCode;if(r&&i._displayList[r]){for(var n=i._displayList[r],a=0,o=n;a<o.length;a++){var s=o[a];s instanceof t.Bitmap&&(s.$bitmapData=null),s.$renderDirty=!0;var h=s.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=s.$maskedObject;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp())}t.nativeRender&&egret_native.NativeDisplayObject.disposeBitmapData(e),delete i._displayList[r]}}},i._displayList=t.createMap(),i}(t.HashObject);t.BitmapData=e,__reflect(e.prototype,"egret.BitmapData")}(egret||(egret={}));var egret;!function(t){var e=new t.Point,i=function(i){function r(t,e,r,n,a,o){var s=i.call(this,t,e,r)||this;return s.targetChanged=!0,s.touchDown=!1,s.$initTo(n,a,o),s}return __extends(r,i),r.prototype.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(r.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),r.prototype.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},r.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},r.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},r.dispatchTouchEvent=function(e,i,n,a,o,s,h,c){if(void 0===c&&(c=!1),!n&&!e.hasEventListener(i))return!0;var l=t.Event.create(r,i,n,a);l.$initTo(o,s,h),l.touchDown=c;var u=e.dispatchEvent(l);return t.Event.release(l),u},r.TOUCH_MOVE="touchMove",r.TOUCH_BEGIN="touchBegin",r.TOUCH_END="touchEnd",r.TOUCH_CANCEL="touchCancel",r.TOUCH_TAP="touchTap",r.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",r}(t.Event);t.TouchEvent=i,__reflect(i.prototype,"egret.TouchEvent")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(t,n,a){void 0===t&&(t=4),void 0===n&&(n=4),void 0===a&&(a=1);var o=e.call(this)||this,s=o;return s.type="blur",s.$blurX=t,s.$blurY=n,s.$quality=a,s.blurXFilter=new i(t),s.blurYFilter=new r(n),s.onPropertyChange(),o}return __extends(n,e),Object.defineProperty(n.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){var e=this;e.$blurX!=t&&(e.$blurX=t,e.blurXFilter.blurX=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){var e=this;e.$blurY!=t&&(e.$blurY=t,e.blurYFilter.blurY=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),n.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},n.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},n.prototype.onPropertyChange=function(){var e=this;e.updatePadding(),t.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(e.blurXFilter.$id,0,0,e.paddingLeft,e.paddingRight),egret_native.NativeDisplayObject.setFilterPadding(e.blurYFilter.$id,e.paddingTop,e.paddingBottom,0,0),egret_native.NativeDisplayObject.setDataToFilter(e))},n}(t.Filter);t.BlurFilter=e,__reflect(e.prototype,"egret.BlurFilter");var i=function(e){function i(i){void 0===i&&(i=4);var r=e.call(this)||this;return t.nativeRender?r.type="blur":r.type="blurX",r.$uniforms.blur={x:i,y:0},r.onPropertyChange(),r}return __extends(i,e),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.$uniforms.blur.x},set:function(t){this.$uniforms.blur.x=t},enumerable:!0,configurable:!0}),i}(t.Filter);__reflect(i.prototype,"BlurXFilter",["egret.IBlurXFilter"]);var r=function(e){function i(i){void 0===i&&(i=4);var r=e.call(this)||this;return t.nativeRender?r.type="blur":r.type="blurY",r.$uniforms.blur={x:0,y:i},r.onPropertyChange(),r}return __extends(i,e),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.$uniforms.blur.y},set:function(t){this.$uniforms.blur.y=t},enumerable:!0,configurable:!0}),i}(t.Filter);__reflect(r.prototype,"BlurYFilter",["egret.IBlurYFilter"])}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.$matrix=[],i.matrix2=[],i.type="colorTransform",i.$uniforms.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.$uniforms.colorAdd={x:0,y:0,z:0,w:0},i.setMatrix(e),i.onPropertyChange(),i}return __extends(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t)},enumerable:!0,configurable:!0}),e.prototype.setMatrix=function(t){if(t)for(var e=0;20>e;e++)this.$matrix[e]=t[e];else for(var e=0;20>e;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0;for(var i=this.$matrix,r=this.$uniforms.matrix,n=this.$uniforms.colorAdd,e=0,a=0;e<i.length;e++)4===e?n.x=i[e]/255:9===e?n.y=i[e]/255:14===e?n.z=i[e]/255:19===e?n.w=i[e]/255:(r[a]=i[e],a++);this.onPropertyChange()},e.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},e}(t.Filter);t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret||(egret={}));var egret;!function(t){var e,i={},r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),a=0,o=function(){for(var t=0;36>t;t++)8===t||13===t||18===t||23===t?n[t]="-":14===t?n[t]="4":(2>=a&&(a=33554432+16777216*Math.random()|0),e=15&a,a>>=4,n[t]=r[19===t?3&e|8:e]);
return n.join("")},s=function(e){function r(t,r,n){void 0===n&&(n={});var a=e.call(this)||this;a.$padding=0,a.$vertexSrc=t,a.$fragmentSrc=r;var s=t+r;return i[s]||(i[s]=o()),a.$shaderKey=i[s],a.$uniforms=n,a.type="custom",a}return __extends(r,e),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding},set:function(t){var e=this;e.$padding!=t&&(e.$padding=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.$uniforms},enumerable:!0,configurable:!0}),r.prototype.onPropertyChange=function(){if(t.nativeRender){var e=this;egret_native.NativeDisplayObject.setFilterPadding(e.$id,e.$padding,e.$padding,e.$padding,e.$padding),egret_native.NativeDisplayObject.setDataToFilter(e)}},r}(t.Filter);t.CustomFilter=s,__reflect(s.prototype,"egret.CustomFilter")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n,a,o,s,h,c,l,u){void 0===t&&(t=4),void 0===i&&(i=45),void 0===r&&(r=0),void 0===n&&(n=1),void 0===a&&(a=4),void 0===o&&(o=4),void 0===s&&(s=1),void 0===h&&(h=1),void 0===c&&(c=!1),void 0===l&&(l=!1),void 0===u&&(u=!1);var p=e.call(this,r,n,a,o,s,h,c,l)||this,d=p;return d.$distance=t,d.$angle=i,d.$hideObject=u,d.$uniforms.dist=t,d.$uniforms.angle=i/180*Math.PI,d.$uniforms.hideObject=u?1:0,d.onPropertyChange(),p}return __extends(i,e),Object.defineProperty(i.prototype,"distance",{get:function(){return this.$distance},set:function(t){var e=this;e.$distance!=t&&(e.$distance=t,e.$uniforms.dist=t,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.$angle},set:function(t){var e=this;e.$angle!=t&&(e.$angle=t,e.$uniforms.angle=t/180*Math.PI,e.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.$uniforms.hideObject=t?1:0)},enumerable:!0,configurable:!0}),i.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},i.prototype.updatePadding=function(){var e=this;e.paddingLeft=e.blurX,e.paddingRight=e.blurX,e.paddingTop=e.blurY,e.paddingBottom=e.blurY;var i=e.distance||0,r=e.angle||0,n=0,a=0;0!=i&&(n=i*t.NumberUtils.cos(r),n=n>0?Math.ceil(n):Math.floor(n),a=i*t.NumberUtils.sin(r),a=a>0?Math.ceil(a):Math.floor(a),e.paddingLeft+=n,e.paddingRight+=n,e.paddingTop+=a,e.paddingBottom+=a)},i}(t.GlowFilter);t.DropShadowFilter=e,__reflect(e.prototype,"egret.DropShadowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret||(egret={}));var egret;!function(t){function e(t){return t%=2*Math.PI,0>t&&(t+=2*Math.PI),t}function i(t,e){for(var i=[],n=0;e>n;n++){var a=r(t,n/e);a&&i.push(a)}return i}function r(e,i){var r=0,o=0,s=0,h=e.length;if(h/2==3){var c=e[r++],l=e[r++],u=e[r++],p=e[r++],d=e[r++],f=e[r++];o=n(c,u,d,i),s=n(l,p,f,i)}else if(h/2==4){var c=e[r++],l=e[r++],u=e[r++],p=e[r++],d=e[r++],f=e[r++],g=e[r++],$=e[r++];o=a(c,u,d,g,i),s=a(l,p,f,$,i)}return t.Point.create(o,s)}function n(t,e,i,r){var n=Math.pow(1-r,2)*t+2*r*(1-r)*e+Math.pow(r,2)*i;return n}function a(t,e,i,r,n){var a=Math.pow(1-n,3)*t+3*n*Math.pow(1-n,2)*e+3*(1-n)*Math.pow(n,2)*i+Math.pow(n,3)*r;return a}var o=function(r){function n(){var e=r.call(this)||this;return e.lastX=0,e.lastY=0,e.fillPath=null,e.strokePath=null,e.topLeftStrokeWidth=0,e.bottomRightStrokeWidth=0,e.minX=1/0,e.minY=1/0,e.maxX=-(1/0),e.maxY=-(1/0),e.includeLastPosition=!0,e.$renderNode=new t.sys.GraphicsNode,e}return __extends(n,r),n.prototype.$setTarget=function(e){this.$targetDisplay&&(this.$targetDisplay.$renderNode=null),e.$renderNode=this.$renderNode,this.$targetDisplay=e,this.$targetIsSprite=e instanceof t.Sprite},n.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},n.prototype.beginFill=function(e,i){void 0===i&&(i=1),e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginFill(e,i),this.fillPath=this.$renderNode.beginFill(e,i,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},n.prototype.beginGradientFill=function(e,i,r,n,a){void 0===a&&(a=null),t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginGradientFill(e,i,r,n,a),this.fillPath=this.$renderNode.beginGradientFill(e,i,r,n,a,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},n.prototype.endFill=function(){t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setEndFill(),this.fillPath=null},n.prototype.lineStyle=function(e,i,r,n,a,o,s,h,c){void 0===e&&(e=0/0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=!1),void 0===a&&(a="normal"),void 0===o&&(o=null),void 0===s&&(s=null),void 0===h&&(h=3),e=+e||0,i=+i||0,r=+r||0,h=+h||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineStyle(e,i,r,n,a,o,s,h),0>=e?(this.strokePath=null,this.setStrokeWidth(0)):(this.setStrokeWidth(e),this.strokePath=this.$renderNode.lineStyle(e,i,r,o,s,h,c),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},n.prototype.drawRect=function(e,i,r,n){e=+e||0,i=+i||0,r=+r||0,n=+n||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRect(e,i,r,n);var a=this.fillPath,o=this.strokePath;a&&a.drawRect(e,i,r,n),o&&o.drawRect(e,i,r,n),this.extendBoundsByPoint(e+r,i+n),this.updatePosition(e,i),this.dirty()},n.prototype.drawRoundRect=function(e,i,r,n,a,o){e=+e||0,i=+i||0,r=+r||0,n=+n||0,a=+a||0,o=+o||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRoundRect(e,i,r,n,a,o);var s=this.fillPath,h=this.strokePath;s&&s.drawRoundRect(e,i,r,n,a,o),h&&h.drawRoundRect(e,i,r,n,a,o);var c=.5*a|0,l=o?.5*o|0:c,u=e+r,p=i+n,d=p-l;this.extendBoundsByPoint(e,i),this.extendBoundsByPoint(u,p),this.updatePosition(u,d),this.dirty()},n.prototype.drawCircle=function(e,i,r){e=+e||0,i=+i||0,r=+r||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawCircle(e,i,r);var n=this.fillPath,a=this.strokePath;n&&n.drawCircle(e,i,r),a&&a.drawCircle(e,i,r),this.extendBoundsByPoint(e-r-1,i-r-1),this.extendBoundsByPoint(e+r+2,i+r+2),this.updatePosition(e+r,i),this.dirty()},n.prototype.drawEllipse=function(e,i,r,n){e=+e||0,i=+i||0,r=+r||0,n=+n||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawEllipse(e,i,r,n);var a=this.fillPath,o=this.strokePath;a&&a.drawEllipse(e,i,r,n),o&&o.drawEllipse(e,i,r,n),this.extendBoundsByPoint(e-1,i-1),this.extendBoundsByPoint(e+r+2,i+n+2),this.updatePosition(e+r,i+.5*n),this.dirty()},n.prototype.moveTo=function(e,i){e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setMoveTo(e,i);var r=this.fillPath,n=this.strokePath;r&&r.moveTo(e,i),n&&n.moveTo(e,i),this.includeLastPosition=!1,this.lastX=e,this.lastY=i,this.dirty()},n.prototype.lineTo=function(e,i){e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineTo(e,i);var r=this.fillPath,n=this.strokePath;r&&r.lineTo(e,i),n&&n.lineTo(e,i),this.updatePosition(e,i),this.dirty()},n.prototype.curveTo=function(e,r,n,a){e=+e||0,r=+r||0,n=+n||0,a=+a||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCurveTo(e,r,n,a);var o=this.fillPath,s=this.strokePath;o&&o.curveTo(e,r,n,a),s&&s.curveTo(e,r,n,a);for(var h=this.lastX||0,c=this.lastY||0,l=i([h,c,e,r,n,a],50),u=0;u<l.length;u++){var p=l[u];this.extendBoundsByPoint(p.x,p.y),t.Point.release(p)}this.extendBoundsByPoint(n,a),this.updatePosition(n,a),this.dirty()},n.prototype.cubicCurveTo=function(e,r,n,a,o,s){e=+e||0,r=+r||0,n=+n||0,a=+a||0,o=+o||0,s=+s||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCubicCurveTo(e,r,n,a,o,s);var h=this.fillPath,c=this.strokePath;h&&h.cubicCurveTo(e,r,n,a,o,s),c&&c.cubicCurveTo(e,r,n,a,o,s);for(var l=this.lastX||0,u=this.lastY||0,p=i([l,u,e,r,n,a,o,s],50),d=0;d<p.length;d++){var f=p[d];this.extendBoundsByPoint(f.x,f.y),t.Point.release(f)}this.extendBoundsByPoint(o,s),this.updatePosition(o,s),this.dirty()},n.prototype.drawArc=function(i,r,n,a,o,s){if(!(0>n||a===o)){i=+i||0,r=+r||0,n=+n||0,a=+a||0,o=+o||0,s=!!s,a=e(a),o=e(o),t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawArc(i,r,n,a,o,s);var h=this.fillPath,c=this.strokePath;h&&(h.$lastX=this.lastX,h.$lastY=this.lastY,h.drawArc(i,r,n,a,o,s)),c&&(c.$lastX=this.lastX,c.$lastY=this.lastY,c.drawArc(i,r,n,a,o,s)),s?this.arcBounds(i,r,n,o,a):this.arcBounds(i,r,n,a,o);var l=i+Math.cos(o)*n,u=r+Math.sin(o)*n;this.updatePosition(l,u),this.dirty()}},n.prototype.dirty=function(){var e=this;if(e.$renderNode.dirtyRender=!0,!t.nativeRender){var i=e.$targetDisplay;i.$cacheDirty=!0;var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},n.prototype.arcBounds=function(t,e,i,r,n){var a=Math.PI;if(Math.abs(r-n)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);r>n&&(n+=2*a);for(var o=Math.cos(r)*i,s=Math.cos(n)*i,h=Math.min(o,s),c=Math.max(o,s),l=Math.sin(r)*i,u=Math.sin(n)*i,p=Math.min(l,u),d=Math.max(l,u),f=r/(.5*a),g=n/(.5*a),$=Math.ceil(f);g>=$;$++)switch($%4){case 0:c=i;break;case 1:d=i;break;case 2:h=-i;break;case 3:p=-i}h=Math.floor(h),p=Math.floor(p),c=Math.ceil(c),d=Math.ceil(d),this.extendBoundsByPoint(h+t,p+e),this.extendBoundsByPoint(c+t,d+e)},n.prototype.clear=function(){t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setGraphicsClear(),this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.dirty()},n.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},n.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},n.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},n.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},n.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},n.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},n.prototype.$hitTest=function(e,i){var r=this.$targetDisplay,n=r.$getInvertedConcatenatedMatrix(),a=n.a*e+n.c*i+n.tx,o=n.b*e+n.d*i+n.ty,s=t.sys.canvasHitTestBuffer;s.resize(3,3);var h=this.$renderNode,c=t.Matrix.create();c.identity(),c.translate(1-a,1-o),t.sys.canvasRenderer.drawNodeToBuffer(h,s,c,!0),t.Matrix.release(c);try{var l=s.getPixels(1,1);if(0===l[3])return null}catch(u){throw new Error(t.sys.tr(1039))}return r},n.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean(),t.nativeRender&&egret_native.NativeDisplayObject.disposeGraphicData(this)},n}(t.HashObject);t.Graphics=o,__reflect(o.prototype,"egret.Graphics")}(egret||(egret={}));var egret;!function(t){var e=Math.PI,i=2*e,r=e/180,n=[],a=function(a){function o(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0);var s=a.call(this)||this;return s.a=t,s.b=e,s.c=i,s.d=r,s.tx=n,s.ty=o,s}return __extends(o,a),o.release=function(t){t&&n.push(t)},o.create=function(){var t=n.pop();return t||(t=new o),t},o.prototype.clone=function(){return new o(this.a,this.b,this.c,this.d,this.tx,this.ty)},o.prototype.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,a=this.tx*t.a+t.tx,o=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,n+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,a+=this.ty*t.c,o+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=a,this.ty=o},o.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},o.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},o.prototype.invert=function(){this.$invertInto(this)},o.prototype.$invertInto=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty;if(0==i&&0==r)return t.b=t.c=0,void(0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*a,t.ty=-n*o));var s=e*n-i*r;if(0==s)return void t.identity();s=1/s;var h=t.a=n*s;i=t.b=-i*s,r=t.c=-r*s,n=t.d=e*s,t.tx=-(h*a+r*o),t.ty=-(i*a+n*o)},o.prototype.rotate=function(e){if(e=+e,0!==e){e/=r;var i=t.NumberUtils.cos(e),n=t.NumberUtils.sin(e),a=this.a,o=this.b,s=this.c,h=this.d,c=this.tx,l=this.ty;this.a=a*i-o*n,this.b=a*n+o*i,this.c=s*i-h*n,this.d=s*n+h*i,this.tx=c*i-l*n,this.ty=c*n+l*i}},o.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},o.prototype.setTo=function(t,e,i,r,n,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a,this},o.prototype.transformPoint=function(e,i,r){var n=this.a*e+this.c*i+this.tx,a=this.b*e+this.d*i+this.ty;return r?(r.setTo(n,a),r):new t.Point(n,a)},o.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},o.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},o.prototype.prepend=function(t,e,i,r,n,a){var o=this.tx;if(1!=t||0!=e||0!=i||1!=r){var s=this.a,h=this.c;this.a=s*t+this.b*i,this.b=s*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=o*t+this.ty*i+n,this.ty=o*e+this.ty*r+a,this},o.prototype.append=function(t,e,i,r,n,a){var o=this.a,s=this.b,h=this.c,c=this.d;return(1!=t||0!=e||0!=i||1!=r)&&(this.a=t*o+e*h,this.b=t*s+e*c,this.c=i*o+r*h,this.d=i*s+r*c),this.tx=n*o+a*h+this.tx,this.ty=n*s+a*c+this.ty,this},o.prototype.deltaTransformPoint=function(e){var i=this,r=i.a*e.x+i.c*e.y,n=i.b*e.x+i.d*e.y;return new t.Point(r,n)},o.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},o.prototype.createBox=function(e,i,n,a,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0);var s=this;if(0!==n){n/=r;var h=t.NumberUtils.cos(n),c=t.NumberUtils.sin(n);s.a=h*e,s.b=c*i,s.c=-c*e,s.d=h*i}else s.a=e,s.b=0,s.c=0,s.d=i;s.tx=a,s.ty=o},o.prototype.createGradientBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,i,r+t/2,n+e/2)},o.prototype.$transformBounds=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty,s=t.x,h=t.y,c=s+t.width,l=h+t.height,u=e*s+r*h+a,p=i*s+n*h+o,d=e*c+r*h+a,f=i*c+n*h+o,g=e*c+r*l+a,$=i*c+n*l+o,y=e*s+r*l+a,v=i*s+n*l+o,b=0;u>d&&(b=u,u=d,d=b),g>y&&(b=g,g=y,y=b),t.x=Math.floor(g>u?u:g),t.width=Math.ceil((d>y?d:y)-t.x),p>f&&(b=p,p=f,f=b),$>v&&(b=$,$=v,v=b),t.y=Math.floor($>p?p:$),t.height=Math.ceil((f>v?f:v)-t.y)},o.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},o.prototype.$getScaleX=function(){var t=this;if(0==t.b)return t.a;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},o.prototype.$getScaleY=function(){var t=this;if(0==t.c)return t.d;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},o.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+e/2:Math.atan2(this.d,this.c)-e/2},o.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-e:Math.atan2(this.b,this.a)},o.prototype.$updateScaleAndRotation=function(e,n,a,o){if(!(0!=a&&a!=i||0!=o&&o!=i))return this.a=e,this.b=this.c=0,void(this.d=n);a/=r,o/=r;var s=t.NumberUtils.cos(a),h=t.NumberUtils.sin(a);a==o?(this.a=s*e,this.b=h*e):(this.a=t.NumberUtils.cos(o)*e,this.b=t.NumberUtils.sin(o)*e),this.c=-h*n,this.d=s*n},o.prototype.$preMultiplyInto=function(t,e){var i=t.a*this.a,r=0,n=0,a=t.d*this.d,o=t.tx*this.a+this.tx,s=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,a+=t.c*this.b,r+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,o+=t.ty*this.c,s+=t.tx*this.b),e.a=i,e.b=r,e.c=n,e.d=a,e.tx=o,e.ty=s},o}(t.HashObject);t.Matrix=a,__reflect(a.prototype,"egret.Matrix"),t.$TempMatrix=new a}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0);var a=i.call(this)||this;return a.x=t,a.y=e,a.width=r,a.height=n,a}return __extends(r,i),r.release=function(t){t&&e.push(t)},r.create=function(){var t=e.pop();return t||(t=new r),t},Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.setTo=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},r.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},r.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},r.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},r.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,r=t.x,n=t.y,a=Math.max(e,r),o=Math.min(e+this.width,r+t.width);if(o>=a){var s=Math.max(i,n),h=Math.min(i+this.height,n+t.height);if(h>=s)return this.setTo(a,s,o-a,h-s),this}return this.setEmpty(),this},r.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},r.prototype.isEmpty=function(){return this.width<=0||this.height<=0},r.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y?!0:!1},r.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,r=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<r&&t.y>=this.y&&t.y<n&&e>this.x&&r>=e&&i>this.y&&n>=i},r.prototype.equals=function(t){return this===t?!0:this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},r.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},r.prototype.offset=function(t,e){this.x+=t,this.y+=e},r.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},r.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},r.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return e.setTo(i,r,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-r),e},r.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},r.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},r}(t.HashObject);t.Rectangle=i,__reflect(i.prototype,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[1051]="runtime only support webgl render mode",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){t.JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"}}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]="!",e[1040]="hitTestPoint ! ",e[1041]="{0} , {1} ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[1050]="ExternalInterfacejs: {0}",e[1051]="runtime  webgl ",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){r.indexOf(t)<0&&r.push(t)}function i(t){var e=r.indexOf(t);return e>=0?(r.splice(e,1),!0):!1}var r=[];t.$pushSoundChannel=e,t.$popSoundChannel=i}(e=t.sys||(t.sys={}))}(egret||(egret={})),function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(t){t.GET="GET",t.POST="POST"}(e=t.HttpMethod||(t.HttpMethod={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(r){var n=i.call(this)||this;return n.isStage=!1,n.$renderNode=new e.BitmapNode,n.renderBuffer=null,n.offsetX=0,n.offsetY=0,n.offsetMatrix=new t.Matrix,n.$canvasScaleX=1,n.$canvasScaleY=1,n.root=r,n.isStage=r instanceof t.Stage,n}return __extends(r,i),r.create=function(i){var r=new t.sys.DisplayList(i);try{var n=new e.RenderBuffer;r.renderBuffer=n}catch(a){return null}return r.root=i,r},r.prototype.$getRenderNode=function(){return this.$renderNode},r.prototype.setClipRect=function(t,e){t*=r.$canvasScaleX,e*=r.$canvasScaleY,this.renderBuffer.resize(t,e)},r.prototype.drawToSurface=function(){var i=0;this.$canvasScaleX=this.offsetMatrix.a=r.$canvasScaleX,this.$canvasScaleY=this.offsetMatrix.d=r.$canvasScaleY,this.isStage||this.changeSurfaceSize();var n=this.renderBuffer;if(n.clear(),i=e.systemRenderer.render(this.root,n,this.offsetMatrix),!this.isStage){var a=n.surface,o=this.$renderNode;o.drawData.length=0;var s=a.width,h=a.height;this.bitmapData?(this.bitmapData.source=a,this.bitmapData.width=s,this.bitmapData.height=h):this.bitmapData=new t.BitmapData(a),o.image=this.bitmapData,o.imageWidth=s,o.imageHeight=h,o.drawImage(0,0,s,h,-this.offsetX,-this.offsetY,s/this.$canvasScaleX,h/this.$canvasScaleY)}return i},r.prototype.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,i=this.root.$getOriginalBounds(),r=this.$canvasScaleX,n=this.$canvasScaleY;this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(this.offsetMatrix.a,0,0,this.offsetMatrix.d,this.offsetX,this.offsetY);var a=this.renderBuffer,o=Math.max(257,i.width*r),s=Math.max(257,i.height*n);(this.offsetX!=t||this.offsetY!=e||a.surface.width!=o||a.surface.height!=s)&&a.resize(o,s)},r.$setCanvasScale=function(e,i){r.$canvasScaleX=e,r.$canvasScaleY=i,t.nativeRender&&egret_native.nrSetCanvasScaleFactor(r.$canvasScaleFactor,e,i)},r.$canvasScaleFactor=1,r.$canvasScaleX=1,r.$canvasScaleY=1,r}(t.HashObject);e.DisplayList=i,__reflect(i.prototype,"egret.sys.DisplayList")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var r=function(r){function h(e,i,n){var a=r.call(this)||this;return a.isPlaying=!1,a.entryClassName=n,a.stage=i,a.screenDisplayList=a.createDisplayList(i,e),a.showFPS=!1,a.showLog=!1,a.stageDisplayList=null,t.nativeRender&&(egret_native.rootWebGLBuffer=e),a}return __extends(h,r),h.prototype.createDisplayList=function(t,i){var r=new e.DisplayList(t);return r.renderBuffer=i,t.$displayList=r,r},h.prototype.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),t.ticker.$addPlayer(this))},h.prototype.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject&&this.stage.addChild(i)}},h.prototype.stop=function(){this.pause(),this.stage=null},h.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,t.ticker.$removePlayer(this))},h.prototype.$render=function(e,i){if(t.nativeRender)return egret_native.updateNativeRender(),void egret_native.nrRender();var r=this.stage,a=t.getTimer(),o=r.$displayList.drawToSurface(),s=t.getTimer();e&&this.showFPS&&n.update(o,s-a,i)},h.prototype.updateStageSize=function(e,i){var r=this.stage;
r.$stageWidth=e,r.$stageHeight=i,t.nativeRender?egret_native.nrResize(e,i):(this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i)),r.dispatchEventWith(t.Event.RESIZE)},h.prototype.displayFPS=function(r,h,c,l){if(h=!!h,h&&(t.log=function(){for(var t=arguments.length,r="",n=0;t>n;n++)r+=arguments[n]+" ";e.$logToFPS(r),console.log.apply(console,i(arguments))},t.warn=function(){for(var t=arguments.length,r="",n=0;t>n;n++)r+=arguments[n]+" ";e.$warnToFPS(r),console.warn.apply(console,i(arguments))},t.error=function(){for(var t=arguments.length,r="",n=0;t>n;n++)r+=arguments[n]+" ";e.$errorToFPS(r),console.error.apply(console,i(arguments))}),this.showFPS=!!r,this.showLog=h,!n){n=new FPS(this.stage,r,h,c,l);for(var u=a.length,p=0;u>p;p++)n.updateInfo(a[p]);a=null;for(var d=o.length,p=0;d>p;p++)n.updateWarn(o[p]);o=null;for(var f=s.length,p=0;f>p;p++)n.updateError(s[p]);s=null}},h}(t.HashObject);e.Player=r,__reflect(r.prototype,"egret.sys.Player");var n,a=[],o=[],s=[];e.$logToFPS=function(t){return n?void n.updateInfo(t):void a.push(t)},e.$warnToFPS=function(t){return n?void n.updateWarn(t):void o.push(t)},e.$errorToFPS=function(t){return n?void n.updateError(t):void s.push(t)};var h=function(){function e(e,i,r,n,a){this.showFPS=i,this.showLog=r,this.logFilter=n,this.styles=a,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=i,this.showLog=r,this.logFilter=n,this.styles=a,this.fpsDisplay=new t.FPSDisplay(e,i,r,n,a);var o;try{o=n?new RegExp(n):null}catch(s){t.log(s)}this.filter=function(t){return o?o.test(t):!n||0==t.indexOf(n)}}return e.prototype.update=function(e,i,r){var n=t.getTimer();if(this.totalTime+=n-this.lastTime,this.lastTime=n,this.totalTick++,this.drawCalls+=e,this.costRender+=i,this.costTicker+=r,this.totalTime>=1e3){var a=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),t.ticker.$frameRate),o=Math.round(this.drawCalls/this.totalTick),s=Math.round(this.costRender/this.totalTick),h=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:a,draw:o,costTicker:h,costRender:s}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.costRender=0,this.costTicker=0}},e.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},e.prototype.updateWarn=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateWarn?this.fpsDisplay.updateWarn(t):this.fpsDisplay.updateInfo("[Warning]"+t))},e.prototype.updateError=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateError?this.fpsDisplay.updateError(t):this.fpsDisplay.updateInfo("[Error]"+t))},e}();__reflect(h.prototype,"FPSImpl"),__global.FPS=h,t.warn=function(){console.warn.apply(console,i(arguments))},t.error=function(){console.error.apply(console,i(arguments))},t.assert=function(){console.assert.apply(console,i(arguments))},t.log=function(){console.log.apply(console,i(arguments))}}(e=t.sys||(t.sys={}))}(egret||(egret={})),function(t){if(t.nativeRender=__global.nativeRender,t.nativeRender){var e=egret_native.nrABIVersion,i=egret_native.nrMinEgretVersion,r=4;if(r>e){t.nativeRender=!1;var n=" 0.1.8 ";t.sys.$warnToFPS(n),t.warn(n)}else if(e>r){t.nativeRender=!1;var n=" "+i+" ";t.sys.$warnToFPS(n),t.warn(n)}}}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r._verticesDirty=!0,r._bounds=new t.Rectangle,r.$renderNode=new t.sys.MeshNode,r}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(12)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapDataToMesh(t)},i.prototype.$updateRenderNode=function(){var e=this.$bitmapData;if(e){var i=(t.$TextureScaleFactor,this.$renderNode);i.smoothing=this.$smoothing,i.image=e,i.imageWidth=this.$sourceWidth,i.imageHeight=this.$sourceHeight;var r=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,n=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,a=r/this.$textureWidth,o=n/this.$textureHeight,s=this.$bitmapWidth,h=this.$bitmapHeight;i.drawMesh(this.$bitmapX,this.$bitmapY,s,h,this.$offsetX*a,this.$offsetY*o,a*s,o*h)}},i.prototype.$updateVertices=function(){var e=this;if(e._verticesDirty=!0,e.$renderDirty=!0,t.nativeRender){var i=this.$renderNode;this.$nativeDisplayObject.setDataToMesh(i.vertices,i.indices,i.uvs)}else{var r=e.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},i.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var r=0,n=i.length;n>r;r+=2){var a=i[r],o=i[r+1];this._bounds.x>a&&(this._bounds.x=a),this._bounds.width<a&&(this._bounds.width=a),this._bounds.y>o&&(this._bounds.y=o),this._bounds.height<o&&(this._bounds.height=o)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,__reflect(e.prototype,"egret.Mesh")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.calculateStageSize=function(e,i,r,n,a){var o=i,s=r,h=n,c=a,l=i/h||0,u=r/c||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/u);break;case t.StageScaleMode.FIXED_WIDTH:c=Math.round(r/l);break;case t.StageScaleMode.NO_BORDER:l>u?s=Math.round(c*l):o=Math.round(h*u);break;case t.StageScaleMode.SHOW_ALL:l>u?o=Math.round(h*u):s=Math.round(c*l);break;case t.StageScaleMode.FIXED_NARROW:l>u?h=Math.round(i/u):c=Math.round(r/l);break;case t.StageScaleMode.FIXED_WIDE:l>u?c=Math.round(r/l):h=Math.round(i/u);break;default:h=i,c=r}return t.Capabilities.runtimeType!=t.RuntimeType.WXGAME&&(h%2!=0&&(h+=1),c%2!=0&&(c+=1),o%2!=0&&(o+=1),s%2!=0&&(s+=1)),{stageWidth:h,stageHeight:c,displayWidth:o,displayHeight:s}},i}(t.HashObject);e.DefaultScreenAdapter=i,__reflect(i.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,this.isPaused=!1,e.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}return i.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},i.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},i.prototype.$startTick=function(t,e){var i=this.getTickIndex(t,e);-1==i&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},i.prototype.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},i.prototype.getTickIndex=function(t,e){for(var i=this.callBackList,r=this.thisObjectList,n=i.length-1;n>=0;n--)if(i[n]==t&&r[n]==e)return n;return-1},i.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},i.prototype.$setFrameRate=function(t){return 0>=t?!1:this.$frameRate==t?!1:(this.$frameRate=t,t>60&&(t=60),this.frameDeltaTime=1e3/t,this.lastCount=this.frameInterval=Math.round(6e4/t),!0)},i.prototype.pause=function(){this.isPaused=!0},i.prototype.resume=function(){this.isPaused=!1},i.prototype.update=function(){for(var i=t.getTimer(),r=this.callBackList,n=this.thisObjectList,a=r.length,o=e.$requestRenderingFlag,s=t.getTimer(),h=t.lifecycle.contexts,c=0,l=h;c<l.length;c++){var u=l[c];u.onUpdate&&u.onUpdate()}if(this.isPaused)return void(this.lastTimeStamp=s);this.callLaterAsyncs();for(var p=0;a>p;p++)r[p].call(n[p],s)&&(o=!0);var d=t.getTimer(),f=s-this.lastTimeStamp;if(this.lastTimeStamp=s,f>=this.frameDeltaTime)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return void(o&&this.render(!1,this.costEnterFrame+d-i));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+d-i);var g=t.getTimer();this.broadcastEnterFrame();var $=t.getTimer();this.costEnterFrame=$-g},i.prototype.render=function(t,i){var r=this.playerList,n=r.length;if(0!=n){this.callLaters(),e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var a=0;n>a;a++)r[a].$render(t,i);e.$requestRenderingFlag=!1}},i.prototype.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.ENTER_FRAME)}},i.prototype.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.RENDER)}},i.prototype.callLaters=function(){var e,i,r;if(t.$callLaterFunctionList.length>0&&(e=t.$callLaterFunctionList,t.$callLaterFunctionList=[],i=t.$callLaterThisList,t.$callLaterThisList=[],r=t.$callLaterArgsList,t.$callLaterArgsList=[]),e)for(var n=e.length,a=0;n>a;a++){var o=e[a];null!=o&&o.apply(i[a],r[a])}},i.prototype.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,r=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var n=0;n<e.length;n++){var a=e[n];null!=a&&a.apply(i[n],r[n])}}},i}();e.SystemTicker=i,__reflect(i.prototype,"egret.sys.SystemTicker")}(e=t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e;!function(e){function i(t){var i=new n;e.contexts.push(i),t(i)}e.contexts=[];var r=!0,n=function(){function i(){}return i.prototype.pause=function(){r&&(r=!1,e.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)),e.onPause&&e.onPause())},i.prototype.resume=function(){r||(r=!0,e.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)),e.onResume&&e.onResume())},i}();e.LifecycleContext=n,__reflect(n.prototype,"egret.lifecycle.LifecycleContext"),e.addLifecycleListener=i}(e=t.lifecycle||(t.lifecycle={})),t.ticker=new t.sys.SystemTicker}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this)||this;return i.maxTouches=0,i.useTouchesCount=0,i.touchDownTarget={},i.lastTouchX=-1,i.lastTouchY=-1,i.stage=t,i}return __extends(i,e),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(e,i,r){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=n,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,r,!0)}},i.prototype.onTouchMove=function(e,i,r){if(null!=this.touchDownTarget[r]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,r,!0)}},i.prototype.onTouchEnd=function(e,i,r){if(null!=this.touchDownTarget[r]){var n=this.findTarget(e,i),a=this.touchDownTarget[r];delete this.touchDownTarget[r],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_END,!0,!0,e,i,r,!1),a==n?t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,r,!1):t.TouchEvent.dispatchTouchEvent(a,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,r,!1)}},i.prototype.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,__reflect(i.prototype,"egret.sys.TouchHandler")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=0/0,t.filter=null,t.rotated=!1,t.type=1,t}return __extends(i,e),i.prototype.drawImage=function(t,e,i,r,n,a,o,s){this.drawData.push(t,e,i,r,n,a,o,s),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=0/0,this.filter=null},i.$updateTextureData=function(e,r,n,a,o,s,h,c,l,u,p,d,f,g,$,y){if(r){var v=t.$TextureScaleFactor;if(e.smoothing=y,e.image=r,e.imageWidth=f,e.imageHeight=g,$==t.BitmapFillMode.SCALE){var b=p/l*v,m=d/u*v;e.drawImage(n,a,o,s,b*h,m*c,b*o,m*s)}else if($==t.BitmapFillMode.CLIP){var x=Math.min(l,p),T=Math.min(u,d),_=o*v,D=s*v;i.drawClipImage(e,v,n,a,_,D,h,c,x,T)}else for(var _=o*v,D=s*v,O=0;p>O;O+=l)for(var w=0;d>w;w+=u){var x=Math.min(p-O,l),T=Math.min(d-w,u);i.drawClipImage(e,v,n,a,_,D,h,c,x,T,O,w)}}},i.$updateTextureDataWithScale9Grid=function(e,i,r,n,a,o,s,h,c,l,u,p,d,f,g,$){e.smoothing=$,e.image=i,e.imageWidth=f,e.imageHeight=g;var y=o,v=s;p-=l-o*t.$TextureScaleFactor,d-=u-s*t.$TextureScaleFactor;var b=r.x-h,m=r.y-c,x=b/t.$TextureScaleFactor,T=m/t.$TextureScaleFactor,_=r.width/t.$TextureScaleFactor,D=r.height/t.$TextureScaleFactor;0==D&&(D=1,T>=v&&T--),0==_&&(_=1,x>=y&&x--);var O=n,w=O+x,E=w+_,R=y-x-_,S=a,F=S+T,P=F+D,C=v-T-D,M=R*t.$TextureScaleFactor,j=C*t.$TextureScaleFactor;if((x+R)*t.$TextureScaleFactor>p||(T+C)*t.$TextureScaleFactor>d)return void e.drawImage(n,a,o,s,h,c,p,d);var A=h,B=A+b,N=A+(p-M),k=p-b-M,L=c,I=L+m,U=L+d-j,X=d-m-j;T>0&&(x>0&&e.drawImage(O,S,x,T,A,L,b,m),_>0&&e.drawImage(w,S,_,T,B,L,k,m),R>0&&e.drawImage(E,S,R,T,N,L,M,m)),D>0&&(x>0&&e.drawImage(O,F,x,D,A,I,b,X),_>0&&e.drawImage(w,F,_,D,B,I,k,X),R>0&&e.drawImage(E,F,R,D,N,I,M,X)),C>0&&(x>0&&e.drawImage(O,P,x,C,A,U,b,j),_>0&&e.drawImage(w,P,_,C,B,U,k,j),R>0&&e.drawImage(E,P,R,C,N,U,M,j))},i.drawClipImage=function(t,e,i,r,n,a,o,s,h,c,l,u){void 0===l&&(l=0),void 0===u&&(u=0);var p=o+n-h;p>0&&(n-=p),p=s+a-c,p>0&&(a-=p),t.drawImage(i,r,n/e,a/e,l+o,u+s,n,a)},i}(e.RenderNode);e.BitmapNode=i,__reflect(i.prototype,"egret.sys.BitmapNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=["none","round","square"],r=["bevel","miter","round"],n=function(n){function a(){var t=n.call(this)||this;return t.dirtyRender=!0,t.type=3,t}return __extends(a,n),a.prototype.beginFill=function(t,i,r){void 0===i&&(i=1);var n=new e.FillPath;if(n.fillColor=t,n.fillAlpha=i,r){var a=this.drawData.lastIndexOf(r);this.drawData.splice(a,0,n)}else this.drawData.push(n);return this.renderCount++,n},a.prototype.beginGradientFill=function(i,r,n,a,o,s){var h=new t.Matrix;o?(h.a=819.2*o.a,h.b=819.2*o.b,h.c=819.2*o.c,h.d=819.2*o.d,h.tx=o.tx,h.ty=o.ty):(h.a=100,h.d=100);var c=new e.GradientFillPath;if(c.gradientType=i,c.colors=r,c.alphas=n,c.ratios=a,c.matrix=h,s){var l=this.drawData.lastIndexOf(s);this.drawData.splice(l,0,c)}else this.drawData.push(c);return this.renderCount++,c},a.prototype.lineStyle=function(n,a,o,s,h,c,l){void 0===o&&(o=1),void 0===c&&(c=3),void 0===l&&(l=[]),-1==i.indexOf(s)&&(s="round"),-1==r.indexOf(h)&&(h="round");var u=new e.StrokePath;return u.lineWidth=n,u.lineColor=a,u.lineAlpha=o,u.caps=s||t.CapsStyle.ROUND,u.joints=h,u.miterLimit=c,u.lineDash=l,this.drawData.push(u),this.renderCount++,u},a.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0,this.renderCount=0},a.prototype.cleanBeforeRender=function(){},a.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},a}(e.RenderNode);e.GraphicsNode=n,__reflect(n.prototype,"egret.sys.GraphicsNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=4,e}return __extends(e,t),e.prototype.addNode=function(t){this.drawData.push(t)},e.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},e.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(t.RenderNode);t.GroupNode=e,__reflect(e.prototype,"egret.sys.GroupNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.image=null,i.smoothing=!0,i.bounds=new t.Rectangle,i.blendMode=null,i.alpha=0/0,i.filter=null,i.rotated=!1,i.type=5,i.vertices=[],i.uvs=[],i.indices=[],i}return __extends(i,e),i.prototype.drawMesh=function(t,e,i,r,n,a,o,s){this.drawData.push(t,e,i,r,n,a,o,s),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.image=null,e.smoothing=!0,e.rotated=!1,e.type=6,e}return __extends(e,t),e.prototype.drawImage=function(t,e,i,r,n,a,o,s){var h=this;h.sourceX=t,h.sourceY=e,h.sourceW=i,h.sourceH=r,h.drawX=n,h.drawY=a,h.drawW=o,h.drawH=s,h.renderCount=1},e.prototype.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this),this.image=null},e}(t.RenderNode);t.NormalBitmapNode=e,__reflect(e.prototype,"egret.sys.NormalBitmapNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"}}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}return __extends(i,e),i.prototype.drawText=function(t,e,i,r){this.drawData.push(t,e,i,r),this.renderCount++,this.dirtyRender=!0},i.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.dirtyRender=!0},i}(e.RenderNode);e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=1,e}return __extends(e,t),e}(t.Path2D);t.FillPath=e,__reflect(e.prototype,"egret.sys.FillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=2,e}return __extends(e,t),e}(t.Path2D);t.GradientFillPath=e,__reflect(e.prototype,"egret.sys.GradientFillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i.$renderBuffer=new t.sys.RenderBuffer;var r=new t.BitmapData(i.$renderBuffer.surface);return r.$deleteSource=!1,i._setBitmapData(r),i}return __extends(i,e),i.prototype.drawToTexture=function(e,i,r){if(void 0===r&&(r=1),i&&(0==i.width||0==i.height))return!1;var n=i||e.$getOriginalBounds();if(0==n.width||0==n.height)return!1;r/=t.$TextureScaleFactor;var a=(n.x+n.width)*r,o=(n.y+n.height)*r;i&&(a=n.width*r,o=n.height*r);var s=this.$renderBuffer;if(!s)return!1;if(s.resize(a,o),this.$bitmapData.width=a,this.$bitmapData.height=o,t.nativeRender){egret_native.activateBuffer(this.$renderBuffer);var h=!1,c=0,l=0,u=0,p=0;i&&(h=!0,c=i.x,l=i.y,u=i.width,p=i.height),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject(e.$nativeDisplayObject.id,r,h,c,l,u,p),egret_native.activateBuffer(null)}else{var d=t.Matrix.create();d.identity(),d.scale(r,r),i&&d.translate(-i.x,-i.y),t.sys.systemRenderer.render(e,s,d,!0),t.Matrix.release(d)}return this.$initData(0,0,a,o,0,0,a,o,a,o),!0},i.prototype.getPixel32=function(e,i){var r;if(this.$renderBuffer){var n=t.$TextureScaleFactor;e=Math.round(e/n),i=Math.round(i/n),r=this.$renderBuffer.getPixels(e,i,1,1)}return r},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.$renderBuffer=null},i}(t.Texture);t.RenderTexture=e,__reflect(e.prototype,"egret.RenderTexture")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=3,e}return __extends(e,t),e}(t.Path2D);t.StrokePath=e,__reflect(e.prototype,"egret.sys.StrokePath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(t,e){var i=null==e.italic?t.italic:e.italic,r=null==e.bold?t.bold:e.bold,n=null==e.size?t.size:e.size,a=e.fontFamily||t.fontFamily,o=i?"italic ":"normal ";return o+=r?"bold ":"normal ",o+=n+"px "+a}function i(t,e){var i=t>>16,r=t>>8&255,n=255&t;return"rgba("+i+","+r+","+n+","+e+")"}function r(e,r,n,a,o,s){var h;h=r==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var c=n.length,l=0;c>l;l++)h.addColorStop(o[l]/255,i(n[l],a[l]));return h}function n(t,e,i){void 0===i&&(i=0);for(var r=0,n=e.length;n>r;r++)t[r+i]=e[r]}function a(t,e,i,r){for(var n=r[0],a=r[1],o=r[2],s=r[3],h=r[4],c=r[5],l=r[6],u=r[7],p=r[8],d=r[9],f=r[10],g=r[11],$=r[12],y=r[13],v=r[14],b=r[15],m=r[16],x=r[17],T=r[18],_=r[19],D=0,O=e*i*4;O>D;D+=4){var w=t[D+0],E=t[D+1],R=t[D+2],S=t[D+3];t[D+0]=n*w+a*E+o*R+s*S+h,t[D+1]=c*w+l*E+u*R+p*S+d,t[D+2]=f*w+g*E+$*R+y*S+v,t[D+3]=b*w+m*E+x*R+T*S+_}}function o(t,e,i,r,n){s(t,e,i,r),h(t,e,i,n)}function s(t,e,i,r){var a;a=_?new Uint8ClampedArray(4*e):new Array(4*e);for(var o=4*e,s=2*r+1,h=0;i>h;h++){for(var c=h*o,l=0,u=0,p=0,d=0,f=0,g=0,$=4*-r,y=4*r+4;y>$;$+=4){var v=c+$;c>v||v>=c+o||(f=t[v+3],l+=t[v+0]*f,u+=t[v+1]*f,p+=t[v+2]*f,d+=f)}for(var $=c,y=c+o,b=0,m=$-4*r,x=$+4*(r+1);y>$;$+=4,b+=4,x+=4,m+=4)0===d?(a[b+0]=0,a[b+1]=0,a[b+2]=0,a[b+3]=0):(a[b+0]=l/d,a[b+1]=u/d,a[b+2]=p/d,a[b+3]=d/s),f=t[x+3],g=t[m+3],f||0==f?g||0==g?(l+=t[x+0]*f-t[m+0]*g,u+=t[x+1]*f-t[m+1]*g,p+=t[x+2]*f-t[m+2]*g,d+=f-g):(l+=t[x+0]*f,u+=t[x+1]*f,p+=t[x+2]*f,d+=f):(g||0==g)&&(l+=-t[m+0]*g,u+=-t[m+1]*g,p+=-t[m+2]*g,d+=-g);_?t.set(a,c):n(t,a,c)}}function h(t,e,i,r){var n;n=_?new Uint8ClampedArray(4*i):new Array(4*i);for(var a=4*e,o=2*r+1,s=0;e>s;s++){for(var h=4*s,c=0,l=0,u=0,p=0,d=0,f=0,g=-r*a,$=r*a+a;$>g;g+=a){var y=h+g;h>y||y>=h+i*a||(d=t[y+3],c+=t[y+0]*d,l+=t[y+1]*d,u+=t[y+2]*d,p+=d)}for(var g=h,$=h+i*a,v=0,b=h-r*a,m=h+(r+1)*a;$>g;g+=a,v+=4,m+=a,b+=a)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=l/p,n[v+2]=u/p,n[v+3]=p/o),d=t[m+3],f=t[b+3],d||0==d?f||0==f?(c+=t[m+0]*d-t[b+0]*f,l+=t[m+1]*d-t[b+1]*f,u+=t[m+2]*d-t[b+2]*f,p+=d-f):(c+=t[m+0]*d,l+=t[m+1]*d,u+=t[m+2]*d,p+=d):(f||0==f)&&(c+=-t[b+0]*f,l+=-t[b+1]*f,u+=-t[b+2]*f,p+=-f);for(var x=4*s,$=x+i*a,T=0;$>x;x+=a,T+=4)t[x+0]=n[T+0],t[x+1]=n[T+1],t[x+2]=n[T+2],t[x+3]=n[T+3]}}function c(t,e,i,r,a,s,h,c,f){var g=l(t,r);u(g,e,i,h,c),o(g,e,i,a,s),p(g,f),d(g,t),t.set(g),_?t.set(g):n(t,g)}function l(t,e){e||(e=[0,0,0,0]);var i;_?i=new Uint8ClampedArray(t):(i=new Array(t.length),n(i,t));for(var r=e[0],a=e[1],o=e[2],s=e[3],h=0,c=i.length;c>h;h+=4){var l=i[h+3];i[h+0]=r*l,i[h+1]=a*l,i[h+2]=o*l,i[h+3]=s*l}return i}function u(t,e,i,r,a){var o,s,h=Math.sin(r)*a|0,c=Math.cos(r)*a|0;if(_){o=new Int32Array(t.buffer),s=new Int32Array(o.length);for(var l=0;i>l;l++){var u=l+h;if(!(0>u||u>i))for(var p=0;e>p;p++){var d=p+c;0>d||d>e||(s[u*e+d]=o[l*e+p])}}o.set(s)}else{o=t,s=new Array(o.length);for(var l=0;i>l;l++){var u=l+h;if(!(0>u||u>i))for(var p=0;e>p;p++){var d=p+c;0>d||d>e||(s[4*(u*e+d)+0]=o[4*(l*e+p)+0],s[4*(u*e+d)+1]=o[4*(l*e+p)+1],s[4*(u*e+d)+2]=o[4*(l*e+p)+2],s[4*(u*e+d)+3]=o[4*(l*e+p)+3])}}n(o,s)}}function p(t,e){for(var i=0,r=t.length;r>i;i+=4)t[i+3]*=e}function d(t,e){for(var i=0,r=t.length;r>i;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],s=t[i+3]/255,h=e[i+0],c=e[i+1],l=e[i+2],u=e[i+3]/255;t[i+0]=h+n*(1-u),t[i+1]=c+a*(1-u),t[i+2]=l+o*(1-u),t[i+3]=255*(u+s*(1-u))}}function f(t,e,i){return t*(1-i)+e*i}function g(t,e,i,r,a,o,s,h,c,l,u,p){var d;d=_?new Uint8ClampedArray(t.length):new Array(t.length);for(var g,$,y=r[3],v=0,b=0,m=h*Math.cos(s),x=h*Math.sin(s),T=7,D=12,O=3.141592653589793,w=a/T,E=o/T,R=0;e>R;R++)for(var S=0;i>S;S++){for(var F=0,P=S*e*4+4*R,C=0,M=0,j=t[P+0]/255,A=t[P+1]/255,B=t[P+2]/255,N=t[P+3]/255,k=0;2*O>=k;k+=2*O/D){g=Math.cos(k+F),$=Math.sin(k+F);for(var L=0;T>L;L++){v=L*w*g,b=L*E*$;var I=Math.round(R+v-m),U=Math.round(S+b-x),X=0;if(I>=e||0>I||0>U||U>=i)X=0;else{var H=U*e*4+4*I;X=t[H+3]/255}C+=(T-L)*X,M+=T-L}}N=Math.max(N,1e-4);var Y=C/M*c*y*(1-l)*Math.max(Math.min(p,u),1-N),W=(M-C)/M*c*y*l*N;N=Math.max(N*u*(1-p),1e-4);var G=W/(W+N),z=f(j,r[0],G),V=f(A,r[1],G),q=f(B,r[2],G),J=Y/(W+N+Y),K=f(z,r[0],J),Q=f(V,r[1],J),Z=f(q,r[2],J),te=Math.min(N+Y+W,1);d[P+0]=255*K,d[P+1]=255*Q,d[P+2]=255*Z,d[P+3]=255*te}_?t.set(d):n(t,d)}var $=["source-over","lighter","destination-out"],y="source-over",v="#000000",b={none:"butt",square:"square",round:"round"},m=[],x=[],T=function(){function n(){this.nestLevel=0,this.renderingMask=!1}return n.prototype.render=function(e,i,r,n){this.nestLevel++;var a=i.context;a.transform(r.a,r.b,r.c,r.d,0,0);var o=this.drawDisplayObject(e,a,r.tx,r.ty,!0),s=t.Matrix.create();if(r.$invertInto(s),a.transform(s.a,s.b,s.c,s.d,0,0),t.Matrix.release(s),this.nestLevel--,0===this.nestLevel){m.length>6&&(m.length=6);for(var h=m.length,c=0;h>c;c++)m[c].resize(0,0)}return o},n.prototype.drawDisplayObject=function(e,i,r,n,a){var o,s=0,h=e.$displayList;if(h&&!a?((e.$cacheDirty||e.$renderDirty||h.$canvasScaleX!=t.sys.DisplayList.$canvasScaleX||h.$canvasScaleY!=t.sys.DisplayList.$canvasScaleY)&&(s+=h.drawToSurface()),o=h.$renderNode):o=e.$renderDirty?e.$getRenderNode():e.$renderNode,e.$cacheDirty=!1,o){switch(s++,i.$offsetX=r,i.$offsetY=n,o.type){case 1:this.renderBitmap(o,i);break;case 2:this.renderText(o,i);break;case 3:this.renderGraphics(o,i);break;case 4:this.renderGroup(o,i);break;case 5:this.renderMesh(o,i);break;case 6:this.renderNormalBitmap(o,i)}i.$offsetX=0,i.$offsetY=0}if(h&&!a)return s;var c=e.$children;if(c)for(var l=c.length,u=0;l>u;u++){var p=c[u],d=void 0,f=void 0;if(p.$useTranslate){var g=p.$getMatrix();d=r+p.$x,f=n+p.$y,i.save(),i.transform(g.a,g.b,g.c,g.d,d,f),d=-p.$anchorOffsetX,f=-p.$anchorOffsetY}else d=r+p.$x-p.$anchorOffsetX,f=n+p.$y-p.$anchorOffsetY;var $=void 0;switch(1!=p.$alpha&&($=i.globalAlpha,i.globalAlpha*=p.$alpha),p.$renderMode){case 1:break;case 2:s+=this.drawWithFilter(p,i,d,f);break;case 3:s+=this.drawWithClip(p,i,d,f);break;case 4:s+=this.drawWithScrollRect(p,i,d,f);break;default:s+=this.drawDisplayObject(p,i,d,f)}p.$useTranslate?i.restore():$&&(i.globalAlpha=$)}return s},n.prototype.drawWithFilter=function(t,e,i,r){if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return 0;var n,s=0,h=t.$filters,l=h.length,u=0!==t.$blendMode;u&&(n=$[t.$blendMode],n||(n=y));var p=t.$getOriginalBounds(),d=p.x,f=p.y,v=p.width,b=p.height;if(0>=v||0>=b)return s;var m=this.createRenderBuffer(v-d,b-f,!0),T=m.context;if(s+=t.$mask?this.drawWithClip(t,T,-d,-f):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,T,-d,-f):this.drawDisplayObject(t,T,-d,-f),s>0){u&&(e.globalCompositeOperation=n),s++;for(var _=T.getImageData(0,0,m.surface.width,m.surface.height),D=0;l>D;D++){var O=h[D];if("colorTransform"==O.type)a(_.data,m.surface.width,m.surface.height,O.$matrix);else if("blur"==O.type)o(_.data,m.surface.width,m.surface.height,O.$blurX,O.$blurY);else if("glow"==O.type){var w=O.$red,E=O.$green,R=O.$blue,S=O.$alpha;O.$inner||O.$knockout||O.$hideObject?g(_.data,m.surface.width,m.surface.height,[w/255,E/255,R/255,S],O.$blurX,O.$blurY,O.$angle?O.$angle/180*Math.PI:0,O.$distance||0,O.$strength,O.$inner?1:0,O.$knockout?0:1,O.$hideObject?1:0):c(_.data,m.surface.width,m.surface.height,[w/255,E/255,R/255,S],O.$blurX,O.$blurY,O.$angle?O.$angle/180*Math.PI:0,O.$distance||0,O.$strength)}else"custom"==O.type}T.putImageData(_,0,0),e.drawImage(m.surface,i+d,r+f),u&&(e.globalCompositeOperation=y)}return x.push(m),s},n.prototype.drawWithClip=function(e,i,r,n){var a,o=0,s=0!==e.$blendMode;s&&(a=$[e.$blendMode],a||(a=y));var h=e.$scrollRect?e.$scrollRect:e.$maskRect,c=e.$mask;if(c){var l=c.$getMatrix();if(0==l.a&&0==l.b||0==l.c&&0==l.d)return o}if(!(c||e.$children&&0!=e.$children.length))return h&&(i.save(),i.beginPath(),i.rect(h.x+r,h.y+n,h.width,h.height),i.clip()),s&&(i.globalCompositeOperation=a),o+=this.drawDisplayObject(e,i,r,n),s&&(i.globalCompositeOperation=y),h&&i.restore(),o;if(c){var u=c.$getRenderNode();if((!c.$children||0==c.$children.length)&&u&&3==u.type&&1==u.drawData.length&&1==u.drawData[0].type&&1==u.drawData[0].fillAlpha){this.renderingMask=!0,i.save();var p=t.Matrix.create();p.copyFrom(c.$getConcatenatedMatrix()),c.$getConcatenatedMatrixAt(e,p),p.prepend(1,0,0,1,r,n),i.transform(p.a,p.b,p.c,p.d,p.tx,p.ty);var d=this.drawDisplayObject(c,i,0,0);return this.renderingMask=!1,p.$invertInto(p),i.transform(p.a,p.b,p.c,p.d,p.tx,p.ty),t.Matrix.release(p),h&&(i.beginPath(),i.rect(h.x+r,h.y+n,h.width,h.height),i.clip()),d+=this.drawDisplayObject(e,i,r,n),i.restore(),d}}var f=e.$getOriginalBounds(),g=f.x,v=f.y,b=f.width,x=f.height;if(0>=b||0>=x)return o;var T=this.createRenderBuffer(b,x),_=T.context;if(!_)return o+=this.drawDisplayObject(e,i,r,n);if(o+=this.drawDisplayObject(e,_,-g,-v),c){var u=c.$getRenderNode(),p=t.Matrix.create();if(p.copyFrom(c.$getConcatenatedMatrix()),c.$getConcatenatedMatrixAt(e,p),p.translate(-g,-v),u&&1==u.$getRenderCount()||c.$displayList)_.globalCompositeOperation="destination-in",_.save(),_.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),o+=this.drawDisplayObject(c,_,0,0),_.restore();else{var D=this.createRenderBuffer(b,x),O=D.context;O.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),o+=this.drawDisplayObject(c,O,0,0),_.globalCompositeOperation="destination-in",_.drawImage(D.surface,0,0),m.push(D)}t.Matrix.release(p)}return o>0&&(o++,s&&(i.globalCompositeOperation=a),h&&(i.save(),i.beginPath(),i.rect(h.x+r,h.y+n,h.width,h.height),i.clip()),i.drawImage(T.surface,r+g,n+v),h&&i.restore(),s&&(i.globalCompositeOperation=y)),m.push(T),o},n.prototype.drawWithScrollRect=function(t,e,i,r){var n=0,a=t.$scrollRect?t.$scrollRect:t.$maskRect;return a.isEmpty()?n:(t.$scrollRect&&(i-=a.x,r-=a.y),e.save(),e.beginPath(),e.rect(a.x+i,a.y+r,a.width,a.height),e.clip(),n+=this.drawDisplayObject(t,e,i,r),e.restore(),n)},n.prototype.drawNodeToBuffer=function(t,e,i,r){var n=e.context;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,n,r)},n.prototype.drawDisplayToBuffer=function(t,e,i){var r=e.context;i&&r.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var n;n=t.$renderDirty?t.$getRenderNode():t.$renderNode;var a=0;if(n)switch(a++,n.type){case 1:this.renderBitmap(n,r);break;case 2:this.renderText(n,r);break;case 3:this.renderGraphics(n,r);break;case 4:this.renderGroup(n,r);break;case 5:this.renderMesh(n,r);break;case 6:this.renderNormalBitmap(n,r)}var o=t.$children;if(o)for(var s=o.length,h=0;s>h;h++){var c=o[h];switch(c.$renderMode){case 1:break;case 2:a+=this.drawWithFilter(c,r,0,0);break;case 3:a+=this.drawWithClip(c,r,0,0);break;case 4:a+=this.drawWithScrollRect(c,r,0,0);break;
default:a+=this.drawDisplayObject(c,r,0,0)}}return a},n.prototype.renderNode=function(t,e,i){var r=0;switch(t.type){case 1:r=this.renderBitmap(t,e);break;case 2:r=1,this.renderText(t,e);break;case 3:r=this.renderGraphics(t,e,i);break;case 4:r=this.renderGroup(t,e);break;case 5:r=this.renderMesh(t,e);break;case 6:r+=this.renderNormalBitmap(t,e)}return r},n.prototype.renderNormalBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;if(e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing),t.rotated){var r=t.sourceX,n=t.sourceY,a=t.sourceW,o=t.sourceH,s=t.drawX,h=t.drawY,c=t.drawW,l=t.drawH;e.save(),e.transform(0,-1,1,0,0,l),e.drawImage(i.source,r,n,o,a,s+e.$offsetX,h+e.$offsetY,l,c),e.restore()}else e.drawImage(i.source,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX+e.$offsetX,t.drawY+e.$offsetY,t.drawW,t.drawH);return 1},n.prototype.renderBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var r,n,o=t.drawData,s=o.length,h=0,c=t.matrix,l=t.blendMode,u=t.alpha,p=!1;c&&(e.save(),p=!0,(0!=e.$offsetX||0!=e.$offsetY)&&(e.translate(e.$offsetX,e.$offsetY),r=e.$offsetX,n=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),l&&(e.globalCompositeOperation=$[l]);var d;u==u&&(d=e.globalAlpha,e.globalAlpha*=u);var f=0,g=t.filter;if(g&&8==s){var v=o[0],b=o[1],x=o[2],T=o[3],_=o[4],D=o[5],O=o[6],w=o[7];t.rotated&&(x=o[3],T=o[2],O=o[7],w=o[6]);var E=this.createRenderBuffer(O,w),R=E.context;f++,t.rotated&&e.transform(0,-1,1,0,0,O),R.drawImage(i.source,v,b,x,T,0,0,O,w),f++;var S=R.getImageData(0,0,O,w);a(S.data,O,w,g.$matrix),R.putImageData(S,0,0),e.drawImage(E.surface,0,0,O,w,_+e.$offsetX,D+e.$offsetY,O,w),m.push(E)}else for(;s>h;)if(f++,t.rotated){var v=o[h++],b=o[h++],T=o[h++],x=o[h++],F=o[h++],P=o[h++],w=o[h++],O=o[h++];e.save(),e.transform(0,-1,1,0,0,O),e.drawImage(i.source,v,b,x,T,F+e.$offsetX,P+e.$offsetY,O,w),e.restore()}else e.drawImage(i.source,o[h++],o[h++],o[h++],o[h++],o[h++]+e.$offsetX,o[h++]+e.$offsetY,o[h++],o[h++]);return p?e.restore():(l&&(e.globalCompositeOperation=y),u==u&&(e.globalAlpha=d)),r&&(e.$offsetX=r),n&&(e.$offsetY=n),f},n.prototype.renderMesh=function(t,e){return 0},n.prototype.renderText=function(i,r){r.textAlign="left",r.textBaseline="middle",r.lineJoin="round";for(var n=i.drawData,a=n.length,o=0;a>o;){var s=n[o++],h=n[o++],c=n[o++],l=n[o++];r.font=e(i,l);var u=null==l.textColor?i.textColor:l.textColor,p=null==l.strokeColor?i.strokeColor:l.strokeColor,d=null==l.stroke?i.stroke:l.stroke;r.fillStyle=t.toColorString(u),r.strokeStyle=t.toColorString(p),d&&(r.lineWidth=2*d,r.strokeText(c,s+r.$offsetX,h+r.$offsetY)),r.fillText(c,s+r.$offsetX,h+r.$offsetY)}},n.prototype.renderGraphics=function(t,e,n){var a=t.drawData,o=a.length;n=!!n;for(var s=0;o>s;s++){var h=a[s];switch(h.type){case 1:var c=h;e.fillStyle=n?v:i(c.fillColor,c.fillAlpha),this.renderPath(h,e),this.renderingMask?e.clip():e.fill();break;case 2:var l=h;e.fillStyle=n?v:r(e,l.gradientType,l.colors,l.alphas,l.ratios,l.matrix),e.save();var u=l.matrix;this.renderPath(h,e),e.transform(u.a,u.b,u.c,u.d,u.tx,u.ty),e.fill(),e.restore();break;case 3:var p=h,d=p.lineWidth;e.lineWidth=d,e.strokeStyle=n?v:i(p.lineColor,p.lineAlpha),e.lineCap=b[p.caps],e.lineJoin=p.joints,e.miterLimit=p.miterLimit,e.setLineDash&&e.setLineDash(p.lineDash);var f=1===d||3===d;f&&e.translate(.5,.5),this.renderPath(h,e),e.stroke(),f&&e.translate(-.5,-.5)}}return 0==o?0:1},n.prototype.renderPath=function(t,e){e.beginPath();for(var i=t.$data,r=t.$commands,n=r.length,a=0,o=0;n>o;o++){var s=r[o];switch(s){case 4:e.bezierCurveTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY,i[a++]+e.$offsetX,i[a++]+e.$offsetY,i[a++]+e.$offsetX,i[a++]+e.$offsetY);break;case 3:e.quadraticCurveTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY,i[a++]+e.$offsetX,i[a++]+e.$offsetY);break;case 2:e.lineTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY);break;case 1:e.moveTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY)}}},n.prototype.renderGroup=function(t,e){var i,r,n=t.matrix,a=!1;n&&(e.save(),a=!0,(0!=e.$offsetX||0!=e.$offsetY)&&(e.translate(e.$offsetX,e.$offsetY),i=e.$offsetX,r=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty));for(var o=0,s=t.drawData,h=s.length,c=0;h>c;c++){var l=s[c];o+=this.renderNode(l,e)}return a&&e.restore(),i&&(e.$offsetX=i),r&&(e.$offsetY=r),o},n.prototype.createRenderBuffer=function(e,i,r){var n=r?x.pop():m.pop();return n?n.resize(e,i,!0):n=new t.sys.CanvasRenderBuffer(e,i),n},n}();t.CanvasRenderer=T,__reflect(T.prototype,"egret.CanvasRenderer"),t.getFontString=e,t.getRGBAString=i;var _=!1;try{_=void 0!==typeof Uint8ClampedArray}catch(D){}}(egret||(egret={}));var egret;!function(t){t.DeviceOrientation=null}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(t){t.WEB="web",t.NATIVE="native",t.RUNTIME2="runtime2",t.WXGAME="wxgame"}(e=t.RuntimeType||(t.RuntimeType={}));var i=function(){function e(){}return e.language="zh-CN",e.os="Unknown",e.runtimeType=t.RuntimeType.WEB,e.engineVersion="5.2.13",e.renderMode="Unknown",e.boundingClientWidth=0,e.boundingClientHeight=0,e}();t.Capabilities=i,__reflect(i.prototype,"egret.Capabilities")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObject);t.Shape=e,__reflect(e.prototype,"egret.Shape")}(egret||(egret={}));var egret;!function(t){function e(t,e){r[t]=e}function i(t){return r[t]}var r={};t.registerImplementation=e,t.getImplementation=i}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(9)},Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(n,a))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var s=this.$children,h=!1,c=null,l=s.length-1;l>=0;l--){var u=s[l];if(!u.$maskedObject&&(c=u.$hitTest(e,i))){if(h=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:h?this:(c=t.DisplayObject.prototype.$hitTest.call(this,e,i),c&&(c=this.$graphics.$hitTest(e,i)),c)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObjectContainer);t.Sprite=e,__reflect(e.prototype,"egret.Sprite")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i){var r=t.call(this,e)||this;return r.firstCharHeight=0,"string"==typeof i?r.charList=r.parseConfig(i):i&&i.hasOwnProperty("frames")?r.charList=i.frames:r.charList={},r}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},e.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},e.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var r=e.h;void 0===r&&(r=0);var n=e.offY;void 0===n&&(n=0),i=r+n}if(0>=i)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},e.prototype.parseConfig=function(t){t=t.split("\r\n").join("\n");for(var e=t.split("\n"),i=this.getConfigByKey(e[3],"count"),r={},n=4;4+i>n;n++){var a=e[n],o=String.fromCharCode(this.getConfigByKey(a,"id")),s={};r[o]=s,s.x=this.getConfigByKey(a,"x"),s.y=this.getConfigByKey(a,"y"),s.w=this.getConfigByKey(a,"width"),s.h=this.getConfigByKey(a,"height"),s.offX=this.getConfigByKey(a,"xoffset"),s.offY=this.getConfigByKey(a,"yoffset"),s.xadvance=this.getConfigByKey(a,"xadvance")}return r},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),r=0,n=i.length;n>r;r++){var a=i[r];if(e==a.substring(0,e.length)){var o=a.substring(e.length+1);return parseInt(o)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$smoothing=t.Bitmap.defaultSmoothing,i.$text="",i.$textFieldWidth=0/0,i.$textLinesChanged=!1,i.$textFieldHeight=0/0,i.$font=null,i.$fontStringChanged=!1,i.$lineSpacing=0,i.$letterSpacing=0,i.$textAlign=t.HorizontalAlign.LEFT,i.$verticalAlign=t.VerticalAlign.TOP,i.$textWidth=0/0,i.$textHeight=0/0,i.$textOffsetX=0,i.$textOffsetY=0,i.$textStartX=0,i.$textStartY=0,i.textLines=[],i.$lineHeights=[],t.nativeRender||(i.$renderNode=new t.sys.BitmapNode),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){var i=this;if(e!=i.$smoothing&&(i.$smoothing=e,!t.nativeRender)){var r=i.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=i.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.$text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),i.prototype.$setText=function(t){t=null==t?"":String(t);var e=this;return t==e.$text?!1:(e.$text=t,e.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this,e=t.$textFieldWidth;return isNaN(e)?t.$getContentBounds().width:e},i.prototype.$setWidth=function(t){var e=this;return 0>t||t==e.$textFieldWidth?!1:(e.$textFieldWidth=t,e.$invalidateContentBounds(),!0)},i.prototype.$invalidateContentBounds=function(){this.$renderDirty=!0,this.$textLinesChanged=!0,this.$updateRenderNode()},i.prototype.$getHeight=function(){var t=this,e=t.$textFieldHeight;return isNaN(e)?t.$getContentBounds().height:e},i.prototype.$setHeight=function(t){var e=this;return 0>t||t==e.$textFieldHeight?!1:(e.$textFieldHeight=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"font",{get:function(){return this.$font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),i.prototype.$setFont=function(t){var e=this;return e.$font==t?!1:(e.$font=t,e.$fontStringChanged=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.$lineSpacing},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLineSpacing=function(t){var e=this;return e.$lineSpacing==t?!1:(e.$lineSpacing=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this.$letterSpacing},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLetterSpacing=function(t){var e=this;return e.$letterSpacing==t?!1:(e.$letterSpacing=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextAlign=function(t){var e=this;return e.$textAlign==t?!1:(e.$textAlign=t,e.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setVerticalAlign=function(t){var e=this;return e.$verticalAlign==t?!1:(e.$verticalAlign=t,e.$invalidateContentBounds(),!0)},i.prototype.$updateRenderNode=function(){var e=this,r=this.$getTextLines(),n=r.length;if(0==n)return void(t.nativeRender&&e.$font&&(e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,e.$font.$texture,[]),e.$nativeDisplayObject.setWidth(0),e.$nativeDisplayObject.setHeight(0)));var a,o=[],s=this.$textLinesWidth,h=e.$font;t.nativeRender||(a=this.$renderNode,h.$texture&&(a.image=h.$texture.$bitmapData),a.smoothing=e.$smoothing);for(var c=h._getFirstCharHeight(),l=Math.ceil(c*i.EMPTY_FACTOR),u=!isNaN(e.$textFieldHeight),p=e.$textWidth,d=e.$textFieldWidth,f=e.$textFieldHeight,g=e.$textAlign,$=this.$textOffsetY+this.$textStartY,y=this.$lineHeights,v=0;n>v;v++){var b=y[v];if(u&&v>0&&$+b>f)break;var m=r[v],x=m.length,T=this.$textOffsetX;if(g!=t.HorizontalAlign.LEFT){var _=d>p?d:p;g==t.HorizontalAlign.RIGHT?T+=_-s[v]:g==t.HorizontalAlign.CENTER&&(T+=Math.floor((_-s[v])/2))}for(var D=0;x>D;D++){var O=m.charAt(D),w=h.getTexture(O);if(w){var E=w.$bitmapWidth,R=w.$bitmapHeight;t.nativeRender?o.push(w.$bitmapX,w.$bitmapY,E,R,T+w.$offsetX,$+w.$offsetY,w.$getScaleBitmapWidth(),w.$getScaleBitmapHeight(),w.$sourceWidth,w.$sourceHeight):(a.imageWidth=w.$sourceWidth,a.imageHeight=w.$sourceHeight,a.drawImage(w.$bitmapX,w.$bitmapY,E,R,T+w.$offsetX,$+w.$offsetY,w.$getScaleBitmapWidth(),w.$getScaleBitmapHeight())),T+=(h.getConfig(O,"xadvance")||w.$getTextureWidth())+e.$letterSpacing}else" "==O?T+=l:t.$warn(1046,O)}$+=b+e.$lineSpacing}if(t.nativeRender){e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,h.$texture,o);var S=e.$getContentBounds();e.$nativeDisplayObject.setWidth(S.width),e.$nativeDisplayObject.setHeight(S.height)}},i.prototype.$measureContentBounds=function(t){var e=this.$getTextLines();0==e.length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$textWidth-this.$textOffsetX,this.$textHeight-this.$textOffsetY)},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$textHeight},enumerable:!0,configurable:!0}),i.prototype.$getTextLines=function(){function e(t){return b&&n.length>0&&f>b?!1:(f+=c+u,s||h||(l-=p),n.push(t),o.push(c),a.push(l),d=Math.max(l,d),!0)}var r=this;if(!r.$textLinesChanged)return r.textLines;var n=[];r.textLines=n;var a=[];r.$textLinesWidth=a,r.$textLinesChanged=!1;var o=[];if(r.$lineHeights=o,!r.$text||!r.$font)return r.$textWidth=0,r.$textHeight=0,n;for(var s,h,c,l,u=r.$lineSpacing,p=r.$letterSpacing,d=0,f=0,g=0,$=0,y=!isNaN(r.$textFieldWidth),v=r.$textFieldWidth,b=r.$textFieldHeight,m=r.$font,x=m._getFirstCharHeight(),T=Math.ceil(x*i.EMPTY_FACTOR),_=r.$text,D=_.split(/(?:\r\n|\r|\n)/),O=D.length,w=!0,E=0;O>E;E++){var R=D[E],S=R.length;c=0,l=0,s=!0,h=!1;for(var F=0;S>F;F++){s||(l+=p);var P=R.charAt(F),C=void 0,M=void 0,j=0,A=0,B=m.getTexture(P);if(B)C=B.$getTextureWidth(),M=B.$getTextureHeight(),j=B.$offsetX,A=B.$offsetY;else{if(" "!=P){t.$warn(1046,P),s&&(s=!1);continue}C=T,M=x}if(s&&(s=!1,g=Math.min(j,g)),w&&(w=!1,$=Math.min(A,$)),y&&F>0&&l+C>v){if(!e(R.substring(0,F)))break;R=R.substring(F),S=R.length,F=0,l=F==S-1?C:m.getConfig(P,"xadvance")||C,c=M}else l+=F==S-1?C:m.getConfig(P,"xadvance")||C,c=Math.max(M,c)}if(b&&E>0&&f>b)break;if(h=!0,!e(R))break}f-=u,r.$textWidth=d,r.$textHeight=f,this.$textOffsetX=g,this.$textOffsetY=$,this.$textStartX=0,this.$textStartY=0;var N;return v>d&&(N=r.$textAlign,N==t.HorizontalAlign.RIGHT?this.$textStartX=v-d:N==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((v-d)/2))),b>f&&(N=r.$verticalAlign,N==t.VerticalAlign.BOTTOM?this.$textStartY=b-f:N==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((b-f)/2))),n},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,__reflect(e.prototype,"egret.BitmapText")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}return e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],r=this.replaceArr[e][1];t=t.replace(i,r)}return t},e.prototype.parse=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,r=e.length;r>i;){var n=e.indexOf("<",i);if(0>n)this.addToResultArr(e.substring(i)),i=r;else{this.addToResultArr(e.substring(i,n));var a=e.indexOf(">",n);-1==a?(t.$error(1038),a=n):"/"==e.charAt(n+1)?this.stackArray.pop():this.addToArray(e.substring(n+1,a)),i=a+1}}return this.resutlArr},e.prototype.parser=function(t){return this.parse(t)},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){t=t.trim();var e={},i=[];if("i"==t.charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var r=0,n=void 0;n=t.match(this.getHeadReg());){var a=n[0],o="";t=t.substring(a.length).trim(),'"'==t.charAt(0)?(r=t.indexOf('"',1),o=t.substring(1,r),r+=1):"'"==t.charAt(0)?(r=t.indexOf("'",1),o=t.substring(1,r),r+=1):(o=t.match(/(\S)+/)[0],r=o.length),this.addProperty(e,a.substring(0,a.length-1).trim(),o.trim()),t=t.substring(r).trim()}}return e},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var r in i)null==e[r]&&(e[r]=i[r]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,__reflect(e.prototype,"egret.HtmlTextParser")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}return __extends(i,e),i.prototype.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},i.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},i.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},i.prototype._getText=function(){return this.stageText.$getText()},i.prototype._setText=function(t){this.stageText.$setText(t)},i.prototype._setColor=function(t){this.stageText.$setColor(t)},i.prototype.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},i.prototype.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},i.prototype.onMouseDownHandler=function(t){this.$onFocus()},i.prototype.$onFocus=function(){var e=this;this._text.visible&&(this._isFocus||(this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),t.callLater(function(){e.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,e.onStageDownHandler,e)},this),t.nativeRender&&this.stageText.$setText(this._text.$TextField[13]),this.stageText.$show()))},i.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},i.prototype.updateTextHandler=function(e){var i,r,n=this._text.$TextField,a=this.stageText.$getText(),o=!1;null!=n[35]&&(i=new RegExp("["+n[35]+"]","g"),r=a.match(i),a=r?r.join(""):"",o=!0),null!=n[36]&&(i=new RegExp("[^"+n[36]+"]","g"),r=a.match(i),a=r?r.join(""):"",o=!0),o&&this.stageText.$getText()!=a&&this.stageText.$setText(a),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},i.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},i.prototype._hideInput=function(){this.stageText.$removeFromStage()},i.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},i.prototype._updateProperties=function(){return this._isFocus?(this.stageText.$resetStageText(),void this.updateInput()):(this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),void this.updateInput())},i}(t.HashObject);t.InputController=e,__reflect(e.prototype,"egret.InputController")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i,n){n=n||{};var a=null==n.italic?i[16]:n.italic,o=null==n.bold?i[15]:n.bold,s=null==n.size?i[0]:n.size,h=n.fontFamily||i[8]||r.default_fontFamily;return t.sys.measureText(e,h,s,o,a)}var i=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])"),r=function(r){function n(){var e=r.call(this)||this;e.$inputEnabled=!1,e.inputUtils=null,e.$graphicsNode=null,e.isFlow=!1,e.textArr=[],e.linesArr=[],e.$isTyping=!1;var i=new t.sys.TextNode;return i.fontFamily=n.default_fontFamily,e.textNode=i,e.$renderNode=i,e.$TextField={0:n.default_size,1:0,2:n.default_textColor,3:0/0,4:0/0,5:0,6:0,7:0,8:n.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT,38:!1},e}return __extends(n,r),n.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(7)},n.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},n.prototype.$setTouchEnabled=function(t){r.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),n.prototype.$setFontFamily=function(e){var i=this.$TextField;return i[8]==e?!1:(i[8]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setFontFamily(e),!0)},Object.defineProperty(n.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),n.prototype.$setSize=function(e){var i=this.$TextField;return i[0]==e?!1:(i[0]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setFontSize(e),!0)},Object.defineProperty(n.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),n.prototype.$setBold=function(e){var i=this.$TextField;return e==i[15]?!1:(i[15]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setBold(e),!0)},Object.defineProperty(n.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),n.prototype.$setItalic=function(e){var i=this.$TextField;return e==i[16]?!1:(i[16]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setItalic(e),!0)},n.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextAlign=function(e){var i=this.$TextField;return i[9]==e?!1:(i[9]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setTextAlign(e),!0)},Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setVerticalAlign=function(e){var i=this.$TextField;return i[10]==e?!1:(i[10]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setVerticalAlign(e),!0)},Object.defineProperty(n.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),n.prototype.$setLineSpacing=function(e){var i=this.$TextField;return i[1]==e?!1:(i[1]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setLineSpacing(e),!0)},Object.defineProperty(n.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextColor=function(e){var i=this.$TextField;return i[2]==e?!1:(i[2]=e,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setTextColor(e),!0)},Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),n.prototype.$setWordWrap=function(e){var i=this.$TextField;e!=i[19]&&(i[20]||(i[19]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setWordWrap(e)))},Object.defineProperty(n.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),n.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e?(i[24]=e,t.nativeRender&&this.$nativeDisplayObject.setType(e),e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0):!1},Object.defineProperty(n.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(e){this.$TextField[37]!=e&&(this.$TextField[37]=e,t.nativeRender&&this.$nativeDisplayObject.setInputType(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),n.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},n.prototype.$setBaseText=function(e){e=null==e?"":e.toString(),this.isFlow=!1;var i=this.$TextField;if(i[13]!=e){this.$invalidateTextField(),i[13]=e;var r="";return r=i[20]?this.changeToPassText(e):e,t.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0}return!1},n.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),n.prototype.$setDisplayAsPassword=function(e){var i=this.$TextField;if(i[20]!=e){i[20]=e,this.$invalidateTextField();var r="";return r=e?this.changeToPassText(i[13]):i[13],t.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0}return!1},Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e?(this.$invalidateTextField(),i[25]=e,t.nativeRender&&this.$nativeDisplayObject.setStrokeColor(e),i[26]=t.toColorString(e),!0):!1},Object.defineProperty(n.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),n.prototype.$setStroke=function(e){return this.$TextField[27]!=e?(this.$invalidateTextField(),this.$TextField[27]=e,t.nativeRender&&this.$nativeDisplayObject.setStroke(e),!0):!1},Object.defineProperty(n.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),n.prototype.$setMaxChars=function(e){return this.$TextField[21]!=e?(this.$TextField[21]=e,t.nativeRender&&this.$nativeDisplayObject.setMaxChars(e),!0):!1},Object.defineProperty(n.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(e){e=Math.max(e,1),e!=this.$TextField[28]&&(this.$TextField[28]=e,t.nativeRender&&this.$nativeDisplayObject.setScrollV(e),this.$invalidateTextField())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),n.prototype.$setSelection=function(t,e){return!1},n.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(n.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),n.prototype.$setMultiline=function(e){return this.$TextField[30]==e?!1:(this.$TextField[30]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setMultiline(e),!0)
},Object.defineProperty(n.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),n.prototype.$setWidth=function(e){t.nativeRender&&this.$nativeDisplayObject.setTextFieldWidth(e);var i=this.$TextField;if(isNaN(e)){if(isNaN(i[3]))return!1;i[3]=0/0}else{if(i[3]==e)return!1;i[3]=e}return e=+e,0>e?!1:(this.$invalidateTextField(),!0)},n.prototype.$setHeight=function(e){t.nativeRender&&this.$nativeDisplayObject.setTextFieldHeight(e);var i=this.$TextField;if(isNaN(e)){if(isNaN(i[4]))return!1;i[4]=0/0}else{if(i[4]==e)return!1;i[4]=e}return e=+e,0>e?!1:(this.$invalidateTextField(),!0)},n.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},n.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(n.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorder=function(e){e=!!e,this.$TextField[31]!=e&&(this.$TextField[31]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBorder(e))},Object.defineProperty(n.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorderColor=function(e){e=+e||0,this.$TextField[32]!=e&&(this.$TextField[32]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBorderColor(e))},Object.defineProperty(n.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackground=function(e){this.$TextField[33]!=e&&(this.$TextField[33]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBackground(e))},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackgroundColor=function(e){this.$TextField[34]!=e&&(this.$TextField[34]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBackgroundColor(e))},n.prototype.fillBackground=function(e){var i=this.$graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e&&e.length>0){if(!i)if(i=this.$graphicsNode=new t.sys.GraphicsNode,t.nativeRender)this.$renderNode=this.textNode;else{var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var a=void 0,o=void 0;if(r[33]&&(a=i.beginFill(r[34]),a.drawRect(0,0,this.$getWidth(),this.$getHeight())),r[31]&&(o=i.lineStyle(1,r[32]),o.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e&&e.length>0)for(var s=r[2],h=-1,c=e.length,l=0;c>l;l+=4){var u=e[l],p=e[l+1],d=e[l+2],f=e[l+3]||s;(0>h||h!=f)&&(h=f,o=i.lineStyle(2,f,1,t.CapsStyle.NONE)),o.moveTo(u,p),o.lineTo(u+d,p)}}if(i){var g=this.$getRenderBounds();i.x=g.x,i.y=g.y,i.width=g.width,i.height=g.height,t.Rectangle.release(g)}},n.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},n.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&(this.textNode.clean(),t.nativeRender&&egret_native.NativeDisplayObject.disposeTextData(this))},n.prototype.$onAddToStage=function(e,i){r.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},n.prototype.$invalidateTextField=function(){var e=this;if(e.$renderDirty=!0,e.$TextField[18]=!0,e.$TextField[38]=!0,t.nativeRender);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},n.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},n.prototype.$measureContentBounds=function(e){this.$getLinesArr();var i=0,r=0;t.nativeRender?(i=egret_native.nrGetTextFieldWidth(this.$nativeDisplayObject.id),r=egret_native.nrGetTextFieldHeight(this.$nativeDisplayObject.id)):(i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4]),e.setTo(0,0,i,r)},n.prototype.$updateRenderNode=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var e=this.$graphicsNode;return void(e&&e.clear())}var i=this.drawText();this.fillBackground(i);var r=this.$getRenderBounds(),n=this.textNode;n.x=r.x,n.y=r.y,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),t.Rectangle.release(r)},Object.defineProperty(n.prototype,"textFlow",{get:function(){return this.textArr},set:function(e){this.isFlow=!0;var i="";null==e&&(e=[]);for(var r=0;r<e.length;r++){var n=e[r];i+=n.text}this.$TextField[20]?this.$setBaseText(i):(this.$TextField[13]=i,this.setMiddleStyle(e),t.nativeRender&&this.$nativeDisplayObject.setTextFlow(e))},enumerable:!0,configurable:!0}),n.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;r>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},n.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.$TextField[38]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.$getLinesArr(),t.nativeRender?egret_native.nrGetTextWidth(this.$nativeDisplayObject.id):this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.$getLinesArr(),t.nativeRender?egret_native.nrGetTextHeight(this.$nativeDisplayObject.id):t.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),n.prototype.appendText=function(t){this.appendElement({text:t})},n.prototype.appendElement=function(e){var i=this.$TextField[13]+e.text;return t.nativeRender?(this.textArr.push(e),this.$TextField[13]=i,this.$TextField[18]=!0,this.$TextField[38]=!0,void this.$nativeDisplayObject.setTextFlow(this.textArr)):void(this.$TextField[20]?this.$setBaseText(i):(this.$TextField[13]=i,this.textArr.push(e),this.setMiddleStyle(this.textArr)))},n.prototype.$getLinesArr=function(){var e=this.$TextField;return t.nativeRender&&e[38]?(egret_native.updateNativeRender(),void(e[38]=!1)):this.$getLinesArr2()},n.prototype.$getLinesArr2=function(){var r=this.$TextField;if(!r[18])return this.linesArr;r[18]=!1;var n=this.textArr;this.linesArr.length=0,r[6]=0,r[5]=0;var a=r[3];if(!isNaN(a)&&0==a)return r[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var o,s=this.linesArr,h=0,c=0,l=0,u=0,p=0,d=n.length;d>p;p++){var f=n[p];if(f.text){f.style=f.style||{};for(var g=f.text.toString(),$=g.split(/(?:\r\n|\r|\n)/),y=0,v=$.length;v>y;y++){null==s[u]&&(o={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},s[u]=o,h=0,l=0,c=0),l=r[24]==t.TextFieldType.INPUT?r[0]:Math.max(l,f.style.size||r[0]);var b=!0;if(""==$[y])y==v-1&&(b=!1);else{var m=e($[y],r,f.style);if(isNaN(a))h+=m,c+=$[y].length,o.elements.push({width:m,text:$[y],style:f.style}),y==v-1&&(b=!1);else if(a>=h+m)o.elements.push({width:m,text:$[y],style:f.style}),h+=m,c+=$[y].length,y==v-1&&(b=!1);else{var x=0,T=0,_=$[y],D=void 0;D=r[19]?_.split(i):_.match(/./g);for(var O=D.length,w=0;O>x;x++){var E=D[x].length,R=!1;if(1==E&&O-1>x){var S=D[x].charCodeAt(0),F=D[x+1].charCodeAt(0);if(S>=55296&&56319>=S&&56320==(64512&F)){var P=D[x]+D[x+1];E=2,R=!0,m=e(P,r,f.style)}else m=e(D[x],r,f.style)}else m=e(D[x],r,f.style);if(0!=h&&h+m>a&&h+x!=0)break;if(T+m>a)for(var C=D[x].match(/./g),M=0,j=C.length;j>M;M++){var E=C[M].length,A=!1;if(1==E&&j-1>M){var S=C[M].charCodeAt(0),F=C[M+1].charCodeAt(0);if(S>=55296&&56319>=S&&56320==(64512&F)){var P=C[M]+C[M+1];E=2,A=!0,m=e(P,r,f.style)}else m=e(C[M],r,f.style)}else m=e(C[M],r,f.style);if(M>0&&h+m>a)break;w+=E,T+=m,h+=m,c+=w,A&&M++}else w+=E,T+=m,h+=m,c+=w;R&&x++}if(x>0){o.elements.push({width:T,text:_.substring(0,w),style:f.style});var B=_.substring(w),N=void 0,k=B.length;for(N=0;k>N&&" "==B.charAt(N);N++);$[y]=B.substring(N)}""!=$[y]&&(y--,b=!1)}}b&&(c++,o.hasNextLine=!0),y<$.length-1&&(o.width=h,o.height=l,o.charNum=c,r[5]=Math.max(r[5],h),r[6]+=l,u++)}p==n.length-1&&o&&(o.width=h,o.height=l,o.charNum=c,r[5]=Math.max(r[5],h),r[6]+=l)}else o&&(o.width=h,o.height=l,o.charNum=c,r[5]=Math.max(r[5],h),r[6]+=l)}return r[29]=s.length,s},n.prototype.$setIsTyping=function(e){this.$isTyping=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setIsTyping(e)},n.prototype.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||n.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var r=this.$getLinesArr();if(0==i[5])return[];var a=isNaN(i[3])?i[5]:i[3],o=t.TextFieldUtils.$getTextHeight(this),s=0,h=t.TextFieldUtils.$getStartLine(this),c=i[4];if(!isNaN(c)&&c>o){var l=t.TextFieldUtils.$getValign(this);s+=l*(c-o)}s=Math.round(s);for(var u=t.TextFieldUtils.$getHalign(this),p=0,d=[],f=h,g=i[29];g>f;f++){var $=r[f],y=$.height;if(s+=y/2,f!=h){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(c)&&s>c)break}p=Math.round((a-$.width)*u);for(var v=0,b=$.elements.length;b>v;v++){var m=$.elements[v],x=m.style.size||i[0];e.drawText(p,s+(y-x)/2,m.text,m.style),m.style.underline&&d.push(p,s+y/2,m.width,m.style.textColor),p+=m.width}s+=y/2+i[1]}return d},n.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var r=i.style;if(r&&r.href)if(r.href.match(/^event:/)){var n=r.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,r.href.substring(n.length))}else open(r.href,r.target||"_blank")}}},n.default_fontFamily="Arial",n.default_size=30,n.default_textColor=16777215,n}(t.DisplayObject);t.TextField=r,__reflect(r.prototype,"egret.TextField")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.TEXT="text",t.TEL="tel",t.PASSWORD="password",t}();t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.$getStartLine=function(t){var i=t.$TextField,r=e.$getTextHeight(t),n=0,a=i[4];return isNaN(a)||(a>r||r>a&&(n=Math.max(i[28]-1,0),n=Math.min(i[29]-1,n)),i[30]||(n=Math.max(i[28]-1,0),i[29]>0&&(n=Math.min(i[29]-1,n)))),n},e.$getHalign=function(e){var i=e.$getLinesArr2(),r=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?r=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(r=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(r=0),r},e.$getTextHeight=function(e){var i=t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0];return i},e.$getValign=function(i){var r=e.$getTextHeight(i),n=i.$TextField[4];if(!isNaN(n)&&n>r){var a=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?a=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(a=1),a}return 0},e.$getTextElement=function(t,i,r){var n=e.$getHit(t,i,r),a=t.$getLinesArr2();return n&&a[n.lineIndex]&&a[n.lineIndex].elements[n.textElementIndex]?a[n.lineIndex].elements[n.textElementIndex]:null},e.$getHit=function(t,i,r){var n=t.$getLinesArr2();if(0==t.$TextField[3])return null;var a=0,o=e.$getTextHeight(t),s=0,h=t.$TextField[4];if(!isNaN(h)&&h>o){var c=e.$getValign(t);s=c*(h-o),0!=s&&(r-=s)}for(var l=e.$getStartLine(t),u=0,p=l;p<n.length;p++){var d=n[p];if(u+d.height>=r){r>u&&(a=p+1);break}if(u+=d.height,u+t.$TextField[1]>r)return null;u+=t.$TextField[1]}if(0==a)return null;var f=n[a-1],g=t.$TextField[3];isNaN(g)&&(g=t.textWidth);var $=e.$getHalign(t);i-=$*(g-f.width);for(var y=0,p=0;p<f.elements.length;p++){var v=f.elements[p];if(y+v.width<=i)y+=v.width;else if(i>y)return{lineIndex:a-1,textElementIndex:p}}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,r=t.size,n=t.lineSpacing;e=Math.floor(i/(r+n));var a=i-(r+n)*e;a>r/2&&e++}return e},e}();t.TextFieldUtils=e,__reflect(e.prototype,"egret.TextFieldUtils")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.encode=function(t){for(var e=new Uint8Array(t),i=e.length,r="",n=0;i>n;n+=3)r+=chars[e[n]>>2],r+=chars[(3&e[n])<<4|e[n+1]>>4],r+=chars[(15&e[n+1])<<2|e[n+2]>>6],r+=chars[63&e[n+2]];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(t){var e=.75*t.length,i=t.length,r=0,n=0,a=0,o=0,s=0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);for(var h=new ArrayBuffer(e),c=new Uint8Array(h),l=0;i>l;l+=4)n=lookup[t.charCodeAt(l)],a=lookup[t.charCodeAt(l+1)],o=lookup[t.charCodeAt(l+2)],s=lookup[t.charCodeAt(l+3)],c[r++]=n<<2|a>>4,c[r++]=(15&a)<<4|o>>2,c[r++]=(3&o)<<6|63&s;return h},t}();t.Base64Util=e,__reflect(e.prototype,"egret.Base64Util")}(egret||(egret={}));for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var egret;!function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,__reflect(e.prototype,"egret.Endian");var i=function(){function i(t,i){void 0===i&&(i=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,0>i&&(i=0),this.bufferExtSize=i;var r,n=0;if(t){var a=void 0;if(t instanceof Uint8Array?(a=t,n=t.length):(n=t.byteLength,a=new Uint8Array(t)),0==i)r=new Uint8Array(n);else{var o=(n/i|0)+1;r=new Uint8Array(o*i)}r.set(a)}else r=new Uint8Array(i);this.write_position=n,this._position=0,this._bytes=r,this.data=new DataView(r.buffer),this.endian=e.BIG_ENDIAN}return Object.defineProperty(i.prototype,"endian",{get:function(){return 0==this.$endian?e.LITTLE_ENDIAN:e.BIG_ENDIAN},set:function(t){this.$endian=t==e.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),i.prototype.setArrayBuffer=function(t){},Object.defineProperty(i.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,i=t.byteLength,r=new Uint8Array(t),n=this.bufferExtSize;if(0==n)e=new Uint8Array(i);else{var a=(i/n|0)+1;e=new Uint8Array(a*n)}e.set(r),this.write_position=i,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,t>this.write_position&&(this.write_position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!0,configurable:!0}),i.prototype._validateBuffer=function(t){if(this.data.byteLength<t){var e=this.bufferExtSize,i=void 0;if(0==e)i=new Uint8Array(t);else{var r=((t/e>>0)+1)*e;i=new Uint8Array(r)}i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}},Object.defineProperty(i.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),i.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},i.prototype.readBoolean=function(){return this.validate(1)?!!this._bytes[this.position++]:void 0},i.prototype.readByte=function(){return this.validate(1)?this.data.getInt8(this.position++):void 0},i.prototype.readBytes=function(e,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),e){var n=this._position,a=this.write_position-n;if(0>a)return void t.$error(1025);if(0==r)r=a;else if(r>a)return void t.$error(1025);var o=e._position;e._position=0,e.validateBuffer(i+r),e._position=o,e._bytes.set(this._bytes.subarray(n,n+r),i),this.position+=r}},i.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},i.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},i.prototype.readUnsignedByte=function(){return this.validate(1)?this._bytes[this.position++]:void 0},i.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},i.prototype.readUTF=function(){var t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""},i.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,i=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(i)}},i.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},i.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},i.prototype.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r;0>e||0>i||(r=0==i?t.length-e:Math.min(t.length-e,i),r>0&&(this.validateBuffer(r),this._bytes.set(t._bytes.subarray(e,e+r),this._position),this.position=this._position+r))},i.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},i.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},i.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},i.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),i=e.length;this.validateBuffer(2+i),this.data.setUint16(this._position,i,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},i.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},i.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},i.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var i=this._position,r=i+t.length;e&&this.validateBuffer(r),this.bytes.set(t,i),this.position=r},i.prototype.validate=function(e){var i=this._bytes.length;return i>0&&this._position+e<=i?!0:void t.$error(1025)},i.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},i.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),r=[];i.length>e;){var n=i[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))r.push(n);else{var a=void 0,o=void 0;for(this.inRange(n,128,2047)?(a=1,o=192):this.inRange(n,2048,65535)?(a=2,o=224):this.inRange(n,65536,1114111)&&(a=3,o=240),r.push(this.div(n,Math.pow(64,a))+o);a>0;){var s=this.div(n,Math.pow(64,a-1));r.push(128+s%64),a-=1}}}return new Uint8Array(r)},i.prototype.decodeUTF8=function(t){for(var e,i=!1,r=0,n="",a=0,o=0,s=0,h=0;t.length>r;){var c=t[r++];if(c==this.EOF_byte)e=0!=o?this.decoderError(i):this.EOF_code_point;else if(0==o)this.inRange(c,0,127)?e=c:(this.inRange(c,194,223)?(o=1,h=128,a=c-192):this.inRange(c,224,239)?(o=2,h=2048,a=c-224):this.inRange(c,240,244)?(o=3,h=65536,a=c-240):this.decoderError(i),a*=Math.pow(64,o),e=null);else if(this.inRange(c,128,191))if(s+=1,a+=(c-128)*Math.pow(64,o-s),s!==o)e=null;else{var l=a,u=h;a=0,o=0,s=0,h=0,e=this.inRange(l,u,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(i,c)}else a=0,o=0,s=0,h=0,r--,e=this.decoderError(i,c);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},i.prototype.encoderError=function(e){t.$error(1026,e)},i.prototype.decoderError=function(e,i){return e&&t.$error(1027),i||65533},i.prototype.inRange=function(t,e,i){return t>=e&&i>=t},i.prototype.div=function(t,e){return Math.floor(t/e)},i.prototype.stringToCodePoints=function(t){for(var e=[],i=0,r=t.length;i<t.length;){var n=t.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))e.push(65533);else if(i==r-1)e.push(65533);else{var a=t.charCodeAt(i+1);if(this.inRange(a,56320,57343)){var o=1023&n,s=1023&a;i+=1,e.push(65536+(o<<10)+s)}else e.push(65533)}else e.push(n);i+=1}return e},i}();t.ByteArray=i,__reflect(i.prototype,"egret.ByteArray")}(egret||(egret={}));var egret;!function(t){t.BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"}}(egret||(egret={}));var egret;!function(t){function e(t,e,i){var r=t.prototype;r.__class__=e;var n=[e];i&&(n=n.concat(i));var a=r.__types__;if(r.__types__)for(var o=a.length,s=0;o>s;s++){var h=a[s];-1==n.indexOf(h)&&n.push(h)}r.__types__=n}t.registerClass=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(13)},Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.ticker.$frameRate},set:function(e){t.ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,__reflect(e.prototype,"egret.Stage")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),r=i+1,n=t.sinInt(i);if(i==e)return n;var a=t.sinInt(r);return(e-i)*a+(r-e)*n},t.sinInt=function(t){return t%=360,0>t&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),r=i+1,n=t.cosInt(i);if(i==e)return n;var a=t.cosInt(r);return(e-i)*a+(r-e)*n},t.cosInt=function(t){return t%=360,0>t&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;360>NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n});var egret;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=0);var r=e.call(this)||this;return r._delay=0,r._currentCount=0,r._running=!1,r.updateInterval=1e3,r.lastCount=1e3,r.lastTimeStamp=0,r.delay=t,r.repeatCount=0|+i,r}return __extends(i,e),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=t.getTimer(),t.ticker.$startTick(this.$update,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},i.prototype.$update=function(e){var i=e-this.lastTimeStamp;if(i>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=e,this._currentCount++;var r=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),r&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,__reflect(e.prototype,"egret.Timer")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(r)}function i(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(r)}t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=e,t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=i}(egret||(egret={}));var egret;!function(t){function e(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var a,o=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}}),a=t.__sets__;var s=a[i];if(s)return s.apply(e,r);var h=Object.getPrototypeOf(o);if(null!=h){for(;!h.hasOwnProperty(i);)if(h=Object.getPrototypeOf(h),null==h)return;s=Object.getOwnPropertyDescriptor(h,i).set,a[i]=s,s.apply(e,r)}}function i(t,e,i){var r,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}}),r=t.__gets__;var a=r[i];if(a)return a.call(e);var o=Object.getPrototypeOf(n);if(null!=o){for(;!o.hasOwnProperty(i);)if(o=Object.getPrototypeOf(o),null==o)return;return a=Object.getOwnPropertyDescriptor(o,i).get,r[i]=a,a.call(e)}}t.superSetter=e,t.superGetter=i}(egret||(egret={}));var egret;!function(t){function e(t){if(!t)return null;var e=i[t];if(e)return e;var r=t.split("."),n=r.length;e=global;for(var a=0;n>a;a++){var o=r[a];if(e=e[o],!e)return null}return i[t]=e,e}var i={};t.getDefinitionByName=e}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var r=i.constructor.toString().trim(),n=r.indexOf("("),a=r.substring(9,n);return Object.defineProperty(i,"__class__",{value:a,enumerable:!1,writable:!0}),a}t.getQualifiedClassName=e}(egret||(egret={}));var egret;!function(t){function e(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),r=Object.getPrototypeOf(i);if(!r)return null;var n=t.getQualifiedClassName(r.constructor);return n?n:null}t.getQualifiedSuperclassName=e}(egret||(egret={}));var egret;!function(t){function e(){return Date.now()-t.sys.$START_TIME}t.getTimer=e}(egret||(egret={}));var egret;!function(t){function e(e){var i=t.getDefinitionByName(e);return i?!0:!1}t.hasDefinition=e}(egret||(egret={}));var egret;!function(t){function e(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),r=i?i.__types__:null;return r?-1!==r.indexOf(e):!1}t.is=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.ticker.$startTick(e,i)}t.startTick=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.ticker.$stopTick(e,i)}t.stopTick=e}(egret||(egret={}));var egret;!function(t){function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}t.toColorString=e
}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));

//js/egret.web.min_2dd0bd72.js
var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);r.prototype=t.prototype,e.prototype=new r},egret;!function(e){var t;!function(t){function r(e){if(window.location){var t=location.search;if(""==t)return"";t=t.slice(1);for(var r=t.split("&"),i=r.length,n=0;i>n;n++){var a=r[n],o=a.split("=");if(o[0]==e)return o[1]}}return""}t.getOption=r,e.getOption=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function e(){}return e.call=function(e,t){},e.addCallback=function(e,t){},e}();t.WebExternalInterface=r,__reflect(r.prototype,"egret.web.WebExternalInterface",["egret.ExternalInterface"]);var i=navigator.userAgent.toLowerCase();i.indexOf("egretnative")<0&&(e.ExternalInterface=r)}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(t){function r(t){var r=JSON.parse(t),n=r.functionName,a=i[n];if(a){var o=r.value;a.call(null,o)}else e.$warn(1050,n)}var i={},n=function(){function e(){}return e.call=function(e,t){var r={};r.functionName=e,r.value=t,egret_native.sendInfoToPlugin(JSON.stringify(r))},e.addCallback=function(e,t){i[e]=t},e}();t.NativeExternalInterface=n,__reflect(n.prototype,"egret.web.NativeExternalInterface",["egret.ExternalInterface"]);var a=navigator.userAgent.toLowerCase();a.indexOf("egretnative")>=0&&(e.ExternalInterface=n,egret_native.receivedPluginInfo=r)}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(t){var r={},i=function(){function t(){}return t.call=function(e,t){__global.ExternalInterface.call(e,t)},t.addCallback=function(e,t){r[e]=t},t.invokeCallback=function(t,i){var n=r[t];n?n.call(null,i):e.$warn(1050,t)},t}();t.WebViewExternalInterface=i,__reflect(i.prototype,"egret.web.WebViewExternalInterface",["egret.ExternalInterface"]);var n=navigator.userAgent.toLowerCase();n.indexOf("egretwebview")>=0&&(e.ExternalInterface=i)}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e.loaded=!1,e}return __extends(i,r),Object.defineProperty(i.prototype,"length",{get:function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),i.prototype.load=function(t){function r(){i.$recycle(this.url,s),a(),c.indexOf("firefox")>=0&&(s.pause(),s.muted=!1),o.loaded=!0,o.dispatchEventWith(e.Event.COMPLETE)}function n(){a(),o.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}function a(){s.removeEventListener("canplaythrough",r),s.removeEventListener("error",n),c.indexOf("edge")>=0&&document.body.removeChild(s)}var o=this;this.url=t;var s=new Audio(t);s.addEventListener("canplaythrough",r),s.addEventListener("error",n);var c=navigator.userAgent.toLowerCase();c.indexOf("firefox")>=0&&(s.autoplay=!0,s.muted=!0),c.indexOf("edge")>=0&&document.body.appendChild(s),s.load(),this.originAudio=s,i.clearAudios[this.url]&&delete i.clearAudios[this.url]},i.prototype.play=function(r,n){r=+r||0,n=+n||0;var a=i.$pop(this.url);null==a&&(a=this.originAudio.cloneNode()),a.autoplay=!0;var o=new t.HtmlSoundChannel(a);return o.$url=this.url,o.$loops=n,o.$startTime=r,o.$play(),e.sys.$pushSoundChannel(o),o},i.prototype.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),i.$clear(this.url)},i.$clear=function(e){i.clearAudios[e]=!0;var t=i.audios[e];t&&(t.length=0)},i.$pop=function(e){var t=i.audios[e];return t&&t.length>0?t.pop():null},i.$recycle=function(e,t){if(!i.clearAudios[e]){var r=i.audios[e];null==i.audios[e]&&(r=i.audios[e]=[]),r.push(t)}},i.MUSIC="music",i.EFFECT="effect",i.audios={},i.clearAudios={},i}(e.EventDispatcher);t.HtmlSound=r,__reflect(r.prototype,"egret.web.HtmlSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(t){var i=r.call(this)||this;return i.$startTime=0,i.audio=null,i.isStopped=!1,i.canPlay=function(){i.audio.removeEventListener("canplay",i.canPlay);try{i.audio.currentTime=i.$startTime}catch(e){}finally{i.audio.play()}},i.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},i._volume=1,t.addEventListener("ended",i.onPlayEnd),i.audio=t,i}return __extends(i,r),i.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);try{this.audio.volume=this._volume,this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()},i.prototype.stop=function(){if(this.audio){this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0;var r=this.audio;r.removeEventListener("ended",this.onPlayEnd),r.removeEventListener("canplay",this.canPlay),r.volume=0,this._volume=0,this.audio=null;var i=this.$url;window.setTimeout(function(){r.pause(),t.HtmlSound.$recycle(i,r)},200)}},Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.audio&&(this.audio.volume=t)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.audio?this.audio.currentTime:0},enumerable:!0,configurable:!0}),i}(e.EventDispatcher);t.HtmlSoundChannel=r,__reflect(r.prototype,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function e(){}return e.decodeAudios=function(){if(!(e.decodeArr.length<=0||e.isDecoding)){e.isDecoding=!0;var t=e.decodeArr.shift();e.ctx.decodeAudioData(t.buffer,function(r){t.self.audioBuffer=r,t.success&&t.success(),e.isDecoding=!1,e.decodeAudios()},function(){alert("sound decode error: "+t.url+"\nsee http://edn.egret.com/cn/docs/page/156"),t.fail&&t.fail(),e.isDecoding=!1,e.decodeAudios()})}},e.decodeArr=[],e.isDecoding=!1,e}();t.WebAudioDecode=r,__reflect(r.prototype,"egret.web.WebAudioDecode");var i=function(i){function n(){var e=i.call(this)||this;return e.loaded=!1,e}return __extends(n,i),Object.defineProperty(n.prototype,"length",{get:function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),n.prototype.load=function(t){function i(){a.loaded=!0,a.dispatchEventWith(e.Event.COMPLETE)}function n(){a.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}var a=this;this.url=t;var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onreadystatechange=function(){if(4==o.readyState){var t=o.status>=400||0==o.status;t?a.dispatchEventWith(e.IOErrorEvent.IO_ERROR):(r.decodeArr.push({buffer:o.response,success:i,fail:n,self:a,url:a.url}),r.decodeAudios())}},o.send()},n.prototype.play=function(r,i){r=+r||0,i=+i||0;var n=new t.WebAudioSoundChannel;return n.$url=this.url,n.$loops=i,n.$audioBuffer=this.audioBuffer,n.$startTime=r,n.$play(),e.sys.$pushSoundChannel(n),n},n.prototype.close=function(){},n.MUSIC="music",n.EFFECT="effect",n}(e.EventDispatcher);t.WebAudioSound=i,__reflect(i.prototype,"egret.web.WebAudioSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var i=r.call(this)||this;return i.$startTime=0,i.bufferSource=null,i.context=t.WebAudioDecode.ctx,i.isStopped=!1,i._currentTime=0,i._volume=1,i.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},i._startTime=0,i.context.createGain?i.gain=i.context.createGain():i.gain=i.context.createGainNode(),i}return __extends(i,r),i.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var t=this.context,r=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.$audioBuffer,i.connect(r),r.connect(t.destination),i.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,i.start(0,this.$startTime),this._currentTime=0},i.prototype.stop=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.onended=null,t.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.gain.gain.value=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0},enumerable:!0,configurable:!0}),i}(e.EventDispatcher);t.WebAudioSoundChannel=r,__reflect(r.prototype,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i){void 0===i&&(i=!0);var n=t.call(this)||this;return n.loaded=!1,n.closed=!1,n.heightSet=0/0,n.widthSet=0/0,n.waiting=!1,n.userPause=!1,n.userPlay=!1,n.isPlayed=!1,n.screenChanged=function(t){var r=document.fullscreenEnabled||document.webkitIsFullScreen;r||(n.checkFullScreen(!1),e.Capabilities.isMobile||(n._fullscreen=r))},n._fullscreen=!0,n.onVideoLoaded=function(){n.video.removeEventListener("canplay",n.onVideoLoaded);var t=n.video;n.loaded=!0,n.posterData&&(n.posterData.width=n.getPlayWidth(),n.posterData.height=n.getPlayHeight()),t.width=t.videoWidth,t.height=t.videoHeight,window.setTimeout(function(){n.dispatchEventWith(e.Event.COMPLETE)},200)},n.$renderNode=new e.sys.BitmapNode,n.src=r,n.once(e.Event.ADDED_TO_STAGE,n.loadPoster,n),r&&n.load(),n}return __extends(r,t),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},r.prototype.load=function(t,r){var i=this;if(void 0===r&&(r=!0),t=t||this.src,this.src=t,!this.video||this.video.src!=t){var n;!this.video||e.Capabilities.isMobile?(n=document.createElement("video"),this.video=n,n.controls=null):n=this.video,n.src=t,n.setAttribute("autoplay","autoplay"),n.setAttribute("webkit-playsinline","true"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return i.onVideoError()}),n.addEventListener("ended",function(){return i.onVideoEnded()});var a=!1;n.addEventListener("canplay",function(){i.waiting=!1,a?i.userPause?i.pause():i.userPlay&&i.play():(a=!0,n.pause())}),n.addEventListener("waiting",function(){i.waiting=!0}),n.load(),this.videoPlay(),n.style.position="absolute",n.style.top="0px",n.style.zIndex="-88888",n.style.left="0px",n.height=1,n.width=1}},r.prototype.play=function(t,r){var i=this;if(void 0===r&&(r=!1),0==this.loaded)return this.load(this.src),void this.once(e.Event.COMPLETE,function(e){return i.play(t,r)},this);this.isPlayed=!0;var n=this.video;void 0!=t&&(n.currentTime=+t||0),n.loop=!!r,e.Capabilities.isMobile?n.style.zIndex="-88888":n.style.zIndex="9999",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.height=n.videoHeight,n.width=n.videoWidth,"Windows PC"!=e.Capabilities.os&&"Mac OS"!=e.Capabilities.os&&window.setTimeout(function(){n.width=0},1e3),this.checkFullScreen(this._fullscreen)},r.prototype.videoPlay=function(){return this.userPause=!1,this.waiting?void(this.userPlay=!0):(this.userPlay=!1,void this.video.play())},r.prototype.checkFullScreen=function(t){var r=this.video;if(t)null==r.parentElement&&(r.removeAttribute("webkit-playsinline"),document.body.appendChild(r)),e.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=r.parentElement&&r.parentElement.removeChild(r),r.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),e.startTick(this.markDirty,this),e.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();this.videoPlay()},r.prototype.goFullscreen=function(){var t,r=this.video;return t=e.web.getPrefixStyleName("requestFullscreen",r),r[t]||(t=e.web.getPrefixStyleName("requestFullScreen",r),r[t])?(r.removeAttribute("webkit-playsinline"),r[t](),this.setFullScreenMonitor(!0),!0):!0},r.prototype.setFullScreenMonitor=function(e){var t=this.video;e?(t.addEventListener("mozfullscreenchange",this.screenChanged),t.addEventListener("webkitfullscreenchange",this.screenChanged),t.addEventListener("mozfullscreenerror",this.screenError),t.addEventListener("webkitfullscreenerror",this.screenError)):(t.removeEventListener("mozfullscreenchange",this.screenChanged),t.removeEventListener("webkitfullscreenchange",this.screenChanged),t.removeEventListener("mozfullscreenerror",this.screenError),t.removeEventListener("webkitfullscreenerror",this.screenError))},r.prototype.screenError=function(){e.$error(3014)},r.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},r.prototype.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.dispatchEventWith(e.Event.ENDED)},r.prototype.onVideoError=function(){this.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},r.prototype.close=function(){var e=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return e.onVideoError()}),this.video.removeEventListener("ended",function(){return e.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},r.prototype.pause=function(){return this.userPlay=!1,this.waiting?void(this.userPause=!0):(this.userPause=!1,this.video.pause(),void e.stopTick(this.markDirty,this))},Object.defineProperty(r.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(e){this.video&&(this.video.volume=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.video?this.video.currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(t){e.Capabilities.isMobile||(this._fullscreen=!!t,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bitmapData",{get:function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=new e.BitmapData(this.video),this._bitmapData.$deleteSource=!1),this._bitmapData):null},enumerable:!0,configurable:!0}),r.prototype.loadPoster=function(){var t=this,r=this.poster;if(r){var i=new e.ImageLoader;i.once(e.Event.COMPLETE,function(r){i.data;if(t.posterData=i.data,t.$renderDirty=!0,t.posterData.width=t.getPlayWidth(),t.posterData.height=t.getPlayHeight(),e.nativeRender){var n=new e.Texture;n._setBitmapData(t.posterData),t.$nativeDisplayObject.setBitmapData(n)}},this),i.load(r)}},r.prototype.$measureContentBounds=function(e){var t=this.bitmapData,r=this.posterData;t?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):r?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):e.setEmpty()},r.prototype.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:0/0:this.widthSet},r.prototype.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:0/0:this.heightSet},r.prototype.$updateRenderNode=function(){var t=this.$renderNode,r=this.bitmapData,i=this.posterData,n=this.getPlayWidth(),a=this.getPlayHeight();this.isPlayed&&!e.Capabilities.isMobile||!i?this.isPlayed&&r&&(t.image=r,t.imageWidth=r.width,t.imageHeight=r.height,e.WebGLUtils.deleteWebGLTexture(r.webGLTexture),r.webGLTexture=null,t.drawImage(0,0,r.width,r.height,0,0,n,a)):(t.image=i,t.imageWidth=n,t.imageHeight=a,t.drawImage(0,0,i.width,i.height,0,0,n,a))},r.prototype.markDirty=function(){return this.$renderDirty=!0,!0},r.prototype.$setHeight=function(e){if(this.heightSet=e,this.paused){var r=this;this.$renderDirty=!0,window.setTimeout(function(){r.$renderDirty=!1},200)}t.prototype.$setHeight.call(this,e)},r.prototype.$setWidth=function(e){if(this.widthSet=e,this.paused){var r=this;this.$renderDirty=!0,window.setTimeout(function(){r.$renderDirty=!1},200)}t.prototype.$setWidth.call(this,e)},Object.defineProperty(r.prototype,"paused",{get:function(){return this.video?this.video.paused:!0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")},enumerable:!0,configurable:!0}),r}(e.DisplayObject);t.WebVideo=r,__reflect(r.prototype,"egret.web.WebVideo",["egret.Video","egret.DisplayObject"]),e.Video=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var e=t.call(this)||this;return e._url="",e._method="",e}return __extends(r,t),Object.defineProperty(r.prototype,"response",{get:function(){if(!this._xhr)return null;if(void 0!=this._xhr.response)return this._xhr.response;if("text"==this._responseType)return this._xhr.responseText;if("arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)){var e=window;return e.convertResponseBodyToText(this._xhr.responseBody)}return"document"==this._responseType?this._xhr.responseXML:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"responseType",{get:function(){return this._responseType},set:function(e){this._responseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(e){this._withCredentials=e},enumerable:!0,configurable:!0}),r.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},r.prototype.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},r.prototype.send=function(e){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var t in this.headerObj)this._xhr.setRequestHeader(t,this.headerObj[t]);this._xhr.send(e)},r.prototype.abort=function(){this._xhr&&this._xhr.abort()},r.prototype.getAllResponseHeaders=function(){if(!this._xhr)return null;var e=this._xhr.getAllResponseHeaders();return e?e:""},r.prototype.setRequestHeader=function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},r.prototype.getResponseHeader=function(e){if(!this._xhr)return null;var t=this._xhr.getResponseHeader(e);return t?t:""},r.prototype.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var r=t.status>=400||0==t.status,i=(this._url,this);window.setTimeout(function(){r?i.dispatchEventWith(e.IOErrorEvent.IO_ERROR):i.dispatchEventWith(e.Event.COMPLETE)},0)}},r.prototype.updateProgress=function(t){t.lengthComputable&&e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.PROGRESS,t.loaded,t.total)},r}(e.EventDispatcher);t.WebHttpRequest=r,__reflect(r.prototype,"egret.web.WebHttpRequest",["egret.HttpRequest"]),e.HttpRequest=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=window.URL||window.webkitURL,i=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.data=null,e._crossOrigin=null,e._hasCrossOriginSet=!1,e.currentImage=null,e.request=null,e}return __extends(n,i),Object.defineProperty(n.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(e){this._hasCrossOriginSet=!0,this._crossOrigin=e},enumerable:!0,configurable:!0}),n.prototype.load=function(r){if(t.Html5Capatibility._canUseBlob&&0!=r.indexOf("wxLocalResource:")&&0!=r.indexOf("data:")&&0!=r.indexOf("http:")&&0!=r.indexOf("https:")){var i=this.request;i||(i=this.request=new e.web.WebHttpRequest,i.addEventListener(e.Event.COMPLETE,this.onBlobLoaded,this),i.addEventListener(e.IOErrorEvent.IO_ERROR,this.onBlobError,this),i.responseType="blob"),i.open(r),i.send()}else this.loadImage(r)},n.prototype.onBlobLoaded=function(e){var t=this.request.response;this.request=void 0,this.loadImage(r.createObjectURL(t))},n.prototype.onBlobError=function(e){this.dispatchIOError(this.currentURL),this.request=void 0},n.prototype.loadImage=function(e){var t=new Image;this.data=null,this.currentImage=t,this._hasCrossOriginSet?this._crossOrigin&&(t.crossOrigin=this._crossOrigin):n.crossOrigin&&(t.crossOrigin=n.crossOrigin),t.onload=this.onImageComplete.bind(this),t.onerror=this.onLoadError.bind(this),t.src=e},n.prototype.onImageComplete=function(t){var r=this.getImage(t);if(r){this.data=new e.BitmapData(r);var i=this;window.setTimeout(function(){i.dispatchEventWith(e.Event.COMPLETE)},0)}},n.prototype.onLoadError=function(e){var t=this.getImage(e);t&&this.dispatchIOError(t.src)},n.prototype.dispatchIOError=function(t){var r=this;window.setTimeout(function(){r.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},0)},n.prototype.getImage=function(t){var i=t.target,n=i.src;if(0==n.indexOf("blob:"))try{r.revokeObjectURL(i.src)}catch(a){e.$warn(1037)}return i.onerror=null,i.onload=null,this.currentImage!==i?null:(this.currentImage=null,i)},n.crossOrigin=null,n}(e.EventDispatcher);t.WebImageLoader=i,__reflect(i.prototype,"egret.web.WebImageLoader",["egret.ImageLoader"]),e.ImageLoader=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var e=t.call(this)||this;return e._isNeedShow=!1,e.inputElement=null,e.inputDiv=null,e._gscaleX=0,e._gscaleY=0,e.textValue="",e.colorValue=16777215,e._styleInfoes={},e}return __extends(r,t),r.prototype.$setTextField=function(e){return this.$textfield=e,!0},r.prototype.$addToStage=function(){this.htmlInput=e.web.$getTextAdapter(this.$textfield)},r.prototype._initElement=function(){var t=this.$textfield.localToGlobal(0,0),r=t.x,i=t.y,n=this.htmlInput.$scaleX,a=this.htmlInput.$scaleY;this.inputDiv.style.left=r*n+"px",this.inputDiv.style.top=i*a+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=i*a+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*a+"px"):(this.inputDiv.style.top=i*a+"px",this.inputElement.style.top="0px");for(var o=this.$textfield,s=1,c=1,l=0;o.parent;)s*=o.scaleX,c*=o.scaleY,l+=o.rotation,o=o.parent;var h=e.web.getPrefixStyleName("transform");this.inputDiv.style[h]="rotate("+l+"deg)",this._gscaleX=n*s,this._gscaleY=a*c},r.prototype.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},r.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},r.prototype.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},r.prototype.$hide=function(){this.htmlInput&&this.htmlInput.disconnectStageText(this)},r.prototype.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},r.prototype.$setText=function(e){return this.textValue=e,this.resetText(),!0},r.prototype.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},r.prototype.$setColor=function(e){return this.colorValue=e,this.resetColor(),!0},r.prototype.resetColor=function(){this.inputElement&&this.setElementStyle("color",e.toColorString(this.colorValue))},r.prototype.$onBlur=function(){},r.prototype._onInput=function(){var t=this;window.setTimeout(function(){t.inputElement&&t.inputElement.selectionStart==t.inputElement.selectionEnd&&(t.textValue=t.inputElement.value,e.Event.dispatchEvent(t,"updateText",!1))},0)},r.prototype.setAreaHeight=function(){var t=this.$textfield;if(t.multiline){var r=e.TextFieldUtils.$getTextHeight(t);if(t.height<=t.size)this.setElementStyle("height",t.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.size*this._gscaleY+"px");else if(t.height<r)this.setElementStyle("height",t.height*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px");else{this.setElementStyle("height",(r+t.lineSpacing)*this._gscaleY+"px");var i=(t.height-r)*this._gscaleY,n=e.TextFieldUtils.$getValign(t),a=i*n,o=i-a;this.setElementStyle("padding",a+"px 0px "+o+"px 0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px")}}},r.prototype._onClickHandler=function(t){this._isNeedShow&&(t.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new e.Event("focus")))},r.prototype._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new e.Event("blur"))},r.prototype.setElementStyle=function(e,t){this.inputElement&&this._styleInfoes[e]!=t&&(this.inputElement.style[e]=t)},r.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},r.prototype.$resetStageText=function(){if(this.inputElement){var t=this.$textfield;this.setElementStyle("fontFamily",t.fontFamily),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.textAlign),this.setElementStyle("fontSize",t.size*this._gscaleY+"px"),this.setElementStyle("color",e.toColorString(t.textColor));var r=void 0;if(t.stage?(r=t.localToGlobal(0,0).x,r=Math.min(t.width,t.stage.stageWidth-r)):r=t.width,this.setElementStyle("width",r*this._gscaleX+"px"),this.setElementStyle("verticalAlign",t.verticalAlign),t.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",t.size*this._gscaleY+"px"),t.height<t.size){this.setElementStyle("height",t.size*this._gscaleY+"px");var i=t.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+i+"px 0px")}else{this.setElementStyle("height",t.size*this._gscaleY+"px");var n=(t.height-t.size)*this._gscaleY,a=e.TextFieldUtils.$getValign(t),o=n*a,i=n-o;i<t.size/2*this._gscaleY&&(i=t.size/2*this._gscaleY),this.setElementStyle("padding",o+"px 0px "+i+"px 0px")}this.inputDiv.style.clip="rect(0px "+t.width*this._gscaleX+"px "+t.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=t.height*this._gscaleY+"px",this.inputDiv.style.width=r*this._gscaleX+"px"}},r}(e.EventDispatcher);t.HTML5StageText=r,__reflect(r.prototype,"egret.web.HTML5StageText",["egret.StageText"]),e.StageText=r}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(t){var r=function(){function t(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}return t.prototype.isInputOn=function(){return null!=this._stageText},t.prototype.isCurrentStageText=function(e){return this._stageText==e},t.prototype.initValue=function(e){e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border="none",e.style.padding="0"},t.prototype.$updateSize=function(){if(this.canvas){this.$scaleX=e.sys.DisplayList.$canvasScaleX,this.$scaleY=e.sys.DisplayList.$canvasScaleY,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var t=e.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[t]=this.canvas.style[t],this.StageDelegateDiv.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},t.prototype._initStageDelegateDiv=function(t,r){this.canvas=r;var i,n=this;i||(i=document.createElement("div"),this.StageDelegateDiv=i,i.id="StageDelegateDiv",t.appendChild(i),n.initValue(i),n._inputDIV=document.createElement("div"),n.initValue(n._inputDIV),n._inputDIV.style.width="0px",n._inputDIV.style.height="0px",n._inputDIV.style.left="0px",n._inputDIV.style.top="-100px",n._inputDIV.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",i.appendChild(n._inputDIV),this.canvas.addEventListener("click",function(e){n._needShow?(n._needShow=!1,n._stageText._onClickHandler(e),n.show()):n._inputElement&&(n.clearInputElement(),n._inputElement.blur(),n._inputElement=null)}),n.initInputElement(!0),n.initInputElement(!1))},t.prototype.initInputElement=function(e){var t,r=this;e?(t=document.createElement("textarea"),t.style.resize="none",r._multiElement=t,t.id="egretTextarea"):(t=document.createElement("input"),r._simpleElement=t,t.id="egretInput"),t.type="text",r._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",r.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){r._stageText&&r._stageText._onInput()}},t.prototype.show=function(){var t=this,r=t._inputElement;e.$callAsync(function(){r.style.opacity=1},t)},t.prototype.disconnectStageText=function(e){(null==this._stageText||this._stageText==e)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur()),this._needShow=!1},t.prototype.clearInputElement=function(){var e=this;if(e._inputElement){e._inputElement.value="",e._inputElement.onblur=null,e._inputElement.style.width="1px",e._inputElement.style.height="12px",e._inputElement.style.left="0px",e._inputElement.style.top="0px",e._inputElement.style.opacity=0;var t=void 0;t=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,t.style.display="block",e._inputDIV.style.left="0px",e._inputDIV.style.top="-100px",e._inputDIV.style.height="0px",e._inputDIV.style.width="0px"}e._stageText&&(e._stageText._onDisconnect(),e._stageText=null,this.canvas.userTyping=!1)},t.prototype.getInputElement=function(e){var t=this;t.clearInputElement(),t._stageText=e,this.canvas.userTyping=!0,t._stageText.$textfield.multiline?t._inputElement=t._multiElement:t._inputElement=t._simpleElement;var r;return r=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,r.style.display="none",t._inputElement},t}();t.HTMLInput=r,__reflect(r.prototype,"egret.web.HTMLInput")}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(e){function t(e){var t=e.stage?e.stage.$hashCode:0,r=i[t],o=n[t],s=a[t];return o&&s&&(delete n[t],delete a[t]),r}function r(e,t,r,o){e._initStageDelegateDiv(r,o),i[t.$hashCode]=e,n[t.$hashCode]=o,a[t.$hashCode]=r}var i={},n={},a={};e.$getTextAdapter=t,e.$cacheTextAdapter=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t,r,a,o){n||i();var s="";return o&&(s+="italic "),a&&(s+="bold "),s+=(r||12)+"px ",s+=t||"Arial",n.font=s,n.measureText(e).width}function i(){n=e.sys.canvasHitTestBuffer.context,n.textAlign="left",n.textBaseline="middle"}var n=null;e.sys.measureText=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(e,t){var r=document.createElement("canvas");
isNaN(e)||isNaN(t)||(r.width=e,r.height=t);var i=r.getContext("2d");if(void 0===i.imageSmoothingEnabled){for(var n,a=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],o=a.length-1;o>=0&&(n=a[o],void 0===i[n]);o--);try{Object.defineProperty(i,"imageSmoothingEnabled",{get:function(){return this[n]},set:function(e){this[n]=e}})}catch(s){i.imageSmoothingEnabled=i[n]}}return r}var r=function(){function e(e,r,i){this.surface=t(e,r),this.context=this.surface.getContext("2d"),this.context&&(this.context.$offsetX=0,this.context.$offsetY=0)}return Object.defineProperty(e.prototype,"width",{get:function(){return this.surface.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.surface.height},enumerable:!0,configurable:!0}),e.prototype.resize=function(e,t,r){var i=this.surface;if(r){var n=!1;i.width<e&&(i.width=e,n=!0),i.height<t&&(i.height=t,n=!0),n||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else i.width!=e&&(i.width=e),i.height!=t&&(i.height=t);this.clear()},e.prototype.getPixels=function(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=1),this.context.getImageData(e,t,r,i).data},e.prototype.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},e.prototype.destroy=function(){this.surface.width=this.surface.height=0},e}();e.CanvasRenderBuffer=r,__reflect(r.prototype,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i){var n=t.call(this)||this;return n.onTouchBegin=function(e){var t=n.getLocation(e);n.touch.onTouchBegin(t.x,t.y,e.identifier)},n.onMouseMove=function(e){0==e.buttons?n.onTouchEnd(e):n.onTouchMove(e)},n.onTouchMove=function(e){var t=n.getLocation(e);n.touch.onTouchMove(t.x,t.y,e.identifier)},n.onTouchEnd=function(e){var t=n.getLocation(e);n.touch.onTouchEnd(t.x,t.y,e.identifier)},n.scaleX=1,n.scaleY=1,n.rotation=0,n.canvas=i,n.touch=new e.sys.TouchHandler(r),n.addListeners(),n}return __extends(r,t),r.prototype.addListeners=function(){var t=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(e){e.identifier=e.pointerId,t.onTouchBegin(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerMove",function(e){e.identifier=e.pointerId,t.onTouchMove(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerUp",function(e){e.identifier=e.pointerId,t.onTouchEnd(e),t.prevent(e)},!1)):(e.Capabilities.isMobile||this.addMouseListener(),this.addTouchListener())},r.prototype.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},r.prototype.addTouchListener=function(){var e=this;this.canvas.addEventListener("touchstart",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchBegin(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchmove",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchMove(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchend",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchEnd(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchcancel",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchEnd(t.changedTouches[i]);e.prevent(t)},!1)},r.prototype.prevent=function(e){e.stopPropagation(),1==e.isScroll||this.canvas.userTyping||e.preventDefault()},r.prototype.getLocation=function(t){t.identifier=+t.identifier||0;var r=document.documentElement,i=this.canvas.getBoundingClientRect(),n=i.left+window.pageXOffset-r.clientLeft,a=i.top+window.pageYOffset-r.clientTop,o=t.pageX-n,s=o,c=t.pageY-a,l=c;return 90==this.rotation?(s=c,l=i.width-o):-90==this.rotation&&(s=i.height-c,l=o),s/=this.scaleX,l/=this.scaleY,e.$TempPoint.setTo(Math.round(s),Math.round(l))},r.prototype.updateScaleMode=function(e,t,r){this.scaleX=e,this.scaleY=t,this.rotation=r},r.prototype.$updateMaxTouches=function(){this.touch.$initMaxTouches()},r}(e.HashObject);t.WebTouchHandler=r,__reflect(r.prototype,"egret.web.WebTouchHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){e.WebLifeCycleHandler=function(e){var t=function(){document[r]?e.pause():e.resume()};window.addEventListener("focus",e.resume,!1),window.addEventListener("blur",e.pause,!1);var r,i;"undefined"!=typeof document.hidden?(r="hidden",i="visibilitychange"):"undefined"!=typeof document.mozHidden?(r="mozHidden",i="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(r="webkitHidden",i="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(r="oHidden",i="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",e.resume,!1),window.addEventListener("pagehide",e.pause,!1)),r&&i&&document.addEventListener(i,t,!1);var n=navigator.userAgent,a=/micromessenger/gi.test(n),o=/mqq/gi.test(n),s=/mobile.*qq/gi.test(n);if((s||a)&&(o=!1),o){var c=window.browser||{};c.execWebFn=c.execWebFn||{},c.execWebFn.postX5GamePlayerMessage=function(t){var r=t.type;"app_enter_background"==r?e.pause():"app_enter_foreground"==r&&e.resume()},window.browser=c}}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t){var r="";if(null!=t)r=i(e,t);else{if(null==o){var n=document.createElement("div").style;o=i("transform",n)}r=o}return""==r?e:r+e.charAt(0).toUpperCase()+e.substring(1,e.length)}function i(e,t){if(e in t)return"";e=e.charAt(0).toUpperCase()+e.substring(1,e.length);for(var r=["webkit","ms","Moz","O"],i=0;i<r.length;i++){var n=r[i]+e;if(n in t)return r[i]}return""}var n=function(){function e(){}return e.WEB_AUDIO=2,e.HTML5_AUDIO=3,e}();t.AudioType=n,__reflect(n.prototype,"egret.web.AudioType");var a=function(r){function i(){return r.call(this)||this}return __extends(i,r),i.$init=function(){var r=navigator.userAgent.toLowerCase();i.ua=r,i._canUseBlob=!1;var a=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;if(a)try{t.WebAudioDecode.ctx=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)}catch(o){a=!1}var s,c=i._audioType;c==n.WEB_AUDIO&&a||c==n.HTML5_AUDIO?(s=!1,i.setAudioType(c)):(s=!0,i.setAudioType(n.HTML5_AUDIO)),r.indexOf("android")>=0?s&&a&&i.setAudioType(n.WEB_AUDIO):(r.indexOf("iphone")>=0||r.indexOf("ipad")>=0||r.indexOf("ipod")>=0)&&i.getIOSVersion()>=7&&(i._canUseBlob=!0,s&&a&&i.setAudioType(n.WEB_AUDIO));var l=window.URL||window.webkitURL;l||(i._canUseBlob=!1),r.indexOf("egretnative")>=0&&(i.setAudioType(n.HTML5_AUDIO),i._canUseBlob=!0),e.Sound=i._AudioClass},i.setAudioType=function(t){switch(i._audioType=t,t){case n.WEB_AUDIO:i._AudioClass=e.web.WebAudioSound;break;case n.HTML5_AUDIO:i._AudioClass=e.web.HtmlSound}},i.getIOSVersion=function(){var e=i.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/);if(!e||0==e.length)return 0;var t=e[0];return parseInt(t.match(/\d+(_\d)*/)[0])||0},i._canUseBlob=!1,i._audioType=0,i.ua="",i}(e.HashObject);t.Html5Capatibility=a,__reflect(a.prototype,"egret.web.Html5Capatibility");var o=null;t.getPrefixStyleName=r,t.getPrefix=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(){if(s)for(var e=document.querySelectorAll(".egret-player"),t=e.length,r=0;t>r;r++){var i=e[r],n=i["egret-player"];n.updateScreenSize()}}function i(r){if(!s){s=!0,r||(r={});var i=navigator.userAgent.toLowerCase();if(i.indexOf("egretnative")>=0&&-1==i.indexOf("egretwebview")&&(e.Capabilities.runtimeType=e.RuntimeType.RUNTIME2),i.indexOf("egretnative")>=0&&e.nativeRender)egret_native.addModuleCallback(function(){if(t.Html5Capatibility.$init(),"webgl"==r.renderMode){var i=r.antialias;t.WebGLRenderContext.antialias=!!i}e.sys.CanvasRenderBuffer=t.CanvasRenderBuffer,n(r.renderMode),egret_native.nrSetRenderMode(2);var s;s=r.canvasScaleFactor?r.canvasScaleFactor:r.calculateCanvasScaleFactor?r.calculateCanvasScaleFactor(e.sys.canvasHitTestBuffer.context):window.devicePixelRatio,e.sys.DisplayList.$canvasScaleFactor=s;var l=e.ticker;a(l),r.screenAdapter?e.sys.screenAdapter=r.screenAdapter:e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.DefaultScreenAdapter);for(var h=document.querySelectorAll(".egret-player"),u=h.length,d=0;u>d;d++){var f=h[d],p=new t.WebPlayer(f,r);f["egret-player"]=p}window.addEventListener("resize",function(){isNaN(c)&&(c=window.setTimeout(o,300))})},null),egret_native.initNativeRender();else{t.Html5Capatibility._audioType=r.audioType,t.Html5Capatibility.$init();var l=r.renderMode;if("webgl"==l){var h=r.antialias;t.WebGLRenderContext.antialias=!!h}e.sys.CanvasRenderBuffer=t.CanvasRenderBuffer,i.indexOf("egretnative")>=0&&"webgl"!=l&&(e.$warn(1051),l="webgl"),n(l);var u=void 0;if(r.canvasScaleFactor)u=r.canvasScaleFactor;else if(r.calculateCanvasScaleFactor)u=r.calculateCanvasScaleFactor(e.sys.canvasHitTestBuffer.context);else{var d=e.sys.canvasHitTestBuffer.context,f=d.backingStorePixelRatio||d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;u=(window.devicePixelRatio||1)/f}e.sys.DisplayList.$canvasScaleFactor=u;var p=e.ticker;a(p),r.screenAdapter?e.sys.screenAdapter=r.screenAdapter:e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.DefaultScreenAdapter);for(var v=document.querySelectorAll(".egret-player"),g=v.length,y=0;g>y;y++){var x=v[y],m=new t.WebPlayer(x,r);x["egret-player"]=m}window.addEventListener("resize",function(){isNaN(c)&&(c=window.setTimeout(o,300))})}}}function n(r){"webgl"==r&&e.WebGLUtils.checkCanUseWebGL()?(e.sys.RenderBuffer=t.WebGLRenderBuffer,e.sys.systemRenderer=new t.WebGLRenderer,e.sys.canvasRenderer=new e.CanvasRenderer,e.sys.customHitTestBuffer=new t.WebGLRenderBuffer(3,3),e.sys.canvasHitTestBuffer=new t.CanvasRenderBuffer(3,3),e.Capabilities.renderMode="webgl"):(e.sys.RenderBuffer=t.CanvasRenderBuffer,e.sys.systemRenderer=new e.CanvasRenderer,e.sys.canvasRenderer=e.sys.systemRenderer,e.sys.customHitTestBuffer=new t.CanvasRenderBuffer(3,3),e.sys.canvasHitTestBuffer=e.sys.customHitTestBuffer,e.Capabilities.renderMode="canvas")}function a(e){function t(){e.update(),r(t)}var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;r||(r=function(e){return window.setTimeout(e,1e3/60)}),r(t)}function o(){c=0/0,e.updateAllScreens()}var s=!1;window.isNaN=function(e){return e=+e,e!==e},e.runEgret=i,e.updateAllScreens=r;var c=0/0}(t=e.web||(e.web={}))}(egret||(egret={}));var language,egret;!function(e){var t;!function(t){var r=function(){function t(){}return t.detect=function(){var r=e.Capabilities,i=navigator.userAgent.toLowerCase();r.isMobile=-1!=i.indexOf("mobile")||-1!=i.indexOf("android"),r.isMobile?i.indexOf("windows")<0&&(-1!=i.indexOf("iphone")||-1!=i.indexOf("ipad")||-1!=i.indexOf("ipod"))?r.os="iOS":-1!=i.indexOf("android")&&-1!=i.indexOf("linux")?r.os="Android":-1!=i.indexOf("windows")&&(r.os="Windows Phone"):-1!=i.indexOf("windows nt")?r.os="Windows PC":-1!=i.indexOf("mac os")&&(r.os="Mac OS");var n=(navigator.language||navigator.browserLanguage).toLowerCase(),a=n.split("-");a.length>1&&(a[1]=a[1].toUpperCase()),r.language=a.join("-"),t.injectUIntFixOnIE9()},t.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var e="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n</script>\r\n<!-- convertResponseBodyToText -->\r\n<script>\r\nlet convertResponseBodyToText = function (binary) {\r\n   let byteMapping = {};\r\n   for ( let i = 0; i < 256; i++ ) {\r\n       for ( let j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   let rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   let lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n</script>\r\n";document.write(e)}},t}();t.WebCapability=r,__reflect(r.prototype,"egret.web.WebCapability"),r.detect()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function t(t,r,i,n,a){if(this.showPanle=!0,this.fpsHeight=0,this.WIDTH=101,this.HEIGHT=20,this.bgCanvasColor="#18304b",this.fpsFrontColor="#18fefe",this.WIDTH_COST=50,this.cost1Color="#18fefe",this.cost3Color="#ff0000",this.arrFps=[],this.arrCost=[],this.arrLog=[],r||i){"canvas"==e.Capabilities.renderMode?this.renderMode="Canvas":this.renderMode="WebGL",this.panelX=void 0===a.x?0:parseInt(a.x),this.panelY=void 0===a.y?0:parseInt(a.y),this.fontColor=void 0===a.textColor?"#ffffff":a.textColor.replace("0x","#"),this.fontSize=void 0===a.size?12:parseInt(a.size),e.Capabilities.isMobile&&(this.fontSize-=2);var o=document.createElement("div");o.style.position="absolute",o.style.background="rgba(0,0,0,"+a.bgAlpha+")",o.style.left=this.panelX+"px",o.style.top=this.panelY+"px",o.style.pointerEvents="none",document.body.appendChild(o);var s=document.createElement("div");s.style.color=this.fontColor,s.style.fontSize=this.fontSize+"px",s.style.lineHeight=this.fontSize+"px",s.style.margin="4px 4px 4px 4px",this.container=s,o.appendChild(s),r&&this.addFps(),i&&this.addLog()}}return t.prototype.addFps=function(){var e=document.createElement("div");e.style.display="inline-block",this.containerFps=e,this.container.appendChild(e);var t=document.createElement("div");t.style.paddingBottom="2px",this.fps=t,this.containerFps.appendChild(t),t.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var r=document.createElement("canvas");this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,this.canvasFps=r;var i=r.getContext("2d");this.contextFps=i,i.fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT);var n=document.createElement("div");this.divDatas=n,this.containerFps.appendChild(n);var a=document.createElement("div");a.style["float"]="left",a.innerHTML="Draw<br/>Cost",n.appendChild(a);var o=document.createElement("div");o.style.paddingLeft=a.offsetWidth+20+"px",n.appendChild(o);var s=document.createElement("div");this.divDraw=s,s.innerHTML="0<br/>",o.appendChild(s);var c=document.createElement("div");this.divCost=c,c.innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',o.appendChild(c),r=document.createElement("canvas"),this.canvasCost=r,this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,i=r.getContext("2d"),this.contextCost=i,i.fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT),i.fillStyle="#000000",i.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},t.prototype.addLog=function(){var e=document.createElement("div");e.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",e.style.wordWrap="break-word",this.log=e,this.container.appendChild(e)},t.prototype.update=function(e,t){void 0===t&&(t=!1);var r,i,n;t?(r=this.arrFps[this.arrFps.length-1],i=this.arrCost[this.arrCost.length-1][0],n=this.arrCost[this.arrCost.length-1][1]):(r=e.fps,i=e.costTicker,n=e.costRender,this.lastNumDraw=e.draw,this.arrFps.push(r),this.arrCost.push([i,n]));var a=0,o=this.arrFps.length;o>101&&(o=101,this.arrFps.shift(),this.arrCost.shift());for(var s=this.arrFps[0],c=this.arrFps[0],l=0;o>l;l++){var h=this.arrFps[l];a+=h,s>h?s=h:h>c&&(c=h)}var u=this.WIDTH,d=this.HEIGHT,f=this.contextFps;f.drawImage(this.canvasFps,1,0,u-1,d,0,0,u-1,d),f.fillStyle=this.bgCanvasColor,f.fillRect(u-1,0,1,d);var p=Math.floor(r/60*20);1>p&&(p=1),f.fillStyle=this.fpsFrontColor,f.fillRect(u-1,20-p,1,p);var v=this.WIDTH_COST;f=this.contextCost,f.drawImage(this.canvasCost,1,0,v-1,d,0,0,v-1,d),f.drawImage(this.canvasCost,v+2,0,v-1,d,v+1,0,v-1,d);var g=Math.floor(i/2);1>g?g=1:g>20&&(g=20);var y=Math.floor(n/2);1>y?y=1:y>20&&(y=20),f.fillStyle=this.bgCanvasColor,f.fillRect(v-1,0,1,d),f.fillRect(2*v,0,1,d),f.fillRect(3*v+1,0,1,d),f.fillStyle=this.cost1Color,f.fillRect(v-1,20-g,1,g),f.fillStyle=this.cost3Color,f.fillRect(2*v,20-y,1,y);var x=Math.floor(a/o),m=r+" FPS "+this.renderMode;this.showPanle&&(m+="<br/>min"+s+" max"+c+" avg"+x,this.divDraw.innerHTML=this.lastNumDraw+"<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+i+'<font/> <font  style="color:#ff0000">'+n+"<font/>"),this.fps.innerHTML=m},t.prototype.updateInfo=function(e){this.arrLog.push(e),this.updateLogLayout()},t.prototype.updateWarn=function(e){this.arrLog.push("[Warning]"+e),this.updateLogLayout()},t.prototype.updateError=function(e){this.arrLog.push("[Error]"+e),this.updateLogLayout()},t.prototype.updateLogLayout=function(){for(this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},t}();t.WebFps=r,__reflect(r.prototype,"egret.web.WebFps",["egret.FPSDisplay"]),e.FPSDisplay=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r;!function(r){function i(e){return window.localStorage.getItem(e)}function n(t,r){try{return window.localStorage.setItem(t,r),!0}catch(i){return e.$warn(1047,t,r),!1}}function a(e){window.localStorage.removeItem(e)}function o(){window.localStorage.clear()}t.getItem=i,t.setItem=n,t.removeItem=a,t.clear=o}(r=t.web||(t.web={}))}(t=e.localStorage||(e.localStorage={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(e,t){var i=r.call(this)||this;return i.init(e,t),i.initOrientation(),i}return __extends(i,r),i.prototype.init=function(r,i){var n=this.readOption(r,i),a=new e.Stage;a.$screen=this,a.$scaleMode=n.scaleMode,a.$orientation=n.orientation,a.$maxTouches=n.maxTouches,a.frameRate=n.frameRate,a.textureScaleFactor=n.textureScaleFactor;var o=new e.sys.RenderBuffer(void 0,void 0,!0),s=o.surface;this.attachCanvas(r,s);var c=new t.WebTouchHandler(a,s),l=new e.sys.Player(o,a,n.entryClassName);e.lifecycle.stage=a,e.lifecycle.addLifecycleListener(t.WebLifeCycleHandler);var h=new t.HTMLInput;(n.showFPS||n.showLog)&&(e.nativeRender||l.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles)),this.playerOption=n,this.container=r,this.canvas=s,this.stage=a,this.player=l,this.webTouchHandler=c,this.webInput=h,e.web.$cacheTextAdapter(h,a,r,s),this.updateScreenSize(),this.updateMaxTouches(),l.start()},i.prototype.initOrientation=function(){var t=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){e.StageOrientationEvent.dispatchStageOrientationEvent(t.stage,e.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},i.prototype.readOption=function(t,r){var i={};i.entryClassName=t.getAttribute("data-entry-class"),i.scaleMode=t.getAttribute("data-scale-mode")||e.StageScaleMode.NO_SCALE,i.frameRate=+t.getAttribute("data-frame-rate")||30,i.contentWidth=+t.getAttribute("data-content-width")||480,i.contentHeight=+t.getAttribute("data-content-height")||800,i.orientation=t.getAttribute("data-orientation")||e.OrientationMode.AUTO,i.maxTouches=+t.getAttribute("data-multi-fingered")||2,i.textureScaleFactor=+t.getAttribute("texture-scale-factor")||1,i.showFPS="true"==t.getAttribute("data-show-fps");for(var n=t.getAttribute("data-show-fps-style")||"",a=n.split(","),o={},s=0;s<a.length;s++){var c=a[s].split(":");o[c[0]]=c[1]}return i.fpsStyles=o,i.showLog="true"==t.getAttribute("data-show-log"),i.logFilter=t.getAttribute("data-log-filter"),i},i.prototype.attachCanvas=function(e,t){var r=t.style;r.cursor="inherit",r.position="absolute",r.top="0",r.bottom="0",r.left="0",r.right="0",e.appendChild(t),r=e.style,r.overflow="hidden",r.position="absolute"},i.prototype.updateScreenSize=function(){var t=this.canvas;if(!t.userTyping){var r=this.playerOption,i=this.container.getBoundingClientRect(),n=0,a=i.width,o=i.height;if(0!=a&&0!=o){i.top<0&&(o+=i.top,n=-i.top);var s=!1,c=this.stage.$orientation;c!=e.OrientationMode.AUTO&&(s=c!=e.OrientationMode.PORTRAIT&&o>a||c==e.OrientationMode.PORTRAIT&&a>o);var l=s?o:a,h=s?a:o;e.Capabilities.boundingClientWidth=l,e.Capabilities.boundingClientHeight=h;var u=e.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,l,h,r.contentWidth,r.contentHeight),d=u.stageWidth,f=u.stageHeight,p=u.displayWidth,v=u.displayHeight;t.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",t.width!=d&&(t.width=d),t.height!=f&&(t.height=f);var g=0;s?c==e.OrientationMode.LANDSCAPE?(g=90,t.style.top=n+(o-p)/2+"px",t.style.left=(a+v)/2+"px"):(g=-90,t.style.top=n+(o+p)/2+"px",t.style.left=(a-v)/2+"px"):(t.style.top=n+(o-v)/2+"px",t.style.left=(a-p)/2+"px");var y=p/d,x=v/f,m=y*e.sys.DisplayList.$canvasScaleFactor,b=x*e.sys.DisplayList.$canvasScaleFactor;"canvas"==e.Capabilities.renderMode&&(m=Math.ceil(m),b=Math.ceil(b));var w=e.Matrix.create();w.identity(),w.scale(y/m,x/b),w.rotate(g*Math.PI/180);var E="matrix("+w.a+","+w.b+","+w.c+","+w.d+","+w.tx+","+w.ty+")";e.Matrix.release(w),t.style[e.web.getPrefixStyleName("transform")]=E,e.sys.DisplayList.$setCanvasScale(m,b),this.webTouchHandler.updateScaleMode(y,x,g),this.webInput.$updateSize(),this.player.updateStageSize(d,f),e.nativeRender&&(t.width=d*m,t.height=f*b)}}},i.prototype.setContentSize=function(e,t){var r=this.playerOption;r.contentWidth=e,r.contentHeight=t,this.updateScreenSize()},i.prototype.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},i}(e.HashObject);t.WebPlayer=r,__reflect(r.prototype,"egret.web.WebPlayer",["egret.sys.Screen"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(t,r){s||(s=document.createElement("canvas"),c=s.getContext("2d"));var i=t.$getTextureWidth(),n=t.$getTextureHeight();null==r&&(r=e.$TempRectangle,r.x=0,r.y=0,r.width=i,r.height=n),r.x=Math.min(r.x,i-1),r.y=Math.min(r.y,n-1),r.width=Math.min(r.width,i-r.x),r.height=Math.min(r.height,n-r.y);var a=r.width,o=r.height,l=s;if(l.style.width=a+"px",l.style.height=o+"px",s.width=a,s.height=o,"webgl"==e.Capabilities.renderMode){var h=void 0;t.$renderBuffer?h=t:(h=new e.RenderTexture,h.drawToTexture(new e.Bitmap(t)));for(var u=h.$renderBuffer.getPixels(r.x,r.y,a,o),d=new ImageData(a,o),f=0;f<u.length;f++)d.data[f]=u[f];return c.putImageData(d,0,0),t.$renderBuffer||h.dispose(),l}var p=t,v=Math.round(p.$offsetX),g=Math.round(p.$offsetY),y=p.$bitmapWidth,x=p.$bitmapHeight;return c.drawImage(p.$bitmapData.source,p.$bitmapX+r.x/e.$TextureScaleFactor,p.$bitmapY+r.y/e.$TextureScaleFactor,y*r.width/i,x*r.height/n,v,g,r.width,r.height),l}function i(t,i,n){try{var a=r(this,i),o=a.toDataURL(t,n);return o}catch(s){e.$error(1033)}return null}function n(e,t,r,n){var a=i.call(this,e,r,n);if(null!=a){var o=a.replace(/^data:image[^;]*/,"data:image/octet-stream"),s=document.createElement("a");s.download=t,s.href=o;var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(c)}}function a(t,r){return e.$warn(1041,"getPixel32","getPixels"),this.getPixels(t,r)}function o(t,i,n,a){if(void 0===n&&(n=1),void 0===a&&(a=1),"webgl"==e.Capabilities.renderMode){var o=void 0;this.$renderBuffer?o=this:(o=new e.RenderTexture,o.drawToTexture(new e.Bitmap(this)));var s=o.$renderBuffer.getPixels(t,i,n,a);return s}try{var l=(r(this),c.getImageData(t,i,n,a).data);return l}catch(h){e.$error(1039)}}var s,c;e.Texture.prototype.toDataURL=i,e.Texture.prototype.saveToFile=n,e.Texture.prototype.getPixel32=a,e.Texture.prototype.getPixels=o}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e){for(var t=s.parseFromString(e,"text/xml"),r=t.childNodes.length,n=0;r>n;n++){var a=t.childNodes[n];if(1==a.nodeType)return i(a,null)}return null}function i(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);for(var r=new a(e.localName,t,e.prefix,e.namespaceURI,e.nodeName),n=e.attributes,s=r.attributes,c=n.length,l=0;c>l;l++){var h=n[l],u=h.name;0!=u.indexOf("xmlns:")&&(s[u]=h.value,r["$"+u]=h.value)}var d=e.childNodes;c=d.length;for(var f=r.children,l=0;c>l;l++){var p=d[l],v=p.nodeType,g=null;if(1==v)g=i(p,r);else if(3==v){var y=p.textContent.trim();y&&(g=new o(y,r))}g&&f.push(g)}return r}var n=function(){function e(e,t){this.nodeType=e,this.parent=t}return e}();t.XMLNode=n,__reflect(n.prototype,"egret.web.XMLNode");var a=function(e){function t(t,r,i,n,a){var o=e.call(this,1,r)||this;return o.attributes={},o.children=[],o.localName=t,o.prefix=i,o.namespace=n,o.name=a,o}return __extends(t,e),t}(n);t.XML=a,__reflect(a.prototype,"egret.web.XML");var o=function(e){function t(t,r){var i=e.call(this,3,r)||this;return i.text=t,i}return __extends(t,e),t}(n);t.XMLText=o,__reflect(o.prototype,"egret.web.XMLText");var s=new DOMParser;e.XML={parse:r}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.onChange=function(t){var i=new e.OrientationEvent(e.Event.CHANGE);i.beta=t.beta,i.gamma=t.gamma,i.alpha=t.alpha,r.dispatchEvent(i)},r}return __extends(r,t),r.prototype.start=function(){window.addEventListener("deviceorientation",this.onChange)},r.prototype.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},r}(e.EventDispatcher);t.WebDeviceOrientation=r,__reflect(r.prototype,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(t=e.web||(e.web={}))}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation;var egret;!function(e){var t;!function(t){var r=function(t){function r(r){var i=t.call(this)||this;return i.onUpdate=function(t){var r=new e.GeolocationEvent(e.Event.CHANGE),n=t.coords;r.altitude=n.altitude,r.heading=n.heading,r.accuracy=n.accuracy,r.latitude=n.latitude,r.longitude=n.longitude,r.speed=n.speed,r.altitudeAccuracy=n.altitudeAccuracy,i.dispatchEvent(r)},i.onError=function(t){var r=e.GeolocationEvent.UNAVAILABLE;t.code==t.PERMISSION_DENIED&&(r=e.GeolocationEvent.PERMISSION_DENIED);var n=new e.GeolocationEvent(e.IOErrorEvent.IO_ERROR);n.errorType=r,n.errorMessage=t.message,i.dispatchEvent(n)},i.geolocation=navigator.geolocation,i}return __extends(r,t),r.prototype.start=function(){var t=this.geolocation;t?this.watchId=t.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:e.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},r.prototype.stop=function(){var e=this.geolocation;e.clearWatch(this.watchId)},r}(e.EventDispatcher);t.WebGeolocation=r,__reflect(r.prototype,"egret.web.WebGeolocation",["egret.Geolocation"]),e.Geolocation=e.web.WebGeolocation}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.onChange=function(t){var i=new e.MotionEvent(e.Event.CHANGE),n={x:t.acceleration.x,y:t.acceleration.y,z:t.acceleration.z},a={x:t.accelerationIncludingGravity.x,y:t.accelerationIncludingGravity.y,z:t.accelerationIncludingGravity.z},o={alpha:t.rotationRate.alpha,beta:t.rotationRate.beta,gamma:t.rotationRate.gamma};i.acceleration=n,i.accelerationIncludingGravity=a,i.rotationRate=o,r.dispatchEvent(i)},r}return __extends(r,t),r.prototype.start=function(){window.addEventListener("devicemotion",this.onChange)},r.prototype.stop=function(){window.removeEventListener("devicemotion",this.onChange)},r}(e.EventDispatcher);t.WebMotion=r,__reflect(r.prototype,"egret.web.WebMotion",["egret.Motion"]),e.Motion=e.web.WebMotion}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){this.drawData=[],this.drawDataLen=0}return e.prototype.pushDrawRect=function(){if(0==this.drawDataLen||1!=this.drawData[this.drawDataLen-1].type){var e=this.drawData[this.drawDataLen]||{};e.type=1,e.count=0,this.drawData[this.drawDataLen]=e,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=2},e.prototype.pushDrawTexture=function(e,t,r,i,n){if(void 0===t&&(t=2),r){var a=this.drawData[this.drawDataLen]||{};a.type=0,a.texture=e,a.filter=r,a.count=t,a.textureWidth=i,a.textureHeight=n,this.drawData[this.drawDataLen]=a,this.drawDataLen++}else{if(0==this.drawDataLen||0!=this.drawData[this.drawDataLen-1].type||e!=this.drawData[this.drawDataLen-1].texture||this.drawData[this.drawDataLen-1].filter){var a=this.drawData[this.drawDataLen]||{};a.type=0,a.texture=e,a.count=0,this.drawData[this.drawDataLen]=a,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=t}},e.prototype.pushChangeSmoothing=function(e,t){e.smoothing=t;var r=this.drawData[this.drawDataLen]||{};r.type=10,r.texture=e,r.smoothing=t,this.drawData[this.drawDataLen]=r,this.drawDataLen++},e.prototype.pushPushMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=2,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},e.prototype.pushPopMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=3,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},e.prototype.pushSetBlend=function(e){for(var t=this.drawDataLen,r=!1,i=t-1;i>=0;i--){var n=this.drawData[i];if(n){if((0==n.type||1==n.type)&&(r=!0),!r&&4==n.type){this.drawData.splice(i,1),this.drawDataLen--;continue}if(4==n.type){if(n.value==e)return;break}}}var a=this.drawData[this.drawDataLen]||{};a.type=4,a.value=e,this.drawData[this.drawDataLen]=a,this.drawDataLen++},e.prototype.pushResize=function(e,t,r){var i=this.drawData[this.drawDataLen]||{};i.type=5,i.buffer=e,i.width=t,i.height=r,this.drawData[this.drawDataLen]=i,this.drawDataLen++},e.prototype.pushClearColor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=6,this.drawData[this.drawDataLen]=e,this.drawDataLen++},e.prototype.pushActivateBuffer=function(e){for(var t=this.drawDataLen,r=!1,i=t-1;i>=0;i--){var n=this.drawData[i];!n||(4!=n.type&&7!=n.type&&(r=!0),r||7!=n.type)||(this.drawData.splice(i,1),this.drawDataLen--)}var a=this.drawData[this.drawDataLen]||{};a.type=7,a.buffer=e,a.width=e.rootRenderTarget.width,a.height=e.rootRenderTarget.height,this.drawData[this.drawDataLen]=a,this.drawDataLen++},e.prototype.pushEnableScissor=function(e,t,r,i){var n=this.drawData[this.drawDataLen]||{};n.type=8,n.x=e,n.y=t,n.width=r,n.height=i,this.drawData[this.drawDataLen]=n,this.drawDataLen++},e.prototype.pushDisableScissor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=9,this.drawData[this.drawDataLen]=e,this.drawDataLen++},e.prototype.clear=function(){for(var e=0;e<this.drawDataLen;e++){var t=this.drawData[e];t.type=0,t.count=0,t.texture=null,t.filter=null,t.uv=null,t.value="",t.buffer=null,t.width=0,t.height=0}this.drawDataLen=0},e}();e.WebGLDrawCmdManager=t,__reflect(t.prototype,"egret.web.WebGLDrawCmdManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){this.size=2e3,this.vertexMaxSize=4*this.size,this.indicesMaxSize=6*this.size,this.vertSize=5,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1;
var e=this.vertexMaxSize*this.vertSize,t=this.indicesMaxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(t),this.indicesForMesh=new Uint16Array(t);for(var r=0,i=0;t>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3}return e.prototype.reachMaxSize=function(e,t){return void 0===e&&(e=4),void 0===t&&(t=6),this.vertexIndex>this.vertexMaxSize-e||this.indexIndex>this.indicesMaxSize-t},e.prototype.getVertices=function(){var e=this.vertices.subarray(0,this.vertexIndex*this.vertSize);return e},e.prototype.getIndices=function(){return this.indices},e.prototype.getMeshIndices=function(){return this.indicesForMesh},e.prototype.changeToMeshIndices=function(){if(!this.hasMesh){for(var e=0,t=this.indexIndex;t>e;++e)this.indicesForMesh[e]=this.indices[e];this.hasMesh=!0}},e.prototype.isMesh=function(){return this.hasMesh},e.prototype.cacheArrays=function(e,t,r,i,n,a,o,s,c,l,h,u,d,f,p){var v=e.globalAlpha,g=e.globalMatrix,y=g.a,x=g.b,m=g.c,b=g.d,w=g.tx,E=g.ty,T=e.$offsetX,S=e.$offsetY;if((0!=T||0!=S)&&(w=T*y+S*m+w,E=T*x+S*b+E),!d){(0!=a||0!=o)&&(w=a*y+o*m+w,E=a*x+o*b+E);var _=s/i;1!=_&&(y=_*y,x=_*x);var C=c/n;1!=C&&(m=C*m,b=C*b)}if(d){var R=this.vertices,L=this.vertexIndex*this.vertSize,D=0,$=0,A=0,M=0,I=0,B=0,O=0;for(D=0,A=u.length;A>D;D+=2)$=L+5*D/2,B=d[D],O=d[D+1],M=u[D],I=u[D+1],R[$+0]=y*B+m*O+w,R[$+1]=x*B+b*O+E,p?(R[$+2]=(t+(1-I)*n)/l,R[$+3]=(r+M*i)/h):(R[$+2]=(t+M*i)/l,R[$+3]=(r+I*n)/h),R[$+4]=v;if(this.hasMesh)for(var P=0,W=f.length;W>P;++P)this.indicesForMesh[this.indexIndex+P]=f[P]+this.vertexIndex;this.vertexIndex+=u.length/2,this.indexIndex+=f.length}else{var F=l,G=h,H=i,k=n;t/=F,r/=G;var R=this.vertices,L=this.vertexIndex*this.vertSize;if(p){var N=i;i=n/F,n=N/G,R[L++]=w,R[L++]=E,R[L++]=i+t,R[L++]=r,R[L++]=v,R[L++]=y*H+w,R[L++]=x*H+E,R[L++]=i+t,R[L++]=n+r,R[L++]=v,R[L++]=y*H+m*k+w,R[L++]=b*k+x*H+E,R[L++]=t,R[L++]=n+r,R[L++]=v,R[L++]=m*k+w,R[L++]=b*k+E,R[L++]=t,R[L++]=r,R[L++]=v}else i/=F,n/=G,R[L++]=w,R[L++]=E,R[L++]=t,R[L++]=r,R[L++]=v,R[L++]=y*H+w,R[L++]=x*H+E,R[L++]=i+t,R[L++]=r,R[L++]=v,R[L++]=y*H+m*k+w,R[L++]=b*k+x*H+E,R[L++]=i+t,R[L++]=n+r,R[L++]=v,R[L++]=m*k+w,R[L++]=b*k+E,R[L++]=t,R[L++]=n+r,R[L++]=v;if(this.hasMesh){var U=this.indicesForMesh;U[this.indexIndex+0]=0+this.vertexIndex,U[this.indexIndex+1]=1+this.vertexIndex,U[this.indexIndex+2]=2+this.vertexIndex,U[this.indexIndex+3]=0+this.vertexIndex,U[this.indexIndex+4]=2+this.vertexIndex,U[this.indexIndex+5]=3+this.vertexIndex}this.vertexIndex+=4,this.indexIndex+=6}},e.prototype.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},e}();e.WebGLVertexArrayObject=t,__reflect(t.prototype,"egret.web.WebGLVertexArrayObject")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(e,r,i){var n=t.call(this)||this;return n.clearColor=[0,0,0,0],n.useFrameBuffer=!0,n.gl=e,n.width=r||1,n.height=i||1,n}return __extends(r,t),r.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.frameBuffer&&(r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null)),this.stencilBuffer&&(r.deleteRenderbuffer(this.stencilBuffer),this.stencilBuffer=null)},r.prototype.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer())},r.prototype.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},r.prototype.initFrameBuffer=function(){if(!this.frameBuffer){var e=this.gl;this.texture=this.createTexture(),this.frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0)}},r.prototype.createTexture=function(){var e=this.gl,t=e.createTexture();return t.glContext=e,e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},r.prototype.clear=function(e){var t=this.gl;e&&this.activate(),t.colorMask(!0,!0,!0,!0),t.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),t.clear(t.COLOR_BUFFER_BIT)},r.prototype.enabledStencil=function(){if(this.frameBuffer&&!this.stencilBuffer){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),this.stencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencilBuffer)}},r.prototype.dispose=function(){e.WebGLUtils.deleteWebGLTexture(this.texture)},r}(e.HashObject);t.WebGLRenderTarget=r,__reflect(r.prototype,"egret.web.WebGLRenderTarget")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t){var r=document.createElement("canvas");return isNaN(e)||isNaN(t)||(r.width=e,r.height=t),r}var i=function(){function i(i,n){if(this.glID=null,this.projectionX=0/0,this.projectionY=0/0,this.contextLost=!1,this.$scissorState=!1,this.vertSize=5,this.surface=r(i,n),!e.nativeRender){this.initWebGL(),this.$bufferStack=[];var a=this.context;this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new t.WebGLDrawCmdManager,this.vao=new t.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over")}}return i.getInstance=function(e,t){return this.instance?this.instance:(this.instance=new i(e,t),this.instance)},i.prototype.pushBuffer=function(e){this.$bufferStack.push(e),e!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(e)),this.currentBuffer=e},i.prototype.popBuffer=function(){if(!(this.$bufferStack.length<=1)){var e=this.$bufferStack.pop(),t=this.$bufferStack[this.$bufferStack.length-1];e!=t&&this.drawCmdManager.pushActivateBuffer(t),this.currentBuffer=t}},i.prototype.activateBuffer=function(e,t,r){e.rootRenderTarget.activate(),this.bindIndices||this.uploadIndicesArray(this.vao.getIndices()),e.restoreStencil(),e.restoreScissor(),this.onResize(t,r)},i.prototype.uploadVerticesArray=function(e){var t=this.context;t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW)},i.prototype.uploadIndicesArray=function(e){var t=this.context;t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),this.bindIndices=!0},i.prototype.destroy=function(){this.surface.width=this.surface.height=0},i.prototype.onResize=function(e,t){e=e||this.surface.width,t=t||this.surface.height,this.projectionX=e/2,this.projectionY=-t/2,this.context&&this.context.viewport(0,0,e,t)},i.prototype.resize=function(e,t,r){var i=this.surface;r?(i.width<e&&(i.width=e),i.height<t&&(i.height=t)):(i.width!=e&&(i.width=e),i.height!=t&&(i.height=t)),this.onResize()},i.prototype.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext();var e=this.context;this.$maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)},i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},i.prototype.getWebGLContext=function(){for(var t,r={antialias:i.antialias,stencil:!0},n=["webgl","experimental-webgl"],a=0;a<n.length;a++){try{t=this.surface.getContext(n[a],r)}catch(o){}if(t)break}t||e.$error(1021),this.setContext(t)},i.prototype.setContext=function(e){this.context=e,e.id=i.glContextId++,this.glID=e.id,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.colorMask(!0,!0,!0,!0),e.activeTexture(e.TEXTURE0)},i.prototype.enableStencilTest=function(){var e=this.context;e.enable(e.STENCIL_TEST)},i.prototype.disableStencilTest=function(){var e=this.context;e.disable(e.STENCIL_TEST)},i.prototype.enableScissorTest=function(e){var t=this.context;t.enable(t.SCISSOR_TEST),t.scissor(e.x,e.y,e.width,e.height)},i.prototype.disableScissorTest=function(){var e=this.context;e.disable(e.SCISSOR_TEST)},i.prototype.getPixels=function(e,t,r,i,n){var a=this.context;a.readPixels(e,t,r,i,a.RGBA,a.UNSIGNED_BYTE,n)},i.prototype.createTexture=function(e){var t=this.context,r=t.createTexture();return r?(r.glContext=t,t.bindTexture(t.TEXTURE_2D,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r):void(this.contextLost=!0)},i.prototype.createTextureFromCompressedData=function(e,t,r,i,n){return null},i.prototype.updateTexture=function(e,t){var r=this.context;r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)},i.prototype.getWebGLTexture=function(e){return e.webGLTexture||("image"==e.format?e.webGLTexture=this.createTexture(e.source):"pvr"==e.format&&(e.webGLTexture=this.createTextureFromCompressedData(e.source.pvrtcData,e.width,e.height,e.source.mipmapsCount,e.source.format)),e.$deleteSource&&e.webGLTexture&&(e.source=null),e.webGLTexture&&(e.webGLTexture.smoothing=!0)),e.webGLTexture},i.prototype.clearRect=function(e,t,r,i){if(0!=e||0!=t||r!=this.surface.width||i!=this.surface.height){var n=this.currentBuffer;if(n.$hasScissor)this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,r,i),this.setGlobalCompositeOperation("source-over");else{var a=n.globalMatrix;0==a.b&&0==a.c?(e=e*a.a+a.tx,t=t*a.d+a.ty,r*=a.a,i*=a.d,this.enableScissor(e,-t-i+n.height,r,i),this.clear(),this.disableScissor()):(this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,r,i),this.setGlobalCompositeOperation("source-over"))}}else this.clear()},i.prototype.setGlobalCompositeOperation=function(e){this.drawCmdManager.pushSetBlend(e)},i.prototype.drawImage=function(e,t,r,i,n,a,o,s,c,l,h,u,d){var f=this.currentBuffer;if(!this.contextLost&&e&&f){var p,v,g;if(e.texture||e.source&&e.source.texture)p=e.texture||e.source.texture,f.saveTransform(),v=f.$offsetX,g=f.$offsetY,f.useOffset(),f.transform(1,0,0,-1,0,c+2*o);else{if(!e.source&&!e.webGLTexture)return;p=this.getWebGLTexture(e)}p&&(this.drawTexture(p,t,r,i,n,a,o,s,c,l,h,void 0,void 0,void 0,void 0,u,d),e.source&&e.source.texture&&(f.$offsetX=v,f.$offsetY=g,f.restoreTransform()))}},i.prototype.drawMesh=function(e,t,r,i,n,a,o,s,c,l,h,u,d,f,p,v,g){var y=this.currentBuffer;if(!this.contextLost&&e&&y){var x,m,b;if(e.texture||e.source&&e.source.texture)x=e.texture||e.source.texture,y.saveTransform(),m=y.$offsetX,b=y.$offsetY,y.useOffset(),y.transform(1,0,0,-1,0,c+2*o);else{if(!e.source&&!e.webGLTexture)return;x=this.getWebGLTexture(e)}x&&(this.drawTexture(x,t,r,i,n,a,o,s,c,l,h,u,d,f,p,v,g),(e.texture||e.source&&e.source.texture)&&(y.$offsetX=m,y.$offsetY=b,y.restoreTransform()))}},i.prototype.drawTexture=function(e,t,r,i,n,a,o,s,c,l,h,u,d,f,p,v,g){var y=this.currentBuffer;if(!this.contextLost&&e&&y){d&&f?this.vao.reachMaxSize(d.length/2,f.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),void 0!=g&&e.smoothing!=g&&this.drawCmdManager.pushChangeSmoothing(e,g),u&&this.vao.changeToMeshIndices();var x=f?f.length/3:2;this.drawCmdManager.pushDrawTexture(e,x,this.$filter,l,h),this.vao.cacheArrays(y,t,r,i,n,a,o,s,c,l,h,u,d,f,v)}},i.prototype.drawRect=function(e,t,r,i){var n=this.currentBuffer;!this.contextLost&&n&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),this.vao.cacheArrays(n,0,0,r,i,e,t,r,i,r,i))},i.prototype.pushMask=function(e,t,r,i){var n=this.currentBuffer;!this.contextLost&&n&&(n.$stencilList.push({x:e,y:t,width:r,height:i}),this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushPushMask(),this.vao.cacheArrays(n,0,0,r,i,e,t,r,i,r,i))},i.prototype.popMask=function(){var e=this.currentBuffer;if(!this.contextLost&&e){var t=e.$stencilList.pop();this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushPopMask(),this.vao.cacheArrays(e,0,0,t.width,t.height,t.x,t.y,t.width,t.height,t.width,t.height)}},i.prototype.clear=function(){this.drawCmdManager.pushClearColor()},i.prototype.enableScissor=function(e,t,r,i){var n=this.currentBuffer;this.drawCmdManager.pushEnableScissor(e,t,r,i),n.$hasScissor=!0},i.prototype.disableScissor=function(){var e=this.currentBuffer;this.drawCmdManager.pushDisableScissor(),e.$hasScissor=!1},i.prototype.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var e=this.drawCmdManager.drawDataLen,t=0,r=0;e>r;r++){var i=this.drawCmdManager.drawData[r];t=this.drawData(i,t),7==i.type&&(this.activatedBuffer=i.buffer),(0==i.type||1==i.type||2==i.type||3==i.type)&&this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},i.prototype.drawData=function(e,r){if(e){var i,n=this.context,a=e.filter;switch(e.type){case 0:a?"custom"===a.type?i=t.EgretWebGLProgram.getProgram(n,a.$vertexSrc,a.$fragmentSrc,a.$shaderKey):"colorTransform"===a.type?i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.colorTransform_frag,"colorTransform"):"blurX"===a.type?i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.blur_frag,"blur"):"blurY"===a.type?i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.blur_frag,"blur"):"glow"===a.type&&(i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.glow_frag,"glow")):i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.texture_frag,"texture"),this.activeProgram(n,i),this.syncUniforms(i,a,e.textureWidth,e.textureHeight),r+=this.drawTextureElements(e,r);break;case 1:i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(n,i),this.syncUniforms(i,a,e.textureWidth,e.textureHeight),r+=this.drawRectElements(e,r);break;case 2:i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(n,i),this.syncUniforms(i,a,e.textureWidth,e.textureHeight),r+=this.drawPushMaskElements(e,r);break;case 3:i=t.EgretWebGLProgram.getProgram(n,t.EgretShaderLib.default_vert,t.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(n,i),this.syncUniforms(i,a,e.textureWidth,e.textureHeight),r+=this.drawPopMaskElements(e,r);break;case 4:this.setBlendMode(e.value);break;case 5:e.buffer.rootRenderTarget.resize(e.width,e.height),this.onResize(e.width,e.height);break;case 6:if(this.activatedBuffer){var o=this.activatedBuffer.rootRenderTarget;(0!=o.width||0!=o.height)&&o.clear(!0)}break;case 7:this.activateBuffer(e.buffer,e.width,e.height);break;case 8:var s=this.activatedBuffer;s&&(s.rootRenderTarget&&s.rootRenderTarget.enabledStencil(),s.enableScissor(e.x,e.y,e.width,e.height));break;case 9:s=this.activatedBuffer,s&&s.disableScissor();break;case 10:n.bindTexture(n.TEXTURE_2D,e.texture),e.smoothing?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST))}return r}},i.prototype.activeProgram=function(e,t){if(t!=this.currentProgram){e.useProgram(t.id);var r=t.attributes;for(var i in r)"aVertexPosition"===i?(e.vertexAttribPointer(r.aVertexPosition.location,2,e.FLOAT,!1,20,0),e.enableVertexAttribArray(r.aVertexPosition.location)):"aTextureCoord"===i?(e.vertexAttribPointer(r.aTextureCoord.location,2,e.FLOAT,!1,20,8),e.enableVertexAttribArray(r.aTextureCoord.location)):"aColor"===i&&(e.vertexAttribPointer(r.aColor.location,1,e.FLOAT,!1,20,16),e.enableVertexAttribArray(r.aColor.location));this.currentProgram=t}},i.prototype.syncUniforms=function(e,t,r,i){var n=e.uniforms;t&&"custom"===t.type;for(var a in n)if("projectionVector"===a)n[a].setValue({x:this.projectionX,y:this.projectionY});else if("uTextureSize"===a)n[a].setValue({x:r,y:i});else if("uSampler"===a);else{var o=t.$uniforms[a];void 0!==o&&n[a].setValue(o)}},i.prototype.drawTextureElements=function(e,t){var r=this.context;r.bindTexture(r.TEXTURE_2D,e.texture);var i=3*e.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),i},i.prototype.drawRectElements=function(e,t){var r=this.context,i=3*e.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),i},i.prototype.drawPushMaskElements=function(e,t){var r=this.context,i=3*e.count,n=this.activatedBuffer;if(n){n.rootRenderTarget&&n.rootRenderTarget.enabledStencil(),0==n.stencilHandleCount&&(n.enableStencil(),r.clear(r.STENCIL_BUFFER_BIT));var a=n.stencilHandleCount;n.stencilHandleCount++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,a,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR),r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),r.stencilFunc(r.EQUAL,a+1,255),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}return i},i.prototype.drawPopMaskElements=function(e,t){var r=this.context,i=3*e.count,n=this.activatedBuffer;if(n)if(n.stencilHandleCount--,0==n.stencilHandleCount)n.disableStencil();else{var a=n.stencilHandleCount;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,a+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR),r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),r.stencilFunc(r.EQUAL,a,255),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}return i},i.prototype.setBlendMode=function(e){var t=this.context,r=i.blendModesForGL[e];r&&t.blendFunc(r[0],r[1])},i.prototype.drawTargetWidthFilters=function(e,r){var i,n=r,a=e.length;if(a>1)for(var o=0;a-1>o;o++){var s=e[o],c=r.rootRenderTarget.width,l=r.rootRenderTarget.height;i=t.WebGLRenderBuffer.create(c,l),i.setTransform(1,0,0,1,0,0),i.globalAlpha=1,this.drawToRenderTarget(s,r,i),r!=n&&t.WebGLRenderBuffer.release(r),r=i}var h=e[a-1];this.drawToRenderTarget(h,r,this.currentBuffer),r!=n&&t.WebGLRenderBuffer.release(r)},i.prototype.drawToRenderTarget=function(e,r,i){if(!this.contextLost){this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(i);var n,a=r,o=r.rootRenderTarget.width,s=r.rootRenderTarget.height;if("blur"==e.type){var c=e.blurXFilter,l=e.blurYFilter;0!=c.blurX&&0!=l.blurY?(n=t.WebGLRenderBuffer.create(o,s),n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,this.drawToRenderTarget(e.blurXFilter,r,n),r!=a&&t.WebGLRenderBuffer.release(r),r=n,e=l):e=0===c.blurX?l:c}i.saveTransform(),i.transform(1,0,0,-1,0,s),this.vao.cacheArrays(i,0,0,o,s,0,0,o,s,o,s),i.restoreTransform(),this.drawCmdManager.pushDrawTexture(r.rootRenderTarget.texture,2,e,o,s),r!=a&&t.WebGLRenderBuffer.release(r),this.popBuffer()}},i.initBlendMode=function(){i.blendModesForGL={},i.blendModesForGL["source-over"]=[1,771],i.blendModesForGL.lighter=[1,1],i.blendModesForGL["lighter-in"]=[770,771],i.blendModesForGL["destination-out"]=[0,771],i.blendModesForGL["destination-in"]=[0,770]},i.glContextId=0,i.blendModesForGL=null,i}();t.WebGLRenderContext=i,__reflect(i.prototype,"egret.web.WebGLRenderContext"),i.initBlendMode()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function n(i,n,a){var o=r.call(this)||this;if(o.globalAlpha=1,o.stencilState=!1,o.$stencilList=[],o.stencilHandleCount=0,o.$scissorState=!1,o.scissorRect=new e.Rectangle,o.$hasScissor=!1,o.$drawCalls=0,o.$computeDrawCall=!1,o.globalMatrix=new e.Matrix,o.savedGlobalMatrix=new e.Matrix,o.$offsetX=0,o.$offsetY=0,o.context=t.WebGLRenderContext.getInstance(i,n),e.nativeRender)return a?o.surface=o.context.surface:o.surface=new egret_native.NativeRenderSurface(o,i,n,a),o.rootRenderTarget=null,o;if(o.rootRenderTarget=new t.WebGLRenderTarget(o.context.context,3,3),i&&n&&o.resize(i,n),o.root=a,o.root)o.context.pushBuffer(o),o.surface=o.context.surface,o.$computeDrawCall=!0;else{var s=o.context.activatedBuffer;s&&s.rootRenderTarget.activate(),o.rootRenderTarget.initFrameBuffer(),o.surface=o.rootRenderTarget}return o}return __extends(n,r),n.prototype.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},n.prototype.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},n.prototype.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},n.prototype.enableScissor=function(e,t,r,i){this.$scissorState||(this.$scissorState=!0,this.scissorRect.setTo(e,t,r,i),this.context.enableScissorTest(this.scissorRect))},n.prototype.disableScissor=function(){this.$scissorState&&(this.$scissorState=!1,this.scissorRect.setEmpty(),this.context.disableScissorTest())},n.prototype.restoreScissor=function(){this.$scissorState?this.context.enableScissorTest(this.scissorRect):this.context.disableScissorTest()},Object.defineProperty(n.prototype,"width",{get:function(){return e.nativeRender?this.surface.width:this.rootRenderTarget.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return e.nativeRender?this.surface.height:this.rootRenderTarget.height},enumerable:!0,configurable:!0}),n.prototype.resize=function(t,r,i){return t=t||1,r=r||1,e.nativeRender?void this.surface.resize(t,r):(this.context.pushBuffer(this),(t!=this.rootRenderTarget.width||r!=this.rootRenderTarget.height)&&(this.context.drawCmdManager.pushResize(this,t,r),this.rootRenderTarget.width=t,this.rootRenderTarget.height=r),this.root&&this.context.resize(t,r,i),this.context.clear(),void this.context.popBuffer())},n.prototype.getPixels=function(t,r,i,n){void 0===i&&(i=1),void 0===n&&(n=1);var a=new Uint8Array(4*i*n);if(e.nativeRender)egret_native.activateBuffer(this),egret_native.nrGetPixels(t,r,i,n,a),egret_native.activateBuffer(null);else{var o=this.rootRenderTarget.useFrameBuffer;this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(t,r,i,n,a),this.rootRenderTarget.useFrameBuffer=o,this.rootRenderTarget.activate()}for(var s=new Uint8Array(4*i*n),c=0;n>c;c++)for(var l=0;i>l;l++){var h=4*(i*(n-c-1)+l),u=4*(i*c+l),d=a[u+3];s[h]=Math.round(a[u]/d*255),s[h+1]=Math.round(a[u+1]/d*255),s[h+2]=Math.round(a[u+2]/d*255),s[h+3]=a[u+3]}return s},n.prototype.toDataURL=function(e,t){return this.context.surface.toDataURL(e,t)},n.prototype.destroy=function(){this.context.destroy()},n.prototype.onRenderFinish=function(){this.$drawCalls=0},n.prototype.drawFrameBufferToSurface=function(e,t,r,i,n,a,o,s,c){void 0===c&&(c=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),c&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,e,t,r,i,n,a,o,s,r,i,!1),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.drawSurfaceToFrameBuffer=function(e,t,r,i,n,a,o,s,c){void 0===c&&(c=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),c&&this.context.clear(),this.context.drawImage(this.context.surface,e,t,r,i,n,a,o,s,r,i,!1),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.clear=function(){this.context.pushBuffer(this),this.context.clear(),this.context.popBuffer()},n.prototype.setTransform=function(e,t,r,i,n,a){var o=this.globalMatrix;o.a=e,o.b=t,o.c=r,o.d=i,o.tx=n,o.ty=a},n.prototype.transform=function(e,t,r,i,n,a){var o=this.globalMatrix,s=o.a,c=o.b,l=o.c,h=o.d;(1!=e||0!=t||0!=r||1!=i)&&(o.a=e*s+t*l,o.b=e*c+t*h,o.c=r*s+i*l,o.d=r*c+i*h),o.tx=n*s+a*l+o.tx,o.ty=n*c+a*h+o.ty},n.prototype.useOffset=function(){var e=this;(0!=e.$offsetX||0!=e.$offsetY)&&(e.globalMatrix.append(1,0,0,1,e.$offsetX,e.$offsetY),e.$offsetX=e.$offsetY=0)},n.prototype.saveTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},n.prototype.restoreTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},n.create=function(e,t){var r=i.pop();if(r){r.resize(e,t);var a=r.globalMatrix;a.a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,r.globalAlpha=1,r.$offsetX=0,r.$offsetY=0}else r=new n(e,t),r.$computeDrawCall=!1;return r},n.release=function(e){i.push(e)},n.autoClear=!0,n}(e.HashObject);t.WebGLRenderBuffer=r,__reflect(r.prototype,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var i=[]}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=["source-over","lighter","destination-out"],i="source-over",n=[],a=function(){function a(){this.nestLevel=0}return a.prototype.render=function(t,r,i,a){this.nestLevel++;var o=r,s=o.context;s.pushBuffer(o),o.transform(i.a,i.b,i.c,i.d,0,0),this.drawDisplayObject(t,o,i.tx,i.ty,!0),s.$drawWebGL();var c=o.$drawCalls;o.onRenderFinish(),s.popBuffer();var l=e.Matrix.create();if(i.$invertInto(l),o.transform(l.a,l.b,l.c,l.d,0,0),e.Matrix.release(l),this.nestLevel--,0===this.nestLevel){n.length>6&&(n.length=6);for(var h=n.length,u=0;h>u;u++)n[u].resize(0,0)}return c},a.prototype.drawDisplayObject=function(t,r,i,n,a){var o,s=0,c=t.$displayList;if(c&&!a?((t.$cacheDirty||t.$renderDirty||c.$canvasScaleX!=e.sys.DisplayList.$canvasScaleX||c.$canvasScaleY!=e.sys.DisplayList.$canvasScaleY)&&(s+=c.drawToSurface()),o=c.$renderNode):o=t.$renderDirty?t.$getRenderNode():t.$renderNode,t.$cacheDirty=!1,o){switch(s++,r.$offsetX=i,r.$offsetY=n,o.type){case 1:this.renderBitmap(o,r);break;case 2:this.renderText(o,r);break;case 3:this.renderGraphics(o,r);break;case 4:this.renderGroup(o,r);break;case 5:this.renderMesh(o,r);break;case 6:this.renderNormalBitmap(o,r)}r.$offsetX=0,r.$offsetY=0}if(c&&!a)return s;var l=t.$children;if(l)for(var h=l.length,u=0;h>u;u++){var d=l[u],f=void 0,p=void 0,v=void 0;1!=d.$alpha&&(v=r.globalAlpha,r.globalAlpha*=d.$alpha);var g=void 0;if(d.$useTranslate){var y=d.$getMatrix();f=i+d.$x,p=n+d.$y;var x=r.globalMatrix;g=e.Matrix.create(),g.a=x.a,g.b=x.b,g.c=x.c,g.d=x.d,g.tx=x.tx,g.ty=x.ty,r.transform(y.a,y.b,y.c,y.d,f,p),f=-d.$anchorOffsetX,p=-d.$anchorOffsetY}else f=i+d.$x-d.$anchorOffsetX,p=n+d.$y-d.$anchorOffsetY;switch(d.$renderMode){case 1:break;case 2:s+=this.drawWithFilter(d,r,f,p);break;case 3:s+=this.drawWithClip(d,r,f,p);break;case 4:s+=this.drawWithScrollRect(d,r,f,p);break;default:s+=this.drawDisplayObject(d,r,f,p)}if(v&&(r.globalAlpha=v),g){var y=r.globalMatrix;y.a=g.a,y.b=g.b,y.c=g.c,y.d=g.d,y.tx=g.tx,y.ty=g.ty,e.Matrix.release(g)}}return s},a.prototype.drawWithFilter=function(t,a,o,s){var c=0;if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return c;var l,h=t.$filters,u=0!==t.$blendMode;u&&(l=r[t.$blendMode],l||(l=i));var d=t.$getOriginalBounds(),f=d.x,p=d.y,v=d.width,g=d.height;if(0>=v||0>=g)return c;if(!t.mask&&1==h.length&&("colorTransform"==h[0].type||"custom"===h[0].type&&0===h[0].padding)){var y=this.getRenderCount(t);if(!t.$children||1==y)return u&&a.context.setGlobalCompositeOperation(l),a.context.$filter=h[0],c+=t.$mask?this.drawWithClip(t,a,o,s):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,a,o,s):this.drawDisplayObject(t,a,o,s),a.context.$filter=null,u&&a.context.setGlobalCompositeOperation(i),c}var x=this.createRenderBuffer(v,g);if(x.context.pushBuffer(x),c+=t.$mask?this.drawWithClip(t,x,-f,-p):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,x,-f,-p):this.drawDisplayObject(t,x,-f,-p),x.context.popBuffer(),c>0){u&&a.context.setGlobalCompositeOperation(l),c++,a.$offsetX=o+f,a.$offsetY=s+p;var m=e.Matrix.create(),b=a.globalMatrix;m.a=b.a,m.b=b.b,m.c=b.c,m.d=b.d,m.tx=b.tx,m.ty=b.ty,a.useOffset(),a.context.drawTargetWidthFilters(h,x),b.a=m.a,b.b=m.b,b.c=m.c,b.d=m.d,b.tx=m.tx,b.ty=m.ty,e.Matrix.release(m),u&&a.context.setGlobalCompositeOperation(i)}return n.push(x),c},a.prototype.getRenderCount=function(e){var t=0,r=e.$getRenderNode();if(r&&(t+=r.$getRenderCount()),e.$children)for(var i=0,n=e.$children;i<n.length;i++){var a=n[i],o=a.$filters;if(o&&o.length>0)return 2;if(a.$children)t+=this.getRenderCount(a);else{var s=a.$getRenderNode();s&&(t+=s.$getRenderCount())}}return t},a.prototype.drawWithClip=function(t,a,o,s){var c,l=0,h=0!==t.$blendMode;h&&(c=r[t.$blendMode],c||(c=i));var u=t.$scrollRect?t.$scrollRect:t.$maskRect,d=t.$mask;if(d){var f=d.$getMatrix();if(0==f.a&&0==f.b||0==f.c&&0==f.d)return l}if(d||t.$children&&0!=t.$children.length){var p=t.$getOriginalBounds(),v=p.x,g=p.y,y=p.width,x=p.height;if(0>=y||0>=x)return l;var m=this.createRenderBuffer(y,x);if(m.context.pushBuffer(m),l+=this.drawDisplayObject(t,m,-v,-g),d){var b=this.createRenderBuffer(y,x);b.context.pushBuffer(b);var w=e.Matrix.create();w.copyFrom(d.$getConcatenatedMatrix()),d.$getConcatenatedMatrixAt(t,w),w.translate(-v,-g),b.setTransform(w.a,w.b,w.c,w.d,w.tx,w.ty),e.Matrix.release(w),l+=this.drawDisplayObject(d,b,0,0),b.context.popBuffer(),m.context.setGlobalCompositeOperation("destination-in"),m.setTransform(1,0,0,-1,0,b.height);var E=b.rootRenderTarget.width,T=b.rootRenderTarget.height;m.context.drawTexture(b.rootRenderTarget.texture,0,0,E,T,0,0,E,T,E,T),m.setTransform(1,0,0,1,0,0),m.context.setGlobalCompositeOperation("source-over"),b.setTransform(1,0,0,1,0,0),n.push(b)}if(m.context.setGlobalCompositeOperation(i),m.context.popBuffer(),l>0){l++,h&&a.context.setGlobalCompositeOperation(c),u&&a.context.pushMask(u.x+o,u.y+s,u.width,u.height);var S=e.Matrix.create(),_=a.globalMatrix;S.a=_.a,S.b=_.b,S.c=_.c,S.d=_.d,S.tx=_.tx,S.ty=_.ty,_.append(1,0,0,-1,o+v,s+g+m.height);var C=m.rootRenderTarget.width,R=m.rootRenderTarget.height;a.context.drawTexture(m.rootRenderTarget.texture,0,0,C,R,0,0,C,R,C,R),u&&m.context.popMask(),h&&a.context.setGlobalCompositeOperation(i);var L=a.globalMatrix;L.a=S.a,L.b=S.b,L.c=S.c,L.d=S.d,L.tx=S.tx,L.ty=S.ty,e.Matrix.release(S)}return n.push(m),l}return u&&a.context.pushMask(u.x+o,u.y+s,u.width,u.height),h&&a.context.setGlobalCompositeOperation(c),l+=this.drawDisplayObject(t,a,o,s),h&&a.context.setGlobalCompositeOperation(i),u&&a.context.popMask(),l},a.prototype.drawWithScrollRect=function(e,t,r,i){var n=0,a=e.$scrollRect?e.$scrollRect:e.$maskRect;if(a.isEmpty())return n;e.$scrollRect&&(r-=a.x,i-=a.y);var o=t.globalMatrix,s=t.context,c=!1;if(t.$hasScissor||0!=o.b||0!=o.c)t.context.pushMask(a.x+r,a.y+i,a.width,a.height);else{var l=o.a,h=o.d,u=o.tx,d=o.ty,f=a.x+r,p=a.y+i,v=f+a.width,g=p+a.height,y=void 0,x=void 0,m=void 0,b=void 0;if(1==l&&1==h)y=f+u,x=p+d,m=v+u,b=g+d;else{var w=l*f+u,E=h*p+d,T=l*v+u,S=h*p+d,_=l*v+u,C=h*g+d,R=l*f+u,L=h*g+d,D=0;w>T&&(D=w,w=T,T=D),_>R&&(D=_,_=R,R=D),y=_>w?w:_,m=T>R?T:R,E>S&&(D=E,E=S,S=D),C>L&&(D=C,C=L,L=D),x=C>E?E:C,b=S>L?S:L}s.enableScissor(y,-b+t.height,m-y,b-x),c=!0}return n+=this.drawDisplayObject(e,t,r,i),c?s.disableScissor():s.popMask(),n},a.prototype.drawNodeToBuffer=function(e,t,r,i){var n=t;n.context.pushBuffer(n),n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.renderNode(e,t,0,0,i),n.context.$drawWebGL(),n.onRenderFinish(),n.context.popBuffer()},a.prototype.drawDisplayToBuffer=function(e,t,r){t.context.pushBuffer(t),r&&t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);
var i;i=e.$renderDirty?e.$getRenderNode():e.$renderNode;var n=0;if(i)switch(n++,i.type){case 1:this.renderBitmap(i,t);break;case 2:this.renderText(i,t);break;case 3:this.renderGraphics(i,t);break;case 4:this.renderGroup(i,t);break;case 5:this.renderMesh(i,t);break;case 6:this.renderNormalBitmap(i,t)}var a=e.$children;if(a)for(var o=a.length,s=0;o>s;s++){var c=a[s];switch(c.$renderMode){case 1:break;case 2:n+=this.drawWithFilter(c,t,0,0);break;case 3:n+=this.drawWithClip(c,t,0,0);break;case 4:n+=this.drawWithScrollRect(c,t,0,0);break;default:n+=this.drawDisplayObject(c,t,0,0)}}return t.context.$drawWebGL(),t.onRenderFinish(),t.context.popBuffer(),n},a.prototype.renderNode=function(e,t,r,i,n){switch(t.$offsetX=r,t.$offsetY=i,e.type){case 1:this.renderBitmap(e,t);break;case 2:this.renderText(e,t);break;case 3:this.renderGraphics(e,t,n);break;case 4:this.renderGroup(e,t);break;case 5:this.renderMesh(e,t);break;case 6:this.renderNormalBitmap(e,t)}},a.prototype.renderNormalBitmap=function(e,t){var r=e.image;r&&t.context.drawImage(r,e.sourceX,e.sourceY,e.sourceW,e.sourceH,e.drawX,e.drawY,e.drawW,e.drawH,e.imageWidth,e.imageHeight,e.rotated,e.smoothing)},a.prototype.renderBitmap=function(t,n){var a=t.image;if(a){var o,s,c,l=t.drawData,h=l.length,u=0,d=t.matrix,f=t.blendMode,p=t.alpha;if(d){o=e.Matrix.create();var v=n.globalMatrix;o.a=v.a,o.b=v.b,o.c=v.c,o.d=v.d,o.tx=v.tx,o.ty=v.ty,s=n.$offsetX,c=n.$offsetY,n.useOffset(),n.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)}f&&n.context.setGlobalCompositeOperation(r[f]);var g;if(p==p&&(g=n.globalAlpha,n.globalAlpha*=p),t.filter){for(n.context.$filter=t.filter;h>u;)n.context.drawImage(a,l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],t.imageWidth,t.imageHeight,t.rotated,t.smoothing);n.context.$filter=null}else for(;h>u;)n.context.drawImage(a,l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],t.imageWidth,t.imageHeight,t.rotated,t.smoothing);if(f&&n.context.setGlobalCompositeOperation(i),p==p&&(n.globalAlpha=g),d){var y=n.globalMatrix;y.a=o.a,y.b=o.b,y.c=o.c,y.d=o.d,y.tx=o.tx,y.ty=o.ty,n.$offsetX=s,n.$offsetY=c,e.Matrix.release(o)}}},a.prototype.renderMesh=function(t,n){var a,o,s,c=t.image,l=t.drawData,h=l.length,u=0,d=t.matrix,f=t.blendMode,p=t.alpha;if(d){a=e.Matrix.create();var v=n.globalMatrix;a.a=v.a,a.b=v.b,a.c=v.c,a.d=v.d,a.tx=v.tx,a.ty=v.ty,o=n.$offsetX,s=n.$offsetY,n.useOffset(),n.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)}f&&n.context.setGlobalCompositeOperation(r[f]);var g;if(p==p&&(g=n.globalAlpha,n.globalAlpha*=p),t.filter){for(n.context.$filter=t.filter;h>u;)n.context.drawMesh(c,l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],t.imageWidth,t.imageHeight,t.uvs,t.vertices,t.indices,t.bounds,t.rotated,t.smoothing);n.context.$filter=null}else for(;h>u;)n.context.drawMesh(c,l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],l[u++],t.imageWidth,t.imageHeight,t.uvs,t.vertices,t.indices,t.bounds,t.rotated,t.smoothing);if(f&&n.context.setGlobalCompositeOperation(i),p==p&&(n.globalAlpha=g),d){var y=n.globalMatrix;y.a=a.a,y.b=a.b,y.c=a.c,y.d=a.d,y.tx=a.tx,y.ty=a.ty,n.$offsetX=o,n.$offsetY=s,e.Matrix.release(a)}},a.prototype.renderText=function(r,i){var n=r.width-r.x,a=r.height-r.y;if(!(0>=n||0>=a)&&n&&a&&0!=r.drawData.length){var o=e.sys.DisplayList.$canvasScaleX,s=e.sys.DisplayList.$canvasScaleY,c=i.context.$maxTextureSize;n*o>c&&(o*=c/(n*o)),a*s>c&&(s*=c/(a*s)),n*=o,a*=s;var l=r.x*o,h=r.y*s;if((r.$canvasScaleX!=o||r.$canvasScaleY!=s)&&(r.$canvasScaleX=o,r.$canvasScaleY=s,r.dirtyRender=!0),this.canvasRenderBuffer&&this.canvasRenderBuffer.context?r.dirtyRender&&this.canvasRenderBuffer.resize(n,a):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(n,a)),this.canvasRenderBuffer.context){if((1!=o||1!=s)&&this.canvasRenderBuffer.context.setTransform(o,0,0,s,0,0),l||h?(r.dirtyRender&&this.canvasRenderBuffer.context.setTransform(o,0,0,s,-l,-h),i.transform(1,0,0,1,l/o,h/s)):(1!=o||1!=s)&&this.canvasRenderBuffer.context.setTransform(o,0,0,s,0,0),r.dirtyRender){var u=this.canvasRenderBuffer.surface;this.canvasRenderer.renderText(r,this.canvasRenderBuffer.context);var d=r.$texture;d?i.context.updateTexture(d,u):(d=i.context.createTexture(u),r.$texture=d),r.$textureWidth=u.width,r.$textureHeight=u.height}var f=r.$textureWidth,p=r.$textureHeight;i.context.drawTexture(r.$texture,0,0,f,p,0,0,f/o,p/s,f,p),(l||h)&&(r.dirtyRender&&this.canvasRenderBuffer.context.setTransform(o,0,0,s,0,0),i.transform(1,0,0,1,-l/o,-h/s)),r.dirtyRender=!1}}},a.prototype.renderGraphics=function(r,i,n){var a=r.width,o=r.height;if(!(0>=a||0>=o)&&a&&o&&0!=r.drawData.length){var s=e.sys.DisplayList.$canvasScaleX,c=e.sys.DisplayList.$canvasScaleY;(1>a*s||1>o*c)&&(s=c=1),(r.$canvasScaleX!=s||r.$canvasScaleY!=c)&&(r.$canvasScaleX=s,r.$canvasScaleY=c,r.dirtyRender=!0),a*=s,o*=c;var l=Math.ceil(a),h=Math.ceil(o);if(s*=l/a,c*=h/o,a=l,o=h,this.canvasRenderBuffer&&this.canvasRenderBuffer.context?(r.dirtyRender||n)&&this.canvasRenderBuffer.resize(a,o):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(a,o)),this.canvasRenderBuffer.context){(1!=s||1!=c)&&this.canvasRenderBuffer.context.setTransform(s,0,0,c,0,0),(r.x||r.y)&&((r.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(-r.x,-r.y),i.transform(1,0,0,1,r.x,r.y));var u=this.canvasRenderBuffer.surface;if(n){this.canvasRenderer.renderGraphics(r,this.canvasRenderBuffer.context,!0),e.WebGLUtils.deleteWebGLTexture(u);var d=i.context.getWebGLTexture(u);i.context.drawTexture(d,0,0,a,o,0,0,a,o,u.width,u.height)}else{if(r.dirtyRender){this.canvasRenderer.renderGraphics(r,this.canvasRenderBuffer.context);var d=r.$texture;d?i.context.updateTexture(d,u):(d=i.context.createTexture(u),r.$texture=d),r.$textureWidth=u.width,r.$textureHeight=u.height}var f=r.$textureWidth,p=r.$textureHeight;i.context.drawTexture(r.$texture,0,0,f,p,0,0,f/s,p/c,f,p)}(r.x||r.y)&&((r.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(r.x,r.y),i.transform(1,0,0,1,-r.x,-r.y)),n||(r.dirtyRender=!1)}}},a.prototype.renderGroup=function(t,r){var i,n,a,o=t.matrix;if(o){i=e.Matrix.create();var s=r.globalMatrix;i.a=s.a,i.b=s.b,i.c=s.c,i.d=s.d,i.tx=s.tx,i.ty=s.ty,n=r.$offsetX,a=r.$offsetY,r.useOffset(),r.transform(o.a,o.b,o.c,o.d,o.tx,o.ty)}for(var c=t.drawData,l=c.length,h=0;l>h;h++){var u=c[h];this.renderNode(u,r,r.$offsetX,r.$offsetY)}if(o){var d=r.globalMatrix;d.a=i.a,d.b=i.b,d.c=i.c,d.d=i.d,d.tx=i.tx,d.ty=i.ty,r.$offsetX=n,r.$offsetY=a,e.Matrix.release(i)}},a.prototype.createRenderBuffer=function(e,r){var i=n.pop();return i?i.resize(e,r):(i=new t.WebGLRenderBuffer(e,r),i.$computeDrawCall=!1),i},a}();t.WebGLRenderer=a,__reflect(a.prototype,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(e,t,r){this.gl=e,this.name=r.name,this.type=r.type,this.size=r.size,this.location=e.getAttribLocation(t,this.name),this.count=0,this.initCount(e),this.format=e.FLOAT,this.initFormat(e)}return e.prototype.initCount=function(e){var t=this.type;switch(t){case 5126:case 5120:case 5121:case 5123:this.count=1;break;case 35664:this.count=2;break;case 35665:this.count=3;break;case 35666:this.count=4}},e.prototype.initFormat=function(e){var t=this.type;switch(t){case 5126:case 35664:case 35665:case 35666:this.format=e.FLOAT;break;case 5121:this.format=e.UNSIGNED_BYTE;break;case 5123:this.format=e.UNSIGNED_SHORT;break;case 5120:this.format=e.BYTE}},e}();e.EgretWebGLAttribute=t,__reflect(t.prototype,"egret.web.EgretWebGLAttribute")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(e,t,r){var i=e.createShader(t);e.shaderSource(i,r),e.compileShader(i);var n=e.getShaderParameter(i,e.COMPILE_STATUS);return n||(console.log("shader not compiled!"),console.log(e.getShaderInfoLog(i))),i}function r(e,t,r){var i=e.createProgram();return e.attachShader(i,t),e.attachShader(i,r),e.linkProgram(i),i}function i(t,r){for(var i={},n=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),a=0;n>a;a++){var o=t.getActiveAttrib(r,a),s=o.name,c=new e.EgretWebGLAttribute(t,r,o);i[s]=c}return i}function n(t,r){for(var i={},n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),a=0;n>a;a++){var o=t.getActiveUniform(r,a),s=o.name,c=new e.EgretWebGLUniform(t,r,o);i[s]=c}return i}var a=function(){function e(e,a,o){this.vshaderSource=a,this.fshaderSource=o,this.vertexShader=t(e,e.VERTEX_SHADER,this.vshaderSource),this.fragmentShader=t(e,e.FRAGMENT_SHADER,this.fshaderSource),this.id=r(e,this.vertexShader,this.fragmentShader),this.uniforms=n(e,this.id),this.attributes=i(e,this.id)}return e.getProgram=function(t,r,i,n){return this.programCache[n]||(this.programCache[n]=new e(t,r,i)),this.programCache[n]},e.deleteProgram=function(e,t,r,i){},e.programCache={},e}();e.EgretWebGLProgram=a,__reflect(a.prototype,"egret.web.EgretWebGLProgram")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(e,t,r){this.gl=e,this.name=r.name,this.type=r.type,this.size=r.size,this.location=e.getUniformLocation(t,this.name),this.setDefaultValue(),this.generateSetValue(),this.generateUpload()}return e.prototype.setDefaultValue=function(){var e=this.type;switch(e){case 5126:case 35678:case 35680:case 35670:case 5124:this.value=0;break;case 35664:case 35671:case 35667:this.value=[0,0];break;case 35665:case 35672:case 35668:this.value=[0,0,0];break;case 35666:case 35673:case 35669:this.value=[0,0,0,0];break;case 35674:this.value=new Float32Array([1,0,0,1]);break;case 35675:this.value=new Float32Array([1,0,0,0,1,0,0,0,1]);break;case 35676:this.value=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e.prototype.generateSetValue=function(){var e=this.type;switch(e){case 5126:case 35678:case 35680:case 35670:case 5124:this.setValue=function(e){var t=this.value!==e;this.value=e,t&&this.upload()};break;case 35664:case 35671:case 35667:this.setValue=function(e){var t=this.value[0]!==e.x||this.value[1]!==e.y;this.value[0]=e.x,this.value[1]=e.y,t&&this.upload()};break;case 35665:case 35672:case 35668:this.setValue=function(e){this.value[0]=e.x,this.value[1]=e.y,this.value[2]=e.z,this.upload()};break;case 35666:case 35673:case 35669:this.setValue=function(e){this.value[0]=e.x,this.value[1]=e.y,this.value[2]=e.z,this.value[3]=e.w,this.upload()};break;case 35674:case 35675:case 35676:this.setValue=function(e){this.value.set(e),this.upload()}}},e.prototype.generateUpload=function(){var e=this.gl,t=this.type,r=this.location;switch(t){case 5126:this.upload=function(){var t=this.value;e.uniform1f(r,t)};break;case 35664:this.upload=function(){var t=this.value;e.uniform2f(r,t[0],t[1])};break;case 35665:this.upload=function(){var t=this.value;e.uniform3f(r,t[0],t[1],t[2])};break;case 35666:this.upload=function(){var t=this.value;e.uniform4f(r,t[0],t[1],t[2],t[3])};break;case 35678:case 35680:case 35670:case 5124:this.upload=function(){var t=this.value;e.uniform1i(r,t)};break;case 35671:case 35667:this.upload=function(){var t=this.value;e.uniform2i(r,t[0],t[1])};break;case 35672:case 35668:this.upload=function(){var t=this.value;e.uniform3i(r,t[0],t[1],t[2])};break;case 35673:case 35669:this.upload=function(){var t=this.value;e.uniform4i(r,t[0],t[1],t[2],t[3])};break;case 35674:this.upload=function(){var t=this.value;e.uniformMatrix2fv(r,!1,t)};break;case 35675:this.upload=function(){var t=this.value;e.uniformMatrix3fv(r,!1,t)};break;case 35676:this.upload=function(){var t=this.value;e.uniformMatrix4fv(r,!1,t)}}},e}();e.EgretWebGLUniform=t,__reflect(t.prototype,"egret.web.EgretWebGLUniform")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){}return e.blur_frag="precision mediump float;\r\nuniform vec2 blur;\r\nuniform sampler2D uSampler;\r\nvarying vec2 vTextureCoord;\r\nuniform vec2 uTextureSize;\r\nvoid main()\r\n{\r\n    const int sampleRadius = 5;\r\n    const int samples = sampleRadius * 2 + 1;\r\n    vec2 blurUv = blur / uTextureSize;\r\n    vec4 color = vec4(0, 0, 0, 0);\r\n    vec2 uv = vec2(0.0, 0.0);\r\n    blurUv /= float(sampleRadius);\r\n\r\n    for (int i = -sampleRadius; i <= sampleRadius; i++) {\r\n        uv.x = vTextureCoord.x + float(i) * blurUv.x;\r\n        uv.y = vTextureCoord.y + float(i) * blurUv.y;\r\n        color += texture2D(uSampler, uv);\r\n    }\r\n\r\n    color /= float(samples);\r\n    gl_FragColor = color;\r\n}",e.colorTransform_frag="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform mat4 matrix;\r\nuniform vec4 colorAdd;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void) {\r\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n    if(texColor.a > 0.) {\r\n        // alpha\r\n        texColor = vec4(texColor.rgb / texColor.a, texColor.a);\r\n    }\r\n    vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\r\n    gl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\r\n}",e.default_vert="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec2 aColor;\r\n\r\nuniform vec2 projectionVector;\r\n// uniform vec2 offsetVector;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nconst vec2 center = vec2(-1.0, 1.0);\r\n\r\nvoid main(void) {\r\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\r\n   vTextureCoord = aTextureCoord;\r\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\r\n}",e.glow_frag="precision highp float;\r\nvarying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nuniform float dist;\r\nuniform float angle;\r\nuniform vec4 color;\r\nuniform float alpha;\r\nuniform float blurX;\r\nuniform float blurY;\r\n// uniform vec4 quality;\r\nuniform float strength;\r\nuniform float inner;\r\nuniform float knockout;\r\nuniform float hideObject;\r\n\r\nuniform vec2 uTextureSize;\r\n\r\nfloat random(vec2 scale)\r\n{\r\n    return fract(sin(dot(gl_FragCoord.xy, scale)) * 43758.5453);\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);\r\n    // TODO \r\n    const float linearSamplingTimes = 7.0;\r\n    const float circleSamplingTimes = 12.0;\r\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\r\n    vec4 curColor;\r\n    float totalAlpha = 0.0;\r\n    float maxTotalAlpha = 0.0;\r\n    float curDistanceX = 0.0;\r\n    float curDistanceY = 0.0;\r\n    float offsetX = dist * cos(angle) * px.x;\r\n    float offsetY = dist * sin(angle) * px.y;\r\n\r\n    const float PI = 3.14159265358979323846264;\r\n    float cosAngle;\r\n    float sinAngle;\r\n    float offset = PI * 2.0 / circleSamplingTimes * random(vec2(12.9898, 78.233));\r\n    float stepX = blurX * px.x / linearSamplingTimes;\r\n    float stepY = blurY * px.y / linearSamplingTimes;\r\n    for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {\r\n        cosAngle = cos(a + offset);\r\n        sinAngle = sin(a + offset);\r\n        for (float i = 1.0; i <= linearSamplingTimes; i++) {\r\n            curDistanceX = i * stepX * cosAngle;\r\n            curDistanceY = i * stepY * sinAngle;\r\n            if (vTextureCoord.x + curDistanceX - offsetX >= 0.0 && vTextureCoord.y + curDistanceY + offsetY <= 1.0){\r\n                curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));\r\n                totalAlpha += (linearSamplingTimes - i) * curColor.a;\r\n            }\r\n            maxTotalAlpha += (linearSamplingTimes - i);\r\n        }\r\n    }\r\n\r\n    ownColor.a = max(ownColor.a, 0.0001);\r\n    ownColor.rgb = ownColor.rgb / ownColor.a;\r\n\r\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);\r\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;\r\n\r\n    ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);\r\n    vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));\r\n    vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));\r\n    float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);\r\n    gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);\r\n}",e.primitive_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = vColor;\r\n}",e.texture_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\r\n}",e}();e.EgretShaderLib=t,__reflect(t.prototype,"egret.web.EgretShaderLib")}(t=e.web||(e.web={}))}(egret||(egret={}));

//js/game.min_45aa06f6.js
var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},egret;!function(t){var e=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,__reflect(e.prototype,"egret.URLLoaderDataFormat")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,r,i){var o=t.call(this)||this;return o._name=e,o._frame=0|r,i&&(o._end=0|i),o}return __extends(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._name,this._frame,this._end)},e}(t.EventDispatcher);t.FrameLabel=e,__reflect(e.prototype,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){var t=e.call(this)||this;return t.$mcData=null,t.numFrames=1,t.frames=[],t.labels=null,t.events=[],t.frameRate=0,t.textureData=null,t.spriteSheet=null,t}return __extends(r,e),r.prototype.$init=function(t,e,r){this.textureData=e,this.spriteSheet=r,this.setMCData(t)},r.prototype.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},r.prototype.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);if(e.res){var r=this.getTextureByResName(e.res);return r}return null},r.prototype.$getOffsetByFrame=function(t,e){var r=this.getKeyFrameData(t);r.res&&e.setTo(0|r.x,0|r.y)},r.prototype.getTextureByResName=function(t){if(null==this.spriteSheet)return null;var e=this.spriteSheet.getTexture(t);if(!e){var r=this.textureData[t];e=this.spriteSheet.createTexture(t,r.x,r.y,r.w,r.h)}return e},r.prototype.$isDataValid=function(){return this.frames.length>0},r.prototype.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},r.prototype.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels),this.fillFrameEventsData(t.events)},r.prototype.fillFramesData=function(t){for(var e,r=this.frames,i=t?t.length:0,o=0;i>o;o++){var n=t[o];if(r.push(n),n.duration){var s=parseInt(n.duration);if(s>1){e=r.length;for(var a=1;s>a;a++)r.push({frame:e})}}}this.numFrames=r.length},r.prototype.fillFrameLabelsData=function(e){if(e){var r=e.length;if(r>0){this.labels=[];for(var i=0;r>i;i++){var o=e[i];this.labels.push(new t.FrameLabel(o.name,o.frame,o.end))}}}},r.prototype.fillFrameEventsData=function(t){if(t){var e=t.length;if(e>0){this.events=[];for(var r=0;e>r;r++){var i=t[r];this.events[i.frame]=i.name}}}},Object.defineProperty(r.prototype,"mcData",{get:function(){return this.$mcData},set:function(t){this.setMCData(t)},enumerable:!0,configurable:!0}),r.prototype.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},r}(t.HashObject);t.MovieClipData=e,__reflect(e.prototype,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(t,r){var i=e.call(this)||this;return i.enableCache=!0,i.$mcDataCache={},i.$mcDataSet=t,i.setTexture(r),i}return __extends(r,e),r.prototype.clearCache=function(){this.$mcDataCache={}},r.prototype.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var r=this.findFromCache(e,this.$mcDataCache);return r||(r=new t.MovieClipData,this.fillData(e,r,this.$mcDataCache)),r},r.prototype.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},r.prototype.fillData=function(t,e,r){if(this.$mcDataSet){var i=this.$mcDataSet.mc[t];i&&(e.$init(i,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(r[t]=e))}},Object.defineProperty(r.prototype,"mcDataSet",{get:function(){return this.$mcDataSet},set:function(t){this.$mcDataSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"texture",{set:function(t){this.setTexture(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spriteSheet",{get:function(){return this.$spriteSheet},enumerable:!0,configurable:!0}),r.prototype.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},r}(t.EventDispatcher);t.MovieClipDataFactory=e,__reflect(e.prototype,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(t,r,i,o){void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null);var n=e.call(this,t,r,i)||this;return n.frameLabel=null,n.frameLabel=o,n}return __extends(r,e),r.dispatchMovieClipEvent=function(e,i,o){void 0===o&&(o=null);var n=t.Event.create(r,i);n.frameLabel=o;var s=e.dispatchEvent(n);return t.Event.release(n),s},r.FRAME_LABEL="frame_label",r}(t.Event);t.MovieClipEvent=e,__reflect(e.prototype,"egret.MovieClipEvent")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.quintOut=e.getPowOut(5),e.quartOut=e.getPowOut(4),e}();t.ScrollEase=e,__reflect(e.prototype,"egret.ScrollEase");var r=function(e){function r(t,r,i){var o=e.call(this)||this;return o._target=null,o._useTicks=!1,o.ignoreGlobalPause=!1,o.loop=!1,o.pluginData=null,o._steps=null,o._actions=null,o.paused=!1,o.duration=0,o._prevPos=-1,o.position=null,o._prevPosition=0,o._stepPosition=0,o.passive=!1,o.initialize(t,r,i),o}return __extends(r,e),r.get=function(t,e,i,o){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!1),o&&r.removeTweens(t),new r(t,e,i)},r.removeTweens=function(t){if(t.tween_count){for(var e=r._tweens,i=e.length-1;i>=0;i--)e[i]._target==t&&(e[i].paused=!0,e.splice(i,1));t.tween_count=0}},r.tick=function(t,e){void 0===e&&(e=!1);var i=t-r._lastTime;r._lastTime=t;for(var o=r._tweens.concat(),n=o.length-1;n>=0;n--){var s=o[n];e&&!s.ignoreGlobalPause||s.paused||s.tick(s._useTicks?1:i)}return!1},r._register=function(e,i){var o=e._target,n=r._tweens;if(i)o&&(o.tween_count=o.tween_count>0?o.tween_count+1:1),n.push(e),r._inited||(r._lastTime=t.getTimer(),t.ticker.$startTick(r.tick,null),r._inited=!0);else{o&&o.tween_count--;for(var s=n.length;s--;)if(n[s]==e)return void n.splice(s,1)}},r.prototype.initialize=function(t,e,i){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&r.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:r._register(this,!0),e&&null!=e.position&&this.setPosition(e.position)},r.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var r=t,i=!1;if(r>=this.duration&&(this.loop?r%=this.duration:(r=this.duration,i=!0)),r==this._prevPos)return i;var o=this._prevPos;if(this.position=this._prevPos=r,this._prevPosition=t,this._target)if(i)this._updateTargetProps(null,1);else if(this._steps.length>0){var n=void 0,s=this._steps.length;for(n=0;s>n&&!(this._steps[n].t>r);n++);var a=this._steps[n-1];this._updateTargetProps(a,(this._stepPosition=r-a.t)/a.d)}return i&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(r,r):1==e&&o>r?(o!=this.duration&&this._runActions(o,this.duration),this._runActions(0,r,!0)):this._runActions(o,r)),this.dispatchEventWith("change"),i},r.prototype._runActions=function(t,e,r){void 0===r&&(r=!1);var i=t,o=e,n=-1,s=this._actions.length,a=1;for(t>e&&(i=e,o=t,n=s,s=a=-1);(n+=a)!=s;){var c=this._actions[n],l=c.t;(l==o||l>i&&o>l||r&&l==t)&&c.f.apply(c.o,c.p)}},r.prototype._updateTargetProps=function(t,e){var i,o,n,s,a,c;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),i=t.p0,o=t.p1}else this.passive=!1,i=o=this._curQueueProps;for(var l in this._initQueueProps){null==(s=i[l])&&(i[l]=s=this._initQueueProps[l]),null==(a=o[l])&&(o[l]=a=s),n=s==a||0==e||1==e||"number"!=typeof s?1==e?a:s:s+(a-s)*e;var h=!1;if(c=r._plugins[l])for(var u=0,p=c.length;p>u;u++){var _=c[u].tween(this,l,n,i,o,e,!!t&&i==o,!t);_==r.IGNORE?h=!0:n=_}h||(this._target[l]=n)}},r.prototype.setPaused=function(t){return this.paused=t,r._register(this,!t),this},r.prototype._cloneProps=function(t){var e={};for(var r in t)e[r]=t[r];return e},r.prototype._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},r.prototype._appendQueueProps=function(t){var e,i,o,n,s;for(var a in t)if(void 0===this._initQueueProps[a]){if(i=this._target[a],e=r._plugins[a])for(o=0,n=e.length;n>o;o++)i=e[o].init(this,a,i);this._initQueueProps[a]=this._curQueueProps[a]=void 0===i?null:i}else i=this._curQueueProps[a];for(var a in t){if(i=this._curQueueProps[a],e=r._plugins[a])for(s=s||{},o=0,n=e.length;n>o;o++)e[o].step&&e[o].step(this,a,i,t[a],s);this._curQueueProps[a]=t[a]}return s&&this._appendQueueProps(s),this._curQueueProps},r.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},r.prototype.to=function(t,e,r){return void 0===r&&(r=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:r,p1:this._cloneProps(this._appendQueueProps(t))})},r.prototype.call=function(t,e,r){return void 0===e&&(e=void 0),void 0===r&&(r=void 0),this._addAction({f:t,p:r?r:[],o:e?e:this._target})},r.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},r._tweens=[],r.IGNORE={},r._plugins={},r._inited=!1,r._lastTime=0,r}(t.EventDispatcher);t.ScrollTween=r,__reflect(r.prototype,"egret.ScrollTween")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.scrollBeginThreshold=10,i.scrollSpeed=1,i._content=null,i.delayTouchBeginEvent=null,i.touchBeginTimer=null,i.touchEnabled=!0,i._ScrV_Props_=new t.ScrollViewProperties,r&&i.setContent(r),i}return __extends(r,e),Object.defineProperty(r.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(t){this._ScrV_Props_._bounces=!!t},enumerable:!0,configurable:!0}),r.prototype.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},r.prototype.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(r.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),r.prototype.setScrollPosition=function(t,e,r){if(void 0===r&&(r=!1),(!r||0!=t||0!=e)&&(r||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var i=this._ScrV_Props_._scrollTop,o=this._ScrV_Props_._scrollLeft;if(r){var n=this.getMaxScrollLeft(),s=this.getMaxScrollTop();(0>=i||i>=s)&&(t/=2),(0>=o||o>=n)&&(e/=2);var a=i+t,c=o+e,l=this._ScrV_Props_._bounces;l||((0>=a||a>=s)&&(a=Math.max(0,Math.min(a,s))),(0>=c||c>=n)&&(c=Math.max(0,Math.min(c,n)))),this._ScrV_Props_._scrollTop=a,this._ScrV_Props_._scrollLeft=c}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},r.prototype._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var r=this.height,i=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-r)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,i>r?i-r/2:r/2)}if(e){var o=this.width,n=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-o)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,n>o?n-o/2:o/2)}},r.prototype.$setWidth=function(t){this.$explicitWidth!=t&&(e.prototype.$setWidth.call(this,t),this._updateContentPosition())},r.prototype.$setHeight=function(t){this.$explicitHeight!=t&&(e.prototype.$setHeight.call(this,t),this._updateContentPosition())},r.prototype._updateContentPosition=function(){var e=this.height,r=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),r,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},r.prototype._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var r=this._ScrV_Props_._verticalScrollPolicy,i=this.__checkScrollPolicy(r,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=i,e||i},r.prototype.__checkScrollPolicy=function(t,e,r){return"on"==t?!0:"off"==t?!1:e>r},r.prototype._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},r.prototype._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},r.prototype._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var r=this._checkScrollPolicy();r&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},r.prototype._onTouchBeginCapture=function(e){var r=this._checkScrollPolicy();if(r){for(var i=e.target;i!=this;){if("_checkScrollPolicy"in i&&(r=i._checkScrollPolicy()))return;i=i.parent}e.stopPropagation();var o=this.cloneTouchEvent(e);this.delayTouchBeginEvent=o,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},r.prototype._onTouchEndCapture=function(e){var r=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var i=this.cloneTouchEvent(e);t.callLater(function(){r.stage&&r.dispatchPropagationEvent(i)},this)}},r.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},r.prototype.dispatchPropagationEvent=function(e){for(var r=e.$target,i=this.$getPropagationList(r),o=i.length,n=.5*i.length,s=-1,a=0;o>a;a++)if(i[a]===this._content){s=a;break}i.splice(0,s+1),n-=s+1,this.$dispatchPropagationEvent(e,i,n),t.Event.release(e)},r.prototype._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,r=t.stageY-this._ScrV_Props_._touchStartPosition.y,i=Math.sqrt(e*e+r*r);if(i<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var o=this._getPointChange(t);this.setScrollPosition(o.y,o.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},r.prototype._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},r.prototype._onEnterFrame=function(e){var r=t.getTimer();r-this._ScrV_Props_._lastTouchTime>100&&r-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},r.prototype._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},r.prototype._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},r.prototype._calcVelocitys=function(e){var r=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=r);var i=this._getPointChange(e),o=r-this._ScrV_Props_._lastTouchTime;i.x/=o,i.y/=o,this._ScrV_Props_._velocitys.push(i),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},r.prototype._getContentWidth=function(){return this._content.$explicitWidth||this._content.width},r.prototype._getContentHeight=function(){return this._content.$explicitHeight||this._content.height},r.prototype.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},r.prototype.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},r.prototype._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,i=0;i<this._ScrV_Props_._velocitys.length;i++){var o=this._ScrV_Props_._velocitys[i],n=r.weight[i];t.x+=o.x*n,t.y+=o.y*n,e+=n}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var s=t.x/e*this.scrollSpeed,a=t.y/e*this.scrollSpeed,c=Math.abs(s),l=Math.abs(a),h=this.getMaxScrollLeft(),u=this.getMaxScrollTop(),p=c>.02?this.getAnimationDatas(s,this._ScrV_Props_._scrollLeft,h):{position:this._ScrV_Props_._scrollLeft,duration:1},_=l>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollTop,u):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(p.position,p.duration),this.setScrollTop(_.position,_.duration)}},r.prototype.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},r.prototype._onScrollStarted=function(){},r.prototype._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},r.prototype.setScrollTop=function(e,r){void 0===r&&(r=0);var i=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==r)return void(this.scrollTop=i);0==this._ScrV_Props_._bounces&&(e=i);var o=t.ScrollTween.get(this).to({scrollTop:e},r,t.ScrollEase.quartOut);i!=e&&o.to({scrollTop:i},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},r.prototype.setScrollLeft=function(e,r){void 0===r&&(r=0);var i=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==r)return void(this.scrollLeft=i);0==this._ScrV_Props_._bounces&&(e=i);var o=t.ScrollTween.get(this).to({scrollLeft:e},r,t.ScrollEase.quartOut);i!=e&&o.to({scrollLeft:i},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},r.prototype.getAnimationDatas=function(t,e,r){var i=Math.abs(t),o=.95,n=0,s=.998,a=.02,c=e+500*t;if(0>c||c>r)for(c=e;Math.abs(t)!=1/0&&Math.abs(t)>a;)c+=t,t*=0>c||c>r?s*o:s,n++;else n=500*-Math.log(a/i);var l={position:Math.min(r+50,Math.max(c,-50)),duration:n};return l},r.prototype.cloneTouchEvent=function(e){var r=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return r.touchPointID=e.touchPointID,r.$stageX=e.stageX,r.$stageY=e.stageY,r.touchDown=e.touchDown,r.$isDefaultPrevented=!1,r.$target=e.target,r},r.prototype.throwNotSupportedError=function(){t.$error(1023)},r.prototype.addChild=function(t){return this.throwNotSupportedError(),null},r.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},r.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},r.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},r.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},r.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},r.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},r.weight=[1,1.33,1.66,2,2.33],r}(t.DisplayObjectContainer);t.ScrollView=e,__reflect(e.prototype,"egret.ScrollView")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}return e}();t.ScrollViewProperties=e,__reflect(e.prototype,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(t){function e(e){var r=e.url;return-1==r.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(r=r+"?"+e.data.toString()),r}var r=function(r){function i(e){void 0===e&&(e=null);var i=r.call(this)||this;return i.dataFormat=t.URLLoaderDataFormat.TEXT,i.data=null,i._request=null,i._status=-1,e&&i.load(e),i}return __extends(i,r),i.prototype.load=function(r){this._request=r,this.data=null;var i=this;if(i.dataFormat==t.URLLoaderDataFormat.TEXTURE)return void this.loadTexture(i);if(i.dataFormat==t.URLLoaderDataFormat.SOUND)return void this.loadSound(i);var o=e(r),n=new t.HttpRequest;n.open(o,r.method==t.URLRequestMethod.POST?t.HttpMethod.POST:t.HttpMethod.GET);var s;if(r.method!=t.URLRequestMethod.GET&&r.data)if(r.data instanceof t.URLVariables){n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var a=r.data;s=a.toString()}else n.setRequestHeader("Content-Type","multipart/form-data"),s=r.data;else;for(var c=r.requestHeaders.length,l=0;c>l;l++){var h=r.requestHeaders[l];n.setRequestHeader(h.name,h.value)}n.addEventListener(t.Event.COMPLETE,function(){i.data=n.response,t.Event.dispatchEvent(i,t.Event.COMPLETE)},this),n.addEventListener(t.IOErrorEvent.IO_ERROR,function(){t.IOErrorEvent.dispatchIOErrorEvent(i)},this),n.responseType=i.dataFormat==t.URLLoaderDataFormat.BINARY?t.HttpResponseType.ARRAY_BUFFER:t.HttpResponseType.TEXT,n.send(s)},i.prototype.getResponseType=function(e){switch(e){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:return t.URLLoaderDataFormat.TEXT;case t.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return e}},i.prototype.loadSound=function(e){function r(t){e.dispatchEvent(t)}function i(t){n(),e.dispatchEvent(t)}function o(r){n(),e.data=c,window.setTimeout(function(){e.dispatchEventWith(t.Event.COMPLETE)},0)}function n(){c.removeEventListener(t.Event.COMPLETE,o,s),c.removeEventListener(t.IOErrorEvent.IO_ERROR,i,s),c.removeEventListener(t.ProgressEvent.PROGRESS,r,s)}var s=this,a=e._request.url,c=new t.Sound;c.addEventListener(t.Event.COMPLETE,o,s),c.addEventListener(t.IOErrorEvent.IO_ERROR,i,s),c.addEventListener(t.ProgressEvent.PROGRESS,r,s),c.load(a)},i.prototype.loadTexture=function(e){function r(t){e.dispatchEvent(t)}function i(t){n(),e.dispatchEvent(t)}function o(r){n();var i=c.data;i.source.setAttribute("bitmapSrc",a);var o=new t.Texture;o._setBitmapData(i),e.data=o,window.setTimeout(function(){e.dispatchEventWith(t.Event.COMPLETE)},s)}function n(){c.removeEventListener(t.Event.COMPLETE,o,s),c.removeEventListener(t.IOErrorEvent.IO_ERROR,i,s),c.removeEventListener(t.ProgressEvent.PROGRESS,r,s)}var s=this,a=e._request.url,c=new t.ImageLoader;c.addEventListener(t.Event.COMPLETE,o,s),c.addEventListener(t.IOErrorEvent.IO_ERROR,i,s),c.addEventListener(t.ProgressEvent.PROGRESS,r,s),c.load(a)},i.prototype.__recycle=function(){this._request=null,this.data=null},i}(t.EventDispatcher);t.URLLoader=r,__reflect(r.prototype,"egret.URLLoader")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){var i=e.call(this)||this;return i.$texture=null,i.offsetPoint=t.Point.create(0,0),i.$movieClipData=null,i.frames=null,i.$totalFrames=0,i.frameLabels=null,i.$frameLabelStart=0,i.$frameLabelEnd=0,i.frameEvents=null,i.frameIntervalTime=0,i.$eventPool=null,i.$isPlaying=!1,i.isStopped=!0,i.playTimes=0,i.$currentFrameNum=0,i.$nextFrameNum=1,i.displayedKeyFrameNum=0,i.passedTime=0,i.$frameRate=0/0,i.lastTime=0,i.$smoothing=t.Bitmap.defaultSmoothing,i.setMovieClipData(r),t.nativeRender||(i.$renderNode=new t.sys.NormalBitmapNode),i}return __extends(r,e),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(r.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){t!=this.$smoothing&&(this.$smoothing=t)},enumerable:!0,configurable:!0}),r.prototype.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameEvents=t.events,this.$frameRate=t.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this._initFrame())},r.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},r.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},r.prototype.$updateRenderNode=function(){var e=this.$texture;if(e){var r=Math.round(this.offsetPoint.x),i=Math.round(this.offsetPoint.y),o=e.$bitmapWidth,n=e.$bitmapHeight,s=e.$getTextureWidth(),a=e.$getTextureHeight(),c=Math.round(e.$getScaleBitmapWidth()),l=Math.round(e.$getScaleBitmapHeight()),h=e.$sourceWidth,u=e.$sourceHeight;t.sys.BitmapNode.$updateTextureData(this.$renderNode,e.$bitmapData,e.$bitmapX,e.$bitmapY,o,n,r,i,s,a,c,l,h,u,t.BitmapFillMode.SCALE,this.$smoothing)}},r.prototype.$measureContentBounds=function(t){var e=this.$texture;if(e){var r=this.offsetPoint.x,i=this.offsetPoint.y,o=e.$getTextureWidth(),n=e.$getTextureHeight();t.setTo(r,i,o,n)}else t.setEmpty()},r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},r.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},r.prototype.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var r=this.frameLabels;if(r)for(var i=null,o=0;o<r.length;o++)if(i=r[o],e?i.name.toLowerCase()==t:i.name==t)return i;return null},r.prototype.getFrameStartEnd=function(t){var e=this.frameLabels;if(e)for(var r=null,i=0;i<e.length;i++)if(r=e[i],t==r.name){this.$frameLabelStart=r.frame,this.$frameLabelEnd=r.end;break}},r.prototype.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var r=null,i=0;i<e.length;i++)if(r=e[i],r.frame==t)return r;return null},r.prototype.getFrameLabelForFrame=function(t){var e=null,r=null,i=this.frameLabels;if(i)for(var o=0;o<i.length;o++){if(r=i[o],r.frame>t)return e;e=r}return e},r.prototype.play=function(e){void 0===e&&(e=0),this.lastTime=t.getTimer(),this.passedTime=0,this.$isPlaying=!0,this.setPlayTimes(e),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},r.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},r.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},r.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},r.prototype.gotoAndPlay=function(e,r){void 0===r&&(r=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(r),this.gotoFrame(e)},r.prototype.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},r.prototype.gotoFrame=function(e){var r;"string"==typeof e?r=this.getFrameLabelByName(e).frame:(r=parseInt(e+"",10),r!=e&&t.$error(1022,"Frame Label Not Found")),1>r?r=1:r>this.$totalFrames&&(r=this.$totalFrames),r!=this.$nextFrameNum&&(this.$nextFrameNum=r,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},r.prototype.advanceTime=function(e){var r=this,i=e-r.lastTime;r.lastTime=e;var o=r.frameIntervalTime,n=r.passedTime+i;r.passedTime=n%o;var s=n/o;if(1>s)return!1;for(;s>=1;){if(s--,r.$nextFrameNum++,r.$nextFrameNum>r.$totalFrames||r.$frameLabelStart>0&&r.$nextFrameNum>r.$frameLabelEnd)if(-1==r.playTimes)r.$eventPool.push(t.Event.LOOP_COMPLETE),r.$nextFrameNum=1;else{if(r.playTimes--,!(r.playTimes>0)){r.$nextFrameNum=r.$totalFrames,r.$eventPool.push(t.Event.COMPLETE),r.stop();break}r.$eventPool.push(t.Event.LOOP_COMPLETE),r.$nextFrameNum=1}r.$currentFrameNum==r.$frameLabelEnd&&(r.$nextFrameNum=r.$frameLabelStart),r.advanceFrame()}return r.constructFrame(),r.handlePendingEvent(),!1},r.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;var e=this.frameEvents[this.$nextFrameNum];e&&""!=e&&t.MovieClipEvent.dispatchMovieClipEvent(this,t.MovieClipEvent.FRAME_LABEL,e)},r.prototype.constructFrame=function(){var e=this,r=e.$currentFrameNum;if(e.displayedKeyFrameNum!=r){var i=e.$movieClipData.getTextureByFrame(r);if(e.$texture=i,e.$movieClipData.$getOffsetByFrame(r,e.offsetPoint),e.displayedKeyFrameNum=r,e.$renderDirty=!0,t.nativeRender)e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,i,[i.$bitmapX,i.$bitmapY,i.$bitmapWidth,i.$bitmapHeight,e.offsetPoint.x,e.offsetPoint.y,i.$getScaleBitmapWidth(),i.$getScaleBitmapHeight(),i.$sourceWidth,i.$sourceHeight]),e.$nativeDisplayObject.setWidth(i.$getTextureWidth()+e.offsetPoint.x),e.$nativeDisplayObject.setHeight(i.$getTextureHeight()+e.offsetPoint.y);else{var o=e.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());
var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}}},r.prototype.$renderFrame=function(){var t=this;t.$texture=t.$movieClipData.getTextureByFrame(t.$currentFrameNum),t.$renderDirty=!0;var e=t.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var r=t.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())},r.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,r=e.length,i=!1,o=!1,n=0;r>n;n++){var s=e.pop();s==t.Event.LOOP_COMPLETE?o=!0:s==t.Event.COMPLETE?i=!0:this.dispatchEventWith(s)}o&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),i&&this.dispatchEventWith(t.Event.COMPLETE)}},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFrameLabel",{get:function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentLabel",{get:function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(t){t!=this.$frameRate&&(this.$frameRate=t,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(t){this.setMovieClipData(t)},enumerable:!0,configurable:!0}),r.prototype.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},r.prototype.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},r.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?t.ticker.$stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.ticker.$startTick(this.advanceTime,this)))},r}(t.DisplayObject);t.MovieClip=e,__reflect(e.prototype,"egret.MovieClip")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.data=null,i.method=t.URLRequestMethod.GET,i.url="",i.requestHeaders=[],i.url=r,i}return __extends(r,e),r}(t.HashObject);t.URLRequest=e,__reflect(e.prototype,"egret.URLRequest")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.name="",this.value="",this.name=t,this.value=e}return t}();t.URLRequestHeader=e,__reflect(e.prototype,"egret.URLRequestHeader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,__reflect(e.prototype,"egret.URLRequestMethod")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r.variables=null,null!==e&&r.decode(e),r}return __extends(e,t),e.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,r=/[?&]?([^=]+)=([^&]*)/g;e=r.exec(t);){var i=decodeURIComponent(e[1]),o=decodeURIComponent(e[2]);if(i in this.variables!=0){var n=this.variables[i];n instanceof Array?n.push(o):this.variables[i]=[n,o]}else this.variables[i]=o}},e.prototype.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var r in t)e.push(this.encodeValue(r,t[r]));return e.join("&")},e.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},e.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},e}(t.HashObject);t.URLVariables=e,__reflect(e.prototype,"egret.URLVariables")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){var i=e.call(this)||this;return i._timeScale=1,i._paused=!1,i._callIndex=-1,i._lastTime=0,i.callBackList=[],null!=r.instance,t.ticker.$startTick(i.update,i),i._lastTime=t.getTimer(),i}return __extends(r,e),r.prototype.update=function(t){var e=t-this._lastTime;if(this._lastTime=t,this._paused)return!1;var r=e*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var i=this._callList[this._callIndex];i.listener.call(i.thisObject,r)}return this._callIndex=-1,this._callList=null,!1},r.prototype.register=function(t,e,r){void 0===r&&(r=0),this.$insertEventBin(this.callBackList,"",t,e,!1,r,!1)},r.prototype.unregister=function(t,e){this.$removeEventBin(this.callBackList,t,e)},r.prototype.setTimeScale=function(t){this._timeScale=t},r.prototype.getTimeScale=function(){return this._timeScale},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r}(t.EventDispatcher);t.Ticker=e,__reflect(e.prototype,"egret.Ticker")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){return e.call(this)||this}return __extends(r,e),Object.defineProperty(r.prototype,"stage",{get:function(){return t.sys.$TempStage},enumerable:!0,configurable:!0}),Object.defineProperty(r,"instance",{get:function(){return null==r._instance&&(r._instance=new r),r._instance},enumerable:!0,configurable:!0}),r.deviceType=null,r.DEVICE_PC="web",r.DEVICE_MOBILE="native",r}(t.EventDispatcher);t.MainContext=e,__reflect(e.prototype,"egret.MainContext")}(egret||(egret={})),egret.testDeviceType1=function(){if(!window.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},egret.MainContext.deviceType=egret.testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,delete egret.testDeviceType1;var egret;!function(t){var e=function(e){function r(t){void 0===t&&(t=300);var r=e.call(this)||this;return r.objectPool=[],r._length=0,1>t&&(t=1),r.autoDisposeTime=t,r.frameCount=0,r}return __extends(r,e),r.$init=function(){t.ticker.$startTick(r.onUpdate,r)},r.onUpdate=function(t){for(var e=r._callBackList,i=e.length-1;i>=0;i--)e[i].$checkFrame();return!1},r.prototype.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.push=function(t){var e=this.objectPool;-1==e.indexOf(t)&&(e.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,r._callBackList.push(this)))},r.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},r.prototype.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=r._callBackList,e=t.indexOf(this);-1!=e&&t.splice(e,1)},r._callBackList=[],r}(t.HashObject);t.Recycler=e,__reflect(e.prototype,"egret.Recycler"),e.$init()}(egret||(egret={}));var egret;!function(t){function e(e,r,c){for(var l=[],h=3;h<arguments.length;h++)l[h-3]=arguments[h];var u={listener:e,thisObject:r,delay:c,originDelay:c,params:l};return s++,1==s&&(a=t.getTimer(),t.ticker.$startTick(i,null)),n++,o[n]=u,n}function r(e){o[e]&&(s--,delete o[e],0==s&&t.ticker.$stopTick(i,null))}function i(t){var e=t-a;a=t;for(var r in o){var i=o[r];i.delay-=e,i.delay<=0&&(i.delay=i.originDelay,i.listener.apply(i.thisObject,i.params))}return!1}var o={},n=0,s=0,a=0;t.setInterval=e,t.clearInterval=r}(egret||(egret={}));var egret;!function(t){function e(e,r,c){for(var l=[],h=3;h<arguments.length;h++)l[h-3]=arguments[h];var u={listener:e,thisObject:r,delay:c,params:l};return s++,1==s&&t.ticker&&(a=t.getTimer(),t.ticker.$startTick(i,null)),n++,o[n]=u,n}function r(e){o[e]&&(s--,delete o[e],0==s&&t.ticker&&t.ticker.$stopTick(i,null))}function i(t){var e=t-a;a=t;for(var i in o){var n=i,s=o[n];s.delay-=e,s.delay<=0&&(s.listener.apply(s.thisObject,s.params),r(n))}return!1}var o={},n=0,s=0,a=0;t.setTimeout=e,t.clearTimeout=r}(egret||(egret={}));

//js/tween.min_6c5a88f9.js
var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},egret;!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var s=e/n*Math.asin(1/t);return-(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*n/e))}},e.getElasticOut=function(t,e){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var s=e/n*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-s)*n/e)+1}},e.getElasticInOut=function(t,e){var n=2*Math.PI;return function(i){var s=e/n*Math.asin(1/t);return(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*n/e)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*n/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,__reflect(e.prototype,"egret.Ease")}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(t,n,i){var s=e.call(this)||this;return s._target=null,s._useTicks=!1,s.ignoreGlobalPause=!1,s.loop=!1,s.pluginData=null,s._steps=null,s.paused=!1,s.duration=0,s._prevPos=-1,s.position=null,s._prevPosition=0,s._stepPosition=0,s.passive=!1,s.initialize(t,n,i),s}return __extends(n,e),n.get=function(t,e,i,s){return void 0===i&&(i=null),void 0===s&&(s=!1),s&&n.removeTweens(t),new n(t,e,i)},n.removeTweens=function(t){if(t.tween_count){for(var e=n._tweens,i=e.length-1;i>=0;i--)e[i]._target==t&&(e[i].paused=!0,e.splice(i,1));t.tween_count=0}},n.pauseTweens=function(e){if(e.tween_count)for(var n=t.Tween._tweens,i=n.length-1;i>=0;i--)n[i]._target==e&&(n[i].paused=!0)},n.resumeTweens=function(e){if(e.tween_count)for(var n=t.Tween._tweens,i=n.length-1;i>=0;i--)n[i]._target==e&&(n[i].paused=!1)},n.tick=function(t,e){void 0===e&&(e=!1);var i=t-n._lastTime;n._lastTime=t;for(var s=n._tweens.concat(),r=s.length-1;r>=0;r--){var o=s[r];e&&!o.ignoreGlobalPause||o.paused||o.$tick(o._useTicks?1:i)}return!1},n._register=function(e,i){var s=e._target,r=n._tweens;if(i)s&&(s.tween_count=s.tween_count>0?s.tween_count+1:1),r.push(e),n._inited||(n._lastTime=t.getTimer(),t.ticker.$startTick(n.tick,null),n._inited=!0);else{s&&s.tween_count--;for(var o=r.length;o--;)if(r[o]==e)return void r.splice(o,1)}},n.removeAllTweens=function(){for(var t=n._tweens,e=0,i=t.length;i>e;e++){var s=t[e];s.paused=!0,s._target.tween_count=0}t.length=0},n.prototype.initialize=function(t,e,i){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&n.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],e&&e.paused?this.paused=!0:n._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,n.NONE)},n.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var n=t,i=!1;if(n>=this.duration)if(this.loop){var s=n%this.duration;n=n>0&&0===s?this.duration:s}else n=this.duration,i=!0;if(n==this._prevPos)return i;i&&this.setPaused(!0);var r=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=t,this._target&&this._steps.length>0){for(var o=this._steps.length,u=-1,a=0;o>a&&!("step"==this._steps[a].type&&(u=a,this._steps[a].t<=n&&this._steps[a].t+this._steps[a].d>=n));a++);for(var a=0;o>a;a++)if("action"==this._steps[a].type)0!=e&&(this._useTicks?this._runAction(this._steps[a],n,n):1==e&&r>n?(r!=this.duration&&this._runAction(this._steps[a],r,this.duration),this._runAction(this._steps[a],0,n,!0)):this._runAction(this._steps[a],r,n));else if("step"==this._steps[a].type&&u==a){var p=this._steps[u];this._updateTargetProps(p,Math.min((this._stepPosition=n-p.t)/p.d,1))}}return this.dispatchEventWith("change"),i},n.prototype._runAction=function(t,e,n,i){void 0===i&&(i=!1);var s=e,r=n;e>n&&(s=n,r=e);var o=t.t;(o==r||o>s&&r>o||i&&o==e)&&t.f.apply(t.o,t.p)},n.prototype._updateTargetProps=function(t,e){var i,s,r,o,u,a;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),i=t.p0,s=t.p1}else this.passive=!1,i=s=this._curQueueProps;for(var p in this._initQueueProps){null==(o=i[p])&&(i[p]=o=this._initQueueProps[p]),null==(u=s[p])&&(s[p]=u=o),r=o==u||0==e||1==e||"number"!=typeof o?1==e?u:o:o+(u-o)*e;var h=!1;if(a=n._plugins[p])for(var c=0,_=a.length;_>c;c++){var f=a[c].tween(this,p,r,i,s,e,!!t&&i==s,!t);f==n.IGNORE?h=!0:r=f}h||(this._target[p]=r)}},n.prototype.setPaused=function(t){return this.paused==t?this:(this.paused=t,n._register(this,!t),this)},n.prototype._cloneProps=function(t){var e={};for(var n in t)e[n]=t[n];return e},n.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n.prototype._appendQueueProps=function(t){var e,i,s,r,o;for(var u in t)if(void 0===this._initQueueProps[u]){if(i=this._target[u],e=n._plugins[u])for(s=0,r=e.length;r>s;s++)i=e[s].init(this,u,i);this._initQueueProps[u]=this._curQueueProps[u]=void 0===i?null:i}else i=this._curQueueProps[u];for(var u in t){if(i=this._curQueueProps[u],e=n._plugins[u])for(o=o||{},s=0,r=e.length;r>s;s++)e[s].step&&e[s].step(this,u,i,t[u],o);this._curQueueProps[u]=t[u]}return o&&this._appendQueueProps(o),this._curQueueProps},n.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},n.prototype._set=function(t,e){for(var n in t)e[n]=t[n]},n.prototype.wait=function(t,e){if(null==t||0>=t)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:n,p1:n,v:e})},n.prototype.to=function(t,e,n){return void 0===n&&(n=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},n.prototype.call=function(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=void 0),this._addAction({f:t,p:n?n:[],o:e?e:this._target})},n.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},n.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},n.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},n.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},n.NONE=0,n.LOOP=1,n.REVERSE=2,n._tweens=[],n.IGNORE={},n._plugins={},n._inited=!1,n._lastTime=0,n}(t.EventDispatcher);t.Tween=e,__reflect(e.prototype,"egret.Tween")}(egret||(egret={}));var egret;!function(t){var e;!function(e){function n(e){if("function"==typeof e)return e;var n=t.Ease[e];return"function"==typeof n?n:null}function i(t,e,n,i){var s=t.prototype;s.__meta__=s.__meta__||{},s.__meta__[e]=n,i&&(s.__defaultProperty__=e)}var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="",e}return __extends(e,t),e}(t.EventDispatcher);e.BasePath=s,__reflect(s.prototype,"egret.tween.BasePath");var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.props=void 0,e.duration=500,e.ease=void 0,e}return __extends(e,t),e}(s);e.To=r,__reflect(r.prototype,"egret.tween.To");var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=500,e.passive=void 0,e}return __extends(e,t),e}(s);e.Wait=o,__reflect(o.prototype,"egret.tween.Wait");var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.props=void 0,e}return __extends(e,t),e}(s);e.Set=u,__reflect(u.prototype,"egret.tween.Set");var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=0,e}return __extends(e,t),e}(s);e.Tick=a,__reflect(a.prototype,"egret.tween.Tick");var p=function(e){function i(){var t=e.call(this)||this;return t.isStop=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"props",{get:function(){return this._props},set:function(t){this._props=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paths",{get:function(){return this._paths},set:function(t){this._paths=t||[]},enumerable:!0,configurable:!0}),i.prototype.play=function(t){this.tween?(this.tween.setPaused(!1),this.isStop&&void 0==t&&(t=0,this.isStop=!1),void 0!==t&&null!==t&&this.tween.setPosition(t)):this.createTween(t)},i.prototype.pause=function(){this.tween&&this.tween.setPaused(!0)},i.prototype.stop=function(){this.pause(),this.isStop=!0},i.prototype.createTween=function(e){this.tween=t.Tween.get(this._target,this._props),this._paths&&this.applyPaths(),void 0!==e&&null!==e&&this.tween.setPosition(e)},i.prototype.applyPaths=function(){for(var t=0;t<this._paths.length;t++){var e=this._paths[t];this.applyPath(e)}},i.prototype.applyPath=function(t){var e=this;t instanceof r?this.tween.to(t.props,t.duration,n(t.ease)):t instanceof o?this.tween.wait(t.duration,t.passive):t instanceof u?this.tween.set(t.props):t instanceof a&&this.tween.$tick(t.delta),this.tween.call(function(){return e.pathComplete(t)})},i.prototype.pathComplete=function(t){t.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",!1,t);var e=this._paths.indexOf(t);e>=0&&e===this._paths.length-1&&this.dispatchEventWith("complete")},i}(t.EventDispatcher);e.TweenItem=p,__reflect(p.prototype,"egret.tween.TweenItem"),i(p,"paths","Array",!0);var h=function(t){function e(){var e=t.call(this)||this;return e.completeCount=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this.completeCount=0,this.registerEvent(!1),this._items=t,this.registerEvent(!0)},enumerable:!0,configurable:!0}),e.prototype.registerEvent=function(t){var e=this;this._items&&this._items.forEach(function(n){t?n.addEventListener("complete",e.itemComplete,e):n.removeEventListener("complete",e.itemComplete,e)})},e.prototype.play=function(t){if(this._items)for(var e=0;e<this._items.length;e++){var n=this._items[e];n.play(t)}},e.prototype.pause=function(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t];e.pause()}},e.prototype.stop=function(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t];e.stop()}},e.prototype.itemComplete=function(t){var e=t.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",!1,e),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)},e}(t.EventDispatcher);e.TweenGroup=h,__reflect(h.prototype,"egret.tween.TweenGroup"),i(h,"items","Array",!0)}(e=t.tween||(t.tween={}))}(egret||(egret={}));

//js/assetsmanager.min_f2e50bd1.js
var __reflect=this&&this.__reflect||function(e,r,t){e.__class__=r,t?t.push(r):t=[r],e.__types__=e.__types__?t.concat(e.__types__):t},__extends=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);t.prototype=r.prototype,e.prototype=new t},__decorate=this&&this.__decorate||function(e,r,t,o){var n,i=arguments.length,s=3>i?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(3>i?n(s):i>3?n(r,t,s):n(r,t))||s);return i>3&&s&&Object.defineProperty(r,t,s),s},RES;!function(e){}(RES||(RES={}));var RES;!function(e){var r=function(){function r(){this.groupTotalDic={},this.numLoadedDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.reporterDic={},this.dispatcherDic={},this.failedList=new Array,this.loadItemErrorDic={},this.errorDic={},this.itemListPriorityDic={},this.itemLoadDic={},this.promiseHash={},this.lazyLoadList=new Array,this.loadingCount=0,this.thread=4}return r.prototype.pushResItem=function(e){if(this.promiseHash[e.root+e.name])return this.promiseHash[e.root+e.name];this.lazyLoadList.push(e),this.itemListPriorityDic[Number.NEGATIVE_INFINITY]=this.lazyLoadList,this.updatelistPriority(this.lazyLoadList,Number.NEGATIVE_INFINITY);var r=new egret.EventDispatcher;this.dispatcherDic[e.root+e.name]=r;var t=new Promise(function(e,t){r.addEventListener("complete",function(r){e(r.data)},null),r.addEventListener("error",function(e){t(e.data)},null)});return this.promiseHash[e.root+e.name]=t,this.loadNextResource(),t},r.prototype.pushResGroup=function(e,r,t,o){if(this.promiseHash[r])return this.promiseHash[r];for(var n=e.length,i=0;n>i;i++){var s=e[i];s.groupNames||(s.groupNames=[]),s.groupNames.push(r)}this.groupTotalDic[r]=e.length,this.numLoadedDic[r]=0,this.updatelistPriority(e,t),this.reporterDic[r]=o;var a=new egret.EventDispatcher;this.dispatcherDic[r]=a;var u=new Promise(function(e,r){a.addEventListener("complete",e,null),a.addEventListener("error",function(e){r(e.data)},null)});return this.promiseHash[r]=u,this.loadNextResource(),u},r.prototype.updatelistPriority=function(e,r){void 0==this.itemListPriorityDic[r]&&(this.itemListPriorityDic[r]=[]);for(var t=0,o=e;t<o.length;t++){var n=o[t];if(1!=this.itemLoadDic[n.root+n.name]){var i=this.findPriorityInDic(n);if(void 0==i)this.itemListPriorityDic[r].push(n);else if(r>i){this.itemListPriorityDic[r].push(n);var s=this.itemListPriorityDic[i].indexOf(n);this.itemListPriorityDic[i].splice(s,1)}}}},r.prototype.findPriorityInDic=function(e){for(var r in this.itemListPriorityDic)if(this.itemListPriorityDic[r].indexOf(e)>-1)return parseInt(r)},r.prototype.loadNextResource=function(){for(;this.loadingCount<this.thread;){var e=this.loadSingleResource();if(!e)break}},r.prototype.loadSingleResource=function(){var r=this,t=this.getOneResourceInfoInGroup();return t?(this.itemLoadDic[t.root+t.name]=1,this.loadingCount++,this.loadResource(t).then(function(o){if(r.loadingCount--,delete r.itemLoadDic[t.root+t.name],e.host.save(t,o),r.promiseHash[t.root+t.name]){var n=r.deleteDispatcher(t.root+t.name);n.dispatchEventWith("complete",!1,o)}var i=t.groupNames;if(i){delete t.groupNames;for(var s=0,a=i;s<a.length;s++){var u=a[s];r.setGroupProgress(u,t)&&r.loadGroupEnd(u)}}r.loadNextResource()})["catch"](function(o){if(!o)throw t.name+" load fail";if(!o.__resource_manager_error__)throw o;delete r.itemLoadDic[t.root+t.name],r.loadingCount--,delete e.host.state[t.root+t.name];var n=r.retryTimesDic[t.name]||1;if(!(n>r.maxRetryTimes))return r.retryTimesDic[t.name]=n+1,r.failedList.push(t),void r.loadNextResource();if(delete r.retryTimesDic[t.name],r.promiseHash[t.root+t.name]){var i=r.deleteDispatcher(t.root+t.name);i.dispatchEventWith("error",!1,{r:t,error:o})}var s=t.groupNames;if(s){delete t.groupNames;for(var a=0,u=s;a<u.length;a++){var c=u[a];r.loadItemErrorDic[c]||(r.loadItemErrorDic[c]=[]),-1==r.loadItemErrorDic[c].indexOf(t)&&r.loadItemErrorDic[c].push(t),r.groupErrorDic[c]=!0,r.setGroupProgress(c,t)?r.loadGroupEnd(c,o):r.errorDic[c]=o}}r.loadNextResource()}),!0):!1},r.prototype.getOneResourceInfoInGroup=function(){if(this.failedList.length>0)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var r in this.itemListPriorityDic)e=Math.max(e,r);var t=this.itemListPriorityDic[e];if(t)return 0==t.length?(delete this.itemListPriorityDic[e],this.getOneResourceInfoInGroup()):t.shift()},r.prototype.setGroupProgress=function(e,r){var t=this.reporterDic[e];this.numLoadedDic[e]++;var o=this.numLoadedDic[e],n=this.groupTotalDic[e];return t&&t.onProgress&&t.onProgress(o,n,r),o==n},r.prototype.loadGroupEnd=function(e,r){delete this.groupTotalDic[e],delete this.numLoadedDic[e],delete this.reporterDic[e];var t=this.deleteDispatcher(e);if(r){delete this.groupErrorDic[e];var o=this.loadItemErrorDic[e];delete this.loadItemErrorDic[e],t.dispatchEventWith("error",!1,{itemList:o,lastError:r})}else{var n=this.groupErrorDic[e];if(delete this.groupErrorDic[e],n){var o=this.loadItemErrorDic[e];delete this.loadItemErrorDic[e];var i=this.errorDic[e];delete this.errorDic[e],t.dispatchEventWith("error",!1,{itemList:o,error:i})}else t.dispatchEventWith("complete")}},r.prototype.deleteDispatcher=function(e){delete this.promiseHash[e];var r=this.dispatcherDic[e];return delete this.dispatcherDic[e],r},r.prototype.loadResource=function(r,t){if(!t){if(1==e.FEATURE_FLAG.FIX_DUPLICATE_LOAD){var o=e.host.state[r.root+r.name];if(2==o)return Promise.resolve(e.host.get(r));if(1==o)return r.promise}t=e.processor.isSupport(r)}if(!t)throw new e.ResourceManagerError(2001,r.name,r.type);e.host.state[r.root+r.name]=1;var n=t.onLoadStart(e.host,r);return r.promise=n,n},r.prototype.unloadResource=function(r){var t=e.host.get(r);if(!t)return console.warn(":",r.name),!1;var o=e.processor.isSupport(r);return o?(o.onRemoveStart(e.host,r),e.host.remove(r),1==r.extra&&e.config.removeResourceData(r),!0):!0},r}();e.ResourceLoader=r,__reflect(r.prototype,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(e){e.checkNull=function(e,r,t){var o=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[0]?o.apply(this,e):(console.warn(""+r+"null"),null)}},e.FEATURE_FLAG={FIX_DUPLICATE_LOAD:1};var r;!function(e){function r(e){t=e}var t="warning";e.setUpgradeGuideLevel=r}(r=e.upgrade||(e.upgrade={}))}(RES||(RES={}));var RES;!function(e){function r(r){var t=e.config.config.fileSystem.getFile(r);return t||(r=e.resourceNameSelector(r),t=e.config.config.fileSystem.getFile(r)),t}function t(e,r){var t;t=e.indexOf(".json")>=0?"legacyResourceConfig":"resourceConfig",o={type:t,root:r,url:e,name:e}}e.resourceNameSelector=function(e){return e},e.getResourceInfo=r;var o;e.setConfigURL=t;var n=function(){function t(){}return t.prototype.init=function(){return this.config||(this.config={alias:{},groups:{},resourceRoot:o.root,mergeSelector:null,fileSystem:null,loadGroup:[]}),e.queue.pushResItem(o)["catch"](function(r){return e.isCompatible||r.__resource_manager_error__||(r.error?console.error(r.error.stack):console.error(r.stack),r=new e.ResourceManagerError(1002)),e.host.remove(o),Promise.reject(r)})},t.prototype.getGroupByName=function(r){var t=this.config.groups[r],o=[];if(!t)return o;for(var n=0,i=t;n<i.length;n++){var s=i[n],a=void 0;if(a=e.config.getResourceWithSubkey(s),null!=a){var u=a.r,c=a.key;if(null==u)throw new e.ResourceManagerError(2005,c);-1==o.indexOf(u)&&o.push(u)}}return o},t.prototype.__temp__get__type__via__url=function(r){var t=this.config.alias[r];if(t||(t=r),e.typeSelector){var o=e.typeSelector(t);if(!o)throw new e.ResourceManagerError(2004,t);return o}return console.warn("RES.mapConfig  typeSelector"),"unknown"},t.prototype.getResourceWithSubkey=function(e){e=this.getKeyByAlias(e);var r=e.indexOf("#"),t="";r>=0&&(t=e.substr(r+1),e=e.substr(0,r));var o=this.getResource(e);return o?{r:o,key:e,subkey:t}:null},t.prototype.getKeyByAlias=function(e){return this.config.alias[e]?this.config.alias[e]:e},t.prototype.getResource=function(e){var t=this.config.alias[e];t||(t=e);var o=r(t);return o?o:null},t.prototype.createGroup=function(e,r,t){if(void 0===t&&(t=!1),!t&&this.config.groups[e]||!r||0==r.length)return!1;for(var o=[],n=0,i=r;n<i.length;n++){var s=i[n];if(this.config.groups[s]){var a=this.config.groups[s];o=o.concat(a)}else o.push(s)}return this.config.groups[e]=o,!0},t.prototype.addSubkey=function(e,r){this.addAlias(e,r+"#"+e)},t.prototype.addAlias=function(e,r){this.config.alias[r]&&(r=this.config.alias[r]),this.config.alias[e]=r},t.prototype.addResourceData=function(r){e.hasRes(r.name)||(r.type||(r.type=this.__temp__get__type__via__url(r.url)),e.config.config.fileSystem.addFile(r))},t.prototype.removeResourceData=function(r){e.hasRes(r.name)&&(e.config.config.fileSystem.removeFile(r.url),this.config.alias[r.name]&&delete this.config.alias[r.name])},t}();e.ResourceConfig=n,__reflect(n.prototype,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(e){function r(r){return e.path.basename(r).split(".").join("_")}function t(r){var t,o=r.substr(r.lastIndexOf(".")+1);switch(o){case e.ResourceItem.TYPE_XML:case e.ResourceItem.TYPE_JSON:case e.ResourceItem.TYPE_SHEET:t=o;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":t=e.ResourceItem.TYPE_IMAGE;break;case"fnt":t=e.ResourceItem.TYPE_FONT;break;case"txt":t=e.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":t=e.ResourceItem.TYPE_SOUND;break;case"mergeJson":case"zip":case"pvr":t=o;break;default:t=e.ResourceItem.TYPE_BIN}return t}function o(r,t){throw new e.ResourceManagerError(2002)}function n(r){e.isCompatible=r}function i(r,t){if(t.indexOf("://")>=0){var o=t.split("://");t=o[0]+"://"+e.path.normalize(o[1]+"/"),r=r.replace(t,"")}else t=e.path.normalize(t+"/"),r=r.replace(t,"");return e.setConfigURL(r,t),P||(P=new D),s(P.loadConfig())}function s(r){return e.isCompatible?void r["catch"](function(e){}).then():r}function a(e,r,t){return void 0===r&&(r=0),s(P.loadGroup(e,r,t))}function u(e){return P.isGroupLoaded(e)}function c(r){return P.getGroupByName(r).map(function(r){return e.ResourceItem.convertToResItem(r)})}function l(e,r,t){return void 0===t&&(t=!1),P.createGroup(e,r,t)}function f(e){return P.hasRes(e)}function p(e){return P.getRes(e)}function g(e,r,t){return s(P.getResAsync.apply(P,arguments))}function d(e,r,t,o){return void 0===o&&(o=""),s(P.getResByUrl(e,r,t,o))}function h(e,r){return P.destroyRes(e,r)}function v(e){P||(P=new D),P.setMaxLoadingThread(e)}function m(e){P.setMaxRetryTimes(e)}function R(e,r,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=0),P||(P=new D),P.addEventListener(e,r,t,o,n)}function E(e,r,t,o){void 0===o&&(o=!1),P.removeEventListener(e,r,t,o)}function y(e){P.addResourceData(e)}function _(){return P||(P=new D),P.vcs}function S(e){P||(P=new D),P.registerVersionController(e)}function L(e){return P.vcs?P.vcs.getVirtualUrl(e):e}e.nameSelector=r,e.typeSelector=t,e.registerAnalyzer=o,e.setIsCompatible=n,e.isCompatible=!1,e.loadConfig=i,e.loadGroup=a,e.isGroupLoaded=u,e.getGroupByName=c,e.createGroup=l,e.hasRes=f,e.getRes=p,e.getResAsync=g,e.getResByUrl=d,e.destroyRes=h,e.setMaxLoadingThread=v,e.setMaxRetryTimes=m,e.addEventListener=R,e.removeEventListener=E,e.$addResourceData=y,e.getVersionController=_,e.registerVersionController=S,e.getVirtualUrl=L;var D=function(r){function t(){var t=r.call(this)||this;return t.isVcsInit=!1,t.normalLoadConfig=function(){return e.config.init().then(function(r){e.ResourceEvent.dispatchResourceEvent(t,e.ResourceEvent.CONFIG_COMPLETE)},function(r){return e.ResourceEvent.dispatchResourceEvent(t,e.ResourceEvent.CONFIG_LOAD_ERROR),Promise.reject(r)})},e.VersionController&&(t.vcs=new e.VersionController),t}return __extends(t,r),t.prototype.registerVersionController=function(e){this.vcs=e,this.isVcsInit=!1},t.prototype.loadConfig=function(){var e=this;return!this.isVcsInit&&this.vcs?(this.isVcsInit=!0,this.vcs.init().then(function(){return e.normalLoadConfig()})):this.normalLoadConfig()},t.prototype.isGroupLoaded=function(r){var t=e.config.getGroupByName(r);return t.every(function(r){return null!=e.host.get(r)})},t.prototype.getGroupByName=function(r){return e.config.getGroupByName(r)},t.prototype.loadGroup=function(r,t,o){var n=this;void 0===t&&(t=0);var i={onProgress:function(t,i,s){o&&o.onProgress&&o.onProgress(t,i,s),e.ResourceEvent.dispatchResourceEvent(n,e.ResourceEvent.GROUP_PROGRESS,r,s,t,i)}};return this._loadGroup(r,t,i).then(function(t){-1==e.config.config.loadGroup.indexOf(r)&&e.config.config.loadGroup.push(r),e.ResourceEvent.dispatchResourceEvent(n,e.ResourceEvent.GROUP_COMPLETE,r)},function(t){if(-1==e.config.config.loadGroup.indexOf(r)&&e.config.config.loadGroup.push(r),t.itemList)for(var o=t.itemList,i=o.length,s=0;i>s;s++){var a=o[s];delete a.promise,e.ResourceEvent.dispatchResourceEvent(n,e.ResourceEvent.ITEM_LOAD_ERROR,r,a)}return e.isCompatible&&console.warn(t.error.message),e.ResourceEvent.dispatchResourceEvent(n,e.ResourceEvent.GROUP_LOAD_ERROR,r),Promise.reject(t.error)})},t.prototype._loadGroup=function(r,t,o){void 0===t&&(t=0);var n=e.config.getGroupByName(r);return 0==n.length?new Promise(function(t,o){o({error:new e.ResourceManagerError(2005,r)})}):e.queue.pushResGroup(n,r,t,o)},t.prototype.createGroup=function(r,t,o){return void 0===o&&(o=!1),e.config.createGroup(r,t,o)},t.prototype.hasRes=function(r){return null!=e.config.getResourceWithSubkey(r)},t.prototype.getRes=function(r){var t=e.config.getResourceWithSubkey(r);if(t){var o=t.r,n=t.key,i=t.subkey,s=e.processor.isSupport(o);return s&&s.getData&&i?s.getData(e.host,o,n,i):e.host.get(o)}return null},t.prototype.getResAsync=function(r,t,o){var n=this,i=r,s=e.config.getResourceWithSubkey(r);if(null==s)return t&&t.call(o,null,i),Promise.reject(new e.ResourceManagerError(2006,r));var a=s.r,u=s.subkey;return e.queue.pushResItem(a).then(function(n){e.host.save(a,n);var s=e.processor.isSupport(a);return s&&s.getData&&u&&(n=s.getData(e.host,a,r,u)),t&&t.call(o,n,i),n},function(r){return e.host.remove(a),e.ResourceEvent.dispatchResourceEvent(n,e.ResourceEvent.ITEM_LOAD_ERROR,"",a),t?(t.call(o,null,i),Promise.reject(null)):Promise.reject(r)})},t.prototype.getResByUrl=function(r,t,o,n){var i=this;void 0===n&&(n="");var s=e.config.getResource(r);if(!s&&(n||(n=e.config.__temp__get__type__via__url(r)),s={name:r,url:r,type:n,root:"",extra:1},e.config.addResourceData(s),s=e.config.getResource(r),!s))throw"never";return e.queue.pushResItem(s).then(function(r){return e.host.save(s,r),t&&s&&t.call(o,r,s.url),r},function(n){return e.host.remove(s),e.ResourceEvent.dispatchResourceEvent(i,e.ResourceEvent.ITEM_LOAD_ERROR,"",s),t?(t.call(o,null,r),Promise.reject(null)):Promise.reject(n)})},t.prototype.destroyRes=function(r,t){void 0===t&&(t=!0);var o=e.config.getGroupByName(r);if(o&&o.length>0){var n=e.config.config.loadGroup.indexOf(r);if(-1==n)return!1;if(t||1==e.config.config.loadGroup.length&&e.config.config.loadGroup[0]==r){for(var i=0,s=o;i<s.length;i++){var a=s[i];e.queue.unloadResource(a)}e.config.config.loadGroup.splice(n,1)}else{for(var u={},c=0,l=e.config.config.loadGroup;c<l.length;c++){var f=l[c];for(var p in e.config.config.groups[f]){var g=e.config.config.groups[f][p];u[g]?u[g]++:u[g]=1}}for(var d=0,h=o;d<h.length;d++){var a=h[d];u[a.name]&&1==u[a.name]&&e.queue.unloadResource(a)}e.config.config.loadGroup.splice(n,1)}return!0}var a=e.config.getResource(r);return a?e.queue.unloadResource(a):(console.warn(""+r+""),!1)},t.prototype.setMaxLoadingThread=function(r){1>r&&(r=1),e.queue.thread=r},t.prototype.setMaxRetryTimes=function(r){r=Math.max(r,0),e.queue.maxRetryTimes=r},t.prototype.addResourceData=function(r){r.root="",e.config.addResourceData(r)},__decorate([e.checkNull],t.prototype,"hasRes",null),__decorate([e.checkNull],t.prototype,"getRes",null),__decorate([e.checkNull],t.prototype,"getResAsync",null),__decorate([e.checkNull],t.prototype,"getResByUrl",null),t}(egret.EventDispatcher);e.Resource=D,__reflect(D.prototype,"RES.Resource");var P}(RES||(RES={}));var RES;!function(e){var r;!function(e){function r(e){var r=e.split("/");return r.filter(function(e,t){return!!e||t==r.length-1}).join("/")}function t(e){return e.substr(e.lastIndexOf("/")+1)}function o(e){return e.substr(0,e.lastIndexOf("/"))}e.normalize=r,e.basename=t,e.dirname=o}(r=e.path||(e.path={}))}(RES||(RES={}));var RES;!function(e){function r(){e.config.config.fileSystem.profile(),console.log(t);var r=0;for(var o in t){var n=t[o];n instanceof egret.Texture&&(r+=n.$bitmapWidth*n.$bitmapHeight*4)}console.log("gpu size : "+(r/1024).toFixed(3)+"kb")}var t={};e.profile=r,e.host={state:{},get resourceConfig(){return e.config},load:function(r,t){var o="string"==typeof t?e.processor._map[t]:t;return e.queue.loadResource(r,o)},unload:function(r){return e.queue.unloadResource(r)},save:function(r,o){e.host.state[r.root+r.name]=2,delete r.promise,t[r.root+r.name]=o},get:function(e){return t[e.root+e.name]},remove:function(r){delete e.host.state[r.root+r.name],delete t[r.root+r.name]}},e.config=new e.ResourceConfig,e.queue=new e.ResourceLoader;var o=function(e){function r(t,o,n){var i=e.call(this)||this;return i.__resource_manager_error__=!0,i.name=t.toString(),i.message=r.errorMessage[t].replace("{0}",o).replace("{1}",n),i}return __extends(r,e),r.errorMessage={1001:":{0}",1002:"ResourceManager ",2001:"{0},:'{1}' Processor  https://github.com/egret-labs/resourcemanager/blob/master/docs/README.md#processor",2002:"Analyzer API  ResourceManager  Processor  https://github.com/egret-labs/resourcemanager/blob/master/docs/README.md#processor",2003:"{0},:{1}",2004:":{0}",2005:'RES:"{0}"',2006:":{0}"},r}(Error);e.ResourceManagerError=o,__reflect(o.prototype,"RES.ResourceManagerError")}(RES||(RES={}));var RES;!function(e){var r;!function(r){function t(e){return r._map[e.type]}function o(e,t){r._map[e]=t}function n(r,t){var o=this;return new Promise(function(n,i){var s=function(){var e=r.data?r.data:r.response;n(e)},a=function(){var r=new e.ResourceManagerError(1001,t.url);i(r)};r.addEventListener(egret.Event.COMPLETE,s,o),r.addEventListener(egret.IOErrorEvent.IO_ERROR,a,o)})}function i(e,r){if(-1!=r.indexOf("://"))return r;e=e.split("\\").join("/");var t=e.match(/#.*|\?.*/),o="";t&&(o=t[0]);var n=e.lastIndexOf("/");return e=-1!=n?e.substring(0,n+1)+r:r,e+o}r.isSupport=t,r.map=o,r.getRelativePath=i,r.ImageProcessor={onLoadStart:function(r,t){var o=new egret.ImageLoader;return o.load(e.getVirtualUrl(t.root+t.url)),n(o,t).then(function(e){var o=new egret.Texture;o._setBitmapData(e);var n=r.resourceConfig.getResource(t.name);if(n&&n.scale9grid){var i=n.scale9grid.split(",");o.scale9Grid=new egret.Rectangle(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))}return o})},onRemoveStart:function(e,r){var t=e.get(r);t.dispose()}},r.BinaryProcessor={onLoadStart:function(r,t){var o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.ARRAY_BUFFER,o.open(e.getVirtualUrl(t.root+t.url),"get"),o.send(),n(o,t)},onRemoveStart:function(e,r){}},r.TextProcessor={onLoadStart:function(r,t){var o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.TEXT,o.open(e.getVirtualUrl(t.root+t.url),"get"),o.send(),n(o,t)},onRemoveStart:function(e,r){return!0}},r.JsonProcessor={onLoadStart:function(e,r){return e.load(r,"text").then(function(e){var r=JSON.parse(e);return r})},onRemoveStart:function(e,r){}},r.XMLProcessor={onLoadStart:function(e,r){return e.load(r,"text").then(function(e){var r=egret.XML.parse(e);return r})},onRemoveStart:function(e,r){return!0}},r.CommonJSProcessor={onLoadStart:function(r,t){return r.load(t,"text").then(function(r){var o=new Function("require","exports",r),n=function(){},i={};try{o(n,i)}catch(s){throw new e.ResourceManagerError(2003,t.name,s.message)}return i})},onRemoveStart:function(e,r){}},r.SheetProcessor={onLoadStart:function(r,t){return r.load(t,"json").then(function(o){var n=r.resourceConfig.getResource(e.nameSelector(o.file));if(!n){var s=i(t.url,o.file);n={name:s,url:s,type:"image",root:t.root}}return r.load(n).then(function(e){var t=o.frames,i=new egret.SpriteSheet(e);i.$resourceInfo=n;for(var s in t){var a=t[s],u=i.createTexture(s,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);if(a.scale9grid){var c=a.scale9grid,l=c.split(",");u.scale9Grid=new egret.Rectangle(parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),parseInt(l[3]))}}return r.save(n,e),i},function(e){throw r.remove(n),e})})},getData:function(e,r,t,o){var n=e.get(r);return n?n.getTexture(o):null},onRemoveStart:function(e,r){var t=e.get(r),o=t.$resourceInfo;t.dispose(),e.unload(o)}};var s=function(e,r){var t="",o=r.split("\n"),n=o[2],i=n.indexOf('file="');-1!=i&&(n=n.substring(i+6),i=n.indexOf('"'),t=n.substring(0,i)),e=e.split("\\").join("/");var i=e.lastIndexOf("/");return e=-1!=i?e.substring(0,i+1)+t:t};r.FontProcessor={onLoadStart:function(r,t){return r.load(t,"text").then(function(o){var n;try{n=JSON.parse(o)}catch(a){n=o}var u;u="string"==typeof n?s(t.url,n):i(t.url,n.file);var c=r.resourceConfig.getResource(e.nameSelector(u));return c||(c={name:u,url:u,type:"image",root:t.root}),r.load(c).then(function(e){var t=new egret.BitmapFont(e,n);return t.$resourceInfo=c,r.save(c,e),t},function(e){throw r.remove(c),e})})},onRemoveStart:function(e,r){var t=e.get(r),o=t.$resourceInfo;e.unload(o)}},r.SoundProcessor={onLoadStart:function(r,t){var o=new egret.Sound;return o.load(e.getVirtualUrl(t.root+t.url)),n(o,t).then(function(){return o})},onRemoveStart:function(e,r){}},r.MovieClipProcessor={onLoadStart:function(r,t){var o,n;return r.load(t,"json").then(function(i){o=i;var s=t.name,a=s.substring(0,s.lastIndexOf("."))+".png";if(n=r.resourceConfig.getResource(a),!n)throw new e.ResourceManagerError(1001,a);return r.load(n)}).then(function(e){r.save(n,e);var t=e,i=new egret.MovieClipDataFactory(o,t);return i})},onRemoveStart:function(e,r){var t=e.get(r);t.clearCache(),t.$spriteSheet.dispose();var o=r.name,n=o.substring(0,o.lastIndexOf("."))+".png",i=e.resourceConfig.getResource(n);i&&e.unload(i)}},r.MergeJSONProcessor={onLoadStart:function(r,t){return r.load(t,"json").then(function(r){for(var o in r)e.config.addSubkey(o,t.name);return r})},getData:function(e,r,t,o){var n=e.get(r);return n?n[o]:(console.error("missing resource :"+r.name),null)},onRemoveStart:function(e,r){}},r.LegacyResourceConfigProcessor={onLoadStart:function(r,t){return r.load(t,"json").then(function(o){var n=e.config.config,i=t.root,s=n.fileSystem;s||(s={fsData:{},getFile:function(e){return p[e]},addFile:function(e){e.type||(e.type=""),void 0==i&&(e.root=""),p[e.name]=e},profile:function(){console.log(p)},removeFile:function(e){delete p[e]}},n.fileSystem=s);for(var a=n.groups,u=0,c=o.groups;u<c.length;u++){var l=c[u];""==l.keys?a[l.name]=[]:a[l.name]=l.keys.split(",")}for(var f=n.alias,p=s.fsData,g=function(e){p[e.name]=e,p[e.name].root=i,e.subkeys&&e.subkeys.split(",").forEach(function(r){f[r]=e.name+"#"+r,f[e.name+"."+r]=e.name+"#"+r})},d=0,h=o.resources;d<h.length;d++){var v=h[d];g(v)}return r.save(t,o),o})},onRemoveStart:function(){}},r._map={image:r.ImageProcessor,json:r.JsonProcessor,text:r.TextProcessor,xml:r.XMLProcessor,sheet:r.SheetProcessor,font:r.FontProcessor,bin:r.BinaryProcessor,commonjs:r.CommonJSProcessor,sound:r.SoundProcessor,movieclip:r.MovieClipProcessor,mergeJson:r.MergeJSONProcessor,legacyResourceConfig:r.LegacyResourceConfigProcessor}}(r=e.processor||(e.processor={}))}(RES||(RES={}));var RES;!function(e){var r=function(r){function t(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1);var n=r.call(this,e,t,o)||this;return n.itemsLoaded=0,n.itemsTotal=0,n.groupName="",n}return __extends(t,r),t.dispatchResourceEvent=function(r,o,n,i,s,a){void 0===n&&(n=""),void 0===i&&(i=void 0),void 0===s&&(s=0),void 0===a&&(a=0);var u=egret.Event.create(t,o);u.groupName=n,i&&(u.resItem=e.ResourceItem.convertToResItem(i)),u.itemsLoaded=s,u.itemsTotal=a;var c=r.dispatchEvent(u);return egret.Event.release(u),c},t.ITEM_LOAD_ERROR="itemLoadError",t.CONFIG_COMPLETE="configComplete",t.CONFIG_LOAD_ERROR="configLoadError",t.GROUP_PROGRESS="groupProgress",t.GROUP_COMPLETE="groupComplete",t.GROUP_LOAD_ERROR="groupLoadError",t}(egret.Event);e.ResourceEvent=r,__reflect(r.prototype,"RES.ResourceEvent")}(RES||(RES={}));var RES;!function(e){var r;!function(r){function t(r){var t=r.name;if(e.config.config)for(var o in e.config.config.alias)e.config.config.alias[o]==r.url&&(t=o);else t=r.url;var n={name:t,url:r.url,type:r.type,data:r,root:r.root};return n}r.TYPE_XML="xml",r.TYPE_IMAGE="image",r.TYPE_BIN="bin",r.TYPE_TEXT="text",r.TYPE_JSON="json",r.TYPE_SHEET="sheet",r.TYPE_FONT="font",r.TYPE_SOUND="sound",r.convertToResItem=t}(r=e.ResourceItem||(e.ResourceItem={}))}(RES||(RES={}));var RES;!function(e){var r=function(){function r(e){this.data=e}return r.prototype.profile=function(){console.log(this.data)},r.prototype.addFile=function(r,t){t||(t=""),r=e.path.normalize(r);var o=e.path.basename(r),n=e.path.dirname(r);this.exists(n)||this.mkdir(n);var i=this.resolve(n);i[o]={url:r,type:t}},r.prototype.getFile=function(e){var r=this.resolve(e);return r&&(r.name=e),r},r.prototype.resolve=function(r){if(""==r)return this.data;r=e.path.normalize(r);for(var t=r.split("/"),o=this.data,n=0,i=t;n<i.length;n++){var s=i[n];if(!o)return o;o=o[s]}return o},r.prototype.mkdir=function(r){r=e.path.normalize(r);for(var t=r.split("/"),o=this.data,n=0,i=t;n<i.length;n++){var s=i[n];o[s]||(o[s]={}),o=o[s]}},r.prototype.exists=function(r){if(""==r)return!0;r=e.path.normalize(r);for(var t=r.split("/"),o=this.data,n=0,i=t;n<i.length;n++){var s=i[n];if(!o[s])return!1;o=o[s]}return!0},r}();e.NewFileSystem=r,__reflect(r.prototype,"RES.NewFileSystem")}(RES||(RES={}));var RES;!function(e){var r=function(){function e(){}return e.prototype.init=function(){return this.versionInfo=this.getLocalData("all.manifest"),Promise.resolve()},e.prototype.getVirtualUrl=function(e){return e},e.prototype.getLocalData=function(e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var r=egret_native.readUpdateFileSync(e);if(null!=r)return JSON.parse(r);if(r=egret_native.readResourceFileSync(e),null!=r)return JSON.parse(r)}return null},e}();e.NativeVersionController=r,__reflect(r.prototype,"RES.NativeVersionController",["RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(e.VersionController=r)}(RES||(RES={}));

//js/eui.min_38a8c284.js
var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},eui;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.targetLevel=Number.POSITIVE_INFINITY,e.invalidatePropertiesFlag=!1,e.invalidateClientPropertiesFlag=!1,e.invalidatePropertiesQueue=new i,e.invalidateSizeFlag=!1,e.invalidateClientSizeFlag=!1,e.invalidateSizeQueue=new i,e.invalidateDisplayListFlag=!1,e.invalidateDisplayListQueue=new i,e.eventDisplay=new egret.Bitmap,e.listenersAttached=!1,e}return __extends(e,t),e.prototype.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},e.prototype.validateProperties=function(){for(var t=this.invalidatePropertiesQueue,e=t.shift();e;)e.$stage&&e.validateProperties(),e=t.shift();t.isEmpty()&&(this.invalidatePropertiesFlag=!1)},e.prototype.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},e.prototype.validateSize=function(){for(var t=this.invalidateSizeQueue,e=t.pop();e;)e.$stage&&e.validateSize(),e=t.pop();t.isEmpty()&&(this.invalidateSizeFlag=!1)},e.prototype.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},e.prototype.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue,e=t.shift();e;)e.$stage&&e.validateDisplayList(),e=t.shift();t.isEmpty()&&(this.invalidateDisplayListFlag=!1)},e.prototype.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),egret.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},e.prototype.doPhasedInstantiationCallBack=function(t){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},e.prototype.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},e.prototype.validateClient=function(t){var e,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=t.$nestLevel);for(var r=this.invalidatePropertiesQueue,o=this.invalidateSizeQueue,s=this.invalidateDisplayListQueue;!i;){for(i=!0,e=r.removeSmallestChild(t);e;)e.$stage&&e.validateProperties(),e=r.removeSmallestChild(t);for(r.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,e=o.removeLargestChild(t);e;){if(e.$stage&&e.validateSize(),this.invalidateClientPropertiesFlag&&(e=r.removeSmallestChild(t))){r.insert(e),i=!1;break}e=o.removeLargestChild(t)}for(o.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,e=s.removeSmallestChild(t);e;){if(e.$stage&&e.validateDisplayList(),this.invalidateClientPropertiesFlag&&(e=r.removeSmallestChild(t))){r.insert(e),i=!1;break}if(this.invalidateClientSizeFlag&&(e=o.removeLargestChild(t))){o.insert(e),i=!1;break}e=s.removeSmallestChild(t)}s.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},e}(egret.EventDispatcher);t.Validator=e,__reflect(e.prototype,"eui.sys.Validator");var i=function(){function t(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}return t.prototype.insert=function(t){var e=t.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var i=this.depthBins[e];i||(i=this.depthBins[e]=new n),i.insert(t)},t.prototype.pop=function(){var t,e=this.minDepth;if(e<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<e)return null;i=this.depthBins[this.maxDepth]}for(t=i.pop();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<e));)i=this.depthBins[this.maxDepth]}return t},t.prototype.shift=function(){var t,e=this.maxDepth;if(this.minDepth<=e){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>e)return null;i=this.depthBins[this.minDepth]}for(t=i.pop();!(i&&0!=i.length||(this.minDepth++,this.minDepth>e));)i=this.depthBins[this.minDepth]}return t},t.prototype.removeLargestChild=function(t){for(var e=t.$hashCode,i=t.$nestLevel,n=this.maxDepth,r=i;n>=r;){var o=this.depthBins[n];if(o&&o.length>0){if(n===i){if(o.map[e])return o.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var s=o.items,a=o.length,h=0;a>h;h++){var l=s[h];if(t.contains(l))return o.remove(l),l}}n--}else if(n==this.maxDepth&&this.maxDepth--,n--,r>n)break}return null},t.prototype.removeSmallestChild=function(t){for(var e=t.$nestLevel,i=e,n=this.maxDepth,r=t.$hashCode;n>=i;){var o=this.depthBins[i];if(o&&o.length>0){if(i===e){if(o.map[r])return o.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var s=o.items,a=o.length,h=0;a>h;h++){var l=s[h];if(t.contains(l))return o.remove(l),l}}i++}else if(i==this.minDepth&&this.minDepth++,i++,i>n)break}return null},t.prototype.isEmpty=function(){return this.minDepth>this.maxDepth},t}();__reflect(i.prototype,"DepthQueue");var n=function(){function t(){this.map={},this.items=[],this.length=0}return t.prototype.insert=function(t){var e=t.$hashCode;this.map[e]||(this.map[e]=!0,this.length++,this.items.push(t))},t.prototype.pop=function(){var t=this.items.pop();return t&&(this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1),t},t.prototype.remove=function(t){var e=this.items.indexOf(t);e>=0&&(this.items.splice(e,1),this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1)},t}();__reflect(n.prototype,"DepthBin")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){function e(t,e,i,n){var r=t.prototype;r.__meta__=r.__meta__||{},r.__meta__[e]=i,n&&(r.__defaultProperty__=e)}t.registerProperty=e}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=[]);var n=e.call(this)||this;return n.name=t,n.overrides=i,n}return __extends(i,e),i.prototype.initialize=function(e,i){for(var n=this.overrides,r=n.length,o=0;r>o;o++){var s=n[o];if(s instanceof t.AddItems){var a=e[s.target];a&&a instanceof t.Image&&!a.$parent&&(i.addChild(a),i.removeChild(a))}}},i}(egret.HashObject);t.State=e,__reflect(e.prototype,"eui.State")}(eui||(eui={})),function(t){var e;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"states",{get:function(){return this.$stateValues.states},set:function(t){t||(t=[]);var e=this.$stateValues;e.states=t;for(var i={},n=t.length,r=0;n>r;r++){var o=t[r];i[o.name]=o}e.statesMap=i,e.parent&&this.commitCurrentState()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this.$stateValues.currentState},set:function(t){var e=this.$stateValues;e.explicitState=t,e.currentState=t,this.commitCurrentState()},enumerable:!0,configurable:!0}),t.prototype.commitCurrentState=function(){var t=this.$stateValues;if(t.parent){var e=t.statesMap[t.currentState];if(!e){if(!(t.states.length>0))return;t.currentState=t.states[0].name}if(t.oldState!=t.currentState){var i=t.parent,n=t.statesMap[t.oldState];if(n)for(var r=n.overrides,o=r.length,s=0;o>s;s++)r[s].remove(this,i);if(t.oldState=t.currentState,n=t.statesMap[t.currentState])for(var r=n.overrides,a=r.length,s=0;a>s;s++)r[s].apply(this,i)}}},t.prototype.hasState=function(t){return!!this.$stateValues.statesMap[t]},t.prototype.initializeStates=function(t){this.$stateValues.intialized=!0;for(var e=this.states,i=e.length,n=0;i>n;n++)e[n].initialize(this,t)},t}();t.StateClient=e,__reflect(e.prototype,"eui.sys.StateClient");var i=function(){function t(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1}return t}();t.StateValues=i,__reflect(i.prototype,"eui.sys.StateValues")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){function e(e,i,n){var r=egret.getImplementation("eui.IAssetAdapter");r||(r=new t.DefaultAssetAdapter),r.getAsset(e,function(t){i.call(n,t)},this)}function i(e,i){var n=egret.getImplementation("eui.IThemeAdapter");n||(n=new t.DefaultThemeAdapter),n.getTheme(e,function(t){i(t)},function(t){console.log(t)},this)}t.getAssets=e,t.getTheme=i}(eui||(eui={})),function(t){var e;!function(e){function i(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d}function n(t,e){if("function"!=typeof t[e])return!1;var i=t[e].toString(),n=i.indexOf("{"),r=i.lastIndexOf("}");return i=i.substring(n+1,r),""==i.trim()}function r(t,e){for(var i in e)"prototype"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);for(var r=t.prototype,o=e.prototype,s=Object.keys(o),a=s.length,h=0;a>h;h++){var l=s[h];if("__meta__"!=l&&(!r.hasOwnProperty(l)||n(r,l))){var u=Object.getOwnPropertyDescriptor(o,l);Object.defineProperty(r,l,u)}}}function o(e,i,n){r(e,h);var o=e.prototype;o.$super=i.prototype,t.registerProperty(e,"left","Percentage"),t.registerProperty(e,"right","Percentage"),t.registerProperty(e,"top","Percentage"),t.registerProperty(e,"bottom","Percentage"),t.registerProperty(e,"horizontalCenter","Percentage"),t.registerProperty(e,"verticalCenter","Percentage"),n&&(o.$childAdded=function(t,e){this.invalidateSize(),this.invalidateDisplayList()},o.$childRemoved=function(t,e){this.invalidateSize(),this.invalidateDisplayList()})}var s="eui.UIComponent",a=new e.Validator,h=function(n){function r(){var t=n.call(this)||this;return t.initializeUIValues(),t}return __extends(r,n),r.prototype.initializeUIValues=function(){this.$UIComponent={0:0/0,1:0/0,2:0/0,3:0/0,4:0/0,5:0/0,6:0/0,7:0/0,8:0/0,9:0/0,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:0/0,19:0/0,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0,this.$touchEnabled=!0},r.prototype.createChildren=function(){},r.prototype.childrenCreated=function(){},r.prototype.commitProperties=function(){var e=this.$UIComponent;(e[22]!=e[10]||e[23]!=e[11])&&(this.dispatchEventWith(egret.Event.RESIZE),e[22]=e[10],e[23]=e[11]),(e[20]!=this.$getX()||e[21]!=this.$getY())&&(t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE),e[20]=this.$getX(),e[21]=this.$getY())},r.prototype.measure=function(){},r.prototype.updateDisplayList=function(t,e){},Object.defineProperty(r.prototype,"includeInLayout",{get:function(){return this.$includeInLayout},set:function(t){t=!!t,this.$includeInLayout!==t&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=t)},enumerable:!0,configurable:!0}),r.prototype.$onAddToStage=function(e,i){this.$super.$onAddToStage.call(this,e,i),this.checkInvalidateFlag();var n=this.$UIComponent;n[29]||(n[29]=!0,this.createChildren(),this.childrenCreated(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CREATION_COMPLETE))},r.prototype.checkInvalidateFlag=function(t){var e=this.$UIComponent;e[24]&&a.invalidateProperties(this),e[25]&&a.invalidateSize(this),e[26]&&a.invalidateDisplayList(this)},Object.defineProperty(r.prototype,"left",{get:function(){return this.$UIComponent[0]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[0]!==t&&(e[0]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$UIComponent[1]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[1]!==t&&(e[1]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$UIComponent[2]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[2]!==t&&(e[2]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$UIComponent[3]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[3]!=t&&(e[3]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalCenter",{get:function(){return this.$UIComponent[4]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[4]!==t&&(e[4]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalCenter",{get:function(){return this.$UIComponent[5]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[5]!==t&&(e[5]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentWidth",{get:function(){return this.$UIComponent[6]},set:function(t){t=+t;var e=this.$UIComponent;e[6]!==t&&(e[6]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentHeight",{get:function(){return this.$UIComponent[7]},set:function(t){t=+t;var e=this.$UIComponent;e[7]!==t&&(e[7]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitWidth",{get:function(){return this.$UIComponent[8]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitHeight",{get:function(){return this.$UIComponent[9]},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},r.prototype.$setWidth=function(t){t=+t;var e=this.$UIComponent;return 0>t||e[10]===t&&e[8]===t?!1:(e[8]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},r.prototype.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},r.prototype.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},r.prototype.$setHeight=function(t){t=+t;var e=this.$UIComponent;return 0>t||e[11]===t&&e[9]===t?!1:(e[9]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},Object.defineProperty(r.prototype,"minWidth",{get:function(){return this.$UIComponent[12]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[12]===t||(e[12]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this.$UIComponent[13]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[13]===t||(e[13]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minHeight",{get:function(){return this.$UIComponent[14]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[14]===t||(e[14]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){return this.$UIComponent[15]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[15]===t||(e[15]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),r.prototype.setMeasuredSize=function(t,e){var i=this.$UIComponent;i[16]=Math.ceil(+t||0),i[17]=Math.ceil(+e||0)},r.prototype.setActualSize=function(t,e){var i=!1,n=this.$UIComponent;n[10]!==t&&(n[10]=t,i=!0),n[11]!==e&&(n[11]=e,i=!0),i&&(this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.RESIZE))},r.prototype.$updateUseTransform=function(){this.$super.$updateUseTransform.call(this),this.invalidateParentLayout()},r.prototype.$setMatrix=function(t,e){return void 0===e&&(e=!0),this.$super.$setMatrix.call(this,t,e),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetX=function(t){return this.$super.$setAnchorOffsetX.call(this,t),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetY=function(t){return this.$super.$setAnchorOffsetY.call(this,t),this.invalidateParentLayout(),!0},r.prototype.$setX=function(t){var e=this.$super.$setX.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},r.prototype.$setY=function(t){var e=this.$super.$setY.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},r.prototype.invalidateProperties=function(){var t=this.$UIComponent;t[24]||(t[24]=!0,this.$stage&&a.invalidateProperties(this))},r.prototype.validateProperties=function(){var t=this.$UIComponent;t[24]&&(this.commitProperties(),t[24]=!1)},r.prototype.invalidateSize=function(){var t=this.$UIComponent;t[25]||(t[25]=!0,this.$stage&&a.invalidateSize(this))},r.prototype.validateSize=function(t){if(t){var e=this.$children;if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];egret.is(r,s)&&r.validateSize(!0)}}var o=this.$UIComponent;if(o[25]){var a=this.measureSizes();a&&(this.invalidateDisplayList(),this.invalidateParentLayout()),o[25]=!1}},r.prototype.measureSizes=function(){var t=!1,e=this.$UIComponent;if(!e[25])return t;(isNaN(e[8])||isNaN(e[9]))&&(this.measure(),e[16]<e[12]&&(e[16]=e[12]),e[16]>e[13]&&(e[16]=e[13]),e[17]<e[14]&&(e[17]=e[14]),e[17]>e[15]&&(e[17]=e[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return(i!==e[18]||n!==e[19])&&(e[18]=i,e[19]=n,t=!0),t},r.prototype.invalidateDisplayList=function(){var t=this.$UIComponent;t[26]||(t[26]=!0,this.$stage&&a.invalidateDisplayList(this))},r.prototype.validateDisplayList=function(){var t=this.$UIComponent;t[26]&&(this.updateFinalSize(),this.updateDisplayList(t[10],t[11]),t[26]=!1)},r.prototype.updateFinalSize=function(){var t=0,e=0,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],e=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(t,e)},r.prototype.validateNow=function(){this.$stage&&a.validateClient(this)},r.prototype.invalidateParentLayout=function(){var t=this.$parent;t&&this.$includeInLayout&&egret.is(t,s)&&(t.invalidateSize(),t.invalidateDisplayList())},r.prototype.setLayoutBoundsSize=function(t,n){if(n=+n,t=+t,!(0>n||0>t)){var r,o,s=this.$UIComponent,a=s[13],h=s[15],l=Math.min(s[12],a),u=Math.min(s[14],h);isNaN(t)?(s[27]=!1,r=this.getPreferredUWidth()):(s[27]=!0,r=Math.max(l,Math.min(a,t))),isNaN(n)?(s[28]=!1,o=this.getPreferredUHeight()):(s[28]=!0,o=Math.max(u,Math.min(h,n)));var p=this.getAnchorMatrix();if(i(p))return void this.setActualSize(r,o);var c=e.MatrixUtil.fitBounds(t,n,p,s[8],s[9],this.getPreferredUWidth(),this.getPreferredUHeight(),l,u,a,h);c||(c=egret.Point.create(l,u)),this.setActualSize(c.x,c.y),egret.Point.release(c)}},r.prototype.setLayoutBoundsPosition=function(e,n){var r=this.$getMatrix();if(!i(r)||0!=this.anchorOffsetX||0!=this.anchorOffsetY){var o=egret.$TempRectangle;this.getLayoutBounds(o),e+=this.$getX()-o.x,n+=this.$getY()-o.y}var s=this.$super.$setX.call(this,e);(this.$super.$setY.call(this,n)||s)&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE)},r.prototype.getLayoutBounds=function(t){var e,i=this.$UIComponent;e=i[27]?i[10]:isNaN(i[8])?i[16]:i[8];var n;n=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.applyMatrix(t,e,n)},r.prototype.getPreferredUWidth=function(){var t=this.$UIComponent;return isNaN(t[8])?t[16]:t[8]},r.prototype.getPreferredUHeight=function(){var t=this.$UIComponent;return isNaN(t[9])?t[17]:t[9]},r.prototype.getPreferredBounds=function(t){var e=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(t,e,i)},r.prototype.applyMatrix=function(t,e,n){t.setTo(0,0,e,n);var r=this.getAnchorMatrix();i(r)?(t.x+=r.tx,t.y+=r.ty):r.$transformBounds(t)},r.prototype.getAnchorMatrix=function(){var t=this.$getMatrix(),e=this.anchorOffsetX,i=this.anchorOffsetY;if(0!=e||0!=i){var n=egret.$TempMatrix;return t.$preMultiplyInto(n.setTo(1,0,0,1,-e,-i),n),n}return t},r}(egret.DisplayObject);e.UIComponentImpl=h,__reflect(h.prototype,"eui.sys.UIComponentImpl",["eui.UIComponent","egret.DisplayObject"]),e.mixin=r,e.implementUIComponent=o}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$layout=null,i.$stateValues=new t.sys.StateValues,i.initializeUIValues(),i.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},i.$stateValues.parent=i,i}return __extends(i,e),Object.defineProperty(i.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},set:function(t){this.$setLayout(t)},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(t){return this.$layout==t?!1:(this.$layout&&(this.$layout.target=null),this.$layout=t,t&&(t.target=this),this.invalidateSize(),this.invalidateDisplayList(),!0)},Object.defineProperty(i.prototype,"contentWidth",{get:function(){return this.$Group[0]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){return this.$Group[1]},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(e,i){e=Math.ceil(+e||0),i=Math.ceil(+i||0);var n=this.$Group,r=n[0]!==e,o=n[1]!==i;(r||o)&&(n[0]=e,n[1]=i,r&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),o&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},Object.defineProperty(i.prototype,"scrollEnabled",{get:function(){return this.$Group[4]},set:function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollH",{get:function(){return this.$Group[2]},set:function(e){e=+e||0;var i=this.$Group;e!==i[2]&&(i[2]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollH"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollV",{get:function(){return this.$Group[3]},set:function(e){e=+e||0;var i=this.$Group;e!=i[3]&&(i[3]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollV"))},enumerable:!0,configurable:!0}),i.prototype.updateScrollRect=function(){var t=this.$Group,e=t[4];if(e){var i=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(t[2],t[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return e},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getElementAt=function(t){return this.$children[t]},i.prototype.getVirtualElementAt=function(t){return this.getElementAt(t)},i.prototype.setVirtualElementIndicesInView=function(t,e){},Object.defineProperty(i.prototype,"touchThrough",{get:function(){return this.$Group[5]},set:function(t){this.$Group[5]=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);if(n||this.$Group[5])return n;if(!this.$visible||!this.touchEnabled||0===this.scaleX||0===this.scaleY||0===this.width||0===this.height)return null;var r=this.globalToLocal(t,i,egret.$TempPoint),o=this.$UIComponent,s=egret.$TempRectangle.setTo(0,0,o[10],o[11]),a=this.$scrollRect;return a&&(s.x=a.x,s.y=a.y),s.contains(r.x,r.y)?this:null},i.prototype.invalidateState=function(){var t=this.$stateValues;t.stateIsDirty||(t.stateIsDirty=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){this.$layout||this.$setLayout(new t.BasicLayout),this.initializeStates(this.$stage)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$stateValues;e.stateIsDirty&&(e.stateIsDirty=!1,e.explicitState||(e.currentState=this.getCurrentState(),this.commitCurrentState()))},i.prototype.measure=function(){return this.$layout?void this.$layout.measure():void this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(t,e){this.$layout&&this.$layout.updateDisplayList(t,e),this.updateScrollRect()},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Group=e,__reflect(e.prototype,"eui.Group",["eui.IViewport","eui.UIComponent","egret.DisplayObject"]),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]")}(eui||(eui={}));var eui;!function(t){function e(t,e){if(t.hasOwnProperty(i))t[i].push(e);else{var n=[e];t[i]&&(n=t[i].concat(n)),t[i]=n}}var i="__bindables__";t.registerBindable=e}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initializeUIValues(),t.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!0,7:!0,8:null},t.$touchEnabled=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"hostComponentKey",{get:function(){return this.$Component[0]},set:function(t){this.$Component[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skinName",{get:function(){return this.$Component[1]},set:function(t){var e=this.$Component;if(e[5]=!0,e[1]!=t){if(t)e[1]=t;else{var i=egret.getImplementation("eui.Theme");if(i){var n=i.getSkinName(this);n&&(e[1]=n)}}this.$parseSkinName()}},enumerable:!0,configurable:!0}),i.prototype.$parseSkinName=function(){var t,e=this.skinName;if(e)if(e.prototype)t=new e;else if("string"==typeof e){var i=void 0,n=e.trim();if("<"==n.charAt(0))i=EXML.parse(n);else if(i=egret.getDefinitionByName(e),!i&&-1!=n.toLowerCase().indexOf(".exml"))return void EXML.load(e,this.onExmlLoaded,this,!0);i&&(t=new i)}else t=e;this.setSkin(t)},i.prototype.onExmlLoaded=function(t,e){if(this.skinName==e){var i=new t;this.setSkin(i)}},Object.defineProperty(i.prototype,"skin",{get:function(){return this.$Component[8]},enumerable:!0,configurable:!0}),i.prototype.setSkin=function(e){!e||e instanceof t.Skin||(e=null);var i=this.$Component,n=i[8];if(n){for(var r=n.skinParts,o=r.length,s=0;o>s;s++){var a=r[s];this[a]&&this.setSkinPart(a,null)}var h=n.$elementsContent;if(h){o=h.length;for(var s=0;o>s;s++){var l=h[s];l.$parent==this&&this.removeChild(l)}}n.hostComponent=null}if(i[8]=e,e){for(var r=e.skinParts,u=r.length,s=0;u>s;s++){var a=r[s],p=e[a];p&&this.setSkinPart(a,p)}var h=e.$elementsContent;if(h)for(var s=h.length-1;s>=0;s--)this.addChildAt(h[s],0);e.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.setSkinPart=function(t,e){var i=this[t];i&&this.partRemoved(t,i),this[t]=e,e&&this.partAdded(t,e)},i.prototype.partAdded=function(t,e){},i.prototype.partRemoved=function(t,e){},i.prototype.$setTouchChildren=function(t){t=!!t;var i=this.$Component;return i[6]=t,i[3]?(i[6]=t,e.prototype.$setTouchChildren.call(this,t)):!0},i.prototype.$setTouchEnabled=function(t){t=!!t;var i=this.$Component;i[7]=t,i[3]&&e.prototype.$setTouchEnabled.call(this,t)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(t){t=!!t,this.$setEnabled(t)},enumerable:!0,configurable:!0}),i.prototype.$setEnabled=function(t){var e=this.$Component;return t===e[3]?!1:(e[3]=t,t?(this.$touchEnabled=e[7],this.$touchChildren=e[6]):(this.$touchEnabled=!1,this.$touchChildren=!1),this.invalidateState(),!0)},Object.defineProperty(i.prototype,"currentState",{get:function(){var t=this.$Component;return t[2]?t[2]:this.getCurrentState()},set:function(t){var e=this.$Component;t!=e[2]&&(e[2]=t,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.invalidateState=function(){var t=this.$Component;t[4]||(t[4]=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){var t=this.$Component;if(!t[1]){var e=egret.getImplementation("eui.Theme");if(e){var i=e.getSkinName(this);i&&(t[1]=i,this.$parseSkinName())}}},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$Component;e[4]&&(e[4]=!1,e[8]&&(e[8].currentState=this.currentState))},i.prototype.measure=function(){t.sys.measure(this);var e=this.$Component[8];if(e){var i=this.$UIComponent;isNaN(e.width)?(i[16]<e.minWidth&&(i[16]=e.minWidth),i[16]>e.maxWidth&&(i[16]=e.maxWidth)):i[16]=e.width,isNaN(e.height)?(i[17]<e.minHeight&&(i[17]=e.minHeight),i[17]>e.maxHeight&&(i[17]=e.maxHeight)):i[17]=e.height}},i.prototype.updateDisplayList=function(e,i){t.sys.updateDisplayList(this,e,i)},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Component=e,__reflect(e.prototype,"eui.Component",["eui.UIComponent","egret.DisplayObject"]),t.registerProperty(e,"skinName","Class"),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$dataProviderChanged=!1,t.$dataProvider=null,t.$indexToRenderer=[],t.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null,13:null,14:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"useVirtualLayout",{get:function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},set:function(t){t=!!t;var e=this.$DataGroup;t!==e[0]&&(e[0]=t,this.$layout&&(this.$layout.useVirtualLayout=t))},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(t){if(t==this.$layout)return!1;this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&t&&this.$layout.$useVirtualLayout!=t.$useVirtualLayout&&this.onUseVirtualLayoutChanged();var i=e.prototype.$setLayout.call(this,t);if(t){var n=this.$DataGroup[9];n&&t.setTypicalSize(n.width,n.height),t.useVirtualLayout=this.$DataGroup[0],t.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return i},i.prototype.onUseVirtualLayoutChanged=function(t){var e=this.$DataGroup;e[1]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},i.prototype.setVirtualElementIndicesInView=function(t,e){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=0;r>o;o++){var s=+n[o];
(t>s||s>e)&&this.freeRendererByIndex(s)}},i.prototype.getElementAt=function(t){return this.$indexToRenderer[t]},i.prototype.getVirtualElementAt=function(t){if(t=0|+t,0>t||t>=this.$dataProvider.length)return null;var e=this.$indexToRenderer[t];if(!e){var i=this.$dataProvider.getItemAt(t);e=this.createVirtualRenderer(i),this.$indexToRenderer[t]=e,this.updateRenderer(e,t,i);var n=this.$DataGroup;n[4]&&(e.validateNow(),n[4]=!1,this.rendererAdded(e,t,i))}return e},i.prototype.freeRendererByIndex=function(t){var e=this.$indexToRenderer[t];e&&(delete this.$indexToRenderer[t],this.doFreeRenderer(e))},i.prototype.doFreeRenderer=function(t){var e=this.$DataGroup,i=e[2][t.$hashCode],n=i.$hashCode;e[3][n]||(e[3][n]=[]),e[3][n].push(t),t.visible=!1},i.prototype.invalidateSize=function(){this.$DataGroup[4]||e.prototype.invalidateSize.call(this)},i.prototype.createVirtualRenderer=function(t){var e,i=this.itemToRendererClass(t),n=i.$hashCode,r=this.$DataGroup,o=r[3];return o[n]&&o[n].length>0?(e=o[n].pop(),e.visible=!0,this.invalidateDisplayList(),e):(r[4]=!0,this.createOneRenderer(i))},i.prototype.createOneRenderer=function(t){var e=new t,i=this.$DataGroup;return i[2][e.$hashCode]=t,egret.is(e,"eui.IItemRenderer")?(i[13]&&this.setItemRenderSkinName(e,i[13]),this.addChild(e),e):null},i.prototype.setItemRenderSkinName=function(e,i){if(e&&e instanceof t.Component){var n=e;n.$Component[5]||(n.skinName=i,n.$Component[5]=!1)}},Object.defineProperty(i.prototype,"dataProvider",{get:function(){return this.$dataProvider},set:function(t){this.$setDataProvider(t)},enumerable:!0,configurable:!0}),i.prototype.$setDataProvider=function(t){return this.$dataProvider==t||t&&!t.getItemAt?!1:(this.removeDataProviderListener(),this.$dataProvider=t,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList(),!0)},i.prototype.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},i.prototype.onCollectionChange=function(e){switch(e.kind){case t.CollectionEventKind.ADD:this.itemAddedHandler(e.items,e.location);break;case t.CollectionEventKind.REMOVE:this.itemRemovedHandler(e.items,e.location);break;case t.CollectionEventKind.UPDATE:case t.CollectionEventKind.REPLACE:this.itemUpdatedHandler(e.items[0],e.location);break;case t.CollectionEventKind.RESET:case t.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=r-1;o>=0;o--){var s=+n[o];this.freeRendererByIndex(s)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},i.prototype.itemAddedHandler=function(t,e){for(var i=t.length,n=0;i>n;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},i.prototype.itemRemovedHandler=function(t,e){for(var i=t.length,n=i-1;n>=0;n--)this.itemRemoved(t[n],e+n);this.resetRenderersIndices()},i.prototype.itemAdded=function(t,e){if(this.$layout&&this.$layout.elementAdded(e),this.$layout&&this.$layout.$useVirtualLayout)return void this.$indexToRenderer.splice(e,0,null);var i=this.createVirtualRenderer(t);if(this.$indexToRenderer.splice(e,0,i),i){this.updateRenderer(i,e,t);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,e,t))}},i.prototype.itemRemoved=function(t,e){this.$layout&&this.$layout.elementRemoved(e);var i=this.$indexToRenderer[e];this.$indexToRenderer.length>e&&this.$indexToRenderer.splice(e,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,e,t),this.removeChild(i)))},i.prototype.resetRenderersIndices=function(){var t=this.$indexToRenderer;if(0!=t.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=Object.keys(t),i=e.length,n=0;i>n;n++){var r=+e[n];this.resetRendererItemIndex(r)}else for(var o=t.length,r=0;o>r;r++)this.resetRendererItemIndex(r)},i.prototype.itemUpdatedHandler=function(t,e){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},i.prototype.resetRendererItemIndex=function(t){var e=this.$indexToRenderer[t];e&&(e.itemIndex=t)},Object.defineProperty(i.prototype,"itemRenderer",{get:function(){return this.$DataGroup[6]},set:function(t){var e=this.$DataGroup;e[6]!=t&&(e[6]=t,e[5]=!0,e[8]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererSkinName",{get:function(){return this.$DataGroup[13]},set:function(t){var e=this.$DataGroup;e[13]!=t&&(e[13]=t,this.$UIComponent[29]&&(e[14]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererFunction",{get:function(){return this.$DataGroup[7]},set:function(t){var e=this.$DataGroup;e[7]!=t&&(e[7]=t,e[5]=!0,e[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.itemToRendererClass=function(e){var i,n=this.$DataGroup;return n[7]&&(i=n[7](e)),i||(i=n[6]),i||(i=t.ItemRenderer),i.$hashCode||(i.$hashCode=egret.$hashCount++),i},i.prototype.createChildren=function(){if(!this.$layout){var i=new t.VerticalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},i.prototype.commitProperties=function(){var i=this.$DataGroup;if((i[5]||this.$dataProviderChanged||i[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),i[1]=!1,i[5]=!1,this.$dataProvider&&this.$dataProvider.addEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),e.prototype.commitProperties.call(this),i[8]&&(i[8]=!1,this.$dataProvider&&this.$dataProvider.length>0&&(i[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())),i[14]){i[14]=!1;for(var n=i[13],r=this.$indexToRenderer,o=Object.keys(r),s=o.length,a=0;s>a;a++){var h=o[a];this.setItemRenderSkinName(r[h],n)}var l=i[3];o=Object.keys(l),s=o.length;for(var a=0;s>a;a++)for(var u=o[a],p=l[u],c=p.length,d=0;c>d;d++)this.setItemRenderSkinName(p[d],n)}},i.prototype.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),e.prototype.measure.call(this)},i.prototype.updateDisplayList=function(t,i){var n=this.$layout&&this.$layout.$useVirtualLayout;n&&this.ensureTypicalLayoutElement(),e.prototype.updateDisplayList.call(this,t,i);var r=this.$DataGroup;if(n){var o=r[9];if(o){var s=this.$indexToRenderer[0];if(s){var a=egret.$TempRectangle;s.getPreferredBounds(a),(a.width!=o.width||a.height!=o.height)&&(r[9]=null)}}}},i.prototype.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&this.$dataProvider.length>0&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},i.prototype.measureRendererSize=function(){var t=this.$DataGroup;if(void 0==t[12])return void this.setTypicalLayoutRect(null);var e=this.createVirtualRenderer(t[12]);if(!e)return void this.setTypicalLayoutRect(null);this.updateRenderer(e,0,t[12]),e.validateNow();var i=egret.$TempRectangle;e.getPreferredBounds(i);var n=new egret.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(t[4]&&this.rendererAdded(e,0,t[12]),this.doFreeRenderer(e)):this.removeChild(e),this.setTypicalLayoutRect(n),t[4]=!1},i.prototype.setTypicalLayoutRect=function(t){this.$DataGroup[9]=t,this.$layout&&(t?this.$layout.setTypicalSize(t.width,t.height):this.$layout.setTypicalSize(0,0))},i.prototype.removeAllRenderers=function(){for(var t=this.$indexToRenderer,e=Object.keys(t),i=e.length,n=0;i>n;n++){var r=e[n],o=t[r];o&&(this.rendererRemoved(o,o.itemIndex,o.data),this.removeChild(o))}this.$indexToRenderer=[];var s=this.$DataGroup;if(s[10]){for(var a=s[3],h=Object.keys(a),l=h.length,n=0;l>n;n++)for(var u=h[n],p=a[u],c=p.length,d=0;c>d;d++){var o=p[d];this.rendererRemoved(o,o.itemIndex,o.data),this.removeChild(o)}s[3]={},s[2]={},s[10]=!1}},i.prototype.createRenderers=function(){if(this.$dataProvider)for(var t=0,e=this.$dataProvider.length,i=0;e>i;i++){var n=this.$dataProvider.getItemAt(i),r=this.itemToRendererClass(n),o=this.createOneRenderer(r);o&&(this.$indexToRenderer[t]=o,this.updateRenderer(o,t,n),this.rendererAdded(o,t,n),t++)}},i.prototype.updateRenderer=function(t,e,i){var n=this.$DataGroup;return n[11]=!0,t.itemIndex=e,t.parent==this&&this.setChildIndex(t,e),t.data=i,n[11]=!1,t},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$dataProvider?this.$dataProvider.length:0},enumerable:!0,configurable:!0}),i.prototype.rendererAdded=function(t,e,i){},i.prototype.rendererRemoved=function(t,e,i){},i}(t.Group);t.DataGroup=e,__reflect(e.prototype,"eui.DataGroup"),t.registerProperty(e,"itemRenderer","Class"),t.registerProperty(e,"itemRendererSkinName","Class"),t.registerProperty(e,"dataProvider","eui.ICollection",!0)}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.labelDisplay=null,e._label="",e.iconDisplay=null,e._icon=null,e.touchCaptured=!1,e.touchChildren=!1,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=t)},enumerable:!0,configurable:!0}),e.prototype.onTouchCancle=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},e.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},e.prototype.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(t.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},e.prototype.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},e.prototype.partAdded=function(t,e){e===this.labelDisplay?this.labelDisplay.text=this._label:e==this.iconDisplay&&(this.iconDisplay.source=this._icon)},e.prototype.buttonReleased=function(){},e}(t.Component);t.Button=e,__reflect(e.prototype,"eui.Button")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"maximum",{get:function(){return this.$Range[0]},set:function(t){t=+t||0;var e=this.$Range;t!==e[0]&&(e[0]=t,e[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this.$Range[2]},set:function(t){t=+t||0;var e=this.$Range;t!==e[2]&&(e[2]=t,e[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.$Range;return t[6]?t[5]:t[4]},set:function(t){t=+t||0,this.$setValue(t)},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(t){if(t===this.value)return!1;var e=this.$Range;return e[5]=t,e[6]=!0,this.invalidateProperties(),!0},Object.defineProperty(i.prototype,"snapInterval",{get:function(){return this.$Range[7]},set:function(t){var e=this.$Range;e[9]=!0,t=+t||0,t!==e[7]&&(isNaN(t)?(e[7]=1,e[9]=!1):e[7]=t,e[8]=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this);var t=this.$Range;if(t[2]>t[0]&&(t[1]?t[0]=t[2]:t[2]=t[0]),t[6]||t[1]||t[3]||t[8]){var i=t[6]?t[5]:t[4];t[6]=!1,t[1]=!1,t[3]=!1,t[8]=!1,this.setValue(this.nearestValidValue(i,t[7]))}},i.prototype.nearestValidSize=function(t){var e=this.snapInterval;if(0==e)return t;var i=Math.round(t/e)*e;return Math.abs(i)<e?e:i},i.prototype.nearestValidValue=function(t,e){var i=this.$Range;if(0==e)return Math.max(i[2],Math.min(i[0],t));var n=i[0]-i[2],r=1;if(t-=i[2],e!=Math.round(e)){var o=(1+e).toString().split(".");r=Math.pow(10,o[1].length),n*=r,t=Math.round(t*r),e=Math.round(e*r)}var s=Math.max(0,Math.floor(t/e)*e),a=Math.min(n,Math.floor((t+e)/e)*e),h=t-s>=(a-s)/2?a:s;return h/r+i[2]},i.prototype.setValue=function(e){var i=this.$Range;i[4]!==e&&(i[0]>i[2]?i[4]=Math.min(i[0],Math.max(i[2],e)):i[4]=e,i[6]=!1,this.invalidateDisplayList(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"value"))},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){},i}(t.Component);t.Range=e,__reflect(e.prototype,"eui.Range"),t.registerBindable(e.prototype,"value")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.$target=null,e.$useVirtualLayout=!1,e.$typicalWidth=71,e.$typicalHeight=22,e}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},set:function(t){this.$target!==t&&(this.$target=t,this.clearVirtualLayoutCache())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(t){t=!!t,this.$useVirtualLayout!=t&&(this.$useVirtualLayout=t,this.dispatchEventWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),e.prototype.setTypicalSize=function(t,e){t=+t||71,e=+e||22,(t!==this.$typicalWidth||e!==this.$typicalHeight)&&(this.$typicalWidth=t,this.$typicalHeight=e,this.$target&&this.$target.invalidateSize())},e.prototype.scrollPositionChanged=function(){},e.prototype.clearVirtualLayoutCache=function(){},e.prototype.elementAdded=function(t){},e.prototype.elementRemoved=function(t){},e.prototype.getElementIndicesInView=function(){return null},e.prototype.measure=function(){},e.prototype.updateDisplayList=function(t,e){},e}(egret.EventDispatcher);t.LayoutBase=e,__reflect(e.prototype,"eui.LayoutBase")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null,8:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"requireSelection",{get:function(){return this.$ListBase[0]},set:function(t){t=!!t;var e=this.$ListBase;t!==e[0]&&(e[0]=t,t&&(e[1]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$getSelectedIndex()},set:function(t){t=0|+t,this.setSelectedIndex(t,!1)},enumerable:!0,configurable:!0}),i.prototype.$getSelectedIndex=function(){var t=this.$ListBase;return t[2]!=i.NO_PROPOSED_SELECTION?t[2]:t[3]},i.prototype.setSelectedIndex=function(t,e){if(t!=this.selectedIndex){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[2]=t,this.invalidateProperties()}},Object.defineProperty(i.prototype,"selectedItem",{get:function(){var t=this.$ListBase;if(void 0!==t[5])return t[5];var e=this.$getSelectedIndex();if(e!=i.NO_SELECTION&&null!=this.$dataProvider)return this.$dataProvider.length>e?this.$dataProvider.getItemAt(e):void 0},set:function(t){this.setSelectedItem(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedItem=function(t,e){if(void 0===e&&(e=!1),this.selectedItem!==t){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[5]=t,this.invalidateProperties()}},i.prototype.commitProperties=function(){var n=this.$dataProviderChanged;e.prototype.commitProperties.call(this);var r=this.$ListBase,o=this.$getSelectedIndex(),s=this.$dataProvider;n&&(o>=0&&s&&o<s.length?this.itemSelected(o,!0):this.requireSelection?r[2]=0:this.setSelectedIndex(-1,!1)),r[1]&&(r[1]=!1,r[0]&&o==i.NO_SELECTION&&s&&s.length>0&&(r[2]=0)),void 0!==r[5]&&(s?r[2]=s.getItemIndex(r[5]):r[2]=i.NO_SELECTION,r[5]=void 0);var a=!1;r[2]!=i.NO_PROPOSED_SELECTION&&(a=this.commitSelection()),r[6]&&(r[6]=!1,a||t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.updateRenderer=function(t,i,n){return this.itemSelected(i,this.$isItemIndexSelected(i)),e.prototype.updateRenderer.call(this,t,i,n)},i.prototype.itemSelected=function(t,e){var i=this.$indexToRenderer[t];i&&(i.selected=e)},i.prototype.$isItemIndexSelected=function(t){return t==this.selectedIndex},i.prototype.commitSelection=function(e){void 0===e&&(e=!0);var n=this.$dataProvider,r=this.$ListBase,o=n?n.length-1:-1,s=r[3],a=r[2];if(a<i.NO_SELECTION&&(a=i.NO_SELECTION),a>o&&(a=o),r[0]&&a==i.NO_SELECTION&&n&&n.length>0)return r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1;if(r[4]){var h=this.dispatchEventWith(egret.Event.CHANGING,!1,!0,!0);if(!h)return this.itemSelected(r[2],!1),r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1}return r[3]=a,r[2]=i.NO_PROPOSED_SELECTION,s!=i.NO_SELECTION&&this.itemSelected(s,!1),r[3]!=i.NO_SELECTION&&this.itemSelected(r[3],!0),e&&(r[4]&&(this.dispatchEventWith(egret.Event.CHANGE),r[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},i.prototype.adjustSelection=function(t,e){void 0===e&&(e=!1);var n=this.$ListBase;n[2]!=i.NO_PROPOSED_SELECTION?n[2]=t:n[3]=t,n[6]=!0,this.invalidateProperties()},i.prototype.itemAdded=function(t,n){e.prototype.itemAdded.call(this,t,n);var r=this.$getSelectedIndex();r==i.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(n,!0):r>=n&&this.adjustSelection(r+1,!0)},i.prototype.itemRemoved=function(t,n){if(e.prototype.itemRemoved.call(this,t,n),this.selectedIndex!=i.NO_SELECTION){var r=this.$getSelectedIndex();n==r?this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0?0==n?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):r>n&&this.adjustSelection(r-1,!1)}},i.prototype.onCollectionChange=function(n){e.prototype.onCollectionChange.call(this,n),n.kind==t.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(i.NO_SELECTION,!1):n.kind==t.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},i.prototype.dataProviderRefreshed=function(){this.setSelectedIndex(i.NO_SELECTION,!1)},i.prototype.rendererAdded=function(t,e,i){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.rendererRemoved=function(t,e,i){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.onRendererTouchBegin=function(t){if(this.$stage){var e=this.$ListBase;t.$isDefaultPrevented||(e[8]=!1,e[7]=t.$currentTarget,this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))}},i.prototype.onRendererTouchCancle=function(t){var e=this.$ListBase;e[7]=null,e[8]=!0,this.$stage&&this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)},i.prototype.onRendererTouchEnd=function(e){var i=this.$ListBase,n=e.$currentTarget,r=i[7];n==r&&(i[8]||(this.setSelectedIndex(n.itemIndex,!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)),i[8]=!1)},i.prototype.stage_touchEndHandler=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},i.NO_SELECTION=-1,i.NO_PROPOSED_SELECTION=-2,i}(t.DataGroup);t.ListBase=e,__reflect(e.prototype,"eui.ListBase"),t.registerBindable(e.prototype,"selectedIndex"),t.registerBindable(e.prototype,"selectedItem")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.thumb=null,t.$viewport=null,t.autoVisibility=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"viewport",{get:function(){return this.$viewport},set:function(e){if(e!=this.$viewport){var i=this.$viewport;i&&(i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),i.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.$viewport=e,e&&(e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),e.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}},enumerable:!0,configurable:!0}),i.prototype.onViewportResize=function(t){this.invalidateDisplayList()},i.prototype.onPropertyChanged=function(t){},i}(t.Component);t.ScrollBarBase=e,__reflect(e.prototype,"eui.ScrollBarBase")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.trackHighlight=null,t.thumb=null,t.track=null,t.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},t.maximum=10,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this.$SliderBase[6]},set:function(t){this.$SliderBase[6]=+t||0},enumerable:!0,configurable:!0}),i.prototype.pointToValue=function(t,e){return this.minimum},Object.defineProperty(i.prototype,"liveDragging",{get:function(){return this.$SliderBase[9]},set:function(t){this.$SliderBase[9]=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pendingValue",{get:function(){return this.$SliderBase[7]},set:function(t){t=+t||0;var e=this.$SliderBase;t!==e[7]&&(e[7]=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t){this.$SliderBase[7]=t,e.prototype.setValue.call(this,t)},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.thumb?(this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track?(this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,egret.is(this.trackHighlight,"egret.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.thumb?(this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track&&(this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this))},i.prototype.onTrackOrThumbResize=function(t){this.updateSkinDisplayList()},i.prototype.onThumbTouchBegin=function(e){var i=this.$SliderBase;i[5]&&i[5].isPlaying&&this.stopAnimation();var n=this.$stage;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var r=this.thumb.globalToLocal(e.stageX,e.stageY,egret.$TempPoint);i[0]=r.x,i[1]=r.y,t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START)},i.prototype.onStageTouchMove=function(t){var e=this.$SliderBase;e[2]=t.$stageX,e[3]=t.$stageY;var i=this.track;if(i){var n=i.globalToLocal(e[2],e[3],egret.$TempPoint),r=this.pointToValue(n.x-e[0],n.y-e[1]);r=this.nearestValidValue(r,this.snapInterval),this.updateWhenTouchMove(r),t.updateAfterEvent()}},i.prototype.updateWhenTouchMove=function(t){t!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(t),this.dispatchEventWith(egret.Event.CHANGE)):this.pendingValue=t)},i.prototype.onStageTouchEnd=function(e){var i=e.$currentTarget;i.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END);var n=this.$SliderBase;this.liveDragging||this.value==n[7]||(this.setValue(n[7]),this.dispatchEventWith(egret.Event.CHANGE))},i.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=t.$target},i.prototype.stageTouchEndHandler=function(t){var e=t.$target,i=this.$SliderBase;t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=e&&this.contains(e)&&egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,!0,!0,t.$stageX,t.$stageY,t.touchPointID),i[4]=null},i.prototype.$animationUpdateHandler=function(t){this.pendingValue=t.currentValue},i.prototype.animationEndHandler=function(e){this.setValue(this.$SliderBase[8]),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},i.prototype.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},i.prototype.onTrackTouchBegin=function(e){var i=this.thumb?this.thumb.width:0,n=this.thumb?this.thumb.height:0,r=e.$stageX-i/2,o=e.$stageY-n/2,s=this.track.globalToLocal(r,o,egret.$TempPoint),a=this.$Range,h=this.pointToValue(s.x,s.y);h=this.nearestValidValue(h,a[7]);var l=this.$SliderBase;if(h!=l[7])if(0!=l[6]){l[5]||(l[5]=new t.sys.Animation(this.$animationUpdateHandler,this),l[5].endFunction=this.animationEndHandler);var u=l[5];u.isPlaying&&this.stopAnimation(),l[8]=h,u.duration=l[6]*(Math.abs(l[7]-l[8])/(a[0]-a[2])),u.from=l[7],u.to=l[8],t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),u.play()}else this.setValue(h),this.dispatchEventWith(egret.Event.CHANGE)},i}(t.Range);t.SliderBase=e,__reflect(e.prototype,"eui.SliderBase")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){if(!t)return"";for(var e="  at <"+t.name,i=t.attributes,n=Object.keys(i),r=n.length,o=0;r>o;o++){var s=n[o],a=i[s];("id"!=s||"__"!=a.substring(0,2))&&(e+=" "+s+'="'+a+'"')}return e+=0==t.children.length?"/>":">"}function i(t){var i=e(t.parent),n=e(t).substring(5);return i+"\n      	"+n}var n=[],r=1,o="hostComponent",s="eui.Skin",a="Declarations",h="egret.Rectangle",l="Class",u="Array",p="Percentage",c="State[]",d="skinName",f=[u,"boolean","string","number"],y=["id","locked","includeIn","excludeFrom"],g=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],v=["null","NaN","undefined","true","false"],m=function(){function e(){this.delayAssignmentDic={}}return e.prototype.$parseCode=function(t,e){var i=e?e:"$exmlClass"+r++,n=eval,o=n(t),s=!0;if(s&&o){egret.registerClass(o,i);for(var a=i.split("."),h=a.length,l=__global,u=0;h-1>u;u++){var p=a[u];l=l[p]||(l[p]={})}l[a[h-1]]||(l[a[h-1]]=o)}return o},e.prototype.parse=function(t){var e=null;e=egret.XML.parse(t);var i=!1,n="";e.attributes["class"]?(n=e.attributes["class"],delete e.attributes["class"],i=!!n):n="$exmlClass"+r++;var o=this.parseClass(e,n),s=o.toCode(),a=null,h=eval;if(a=h(s),i&&a){egret.registerClass(a,n);for(var l=n.split("."),u=l.length,p=__global,c=0;u-1>c;c++){var d=l[c];p=p[d]||(p[d]={})}p[l[u-1]]||(p[l[u-1]]=a)}return a},e.prototype.parseClass=function(e,i){t.exmlConfig||(t.exmlConfig=new t.EXMLConfig),this.currentXML=e,this.currentClassName=i,this.delayAssignmentDic={},this.idDic={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new t.EXClass,this.stateIds=[];var n=i.lastIndexOf(".");-1!=n?this.currentClass.className=i.substring(n+1):this.currentClass.className=i,this.startCompile();var r=this.currentClass;return this.currentClass=null,r},e.prototype.startCompile=function(){var e=this.getClassNameOfNode(this.currentXML);this.isSkinClass=e==s,this.currentClass.superClass=e,this.getStateNames();var i=this.currentXML.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1===o.nodeType&&o.namespace==t.NS_W&&o.localName==a){this.declarations=o;break}}this.currentXML.namespace&&(this.addIds(this.currentXML.children),this.createConstructFunc())},e.prototype.addIds=function(e){if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];if(1==r.nodeType&&r.namespace&&!this.isInnerClass(r))if(this.addIds(r.children),r.namespace!=t.NS_W&&r.localName){if(this.isProperty(r)){var o=r.localName,s=o.indexOf("."),a=r.children;if(-1==s||!a||0==a.length)continue;var h=a[0];this.stateIds.push(h.attributes.id)}else if(1===r.nodeType){var l=r.attributes.id;if(l){var u=new RegExp("^[a-zA-Z_$]{1}[a-z0-9A-Z_$]*");null==l.match(u)&&egret.$warn(2022,l),null!=l.match(new RegExp(/ /g))&&egret.$warn(2022,l),-1==this.skinParts.indexOf(l)&&this.skinParts.push(l),this.createVarForNode(r),this.isStateNode(r)&&this.stateIds.push(l)}else this.createIdForNode(r),this.isStateNode(r)&&this.stateIds.push(r.attributes.id)}}else;}},e.prototype.isInnerClass=function(e){if(e.hasOwnProperty("isInnerClass"))return e.isInnerClass;var i="Skin"==e.localName&&e.namespace==t.NS_S;if(!i)if(this.isProperty(e))i=!1;else{var n=void 0,r=e.parent;if(this.isProperty(r)){n=r.localName;var o=n.indexOf(".");if(-1!=o){n.substring(o+1);n=n.substring(0,o)}r=r.parent}else n=t.exmlConfig.getDefaultPropById(r.localName,r.namespace);var s=t.exmlConfig.getClassNameById(r.localName,r.namespace);i=t.exmlConfig.getPropertyType(n,s)==l}return e.isInnerClass=i,i},e.prototype.containsState=function(t){var e=t.attributes;if(e.includeIn||e.excludeFrom)return!0;for(var i=Object.keys(e),n=i.length,r=0;n>r;r++){var o=i[r];if(-1!=o.indexOf("."))return!0}return!1},e.prototype.createIdForNode=function(t){var e=this.getNodeId(t);this.idDic[e]?this.idDic[e]++:this.idDic[e]=1,e+=this.idDic[e],t.attributes.id=e},e.prototype.getNodeId=function(t){return t.attributes.id?t.attributes.id:"_"+t.localName},e.prototype.createVarForNode=function(e){var i=this.getClassNameOfNode(e);""!=i&&(this.currentClass.getVariableByName(e.attributes.id)||this.currentClass.addVariable(new t.EXVariable(e.attributes.id)))},e.prototype.createFuncForNode=function(e){var i=e.localName,n=this.isBasicTypeData(i);if(n)return this.createBasicTypeForNode(e);var r=this.getClassNameOfNode(e),o=new t.EXFunction,s="_i",a=e.attributes.id;o.name=a+s,this.currentClass.addFunction(o);var h=new t.EXCodeBlock;o.codeBlock=h;var l="t";"Object"==i?h.addVar(l,"{}"):h.addVar(l,"new "+r+"()");var u=!!this.currentClass.getVariableByName(a);u&&h.addAssignment("this."+a,l),this.addAttributesToCodeBlock(h,l,e),this.initlizeChildNode(e,h,l);var p=this.delayAssignmentDic[a];if(p)for(var c=p.length,d=0;c>d;d++){var f=p[d];h.concat(f)}return h.addReturn(l),"this."+o.name+"()"},e.prototype.isBasicTypeData=function(t){return-1!=f.indexOf(t)},e.prototype.createBasicTypeForNode=function(t){var e=t.localName,i="",n=this.currentClass.getVariableByName(t.attributes.id),r=t.children,o="";if(r&&r.length>0){var s=r[0];3==s.nodeType&&(o=s.text.trim())}switch(e){case u:var a=[];if(r)for(var h=r.length,l=0;h>l;l++){var p=r[l];1==p.nodeType&&a.push(this.createFuncForNode(p))}i="["+a.join(",")+"]";break;case"boolean":i="false"!=o&&o?"true":"false";break;case"number":i=o,-1!=i.indexOf("%")&&(i=i.substring(0,i.length-1));
break;case"string":i=this.formatString(o)}return n&&(n.defaultValue=i),i},e.prototype.addAttributesToCodeBlock=function(e,i,n){var r,o,s=n.attributes,a=Object.keys(s);a.sort();for(var h=a.length,l=0;h>l;l++)if(r=a[l],this.isNormalKey(r)&&(o=s[r],r=this.formatKey(r,o),o=this.formatValue(r,o,n))){if(this.currentClass.getVariableByName(o)){var u="this.",p=s.id,c=u+p+" = t;";this.currentClass.getVariableByName(p)||this.createVarForNode(n),e.containsCodeLine(c)||e.addCodeLineAt(c,1);var d=new t.EXCodeBlock;"this"==i?d.addAssignment(i,u+o,r):(d.startIf(u+p),d.addAssignment(u+p,u+o,r),d.endBlock()),this.delayAssignmentDic[o]||(this.delayAssignmentDic[o]=[]),this.delayAssignmentDic[o].push(d),o=u+o}e.addAssignment(i,o,r)}},e.prototype.initlizeChildNode=function(e,n,r){var o=e.children;if(o&&0!=o.length){for(var s,a=t.exmlConfig.getClassNameById(e.localName,e.namespace),h=[],l=o.length,u=[],p=0;l>p;p++){var c=o[p];if(1==c.nodeType&&c.namespace!=t.NS_W)if(this.isInnerClass(c)){if("Skin"==c.localName){var f=this.parseInnerClass(c),y=t.exmlConfig.getPropertyType(d,a);y?n.addAssignment(r,f,d):egret.$error(2005,this.currentClassName,d,i(c))}}else{var g=c.localName;if(this.isProperty(c)){if(!this.isNormalKey(g))continue;var y=t.exmlConfig.getPropertyType(c.localName,a);if(!y)continue;if(!c.children||0==c.children.length)continue;this.addChildrenToProp(c.children,y,g,n,r,s,u,e)}else h.push(c)}}if(0!=h.length){var v=t.exmlConfig.getDefaultPropById(e.localName,e.namespace),m=t.exmlConfig.getPropertyType(v,a);v&&m&&this.addChildrenToProp(h,m,v,n,r,s,u,e)}}},e.prototype.parseInnerClass=function(t){var i=n.pop();i||(i=new e);var o=this.currentClass.className+"$"+t.localName+r++,s=i.parseClass(t,o);return this.currentClass.addInnerClass(s),n.push(i),o},e.prototype.addChildrenToProp=function(t,e,i,n,r,o,s,a){var h="",p=t.length;if(p>1){if(e!=u)return;for(var c=[],d=0;p>d;d++){var f=t[d];if(1==f.nodeType){h=this.createFuncForNode(f);this.getClassNameOfNode(f);this.isStateNode(f)||c.push(h)}}h="["+c.join(",")+"]"}else{var y=t[0];if(e==u)if(y.localName==u){var c=[];if(y.children)for(var g=y.children.length,v=0;g>v;v++){var f=y.children[v];if(1==f.nodeType){h=this.createFuncForNode(f);this.getClassNameOfNode(f);this.isStateNode(f)||c.push(h)}}h="["+c.join(",")+"]"}else{h=this.createFuncForNode(y);this.getClassNameOfNode(y);h=this.isStateNode(y)?"[]":"["+h+"]"}else if(1==y.nodeType)if(e==l){if(p>1)return;h=this.parseInnerClass(t[0])}else{this.getClassNameOfNode(y);h=this.createFuncForNode(y)}else h=this.formatValue(i,y.text,a)}""!=h&&(-1==h.indexOf("()")&&(i=this.formatKey(i,h)),-1==s.indexOf(i)&&s.push(i),n.addAssignment(r,h,i))},e.prototype.isProperty=function(e){if(e.hasOwnProperty("isProperty"))return e.isProperty;var i,n=e.localName;if(n&&1===e.nodeType&&e.parent&&!this.isBasicTypeData(n)){var r=e.parent,o=n.indexOf(".");-1!=o&&(n=n.substr(0,o));var s=t.exmlConfig.getClassNameById(r.localName,r.namespace);i=!!t.exmlConfig.getPropertyType(n,s)}else i=!1;return e.isProperty=i,i},e.prototype.isNormalKey=function(t){return t&&-1==t.indexOf(".")&&-1==t.indexOf(":")&&-1==y.indexOf(t)?!0:!1},e.prototype.formatKey=function(t,e){return-1!=e.indexOf("%")&&("height"==t?t="percentHeight":"width"==t&&(t="percentWidth")),t},e.prototype.formatValue=function(e,i,n){i||(i="");var r=i;i=i.trim();var o=this.getClassNameOfNode(n),s=t.exmlConfig.getPropertyType(e,o),a=this.formatBinding(e,i,n);if(a){this.checkIdForState(n);var u="this";n!==this.currentXML&&(u+="."+n.attributes.id),this.bindings.push(new t.EXBinding(u,e,a.templates,a.chainIndex)),i=""}else if(s==h){i="new "+h+"("+i+")"}else if(s==p)-1!=i.indexOf("%")&&(i=this.formatString(i));else{switch(s){case l:e==d&&(i=this.formatString(r));break;case"number":0==i.indexOf("#")?i="0x"+i.substring(1):-1!=i.indexOf("%")&&(i=parseFloat(i.substr(0,i.length-1)).toString());break;case"boolean":i="false"!=i&&i?"true":"false";break;case"string":case"any":i=this.formatString(r)}}return i},e.prototype.formatString=function(t){return t=this.unescapeHTMLEntity(t),t=t.split("\n").join("\\n"),t=t.split("\r").join("\\n"),t=t.split('"').join('\\"'),t='"'+t+'"'},e.prototype.formatBinding=function(t,e,i){if(!e)return null;if(e=e.trim(),"{"!=e.charAt(0)||"}"!=e.charAt(e.length-1))return null;e=e.substring(1,e.length-1).trim();for(var n=-1==e.indexOf("+")?[e]:this.parseTemplates(e),r=[],s=n.length,a=0;s>a;a++){var h=n[a].trim();if(h){var l=h.charAt(0);if(!("'"==l||'"'==l||l>="0"&&"9">=l||"-"==l||-1==h.indexOf(".")&&-1!=v.indexOf(h))){0==h.indexOf("this.")&&(h=h.substring(5));var u=h.split(".")[0];u!=o&&-1==this.skinParts.indexOf(u)&&(h=o+"."+h),n[a]='"'+h+'"',r.push(a)}}else n.splice(a,1),a--,s--}return{templates:n,chainIndex:r}},e.prototype.parseTemplates=function(t){if(-1==t.indexOf("'"))return t.split("+");var e=!1,i="";for(t=t.split("\\'").join("0");t.length>0;){var n=t.indexOf("'");if(-1==n){i+=t;break}i+=t.substring(0,n+1),t=t.substring(n+1),n=t.indexOf("'"),-1==n&&(n=t.length-1,e=!0);var r=t.substring(0,n+1);i+=r.split("+").join("1"),t=t.substring(n+1)}t=i.split("0").join("\\'"),e&&(t+="'");for(var o=t.split("+"),s=o.length,a=0;s>a;a++)o[a]=o[a].split("1").join("+");return o},e.prototype.unescapeHTMLEntity=function(t){if(!t)return"";for(var e=g.length,i=0;e>i;i++){var n=g[i],r=n[0],o=n[1];t=t.split(o).join(r)}return t},e.prototype.createConstructFunc=function(){var e=new t.EXCodeBlock;e.addEmptyLine();var i="this";if(this.addAttributesToCodeBlock(e,i,this.currentXML),this.declarations){var n=this.declarations.children;if(n&&n.length>0)for(var r=n.length,o=0;r>o;o++){var s=n[o];if(1==s.nodeType){var a=this.createFuncForNode(s);a&&e.addCodeLine(a+";")}}}this.initlizeChildNode(this.currentXML,e,i);var h,l,u=this.stateIds;if(u.length>0){l=u.length;for(var o=0;l>o;o++)h=u[o],e.addCodeLine("this."+h+"_i();");e.addEmptyLine()}var p=this.skinParts,c="[]";if(l=p.length,l>0){for(var o=0;l>o;o++)p[o]='"'+p[o]+'"';c="["+p.join(",")+"]"}var d=new t.EXFunction;d.name="skinParts",d.isGet=!0;var f=new t.EXCodeBlock;f.addReturn(c),d.codeBlock=f,this.currentClass.addFunction(d),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var y,g=this.currentXML,v=(this.getClassNameOfNode(g),g.attributes),m=Object.keys(v),$=m.length,E=0;$>E;E++){var C=m[E],_=v[C],b=C.indexOf(".");if(-1!=b){var S=C.substring(0,b);S=this.formatKey(S,_);var T=this.formatValue(S,_,g);if(!T)continue;var x=C.substr(b+1);y=this.getStateByName(x,g);var I=y.length;if(I>0)for(var o=0;I>o;o++){var P=y[o];P.addOverride(new t.EXSetProperty("",S,T))}}}var L=this.stateCode;if(l=L.length,l>0){var N="	";e.addCodeLine("this.states = [");for(var O=!0,o=0;l>o;o++){var P=L[o];O?O=!1:e.addCodeLine(N+",");for(var A=P.toCode().split("\n"),D=0;D<A.length;){var B=A[D];B&&e.addCodeLine(N+B),D++}}e.addCodeLine("];")}var R=this.bindings;if(l=R.length,l>0){e.addEmptyLine();for(var o=0;l>o;o++){var M=R[o];e.addCodeLine(M.toCode())}}this.currentClass.constructCode=e},e.prototype.isStateNode=function(t){var e=t.attributes;return e.hasOwnProperty("includeIn")||e.hasOwnProperty("excludeFrom")},e.prototype.getStateNames=function(){var e=this.currentXML,i=t.exmlConfig.getClassNameById(e.localName,e.namespace),n=t.exmlConfig.getPropertyType("states",i);if(n==c){var r=e.attributes.states;r&&delete e.attributes.states;var o,s,a=this.stateNames,h=e.children;if(h)for(var l=h.length,u=0;l>u;u++)if(s=h[u],1==s.nodeType&&"states"==s.localName){s.namespace=t.NS_W,o=s.children;break}if(o||r)if(r)for(var p=r.split(","),d=p.length,u=0;d>u;u++){var f=p[u].trim();f&&(-1==a.indexOf(f)&&a.push(f),this.stateCode.push(new t.EXState(f)))}else for(var y=o.length,u=0;y>u;u++){var g=o[u];if(1==g.nodeType){var v=[],m=g.attributes;if(m.stateGroups)for(var $=m.stateGroups.split(","),E=$.length,C=0;E>C;C++){var _=$[C].trim();_&&(-1==a.indexOf(_)&&a.push(_),v.push(_))}var f=m.name;-1==a.indexOf(f)&&a.push(f),this.stateCode.push(new t.EXState(f,v))}}}},e.prototype.createStates=function(e){var i=e.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1==o.nodeType&&!this.isInnerClass(o)&&(this.createStates(o),o.namespace!=t.NS_W&&o.localName))if(this.isProperty(o)){var s=o.localName,a=s.indexOf("."),h=o.children;if(-1==a||!h||0==h.length)continue;var l=s.substring(a+1);s=s.substring(0,a);var p=this.getClassNameOfNode(e),c=(t.exmlConfig.getPropertyType(s,p),h[0]),d=void 0;1==c.nodeType?(this.createFuncForNode(c),this.checkIdForState(c),d="this."+c.attributes.id):d=this.formatValue(s,c.text,e);var f=this.getStateByName(l,o),y=f.length;if(y>0)for(var g=0;y>g;g++){var v=f[g];v.addOverride(new t.EXSetProperty(e.attributes.id,s,d))}}else if(this.containsState(o)){var m=o.attributes,$=m.id;this.getClassNameOfNode(o);this.checkIdForState(o);var l=void 0,f=void 0,v=void 0;if(this.isStateNode(o)){var E="",C=o.parent;C.localName==u&&(C=C.parent),C&&C.parent&&this.isProperty(C)&&(C=C.parent),C&&C!=this.currentXML&&(E=C.attributes.id,this.checkIdForState(C));var _=this.findNearNodeId(o),b=[];if(m.includeIn)b=m.includeIn.split(",");else{for(var S=m.excludeFrom.split(","),T=S.length,g=0;T>g;g++){var x=S[g];this.getStateByName(x,o)}T=this.stateCode.length;for(var g=0;T>g;g++)v=this.stateCode[g],-1==S.indexOf(v.name)&&b.push(v.name)}for(var I=b.length,P=0;I>P;P++)if(l=b[P],f=this.getStateByName(l,o),f.length>0)for(var y=f.length,g=0;y>g;g++)v=f[g],v.addOverride(new t.EXAddItems($,E,_.position,_.relativeTo))}for(var L=Object.keys(m),N=L.length,O=0;N>O;O++){var A=L[O],d=m[A],a=A.indexOf(".");if(-1!=a){var D=A.substring(0,a);D=this.formatKey(D,d);var B=this.formatBinding(D,d,o);if(!B&&(d=this.formatValue(D,d,o),!d))continue;l=A.substr(a+1),f=this.getStateByName(l,o);var y=f.length;if(y>0)for(var g=0;y>g;g++)v=f[g],B?v.addOverride(new t.EXSetStateProperty($,D,B.templates,B.chainIndex)):v.addOverride(new t.EXSetProperty($,D,d))}}}}},e.prototype.checkIdForState=function(t){if(t&&!this.currentClass.getVariableByName(t.attributes.id)){this.createVarForNode(t);var e=t.attributes.id,i=e+"_i",n=this.currentClass.getFuncByName(i);if(n){var r="this."+e+" = t;",o=n.codeBlock;o&&(o.containsCodeLine(r)||o.addCodeLineAt(r,1))}}},e.prototype.getStateByName=function(t,e){for(var i=[],n=this.stateCode,r=n.length,o=0;r>o;o++){var s=n[o];if(s.name==t)-1==i.indexOf(s)&&i.push(s);else if(s.stateGroups.length>0){for(var a=!1,h=s.stateGroups.length,l=0;h>l;l++){var u=s.stateGroups[l];if(u==t){a=!0;break}}a&&-1==i.indexOf(s)&&i.push(s)}}return i},e.prototype.findNearNodeId=function(t){for(var e,i,n,r=t.parent,o="",s=-1,a=!1,h=r.children,l=h.length,u=0;l>u;u++){var p=h[u];this.isProperty(p)||(p==t?(a=!0,s=u):!a||n||this.isStateNode(p)||(n=p),a||this.isStateNode(p)||(i=p))}return 0==s?(e=0,{position:e,relativeTo:o}):s==l-1?(e=1,{position:e,relativeTo:o}):n&&(e=2,o=n.attributes.id)?(this.checkIdForState(n),{position:e,relativeTo:o}):{position:1,relativeTo:o}},e.prototype.getClassNameOfNode=function(e){var i=t.exmlConfig.getClassNameById(e.localName,e.namespace);return i},e}();t.EXMLParser=m,__reflect(m.prototype,"eui.sys.EXMLParser")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.$selected=!1,t.$autoSelected=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"selected",{get:function(){return this.$selected},set:function(t){this.$setSelected(t)},enumerable:!0,configurable:!0}),i.prototype.$setSelected=function(e){return e=!!e,e===this.$selected?!1:(this.$selected=e,this.invalidateState(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selected"),!0)},i.prototype.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);if(this.$selected){var i=t+"AndSelected",n=this.skin;return n&&n.hasState(i)?i:"disabled"==t?"disabled":"down"}return t},i.prototype.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.dispatchEventWith(egret.Event.CHANGE))},i}(t.Button);t.ToggleButton=e,__reflect(e.prototype,"eui.ToggleButton"),t.registerBindable(e.prototype,"selected")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$horizontalAlign="left",e.$verticalAlign="top",e.$gap=6,e.$paddingLeft=0,e.$paddingRight=0,e.$paddingTop=0,e.$paddingBottom=0,e.elementSizeTable=[],e.startIndex=-1,e.endIndex=-1,e.indexInViewCalculated=!1,e.maxElementSize=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"horizontalAlign",{get:function(){return this.$horizontalAlign},set:function(t){this.$horizontalAlign!=t&&(this.$horizontalAlign=t,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return this.$gap},set:function(t){t=+t||0,this.$gap!==t&&(this.$gap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.$paddingLeft},set:function(t){t=+t||0,this.$paddingLeft!==t&&(this.$paddingLeft=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.$paddingRight},set:function(t){t=+t||0,this.$paddingRight!==t&&(this.$paddingRight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.$paddingTop},set:function(t){t=+t||0,this.$paddingTop!==t&&(this.$paddingTop=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.$paddingBottom},set:function(t){t=+t||0,this.$paddingBottom!==t&&(this.$paddingBottom=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),e.prototype.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},e.prototype.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},e.prototype.measureReal=function(){},e.prototype.measureVirtual=function(){},e.prototype.updateDisplayList=function(t,e){var i=this.$target;if(i)return 0==i.numElements?void i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)):void(this.$useVirtualLayout?this.updateDisplayListVirtual(t,e):this.updateDisplayListReal(t,e))},e.prototype.getStartPosition=function(t){return 0},e.prototype.getElementSize=function(t){return 0},e.prototype.getElementTotalSize=function(){return 0},e.prototype.elementRemoved=function(e){this.$useVirtualLayout&&(t.prototype.elementRemoved.call(this,e),this.elementSizeTable.splice(e,1))},e.prototype.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},e.prototype.findIndexAt=function(t,e,i){var n=.5*(e+i)|0,r=this.getStartPosition(n),o=this.getElementSize(n);return t>=r&&t<r+o+this.$gap?n:e==i?-1:r>t?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},e.prototype.scrollPositionChanged=function(){if(t.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout){var e=this.getIndexInView();e&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())}},e.prototype.getIndexInView=function(){return!1},e.prototype.updateDisplayListVirtual=function(t,e){},e.prototype.updateDisplayListReal=function(t,e){},e.prototype.flexChildrenProportionally=function(t,e,i,n){var r,o=n.length;do{r=!0;var s=e-t*i/100;s>0?e-=s:s=0;for(var a=e/i,h=0;o>h;h++){var l=n[h],u=l.percent*a;if(u<l.min){var p=l.min;l.size=p,n[h]=n[--o],n[o]=l,i-=l.percent,s>=p?s-=p:(e-=p-s,s=0),r=!1;break}if(u>l.max){var c=l.max;l.size=c,n[h]=n[--o],n[o]=l,i-=l.percent,s>=c?s-=c:(e-=c-s,s=0),r=!1;break}l.size=u}}while(!r)},e}(t.LayoutBase);t.LinearLayoutBase=e,__reflect(e.prototype,"eui.LinearLayoutBase")}(eui||(eui={})),function(t){var e;!function(t){var e=function(){function t(){this.layoutElement=null,this.size=0,this.percent=0/0,this.min=0/0,this.max=0/0}return t}();t.ChildInfo=e,__reflect(e.prototype,"eui.sys.ChildInfo")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?t/r*n:0)},e.prototype.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.width;return this.thumb.getLayoutBounds(t),e-t.width},e.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?(this.pendingValue-t[2])/i*e:0,r=this.track.localToGlobal(n,0,egret.$TempPoint),o=r.x,s=r.y,a=this.thumb.$parent.globalToLocal(o,s,egret.$TempPoint).x,h=egret.$TempRectangle;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(Math.round(a),h.y),this.trackHighlight&&this.trackHighlight.$parent){var l=this.trackHighlight.$parent.globalToLocal(o,s,egret.$TempPoint).x-n;this.trackHighlight.x=Math.round(l),this.trackHighlight.width=Math.round(n)}}},e}(t.SliderBase);t.HSlider=e,__reflect(e.prototype,"eui.HSlider")}(eui||(eui={}));var eui;!function(t){var e=[],i={},n={},r=function(){function t(){}return t.prototype.getAsset=function(t,r,o){var s=i[t];if(s)return void s.push([r,o]);var a=e.pop();a||(a=new egret.ImageLoader),i[t]=[[r,o]],n[a.$hashCode]=t,a.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),a.load(t)},t.prototype.onLoadFinish=function(t){var r=t.currentTarget;r.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),r.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var o;t.$type==egret.Event.COMPLETE&&(o=new egret.Texture,o._setBitmapData(r.data),r.data=null),e.push(r);var s=n[r.$hashCode];delete n[r.$hashCode];var a=i[s];delete i[s];for(var h=a.length,l=0;h>l;l++){var u=a[l];u[0].call(u[1],o,s)}},t}();t.DefaultAssetAdapter=r,__reflect(r.prototype,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.sourceChanged=!1,i._source=null,i.initializeUIValues(),t&&(i.source=t),i}return __extends(i,e),Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t),this.invalidateDisplayList()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){t!=this.$fillMode&&(e.prototype.$setFillMode.call(this,t),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(t){var i=e.prototype.$setFillMode.call(this,t);return this.invalidateDisplayList(),i},Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this.$stage?this.parseSource():(this.sourceChanged=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(t){if(t==this.$texture)return!1;var i=e.prototype.$setTexture.call(this,t);return this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList(),i},i.prototype.parseSource=function(){this.sourceChanged=!1;var e=this._source;e&&"string"==typeof e?t.getAssets(this._source,function(t){e===this._source&&egret.is(t,"egret.Texture")&&(this.$setTexture(t),t&&this.dispatchEventWith(egret.Event.COMPLETE))},this):this.$setTexture(e)},i.prototype.$measureContentBounds=function(t){var e=this.$texture;if(e){var i=this.$UIComponent,n=i[10],r=i[11];if(isNaN(n)||isNaN(r))return void t.setEmpty();"clip"==this.$fillMode&&(n>e.$getTextureWidth()&&(n=e.$getTextureWidth()),r>e.$getTextureHeight()&&(r=e.$getTextureHeight())),t.setTo(0,0,n,r)}else t.setEmpty()},i.prototype.createChildren=function(){this.sourceChanged&&this.parseSource()},i.prototype.setActualSize=function(i,n){t.sys.UIComponentImpl.prototype.setActualSize.call(this,i,n),e.prototype.$setWidth.call(this,i),e.prototype.$setHeight.call(this,n)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},i.prototype.measure=function(){var t=this.$texture;t?this.setMeasuredSize(t.$getTextureWidth(),t.$getTextureHeight()):this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(t,e){this.$renderDirty=!0},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.Bitmap);t.Image=e,__reflect(e.prototype,"eui.Image",["eui.UIComponent","egret.DisplayObject"]),t.sys.implementUIComponent(e,egret.Bitmap),t.registerProperty(e,"scale9Grid","egret.Rectangle")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._data=null,t._selected=!1,t.itemIndex=-1,t.touchCaptured=!1,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()},enumerable:!0,configurable:!0}),i.prototype.dataChanged=function(){},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&(this._selected=t,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.onTouchCancle=function(t){this.touchCaptured=!1;var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.invalidateState()},i.prototype.onTouchBegin=function(t){this.$stage&&(this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent())},i.prototype.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},i.prototype.getCurrentState=function(){var t="up";if(this.enabled||(t="disabled"),this.touchCaptured&&(t="down"),this._selected){var e=t+"AndSelected",i=this.skin;return i&&i.hasState(e)?e:"disabled"==t?"disabled":"down"}return t},i}(t.Component);t.ItemRenderer=e,__reflect(e.prototype,"eui.ItemRenderer",["eui.IItemRenderer"]),t.registerBindable(e.prototype,"data")}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){var e=i.call(this)||this;return e.$styleSetMap={fontFamily:!0,size:!0,bold:!0,italic:!0,textAlign:!0,verticalAlign:!0,lineSpacing:!0,textColor:!0,wordWrap:!0,displayAsPassword:!0,strokeColor:!0,stroke:!0,maxChars:!0,multiline:!0,border:!0,borderColor:!0,background:!0,backgroundColor:!0},e.$revertStyle={},e.$style=null,e.$changeFromStyle=!1,e._widthConstraint=0/0,e.initializeUIValues(),e.text=t,e}return __extends(n,i),Object.defineProperty(n.prototype,"style",{get:function(){return this.$style},set:function(t){this.$setStyle(t)},enumerable:!0,configurable:!0}),n.prototype.$setStyle=function(t){if(this.$style!=t){this.$style=t;var e=egret.getImplementation("eui.Theme");if(e){this.$changeFromStyle=!0;for(var i in this.$revertStyle)this[i]=this.$revertStyle[i];if(this.$revertStyle={},null==t)return void(this.$changeFromStyle=!1);for(var n=t.split(","),r=0;r<n.length;r++){var o=e.$getStyleConfig(n[r]);if(o)for(var i in o)if(this.$styleSetMap[i]){var s=this[i];this[i]=o[i],this.$revertStyle[i]=s}}this.$changeFromStyle=!1}}},n.prototype.$setFontFamily=function(t){return this.$changeFromStyle||(delete this.$revertStyle.fontFanily,this.$styleSetMap.fontFanily=!1),i.prototype.$setFontFamily.call(this,t)},n.prototype.$setSize=function(t){return this.$changeFromStyle||(delete this.$revertStyle.size,this.$styleSetMap.size=!1),i.prototype.$setSize.call(this,t)},n.prototype.$setBold=function(t){return this.$changeFromStyle||(delete this.$revertStyle.bold,this.$styleSetMap.bold=!1),i.prototype.$setBold.call(this,t)},n.prototype.$setItalic=function(t){return this.$changeFromStyle||(delete this.$revertStyle.italic,this.$styleSetMap.italic=!1),i.prototype.$setItalic.call(this,t)},n.prototype.$setTextAlign=function(t){return this.$changeFromStyle||(delete this.$revertStyle.textAlign,this.$styleSetMap.textAlign=!1),i.prototype.$setTextAlign.call(this,t)},n.prototype.$setVerticalAlign=function(t){return this.$changeFromStyle||(delete this.$revertStyle.verticalAlign,this.$styleSetMap.verticalAlign=!1),i.prototype.$setVerticalAlign.call(this,t)},n.prototype.$setLineSpacing=function(t){return this.$changeFromStyle||(delete this.$revertStyle.lineSpacing,this.$styleSetMap.lineSpacing=!1),i.prototype.$setLineSpacing.call(this,t)},n.prototype.$setTextColor=function(t){return this.$changeFromStyle||(delete this.$revertStyle.textColor,this.$styleSetMap.textColor=!1),i.prototype.$setTextColor.call(this,t)},n.prototype.$setWordWrap=function(t){this.$changeFromStyle||(delete this.$revertStyle.wordWrap,this.$styleSetMap.wordWrap=!1),i.prototype.$setWordWrap.call(this,t)},n.prototype.$setDisplayAsPassword=function(t){return this.$changeFromStyle||(delete this.$revertStyle.displayAsPassword,this.$styleSetMap.displayAsPassword=!1),i.prototype.$setDisplayAsPassword.call(this,t)},n.prototype.$setStrokeColor=function(t){return this.$changeFromStyle||(delete this.$revertStyle.strokeColor,this.$styleSetMap.strokeColor=!1),i.prototype.$setStrokeColor.call(this,t)},n.prototype.$setStroke=function(t){return this.$changeFromStyle||(delete this.$revertStyle.stroke,this.$styleSetMap.stroke=!1),i.prototype.$setStroke.call(this,t)},n.prototype.$setMaxChars=function(t){return this.$changeFromStyle||(delete this.$revertStyle.maxChars,this.$styleSetMap.maxChars=!1),i.prototype.$setMaxChars.call(this,t)},n.prototype.$setMultiline=function(t){return this.$changeFromStyle||(delete this.$revertStyle.multiline,this.$styleSetMap.multiline=!1),i.prototype.$setMultiline.call(this,t)},n.prototype.$setBorder=function(t){this.$changeFromStyle||(delete this.$revertStyle.border,this.$styleSetMap.border=!1),i.prototype.$setBorder.call(this,t)},n.prototype.$setBorderColor=function(t){this.$changeFromStyle||(delete this.$revertStyle.borderColor,this.$styleSetMap.borderColor=!1),i.prototype.$setBorderColor.call(this,t)},n.prototype.$setBackground=function(t){this.$changeFromStyle||(delete this.$revertStyle.background,this.$styleSetMap.background=!1),i.prototype.$setBackground.call(this,t)},n.prototype.$setBackgroundColor=function(t){this.$changeFromStyle||(delete this.$revertStyle.backgroundColor,this.$styleSetMap.backgroundColor=!1),i.prototype.$setBackgroundColor.call(this,t)},n.prototype.$invalidateTextField=function(){i.prototype.$invalidateTextField.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.createChildren=function(){},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],r=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),isNaN(t)||t===this._widthConstraint||0==t)return void(this._widthConstraint=t);this._widthConstraint=t;var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&this.invalidateSize()},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.TextField);t.Label=i,__reflect(i.prototype,"eui.Label",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowMultipleSelection=!1,t._selectedIndices=[],t.isValidIndex=function(e,i,n){return t.$dataProvider&&e>=0&&e<t.$dataProvider.length&&e%1==0},t}return __extends(i,e),Object.defineProperty(i.prototype,"selectedIndices",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},set:function(t){this.setSelectedIndices(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},set:function(t){this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedItems",{get:function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;i>n;n++)t[n]=this.$dataProvider.getItemAt(e[n]);return t},set:function(t){var e=[];if(t)for(var i=t.length,n=0;i>n;n++){var r=this.$dataProvider.getItemIndex(t[n]);if(-1!=r&&e.splice(0,0,r),-1==r){e=[];break}}this.setSelectedIndices(e,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndices=function(t,e){var i=this.$ListBase;e&&(i[4]=i[4]||e),t?this._proposedSelectedIndices=t:this._proposedSelectedIndices=[],this.invalidateProperties()},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},i.prototype.commitSelection=function(i){void 0===i&&(i=!0);var n=this.$ListBase,r=n[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var o=[];o.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=o}this._proposedSelectedIndices.length>0?n[2]=this._proposedSelectedIndices[0]:n[2]=-1}var s=e.prototype.commitSelection.call(this,!1);if(!s)return this._proposedSelectedIndices=null,!1;var a=this.$getSelectedIndex();return a>t.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(a)&&this._proposedSelectedIndices.push(a):this._proposedSelectedIndices=[a]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(r)&&this.itemSelected(r,!0),this.commitMultipleSelection()),i&&s&&(n[4]&&(this.dispatchEventWith(egret.Event.CHANGE),n[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),s
},i.prototype.commitMultipleSelection=function(){var t,e,i=[],n=[],r=this._selectedIndices,o=this._proposedSelectedIndices;if(r.length>0&&o.length>0){for(e=o.length,t=0;e>t;t++)-1==r.indexOf(o[t])&&n.push(o[t]);for(e=r.length,t=0;e>t;t++)-1==o.indexOf(r[t])&&i.push(r[t])}else r.length>0?i=r:o.length>0&&(n=o);if(this._selectedIndices=o,i.length>0)for(e=i.length,t=0;e>t;t++)this.itemSelected(i[t],!1);if(n.length>0)for(e=n.length,t=0;e>t;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},i.prototype.$isItemIndexSelected=function(t){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):e.prototype.$isItemIndexSelected.call(this,t)},i.prototype.dataProviderRefreshed=function(){this.allowMultipleSelection||e.prototype.dataProviderRefreshed.call(this)},i.prototype.calculateSelectedIndices=function(t){var e=[],i=this._selectedIndices,n=i.length;if(n>0){if(1==n&&i[0]==t)return this.$ListBase[0]?(e.splice(0,0,i[0]),e):e;for(var r=!1,o=0;n>o;o++)i[o]==t?r=!0:i[o]!=t&&e.splice(0,0,i[o]);return r||e.splice(0,0,t),e}return e.splice(0,0,t),e},i.prototype.onRendererTouchEnd=function(i){if(this.allowMultipleSelection){var n=i.currentTarget,r=this.$ListBase[7];if(n!=r)return;this.setSelectedIndices(this.calculateSelectedIndices(n.itemIndex),!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)}else e.prototype.onRendererTouchEnd.call(this,i)},i}(t.ListBase);t.List=e,__reflect(e.prototype,"eui.List")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.closeButton=null,t.moveArea=null,t.titleDisplay=null,t._title="",t.offsetPointX=0,t.offsetPointY=0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onWindowTouchBegin,t,!1,100),t}return __extends(i,e),i.prototype.onWindowTouchBegin=function(t){this.$parent.addChild(this)},Object.defineProperty(i.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)},enumerable:!0,configurable:!0}),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.titleDisplay?this.titleDisplay.text=this._title:i==this.moveArea?this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.onCloseButtonClick=function(e){t.UIEvent.dispatchUIEvent(this,t.UIEvent.CLOSING,!0,!0)&&this.close()},i.prototype.close=function(){this.$parent&&this.$parent.removeChild(this)},i.prototype.onTouchBegin=function(t){this.$includeInLayout=!1,this.offsetPointX=this.x-t.$stageX,this.offsetPointY=this.y-t.$stageY,this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i.prototype.onTouchMove=function(t){this.x=t.$stageX+this.offsetPointX,this.y=t.$stageY+this.offsetPointY},i.prototype.onTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i}(t.Component);t.Panel=e,__reflect(e.prototype,"eui.Panel"),t.registerProperty(e,"elementsContent","Array",!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.thumb=null,i.labelDisplay=null,i._labelFunction=null,i._slideDuration=500,i._direction=t.Direction.LTR,i.slideToValue=0,i.animationValue=0,i.thumbInitX=0,i.thumbInitY=0,i.animation=new t.sys.Animation(i.animationUpdateHandler,i),i}return __extends(i,e),Object.defineProperty(i.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(t){t=0|+t,this._slideDuration!==t&&(this._slideDuration=t,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!=t&&(this.thumb&&(this.thumb.x=this.thumbInitX),this.thumb&&(this.thumb.y=this.thumbInitY),this._direction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(t){if(this.value===t)return!1;var i=this.$Range,n=e.prototype.$setValue.call(this,t);if(this._slideDuration>0&&this.$stage){this.validateProperties();var r=this.animation;if(r.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),r.stop()),this.slideToValue=this.nearestValidValue(t,i[7]),this.slideToValue===this.animationValue)return n;var o=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(i[0]-i[2]));r.duration=o===1/0?0:o,r.from=this.animationValue,r.to=this.slideToValue,r.play()}else this.animationValue=this.value;return n},i.prototype.animationUpdateHandler=function(t){var e=this.$Range,i=this.nearestValidValue(t.currentValue,e[7]);this.animationValue=Math.min(e[0],Math.max(e[2],i)),this.invalidateDisplayList()},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i===this.thumb&&(this.thumb.x&&(this.thumbInitX=this.thumb.x),this.thumb.y&&(this.thumbInitY=this.thumb.y),this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this))},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i===this.thumb&&this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)},i.prototype.onThumbResize=function(t){this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){var e=this.animation.isPlaying?this.animationValue:this.value,i=this.maximum,n=this.thumb;if(n){var r=n.width,o=n.height,s=Math.round(e/i*r);(0>s||s===1/0)&&(s=0);var a=Math.round(e/i*o);(0>a||a===1/0)&&(a=0);var h=n.$scrollRect;h||(h=egret.$TempRectangle),h.setTo(0,0,r,o);var l=n.x-h.x,u=n.y-h.y;switch(this._direction){case t.Direction.LTR:h.width=s,n.x=l;break;case t.Direction.RTL:h.width=s,h.x=r-s,n.x=h.x;break;case t.Direction.TTB:h.height=a,n.y=u;break;case t.Direction.BTT:h.height=a,h.y=o-a,n.y=h.y}n.scrollRect=h}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(e,i))},i}(t.Range);t.ProgressBar=e,__reflect(e.prototype,"eui.ProgressBar")}(eui||(eui={}));var eui;!function(t){var e={},i=function(i){function n(){var t=i.call(this)||this;return t.$indexNumber=0,t.$radioButtonGroup=null,t._group=null,t.groupChanged=!1,t._groupName="radioGroup",t._value=null,t.groupName="radioGroup",t}return __extends(n,i),Object.defineProperty(n.prototype,"enabled",{get:function(){return this.$Component[3]?!this.$radioButtonGroup||this.$radioButtonGroup.$enabled:!1},set:function(t){this.$setEnabled(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"group",{get:function(){if(!this._group&&this._groupName){var i=e[this._groupName];i||(i=new t.RadioButtonGroup,i.$name=this._groupName,e[this._groupName]=i),this._group=i}return this._group},set:function(t){this._group!=t&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=t,this._groupName=t?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupName",{get:function(){return this._groupName},set:function(t){t&&""!=t&&(this._groupName=t,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.$setSelected=function(t){var e=i.prototype.$setSelected.call(this,t);return this.invalidateDisplayList(),e},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&(this._value=e,this.$selected&&this.group&&t.PropertyEvent.dispatchPropertyEvent(this.group,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))},enumerable:!0,configurable:!0}),n.prototype.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},n.prototype.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},n.prototype.addToGroup=function(){var t=this.group;return t&&t.$addInstance(this),t},n}(t.ToggleButton);t.RadioButton=i,__reflect(i.prototype,"eui.RadioButton")}(eui||(eui={}));var eui;!function(t){function e(t,i){var n=t.parent,r=i.parent;if(!n||!r)return 0;var o=t.$nestLevel,s=i.$nestLevel,a=0,h=0;return n==r&&(a=n.getChildIndex(t),h=r.getChildIndex(i)),o>s||a>h?1:s>o||h>a?-1:t==i?0:e(n,r)}var i=0,n=function(n){function r(){var t=n.call(this)||this;return t.$name=null,t.radioButtons=[],t.$enabled=!0,t._selectedValue=null,t._selection=null,t.$name="_radioButtonGroup"+i++,t}return __extends(r,n),r.prototype.getRadioButtonAt=function(t){return this.radioButtons[t]},Object.defineProperty(r.prototype,"enabled",{get:function(){return this.$enabled},set:function(t){if(t=!!t,this.$enabled!==t){this.$enabled=t;for(var e=this.radioButtons,i=e.length,n=0;i>n;n++)e[n].invalidateState()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numRadioButtons",{get:function(){return this.radioButtons.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedValue",{get:function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},set:function(e){if(this._selectedValue=e,null==e)return void this.$setSelection(null,!1);for(var i=this.numRadioButtons,n=0;i>n;n++){var r=this.radioButtons[n];if(r.value==e||r.label==e){this.changeSelection(n,!1),this._selectedValue=null,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection!=t&&this.$setSelection(t,!1)},enumerable:!0,configurable:!0}),r.prototype.$addInstance=function(t){t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this);var i=this.radioButtons;i.push(t),i.sort(e);for(var n=i.length,r=0;n>r;r++)i[r].$indexNumber=r;this._selectedValue&&(this.selectedValue=this._selectedValue),1==t.selected&&(this.selection=t),t.$radioButtonGroup=this,t.invalidateState()},r.prototype.$removeInstance=function(t,e){if(t)for(var i=!1,n=this.radioButtons,r=n.length,o=0;r>o;o++){var s=n[o];i?s.$indexNumber=s.$indexNumber-1:s==t&&(e&&t.addEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this),t==this._selection&&(this._selection=null),t.$radioButtonGroup=null,t.invalidateState(),this.radioButtons.splice(o,1),i=!0,o--,r--)}},r.prototype.$setSelection=function(e,i){if(this._selection==e)return!1;if(e){for(var n=this.numRadioButtons,r=0;n>r;r++)if(e==this.getRadioButtonAt(r)){this.changeSelection(r,i);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,i&&this.dispatchEventWith(egret.Event.CHANGE));return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"),!0},r.prototype.changeSelection=function(t,e){var i=this.getRadioButtonAt(t);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,e&&this.dispatchEventWith(egret.Event.CHANGE))},r.prototype.addedHandler=function(t){var e=t.target;e==t.currentTarget&&(e.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this),this.$addInstance(e))},r.prototype.removedHandler=function(t){var e=t.target;e==t.currentTarget&&(e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this),this.$removeInstance(e,!0))},r}(egret.EventDispatcher);t.RadioButtonGroup=n,__reflect(n.prototype,"eui.RadioButtonGroup"),t.registerBindable(n.prototype,"selectedValue")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n){var r=t.call(this)||this;return r.$fillColor=0,r.$fillAlpha=1,r.$strokeColor=4473924,r.$strokeAlpha=1,r.$strokeWeight=0,r.$ellipseWidth=0,r.$ellipseHeight=0,r.touchChildren=!1,r.$graphics=new egret.Graphics,r.$graphics.$setTarget(r),r.width=e,r.height=i,r.fillColor=n,r}return __extends(e,t),e.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(e.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),e.prototype.$measureContentBounds=function(t){this.$graphics&&t.setTo(0,0,this.width,this.height)},Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.$fillColor},set:function(t){void 0!=t&&this.$fillColor!=t&&(this.$fillColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillAlpha",{get:function(){return this.$fillAlpha},set:function(t){this.$fillAlpha!=t&&(this.$fillAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeColor",{get:function(){return this.$strokeColor},set:function(t){this.$strokeColor!=t&&(this.$strokeColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeAlpha",{get:function(){return this.$strokeAlpha},set:function(t){this.$strokeAlpha!=t&&(this.$strokeAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWeight",{get:function(){return this.$strokeWeight},set:function(t){this.$strokeWeight!=t&&(this.$strokeWeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipseWidth",{get:function(){return this.$ellipseWidth},set:function(t){this.$ellipseWidth!=t&&(this.$ellipseWidth=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipseHeight",{get:function(){return this.$ellipseHeight},set:function(t){this.$ellipseHeight!=t&&(this.$ellipseHeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),e.prototype.updateDisplayList=function(t,e){var i=this.graphics;i.clear(),this.$strokeWeight>0&&(i.beginFill(this.$fillColor,0),i.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight):i.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()),i.beginFill(this.$fillColor,this.$fillAlpha),i.lineStyle(this.$strokeWeight,this.$strokeColor,0,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight):i.drawRoundRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},e}(t.Component);t.Rect=e,__reflect(e.prototype,"eui.Rect")}(eui||(eui={}));var eui;!function(t){var e,i=function(i){function n(){var e=i.call(this)||this;e.$bounces=!0,e.horizontalScrollBar=null,e.verticalScrollBar=null;var n=new t.sys.TouchScroll(e.horizontalUpdateHandler,e.horizontalEndHandler,e),r=new t.sys.TouchScroll(e.verticalUpdateHandler,e.verticalEndHanlder,e);return e.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:n,9:r,10:null,11:!1,12:!1},e}return __extends(n,i),Object.defineProperty(n.prototype,"bounces",{get:function(){return this.$bounces},set:function(t){this.$bounces=!!t;var e=this.$Scroller[8];e&&(e.$bounces=this.$bounces);var i=this.$Scroller[9];i&&(i.$bounces=this.$bounces)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"throwSpeed",{get:function(){return this.$Scroller[8].$scrollFactor},set:function(t){t=+t,0>t&&(t=0),this.$Scroller[8].$scrollFactor=t,this.$Scroller[9].$scrollFactor=t},enumerable:!0,configurable:!0}),n.prototype.$getThrowInfo=function(i,n){return e?(e.currentPos=i,e.toPos=n):e=new t.ScrollerThrowEvent(t.ScrollerThrowEvent.THROW,!1,!1,i,n),e},Object.defineProperty(n.prototype,"scrollPolicyV",{get:function(){return this.$Scroller[0]},set:function(t){var e=this.$Scroller;e[0]!=t&&(e[0]=t,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollPolicyH",{get:function(){return this.$Scroller[1]},set:function(t){var e=this.$Scroller;e[1]!=t&&(e[1]=t,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),n.prototype.stopAnimation=function(){var e=this.$Scroller,i=e[9],n=e[8];i.animation.isPlaying?t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END):n.animation.isPlaying&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END),i.stop(),n.stop();var r=this.verticalScrollBar,o=this.horizontalScrollBar;r&&r.autoVisibility&&(r.visible=!1),o&&o.autoVisibility&&(o.visible=!1)},Object.defineProperty(n.prototype,"viewport",{get:function(){return this.$Scroller[10]},set:function(t){var e=this.$Scroller;t!=e[10]&&(this.uninstallViewport(),e[10]=t,e[11]=!1,this.installViewport())},enumerable:!0,configurable:!0}),n.prototype.installViewport=function(){var t=this.viewport;t&&(this.addChildAt(t,0),t.scrollEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=t),this.verticalScrollBar&&(this.verticalScrollBar.viewport=t)},n.prototype.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var t=this.viewport;t&&(t.scrollEnabled=!1,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this),0==this.$Scroller[11]&&this.removeChild(t))},n.prototype.onViewPortRemove=function(t){t.target==this.viewport&&(this.$Scroller[11]=!0,this.viewport=null)},n.prototype.setSkin=function(t){i.prototype.setSkin.call(this,t);var e=this.viewport;e&&this.addChildAt(e,0)},n.prototype.onTouchBeginCapture=function(t){if(this.$stage){this.$Scroller[12]=!1;var e=this.checkScrollPolicy();e&&this.onTouchBegin(t)}},n.prototype.onTouchEndCapture=function(t){this.$Scroller[12]&&(t.$bubbles=!1,this.dispatchBubbleEvent(t),t.$bubbles=!0,t.stopPropagation(),this.onTouchEnd(t))},n.prototype.onTouchTapCapture=function(t){this.$Scroller[12]&&(t.$bubbles=!1,this.dispatchBubbleEvent(t),t.$bubbles=!0,t.stopPropagation())},n.prototype.checkScrollPolicy=function(){var t=this.$Scroller,e=t[10];if(!e)return!1;var i,n=e.$UIComponent;switch(t[1]){case"auto":i=e.contentWidth>n[10]||0!==e.scrollH?!0:!1;break;case"on":i=!0;break;case"off":i=!1}t[6]=i;var r;switch(t[0]){case"auto":r=e.contentHeight>n[11]||0!==e.scrollV?!0:!1;break;case"on":r=!0;break;case"off":r=!1}return t[7]=r,i||r},n.prototype.onTouchBegin=function(t){if(!t.isDefaultPrevented()&&this.checkScrollPolicy()){this.downTarget=t.target;var e=this.$Scroller;this.stopAnimation(),e[3]=t.$stageX,e[4]=t.$stageY,e[6]&&e[8].start(t.$stageX),e[7]&&e[9].start(t.$stageY);var i=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this),this.tempStage=i}},n.prototype.onTouchMove=function(e){if(!e.isDefaultPrevented()){var i=this.$Scroller;if(!i[5]){var r=void 0;r=Math.abs(i[3]-e.$stageX)<n.scrollThreshold?!1:!0;var o=void 0;if(o=Math.abs(i[4]-e.$stageY)<n.scrollThreshold?!1:!0,!r&&!o)return;if(!o&&r&&"off"==i[1])return;if(!r&&o&&"off"==i[0])return;i[12]=!0,i[5]=!0,this.dispatchCancelEvent(e);var s=this.horizontalScrollBar,a=this.verticalScrollBar;s&&s.autoVisibility&&i[6]&&(s.visible=!0),a&&a.autoVisibility&&i[7]&&(a.visible=!0),i[2]&&i[2].reset(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}e.preventDefault();var h=i[10],l=h.$UIComponent;i[6]&&i[8].update(e.$stageX,h.contentWidth-l[10],h.scrollH),i[7]&&i[9].update(e.$stageY,h.contentHeight-l[11],h.scrollV)}},n.prototype.onTouchCancel=function(t){this.$Scroller[5]||this.onRemoveListeners()},n.prototype.dispatchBubbleEvent=function(t){var e=this.$Scroller[10];if(e){var i=egret.Event.create(egret.TouchEvent,t.type,t.bubbles,t.cancelable);i.$initTo(t.$stageX,t.$stageY,t.touchPointID);var n=this.downTarget;i.$setTarget(n);for(var r=this.$getPropagationList(n),o=r.length,s=.5*r.length,a=-1,h=0;o>h;h++)if(r[h]===e){a=h;break}r.splice(0,r.length-a+1),s=0,this.$dispatchPropagationEvent(i,r,s),egret.Event.release(i)}},n.prototype.dispatchCancelEvent=function(t){var e=this.$Scroller[10];if(e){var i=egret.Event.create(egret.TouchEvent,egret.TouchEvent.TOUCH_CANCEL,t.bubbles,t.cancelable);i.$initTo(t.$stageX,t.$stageY,t.touchPointID);var n=this.downTarget;i.$setTarget(n);for(var r=this.$getPropagationList(n),o=r.length,s=.5*r.length,a=-1,h=0;o>h;h++)if(r[h]===e){a=h;break}r.splice(0,a+1-2),r.splice(r.length-1-a+2,a+1-2),s-=a+1,this.$dispatchPropagationEvent(i,r,s),egret.Event.release(i)}},n.prototype.onTouchEnd=function(t){var e=this.$Scroller;e[5]=!1,this.onRemoveListeners();var i=e[10],n=i.$UIComponent;e[8].isStarted()&&e[8].finish(i.scrollH,i.contentWidth-n[10]),e[9].isStarted()&&e[9].finish(i.scrollV,i.contentHeight-n[11])},n.prototype.onRemoveListeners=function(){var t=this.tempStage||this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},n.prototype.horizontalUpdateHandler=function(t){var e=this.$Scroller[10];e&&(e.scrollH=t),this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.verticalUpdateHandler=function(t){var e=this.$Scroller[10];e&&(e.scrollV=t),this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},n.prototype.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},n.prototype.onChangeEnd=function(){var e=this.$Scroller,i=this.horizontalScrollBar,n=this.verticalScrollBar;(i&&i.visible||n&&n.visible)&&(e[2]||(e[2]=new egret.Timer(200,1),e[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),e[2].reset(),e[2].start()),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},n.prototype.onAutoHideTimer=function(t){var e=this.horizontalScrollBar,i=this.verticalScrollBar;e&&e.autoVisibility&&(e.visible=!1),i&&i.autoVisibility&&(i.visible=!1)},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e);var n=this.viewport;n&&(n.setLayoutBoundsSize(t,e),n.setLayoutBoundsPosition(0,0))},n.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.autoVisibility&&(this.horizontalScrollBar.visible=!1)):e==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.autoVisibility&&(this.verticalScrollBar.visible=!1))},n.scrollThreshold=5,n}(t.Component);t.Scroller=i,__reflect(i.prototype,"eui.Scroller"),t.registerProperty(i,"viewport","eui.IViewport",!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.maxWidth=1e5,i.minWidth=0,i.maxHeight=1e5,i.minHeight=0,i.width=0/0,i.height=0/0,i.$elementsContent=[],i._hostComponent=null,i.$stateValues=new t.sys.StateValues,i}return __extends(i,e),Object.defineProperty(i.prototype,"elementsContent",{set:function(t){this.$elementsContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hostComponent",{get:function(){return this._hostComponent},set:function(e){if(this._hostComponent!=e){this._hostComponent&&this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=e;var i=this.$stateValues;i.parent=e,e&&(this.commitCurrentState(),this.$stateValues.intialized||(e.$stage?this.initializeStates(e.$stage):e.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this))),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"hostComponent")}},enumerable:!0,configurable:!0}),i.prototype.onAddedToStage=function(t){this.initializeStates(this._hostComponent.$stage)},i}(egret.EventDispatcher);t.Skin=e,__reflect(e.prototype,"eui.Skin"),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]"),t.registerBindable(e.prototype,"hostComponent")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.indexBeingUpdated=!1,t.requireSelection=!0,t.useVirtualLayout=!1,t}return __extends(i,e),i.prototype.createChildren=function(){if(!this.$layout){var i=new t.HorizontalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.JUSTIFY,i.verticalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},i.prototype.$setDataProvider=function(i){var n=this.$dataProvider;return n&&n instanceof t.ViewStack&&(n.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),i&&i instanceof t.ViewStack&&(i.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),e.prototype.$setDataProvider.call(this,i)},i.prototype.onIndexChanged=function(t){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},i.prototype.onViewStackIndexChange=function(t){"selectedIndex"!=t.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},i}(t.ListBase);t.TabBar=e,__reflect(e.prototype,"eui.TabBar")}(eui||(eui={}));var eui;!function(t){var e=egret.FocusEvent,i=function(i){function n(){var t=i.call(this)||this;return t.isFocus=!1,t.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null,8:egret.TextFieldInputType.TEXT},t}return __extends(n,i),Object.defineProperty(n.prototype,"prompt",{get:function(){return this.promptDisplay?this.promptDisplay.text:this.$TextInput[0]},set:function(t){this.$TextInput[0]=t,this.promptDisplay&&(this.promptDisplay.text=t),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){if(this.textDisplay)return this.textDisplay.displayAsPassword;var t=this.$TextInput[1];return t?t:!1},set:function(t){this.$TextInput[1]=t,this.textDisplay&&(this.textDisplay.displayAsPassword=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputType",{get:function(){return this.textDisplay?this.textDisplay.inputType:this.$TextInput[8]},set:function(t){this.$TextInput[8]=t,this.textDisplay&&(this.textDisplay.inputType=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textColor",{get:function(){return this.textDisplay?this.textDisplay.textColor:this.$TextInput[2]},set:function(t){this.$TextInput[2]=t,this.textDisplay&&(this.textDisplay.textColor=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxChars",{get:function(){if(this.textDisplay)return this.textDisplay.maxChars;var t=this.$TextInput[3];return t?t:0},set:function(t){this.$TextInput[3]=t,this.textDisplay&&(this.textDisplay.maxChars=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){if(this.textDisplay)return this.textDisplay.maxWidth;var t=this.$TextInput[4];return t?t:1e5},set:function(t){this.$TextInput[4]=t,this.textDisplay&&(this.textDisplay.maxWidth=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){this.textDisplay;var t=this.$TextInput[5];return t?t:1e5},set:function(t){this.$TextInput[5]=t,this.textDisplay&&(this.textDisplay.maxHeight=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.textDisplay?this.textDisplay.text:this.$TextInput[6]},set:function(t){this.$TextInput[6]=t,this.textDisplay&&(this.textDisplay.text=t),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restrict",{get:function(){return this.textDisplay?this.textDisplay.restrict:this.$TextInput[7]},set:function(t){this.$TextInput[7]=t,this.textDisplay&&(this.textDisplay.restrict=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),n.prototype.focusInHandler=function(t){this.isFocus=!0,this.invalidateState()},n.prototype.focusOutHandler=function(t){this.isFocus=!1,this.invalidateState()},n.prototype.getCurrentState=function(){var t=this.skin;return!this.prompt||this.isFocus||this.text?this.enabled?"normal":"disabled":this.enabled&&t.hasState("normalWithPrompt")?"normalWithPrompt":!this.enabled&&t.hasState("disabledWithPrompt")?"disabledWithPrompt":void 0},n.prototype.partAdded=function(n,r){i.prototype.partAdded.call(this,n,r);var o=this.$TextInput;r==this.textDisplay?(this.textDisplayAdded(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.addEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.addEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&o[0]&&(this.promptDisplay.text=o[0])},n.prototype.partRemoved=function(n,r){i.prototype.partRemoved.call(this,n,r),r==this.textDisplay?(this.textDisplayRemoved(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.removeEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.removeEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&(this.$TextInput[0]=this.promptDisplay.text)
},n.prototype.textDisplayAdded=function(){var t=this.$TextInput;t[1]&&(this.textDisplay.displayAsPassword=t[1]),t[2]&&(this.textDisplay.textColor=t[2]),t[3]&&(this.textDisplay.maxChars=t[3]),t[4]&&(this.textDisplay.maxWidth=t[4]),t[5]&&(this.textDisplay.maxHeight=t[5]),t[6]&&(this.textDisplay.text=t[6]),t[7]&&(this.textDisplay.restrict=t[7]),t[8]&&(this.textDisplay.inputType=t[8])},n.prototype.textDisplayRemoved=function(){var t=this.$TextInput;t[1]=this.textDisplay.displayAsPassword,t[2]=this.textDisplay.textColor,t[3]=this.textDisplay.maxChars,t[4]=this.textDisplay.maxWidth,t[5]=this.textDisplay.maxHeight,t[6]=this.textDisplay.text,t[7]=this.textDisplay.restrict,t[8]=this.textDisplay.inputType},n}(t.Component);t.TextInput=i,__reflect(i.prototype,"eui.TextInput")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ToggleButton);t.CheckBox=e,__reflect(e.prototype,"eui.CheckBox")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ToggleButton);t.ToggleSwitch=e,__reflect(e.prototype,"eui.ToggleSwitch")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoveFromStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},e.prototype.onRemoveFromStage=function(t){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.onResize=function(t){var e=this.$stage;this.$setWidth(e.$stageWidth),this.$setHeight(e.$stageHeight)},e}(t.Group);t.UILayer=e,__reflect(e.prototype,"eui.UILayer")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var s=o.height,a=o.x,h=r.scrollV,l=r.contentHeight,u=r.height;if(0>=h){var p=s*(1- -h/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(0/0,p),n.setLayoutBoundsPosition(a,0)}else if(h>=l-u){var p=s*(1-(h-l+u)/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(0/0,p),n.setLayoutBoundsPosition(a,i-p)}else{var c=(i-s)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(a,c)}}},e.prototype.onPropertyChanged=function(t){switch(t.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.VScrollBar=e,__reflect(e.prototype,"eui.VScrollBar")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?(r-e)/r*n:0)},e.prototype.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.height;return this.thumb.getLayoutBounds(t),e-t.height},e.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?e-(this.pendingValue-t[2])/i*e:0,r=this.track.localToGlobal(0,n,egret.$TempPoint),o=r.x,s=r.y,a=this.thumb.$parent.globalToLocal(o,s,egret.$TempPoint).y,h=egret.$TempRectangle,l=h.height;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(h.x,Math.round(a)),this.trackHighlight){var u=this.trackHighlight.$parent.globalToLocal(o,s,egret.$TempPoint).y;this.trackHighlight.y=Math.round(u+l),this.trackHighlight.height=Math.round(e-u)}}},e}(t.SliderBase);t.VSlider=e,__reflect(e.prototype,"eui.VSlider")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._selectedChild=null,i.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION,i._selectedIndex=-1,i}return __extends(i,e),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedChild",{get:function(){var t=this.selectedIndex;return t>=0&&t<this.numChildren?this.getChildAt(t):null},set:function(t){var e=this.getChildIndex(t);e>=0&&e<this.numChildren&&this.setSelectedIndex(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(t){t=0|+t,this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(e){e!=this.selectedIndex&&(this.proposedSelectedIndex=e,this.invalidateProperties(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.$childAdded=function(i,n){e.prototype.$childAdded.call(this,i,n),this.showOrHide(i,!1);var r=this.selectedIndex;-1==r?this.setSelectedIndex(n):n<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(r+1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.ADD,n,-1,[i.name])},i.prototype.$childRemoved=function(i,n){e.prototype.$childRemoved.call(this,i,n),this.showOrHide(i,!0);var r=this.selectedIndex;n==r?this.numChildren>0?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):r>n&&this.setSelectedIndex(r-1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.REMOVE,n,-1,[i.name])},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION)},i.prototype.commitSelection=function(t){t>=0&&t<this.numChildren?(this._selectedIndex=t,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},i.prototype.showOrHide=function(t,e){egret.is(t,"eui.UIComponent")&&(t.includeInLayout=e),t.visible=e},Object.defineProperty(i.prototype,"length",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getItemAt=function(t){var e=this.$children[t];return e?e.name:""},i.prototype.getItemIndex=function(t){for(var e=this.$children,i=e.length,n=0;i>n;n++)if(e[n].name==t)return n;return-1},i}(t.Group);t.ViewStack=e,__reflect(e.prototype,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]),t.registerBindable(e.prototype,"selectedIndex")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){return-.5*(Math.cos(Math.PI*t)-1)}var i=function(){function t(t,i){this.easerFunction=e,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=i}return t.prototype.play=function(){this.stop(),this.start()},t.prototype.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},t.prototype.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},t.prototype.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(e,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var r=e>=i;return r&&this.stop(),r&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=i,__reflect(i.prototype,"eui.sys.Animation")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){var i=t.target;e.call(n,i.response)}function o(t){i.call(n)}var s=new egret.HttpRequest;s.addEventListener(egret.Event.COMPLETE,r,n),s.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n),s.responseType=egret.HttpResponseType.TEXT,s.open(t),s.send()},t}();t.DefaultThemeAdapter=e,__reflect(e.prototype,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])}(eui||(eui={}));var eui;!function(t){function e(t,i){var n=Object.getOwnPropertyDescriptor(t,i);if(n)return n;var r=Object.getPrototypeOf(t);return r?e(r,i):null}function i(t,e){for(var i=t[n],r=i.length,o=0;r>o;o+=2){var s=i[o],a=i[o+1];s.call(a,e)}}var n="__listeners__",r="__bindables__",o=0,s=function(){function s(t,e,i,n){this.isExecuting=!1,this.property=t,this.handler=e,this.next=n,this.thisObject=i}return s.watch=function(t,e,i,n){if(e.length>0){var r=e.shift(),o=s.watch(null,e,i,n),a=new s(r,i,n,o);return a.reset(t),a}return null},s.checkBindable=function(s,a){var h=s[r];if(h&&-1!=h.indexOf(a))return!0;var l=egret.is(s,"egret.IEventDispatcher");l||s[n]||(s[n]=[]);var u=e(s,a);if(u&&u.set&&u.get){var p=u.set;u.set=function(e){this[a]!=e&&(p.call(this,e),l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,a):i(this,a))}}else{if(u&&(u.get||u.set))return!1;o++;var c="_"+o+a;s[c]=u?u.value:null,u={enumerable:!0,configurable:!0},u.get=function(){return this[c]},u.set=function(e){this[c]!=e&&(this[c]=e,l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,a):i(this,a))}}Object.defineProperty(s,a,u),t.registerBindable(s,a)},s.prototype.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},s.prototype.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},s.prototype.setHandler=function(t,e){this.handler=t,this.thisObject=e,this.next&&this.next.setHandler(t,e)},s.prototype.reset=function(e){var i=this.host;if(i)if(egret.is(i,"egret.IEventDispatcher"))i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this);else{var r=i[n],o=r.indexOf(this);r.splice(o-1,2)}if(this.host=e,e)if(s.checkBindable(e,this.property),egret.is(e,"egret.IEventDispatcher"))e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100);else{var r=e[n];r.push(this.onPropertyChange),r.push(this)}this.next&&this.next.reset(this.getHostPropertyValue())},s.prototype.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},s.prototype.wrapHandler=function(t){this.onPropertyChange(t.property)},s.prototype.onPropertyChange=function(t){if(t==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},s}();t.Watcher=s,__reflect(s.prototype,"eui.Watcher")}(eui||(eui={}));var eui;!function(t){function e(e){for(var i=e[0],n=i instanceof t.Watcher?i.getValue():i,r=e.length,o=1;r>o;o++){var s=e[o];s instanceof t.Watcher&&(s=s.getValue()),n+=s}return n}var i=function(){function i(){}return i.bindProperty=function(e,i,n,r){var o=t.Watcher.watch(e,i,null,null);if(o){var s=function(t){n[r]=t};o.setHandler(s,null),s(o.getValue())}return o},i.bindHandler=function(e,i,n,r){var o=t.Watcher.watch(e,i,n,r);return o&&n.call(r,o.getValue()),o},i.$bindProperties=function(n,r,o,s,a){if(1==r.length&&1==o.length)return i.bindProperty(n,r[0].split("."),s,a);for(var h,l=function(){s[a]=e(r)},u=o.length,p=0;u>p;p++){var c=o[p],d=r[c].split(".");h=t.Watcher.watch(n,d,null,null),h&&(r[c]=h,h.setHandler(l,null))}return l(),h},i}();t.Binding=i,__reflect(i.prototype,"eui.Binding")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return t?i._source=t:i._source=[],i}return __extends(i,e),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(e){e||(e=[]),this._source=e,this.dispatchCoEvent(t.CollectionEventKind.RESET)},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){this.dispatchCoEvent(t.CollectionEventKind.REFRESH)},Object.defineProperty(i.prototype,"length",{get:function(){return this._source.length},enumerable:!0,configurable:!0}),i.prototype.addItem=function(e){this._source.push(e),this.dispatchCoEvent(t.CollectionEventKind.ADD,this._source.length-1,-1,[e])},i.prototype.addItemAt=function(e,i){0>i||i>this._source.length,this._source.splice(i,0,e),this.dispatchCoEvent(t.CollectionEventKind.ADD,i,-1,[e])},i.prototype.getItemAt=function(t){return this._source[t]},i.prototype.getItemIndex=function(t){for(var e=this._source.length,i=0;e>i;i++)if(this._source[i]===t)return i;return-1},i.prototype.itemUpdated=function(e){var i=this.getItemIndex(e);-1!=i&&this.dispatchCoEvent(t.CollectionEventKind.UPDATE,i,-1,[e])},i.prototype.removeAll=function(){var e=this._source.concat();this._source=[],this.dispatchCoEvent(t.CollectionEventKind.REMOVE,0,-1,e)},i.prototype.removeItemAt=function(e){if(!(0>e||e>=this._source.length)){var i=this._source.splice(e,1)[0];return this.dispatchCoEvent(t.CollectionEventKind.REMOVE,e,-1,[i]),i}},i.prototype.replaceItemAt=function(e,i){if(!(0>i||i>=this._source.length)){var n=this._source.splice(i,1,e)[0];return this.dispatchCoEvent(t.CollectionEventKind.REPLACE,i,-1,[e],[n]),n}},i.prototype.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;i>n;n++)this.removeItemAt(e);for(var n=0;e>n;n++)n>=i?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},i.prototype.dispatchCoEvent=function(e,i,n,r,o){t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,e,i,n,r,o)},i}(egret.EventDispatcher);t.ArrayCollection=e,__reflect(e.prototype,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]),t.registerProperty(e,"source","Array",!0)}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(){var t=i.call(this)||this;return t._widthConstraint=0/0,t.$isShowPrompt=!1,t.$promptColor=6710886,t.$isFocusIn=!1,t.initializeUIValues(),t.type=egret.TextFieldType.INPUT,t.$EditableText={0:null,1:16777215,2:!1},t}return __extends(n,i),n.prototype.$invalidateTextField=function(){i.prototype.$invalidateTextField.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$getText=function(){var t=i.prototype.$getText.call(this);return t==this.$EditableText[0]&&(t=""),t},n.prototype.$setText=function(e){var n=this.$EditableText[0];(n!=e||null==n)&&(this.$isShowPrompt=!1,this.textColor=this.$EditableText[1],this.displayAsPassword=this.$EditableText[2]),this.$isFocusIn||(""==e||null==e)&&(e=n,this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1));var r=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),r},n.prototype.$onAddToStage=function(e,i){t.sys.UIComponentImpl.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},n.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},Object.defineProperty(n.prototype,"prompt",{get:function(){return this.$EditableText[0]},set:function(t){var e=this.$EditableText,i=e[0];if(i!=t){e[0]=t;var n=this.text;n&&n!=i||this.showPromptText()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptColor",{get:function(){return this.$promptColor},set:function(t){if(t=0|+t,this.$promptColor!=t){this.$promptColor=t;var e=this.text;e&&e!=this.$EditableText[0]||this.showPromptText()}},enumerable:!0,configurable:!0}),n.prototype.onfocusOut=function(){this.$isFocusIn=!1,this.text||this.showPromptText()},n.prototype.onfocusIn=function(){this.$isFocusIn=!0,this.$isShowPrompt=!1,this.displayAsPassword=this.$EditableText[2];var t=this.$EditableText,e=this.text;e&&e!=t[0]||(this.textColor=t[1],this.text="")},n.prototype.showPromptText=function(){var t=this.$EditableText;this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1),this.text=t[0]},n.prototype.$setTextColor=function(t){return t=0|+t,this.$EditableText[1]=t,this.$isShowPrompt||i.prototype.$setTextColor.call(this,t),!0},n.prototype.$setDisplayAsPassword=function(t){return this.$EditableText[2]=t,this.$isShowPrompt||i.prototype.$setDisplayAsPassword.call(this,t),!0},n.prototype.createChildren=function(){this.onfocusOut()},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],r=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.TextField);t.EditableText=i,__reflect(i.prototype,"eui.EditableText",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){var e=t-1;return e*e*e+1}var i=4,n=[1,1.33,1.66,2],r=2.33,o=.02,s=.998,a=.95,h=Math.log(s),l=function(){function l(i,n,r){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,this.updateFunction=i,this.endFunction=n,this.target=r,this.animation=new t.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=e}return l.prototype.isPlaying=function(){return this.animation.isPlaying},l.prototype.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},l.prototype.isStarted=function(){return this.started},l.prototype.start=function(t){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=t,egret.startTick(this.onTick,this)},l.prototype.update=function(t,e,i){e=Math.max(e,0),this.currentPosition=t,this.maxScrollPos=e;var n=this.offsetPoint-t,r=n+i;this.offsetPoint=t,0>r&&(this.$bounces?r-=.5*n:r=0),r>e&&(this.$bounces?r-=.5*n:r=e),this.currentScrollPos=r,this.updateFunction.call(this.target,r)},l.prototype.finish=function(t,e){egret.stopTick(this.onTick,this),this.started=!1;for(var i=this.velocity*r,l=this.previousVelocity,u=l.length,p=r,c=0;u>c;c++){var d=n[c];i+=l[0]*d,p+=d}var f=i/p,y=Math.abs(f),g=0,v=0;if(y>o)if(v=t+(f-o)/h*2*this.$scrollFactor,0>v||v>e)for(v=t;Math.abs(f)>o;)v-=f,f*=0>v||v>e?s*a:s,g++;else g=Math.log(o/y)/h;else v=t;if(this.target.$getThrowInfo){var m=this.target.$getThrowInfo(t,v);v=m.toPos}g>0?(this.$bounces||(0>v?v=0:v>e&&(v=e)),this.throwTo(v,g)):this.finishScrolling()},l.prototype.onTick=function(t){var e=t-this.previousTime;if(e>10){var n=this.previousVelocity;n.length>=i&&n.shift(),this.velocity=(this.currentPosition-this.previousPosition)/e,n.push(this.velocity),this.previousTime=t,this.previousPosition=this.currentPosition}return!0},l.prototype.finishScrolling=function(t){var e=this.currentScrollPos,i=this.maxScrollPos,n=e;0>e&&(n=0),e>i&&(n=i),this.throwTo(n,300)},l.prototype.throwTo=function(t,e){void 0===e&&(e=500);var i=this.currentScrollPos;if(i==t)return void this.endFunction.call(this.target);var n=this.animation;n.duration=e,n.from=i,n.to=t,n.play()},l.prototype.onScrollingUpdate=function(t){this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue)},l}();t.TouchScroll=l,__reflect(l.prototype,"eui.sys.TouchScroll")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.LTR="ltr",t.RTL="rtl",t.TTB="ttb",t.BTT="btt",t}();t.Direction=e,__reflect(e.prototype,"eui.Direction")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.AUTO="auto",t.OFF="off",t.ON="on",t}();t.ScrollPolicy=e,__reflect(e.prototype,"eui.ScrollPolicy")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.delayList=[],n.skinMap={},n.$styles={},n.initialized=!t,i&&egret.registerImplementation("eui.Theme",n),n.$configURL=t,n.load(t),n}return __extends(i,e),i.prototype.load=function(e){var i=this;t.getTheme(e,function(t){return i.onConfigLoaded(t)})},i.prototype.onConfigLoaded=function(t){var e;if("string"==typeof t)try{e=JSON.parse(t)}catch(i){egret.$error(3e3)}else e=t;if(e&&e.skins)for(var n=this.skinMap,r=e.skins,o=Object.keys(r),s=o.length,a=0;s>a;a++){var h=o[a];n[h]||this.mapSkin(h,r[h])}e.styles&&(this.$styles=e.styles);var l=e.paths;for(var u in l)EXML.update(u,l[u]);e.exmls&&0!=e.exmls.length?e.exmls[0].gjs?(e.exmls.forEach(function(t){return EXML.$parseURLContentAsJs(t.path,t.gjs,t.className)}),this.onLoaded()):e.exmls[0].content?(e.exmls.forEach(function(t){return EXML.$parseURLContent(t.path,t.content)}),this.onLoaded()):EXML.$loadAll(e.exmls,this.onLoaded,this,!0):this.onLoaded()},i.prototype.onLoaded=function(t,e){this.initialized=!0,this.handleDelayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.handleDelayList=function(){for(var t=this.delayList,e=t.length,i=0;e>i;i++){var n=t[i];if(!n.$Component[5]){var r=this.getSkinName(n);r&&(n.$Component[1]=r,n.$parseSkinName())}}t.length=0},i.prototype.getSkinName=function(t){if(!this.initialized)return-1==this.delayList.indexOf(t)&&this.delayList.push(t),"";var e=this.skinMap,i=e[t.hostComponentKey];return i||(i=this.findSkinName(t)),i},i.prototype.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"eui.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},i.prototype.mapSkin=function(t,e){this.skinMap[t]=e},i.prototype.$getStyleConfig=function(t){return this.$styles[t]},i}(egret.EventDispatcher);t.Theme=e,__reflect(e.prototype,"eui.Theme")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,r,o,s,a,h){var l=t.call(this,e,i,n)||this;return l.$initTo(r,o,s,a,h),l}return __extends(e,t),e.prototype.$initTo=function(t,e,i,n,r){this.kind=t,this.location=0|+e,this.oldLocation=0|+i,this.items=n||[],this.oldItems=r||[]},e.prototype.clean=function(){t.prototype.clean.call(this),this.items=this.oldItems=null},e.dispatchCollectionEvent=function(t,i,n,r,o,s,a){if(!t.hasEventListener(i))return!0;var h=egret.Event.create(e,i);h.$initTo(n,r,o,s,a);var l=t.dispatchEvent(h);return egret.Event.release(h),l},e.COLLECTION_CHANGE="collectionChange",e}(egret.Event);t.CollectionEvent=e,__reflect(e.prototype,"eui.CollectionEvent")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.ADD="add",t.REFRESH="refresh",t.REMOVE="remove",t.REPLACE="replace",t.RESET="reset",t.UPDATE="update",t}();t.CollectionEventKind=e,__reflect(e.prototype,"eui.CollectionEventKind")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e.itemRenderer=null,e.itemIndex=-1,e}return __extends(e,t),e.prototype.clean=function(){t.prototype.clean.call(this),this.item=this.itemRenderer=null},e.dispatchItemTapEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i);r.item=n.data,r.itemIndex=n.itemIndex,r.itemRenderer=n;var o=t.dispatchEvent(r);return egret.Event.release(r),o},e.ITEM_TAP="itemTap",e}(egret.Event);t.ItemTapEvent=e,__reflect(e.prototype,"eui.ItemTapEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o.property=r,o}return __extends(e,t),e.dispatchPropertyEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i);r.property=n;var o=t.dispatchEvent(r);return egret.Event.release(r),o},e.PROPERTY_CHANGE="propertyChange",e}(egret.Event);t.PropertyEvent=e,__reflect(e.prototype,"eui.PropertyEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,n)||this;return r=+r,o=+o,s.currentPos=r,s.toPos=o,s}return __extends(e,t),e.THROW="throw",e}(egret.Event);t.ScrollerThrowEvent=e,__reflect(e.prototype,"eui.ScrollerThrowEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return __extends(e,t),e.dispatchUIEvent=function(t,i,n,r){if(!t.hasEventListener(i))return!0;var o=egret.Event.create(e,i,n,r),s=t.dispatchEvent(o);return egret.Event.release(o),s},e.CREATION_COMPLETE="creationComplete",e.CHANGE_END="changeEnd",e.CHANGE_START="changeStart",e.CLOSING="closing",e.MOVE="move",e}(egret.Event);t.UIEvent=e,__reflect(e.prototype,"eui.UIEvent")}(eui||(eui={}));var eui;!function(t){var e;!function(t){var e="eui.State",i="eui.AddItems",n="eui.SetProperty",r="eui.SetStateProperty",o="eui.Binding.$bindProperties",s=function(){function t(){this.indent=0}return t.prototype.toCode=function(){return""},t.prototype.getIndent=function(t){void 0===t&&(t=this.indent);for(var e="",i=0;t>i;i++)e+="	";return e},t}();t.CodeBase=s,__reflect(s.prototype,"eui.sys.CodeBase");var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className="",e.superClass="",e.innerClassBlock=[],e.variableBlock=[],e.functionBlock=[],e}return __extends(e,t),e.prototype.addInnerClass=function(t){-1==this.innerClassBlock.indexOf(t)&&this.innerClassBlock.push(t)},e.prototype.addVariable=function(t){-1==this.variableBlock.indexOf(t)&&this.variableBlock.push(t)},e.prototype.getVariableByName=function(t){for(var e=this.variableBlock,i=e.length,n=0;i>n;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.addFunction=function(t){-1==this.functionBlock.indexOf(t)&&this.functionBlock.push(t)},e.prototype.getFuncByName=function(t){for(var e=this.functionBlock,i=e.length,n=0;i>n;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.toCode=function(){var t=this.indent,e=this.getIndent(t),i=this.getIndent(t+1),n=this.getIndent(t+2),r=e+"(function (";r+=this.superClass?"_super) {\n"+i+"__extends("+this.className+", _super);\n":") {\n";for(var o=this.innerClassBlock,s=o.length,a=0;s>a;a++){var h=o[a];h.indent=t+1,r+=i+"var "+h.className+" = "+h.toCode()+"\n\n"}r+=i+"function "+this.className+"() {\n",this.superClass&&(r+=n+"_super.call(this);\n");var l=this.variableBlock;s=l.length;for(var a=0;s>a;a++){var u=l[a];u.defaultValue&&(r+=n+u.toCode()+"\n")}if(this.constructCode){var p=this.constructCode.toCode().split("\n");s=p.length;for(var a=0;s>a;a++){var c=p[a];r+=n+c+"\n"}}r+=i+"}\n",r+=i+"var _proto = "+this.className+".prototype;\n\n";var d=this.functionBlock;s=d.length;for(var a=0;s>a;a++){var f=d[a];f.indent=t+1,r+=f.toCode()+"\n"}return r+=i+"return "+this.className+";\n"+e,r+=this.superClass?"})("+this.superClass+");":"})();"},e}(s);t.EXClass=a,__reflect(a.prototype,"eui.sys.EXClass");var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lines=[],e}return __extends(e,t),e.prototype.addVar=function(t,e){var i=e?" = "+e:"";this.addCodeLine("var "+t+i+";")},e.prototype.addAssignment=function(t,e,i){var n=i?"."+i:"";this.addCodeLine(t+n+" = "+e+";")},e.prototype.addReturn=function(t){this.addCodeLine("return "+t+";")},e.prototype.addEmptyLine=function(){this.addCodeLine("")},e.prototype.startIf=function(t){this.addCodeLine("if("+t+")"),this.startBlock()},e.prototype.startElse=function(){this.addCodeLine("else"),this.startBlock()},e.prototype.startElseIf=function(t){this.addCodeLine("else if("+t+")"),this.startBlock()},e.prototype.startBlock=function(){this.addCodeLine("{"),this.indent++},e.prototype.endBlock=function(){this.indent--,this.addCodeLine("}")},e.prototype.doFunction=function(t,e){var i=e.join(",");this.addCodeLine(t+"("+i+")")},e.prototype.addCodeLine=function(t){this.lines.push(this.getIndent()+t)},e.prototype.addCodeLineAt=function(t,e){this.lines.splice(e,0,this.getIndent()+t)},e.prototype.containsCodeLine=function(t){return-1!=this.lines.indexOf(t)},e.prototype.concat=function(t){this.lines=this.lines.concat(t.lines)},e.prototype.toCode=function(){return this.lines.join("\n")},e}(s);t.EXCodeBlock=h,__reflect(h.prototype,"eui.sys.EXCodeBlock");var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.codeBlock=null,e.isGet=!1,e.name="",e}return __extends(e,t),e.prototype.toCode=function(){var t,e=this.getIndent(),i=this.getIndent(this.indent+1),n=e;if(this.isGet?(t=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(t=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var r=this.codeBlock.toCode().split("\n"),o=r.length,s=0;o>s;s++){var a=r[s];n+=t+a+"\n"}return n+=this.isGet?i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+e+"});":e+"};"},e}(s);t.EXFunction=l,__reflect(l.prototype,"eui.sys.EXFunction");var u=function(t){function e(e,i){var n=t.call(this)||this;return n.indent=2,n.name=e,n.defaultValue=i,n}return __extends(e,t),e.prototype.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},e}(s);t.EXVariable=u,__reflect(u.prototype,"eui.sys.EXVariable");var p=function(t){function i(e,i){var n=t.call(this)||this;return n.name="",n.stateGroups=[],n.addItems=[],n.setProperty=[],n.name=e,i&&(n.stateGroups=i),n}return __extends(i,t),i.prototype.addOverride=function(t){t instanceof c?this.addItems.push(t):this.setProperty.push(t)},i.prototype.toCode=function(){for(var t=this.getIndent(1),i="new "+e+' ("'+this.name+'",\n'+t+"[\n",n=0,r=!0,o=this.addItems.concat(this.setProperty);n<o.length;){r?r=!1:i+=",\n";for(var s=o[n],a=s.toCode().split("\n"),h=a.length,l=0;h>l;l++){var u=a[l];a[l]=t+t+u}i+=a.join("\n"),n++}return i+="\n"+t+"])"},i}(s);t.EXState=p,__reflect(p.prototype,"eui.sys.EXState");var c=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.target=e,o.property=i,o.position=n,o.relativeTo=r,o}return __extends(e,t),e.prototype.toCode=function(){var t="new "+i+'("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")';return t},e}(s);t.EXAddItems=c,__reflect(c.prototype,"eui.sys.EXAddItems");var d=function(t){function e(e,i,n){var r=t.call(this)||this;return r.target=e,r.name=i,r.value=n,r}return __extends(e,t),e.prototype.toCode=function(){return"new "+n+'("'+this.target+'","'+this.name+'",'+this.value+")"},e}(s);t.EXSetProperty=d,__reflect(d.prototype,"eui.sys.EXSetProperty");
var f=function(t){function e(e,i,n,r){var o=t.call(this)||this;return e=e?"this."+e:"this",o.target=e,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(e,t),e.prototype.toCode=function(){var t=this.templates.join(","),e=this.chainIndex.join(",");return"new "+r+"(this, ["+t+"],["+e+"],"+this.target+',"'+this.property+'")'},e}(s);t.EXSetStateProperty=f,__reflect(f.prototype,"eui.sys.EXSetStateProperty");var y=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.target=e,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(e,t),e.prototype.toCode=function(){var t=this.templates.join(","),e=this.chainIndex.join(",");return o+"(this, ["+t+"],["+e+"],"+this.target+',"'+this.property+'")'},e}(s);t.EXBinding=y,__reflect(y.prototype,"eui.sys.EXBinding")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){var e=i.call(this)||this;return e.$createChildrenCalled=!1,e.$fontChanged=!1,e._widthConstraint=0/0,e._heightConstraint=0/0,e.initializeUIValues(),e.text=t,e}return __extends(n,i),n.prototype.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.$setFont=function(t){return this.$fontForBitmapLabel==t?!1:(this.$fontForBitmapLabel=t,this.$createChildrenCalled?this.$parseFont():this.$fontChanged=!0,this.$fontStringChanged=!0,!0)},n.prototype.$parseFont=function(){this.$fontChanged=!1;var e=this.$fontForBitmapLabel;"string"==typeof e?t.getAssets(e,function(t){this.$setFontData(t,e)},this):this.$setFontData(e)},n.prototype.$setFontData=function(t,e){return e&&e!=this.$fontForBitmapLabel?void 0:t==this.$font?!1:(this.$font=t,this.$invalidateContentBounds(),!0)},n.prototype.createChildren=function(){this.$fontChanged&&this.$parseFont(),this.$createChildrenCalled=!0},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$textFieldWidth,n=this.$textFieldHeight,r=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r);var o=0/0;isNaN(this._heightConstraint)?isNaN(t[9])?1e5!=t[15]&&(o=t[15]):o=t[9]:(o=this._heightConstraint,this._heightConstraint=0/0),i.prototype.$setHeight.call(this,o),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,e),i.prototype.$setHeight.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this._heightConstraint=i,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.BitmapText);t.BitmapLabel=i,__reflect(i.prototype,"eui.BitmapLabel",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.BitmapText),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var EXML;!function(t){function e(t){return l.parse(t)}function i(t,e,i,n){if(void 0===n&&(n=!1),n&&t in p)return void(e&&e.call(i,p[t],t));var r=u[t];return r?void r.push([e,i]):(u[t]=[[e,i]],void h(t,a))}function n(t,e,i,n){if(void 0===n&&(n=!1),!t||0==t.length)return void(e&&e.call(i,[],t));var o=[];t.forEach(function(s){var a=function(n,s){o[n]=s,o.push(n),o.length==t.length&&r(t,o,e,i)};return n&&s in p?void a(s,""):void h(s,a)})}function r(t,e,i,n){var r=[];t.forEach(function(t,i){if(t in p&&!e[t])return void(r[i]=p[t]);var n=e[t],o=a(t,n);r[i]=o}),i&&i.call(n,r,t)}function o(t,e){p[t]=e;var i=u[t];delete u[t];for(var n=i?i.length:0,r=0;n>r;r++){var o=i[r];o[0]&&o[1]&&o[0].call(o[1],e,t)}}function s(t,e,i){var n=null;e&&(n=l.$parseCode(e,i),o(t,n))}function a(t,i){var n=null;if(i&&"string"==typeof i)try{n=e(i)}catch(r){console.error(t+"\n"+r.message)}if(i&&i.prototype&&(n=i),t){n&&(p[t]=n);var o=u[t];delete u[t];for(var s=o?o.length:0,a=0;s>a;a++){var h=o[a];h[0]&&h[1]&&h[0].call(h[1],n,t)}}return n}function h(t,e){var i=t;-1==t.indexOf("://")&&(i=c+t);var n=function(i){i||(i=""),e(t,i)};eui.getTheme(i,n)}var l=new eui.sys.EXMLParser,u={},p={},c="";Object.defineProperty(t,"prefixURL",{get:function(){return c},set:function(t){c=t},enumerable:!0,configurable:!0}),t.parse=e,t.load=i,t.$loadAll=n,t.update=o,t.$parseURLContentAsJs=s,t.$parseURLContent=a}(EXML||(EXML={}));var eui;!function(t){var e;!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){var e=egret.getDefinitionByName(t);return e?e.prototype:null}function n(t){if(!t)return null;var e;return e=new t}t.NS_S="http://ns.egret.com/eui",t.NS_W="http://ns.egret.com/wing";var r=["Point","Matrix","Rectangle"],o=["Array","boolean","string","number"],s="eui.",a=0,h={},l=function(){function l(){}return l.prototype.$describe=function(t){if(!t)return null;var i=Object.getPrototypeOf(t);if(!i)return null;var r;if(i.hasOwnProperty("__hashCode__")&&(r=h[i.__hashCode__]))return r;var s=Object.getPrototypeOf(i);if(!s)return null;var l=n(s.constructor),u=this.$describe(l);if(u){var p=function(){};p.prototype=u,r=new p}else r={};for(var c=Object.keys(i).concat(Object.keys(t)),d=c.length,f=t.__meta__,y=0;d>y;y++){var g=c[y];if("constructor"!=g&&"_"!=g.charAt(0)&&"$"!=g.charAt(0)){var v=void 0;if(f&&f[g])v=f[g];else if(e(t[g]))v="Array";else{if(v=typeof t[g],"function"==v)continue;-1==o.indexOf(v)&&(v="any")}r[g]=v}}return Object.getPrototypeOf(s)&&(i.__hashCode__=a++,h[i.__hashCode__]=r),r},l.prototype.getClassNameById=function(e,n){if(n==t.NS_S){if("Object"==e)return e;if(-1!=r.indexOf(e))return"egret."+e}var a="";return-1!=o.indexOf(e)?e:(n==t.NS_W||(a=n&&n!=t.NS_S?n.substring(0,n.length-1)+e:s+e),i(a)||(a=""),a)},l.prototype.getDefaultPropById=function(t,e){var n,r=this.getClassNameById(t,e),o=i(r);return o&&(n=o.__defaultProperty__),n?n:""},l.prototype.getPropertyType=function(t,e){if("Object"==e)return"any";var r="",o=i(e);if(o){if(!o.hasOwnProperty("__hashCode__")){var s=egret.getDefinitionByName(e),a=n(s);if(!a)return r;this.$describe(a)}var l=h[o.__hashCode__];l&&(r=l[t])}return r},l}();t.EXMLConfig=l,__reflect(l.prototype,"eui.sys.EXMLConfig")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.en_US=egret.$locale_strings.en_US||{};var e=egret.$locale_strings.en_US;e[2001]="EXML parsing error {0}: EXML file can't be found ",e[2002]="EXML parsing error : invalid XML file:\n{0}",e[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}",e[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}",e[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}",e[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}",e[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}",e[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}",e[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}",e[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}",e[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}",e[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}",e[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ",e[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}",e[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}",e[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}",e[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}",e[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}",e[2019]="EXML parsing error {0}: the containers child item must be visible nodes: {1}",e[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}",e[2021]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[2022]="EXML parsing error: there contains illegal characters in the id `{0}`",e[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}",e[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}",e[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}",e[2104]="EXML parsing warnning, Instantiate class {0} errorthe parameters of its constructor method must be empty.",e[2201]="BasicLayout doesn't support virtualization.",e[2202]="parse skinName errorthe parsing result of skinName must be a instance of eui.Skin.",e[2203]="Could not find the skin class '{0}'",e[2301]="parse source failedcould not find asset from URL{0} ."}(eui||(eui={}));var eui;!function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.zh_CN=egret.$locale_strings.zh_CN||{};var e=egret.$locale_strings.zh_CN;e[2001]="EXML {0}: EXML",e[2002]="EXML: XML:\n{0}",e[2003]="EXML {0}: \n{1}",e[2004]="EXML {0}: id\n{1}",e[2005]="EXML {0}: '{1}':\n{2}",e[2006]="EXML {0}: :'{1}'\n{2}",e[2007]="EXML {0}:  UIComponent includeInexcludeFrom\n{1}",e[2008]="EXML {0}: '{1}':'{2}'\n{3}",e[2009]="EXML {0}: {}ID\n{1}",e[2010]="EXML {0}: :'{1}'ID: '{2}'\n{3}",e[2011]="EXML {0}: :'{1}'\n{2}",e[2012]="EXML {0}: \n{1}",e[2013]="EXML {0}: Array\n{1}",e[2014]="EXML {0}: \n{1}",e[2015]="EXML {0}: :{1}\n{2}",e[2016]="EXML {0}: 'scale9Grid':{1}",e[2017]="EXML {0}: :{1}",e[2018]="EXML {0}: 'skinName':{1}",e[2019]="EXML {0}: :{1}",e[2020]="EXML {0}: w:DeclarationsincludeInexcludeFrom\n{1}",e[2021]="{0}  : {1} : {2}",e[2022]="EXML: id `{0}` ",e[2101]="EXML: EXML class : {0} \n{1}",e[2102]="EXML {0}: \n{1}",e[2103]="EXML {0}: '{1}'\n{2}",e[2104]="EXML{0} EXMLEXML",e[2201]="BasicLayout ",e[2202]=" skinName  eui.Skin ",e[2203]=" '{0}'",e[2301]="URL{0} "}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.measure=function(){e.prototype.measure.call(this),t.sys.measure(this.$target)},i.prototype.updateDisplayList=function(i,n){e.prototype.updateDisplayList.call(this,i,n);var r=this.$target,o=t.sys.updateDisplayList(r,i,n);r.setContentSize(Math.ceil(o.x),Math.ceil(o.y))},i}(t.LayoutBase);t.BasicLayout=e,__reflect(e.prototype,"eui.BasicLayout")}(eui||(eui={})),function(t){var e;!function(t){function e(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var r=+i.substring(0,n);return.01*r*e}function i(t){if(t){for(var e=0,i=0,n=egret.$TempRectangle,o=t.numChildren,s=0;o>s;s++){var a=t.getChildAt(s);if(egret.is(a,r)&&a.$includeInLayout){var h=a.$UIComponent,l=+h[4],u=+h[5],p=+h[0],c=+h[1],d=+h[2],f=+h[3],y=void 0,g=void 0;a.getPreferredBounds(n),isNaN(p)||isNaN(c)?isNaN(l)?isNaN(p)&&isNaN(c)?y=n.x:(y=isNaN(p)?0:p,y+=isNaN(c)?0:c):y=2*Math.abs(l):y=p+c,isNaN(d)||isNaN(f)?isNaN(u)?isNaN(d)&&isNaN(f)?g=n.y:(g=isNaN(d)?0:d,g+=isNaN(f)?0:f):g=2*Math.abs(u):g=d+f;var v=n.width,m=n.height;e=Math.ceil(Math.max(e,y+v)),i=Math.ceil(Math.max(i,g+m))}}t.setMeasuredSize(e,i)}}function n(t,i,n){if(t){for(var o=t.numChildren,s=0,a=0,h=egret.$TempRectangle,l=0;o>l;l++){var u=t.getChildAt(l);if(egret.is(u,r)&&u.$includeInLayout){var p=u.$UIComponent,c=e(p[4],.5*i),d=e(p[5],.5*n),f=e(p[0],i),y=e(p[1],i),g=e(p[2],n),v=e(p[3],n),m=p[6],$=p[7],E=0/0,C=0/0;isNaN(f)||isNaN(y)?isNaN(m)||(E=Math.round(i*Math.min(.01*m,1))):E=i-y-f,isNaN(g)||isNaN(v)?isNaN($)||(C=Math.round(n*Math.min(.01*$,1))):C=n-v-g,u.setLayoutBoundsSize(E,C),u.getLayoutBounds(h);var _=h.width,b=h.height,S=0/0,T=0/0;S=isNaN(c)?isNaN(f)?isNaN(y)?h.x:i-_-y:f:Math.round((i-_)/2+c),T=isNaN(d)?isNaN(g)?isNaN(v)?h.y:n-b-v:g:Math.round((n-b)/2+d),u.setLayoutBoundsPosition(S,T),s=Math.max(s,S+_),a=Math.max(a,T+b)}}return egret.$TempPoint.setTo(s,a)}}var r="eui.UIComponent";t.measure=i,t.updateDisplayList=n}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.LEFT="left",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_WIDTH="justifyUsingWidth",t}();t.ColumnAlign=e,__reflect(e.prototype,"eui.ColumnAlign")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,r=0,o=0,s=egret.$TempRectangle,a=0;i>a;a++){var h=t.getElementAt(a);egret.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(s),r+=s.width,o=Math.max(o,s.height)):n--}r+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+l,o+u)},n.prototype.measureVirtual=function(){for(var t=this.$target,i=this.$typicalWidth,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalHeight),o=egret.$TempRectangle,s=this.endIndex,a=this.elementSizeTable,h=this.startIndex;s>h;h++){var l=t.getElementAt(h);egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(o),n+=o.width,n-=isNaN(a[h])?i:a[h],r=Math.max(r,o.height))}var u=this.$paddingLeft+this.$paddingRight,p=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+u,r+p)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,s=this.$paddingRight,a=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-o-s),p=Math.max(0,n-a-h),c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY,d=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var y,g,v,m=r.numElements,$=m,E=o,C=a,_=0,b=0,S=[],T=u,x=this.maxElementSize,I=egret.$TempRectangle;for(y=0;m>y;y++){var P=r.getElementAt(y);if(egret.is(P,e)&&P.$includeInLayout)if(P.getPreferredBounds(I),x=Math.max(x,I.height),c)_+=I.width;else{var L=P.$UIComponent;isNaN(L[6])?T-=I.width:(b+=L[6],v=new t.sys.ChildInfo,v.layoutElement=P,v.percent=L[6],v.min=L[12],v.max=L[13],S.push(v))}else $--}T-=l*($-1),T=T>0?T:0;var N,O=u-_-l*($-1),A=$,D={};if(c){if(0>O){for(N=T/$,y=0;m>y;y++)g=r.getElementAt(y),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(I),I.width<=N&&(T-=I.width,A--));T=T>0?T:0}}else if(b>0){this.flexChildrenProportionally(u,T,b,S);var B=0,R=S.length;for(y=0;R>y;y++){v=S[y];var M=Math.round(v.size+B);B+=v.size-M,D[v.layoutElement.$hashCode]=M,T-=M}T=T>0?T:0}this.$horizontalAlign==egret.HorizontalAlign.CENTER?E=o+.5*T:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(E=o+T);var w=o,V=a,H=0,z=0,U=Math.ceil(p);this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(U=Math.ceil(Math.max(p,x)));var k,F,G=0;for(y=0;m>y;y++){var j=0;if(g=r.getElementAt(y),egret.is(g,e)&&g.$includeInLayout){if(g.getPreferredBounds(I),k=0/0,c?(F=0/0,O>0?F=T*I.width/_:0>O&&I.width>N&&(F=T/A),isNaN(F)||(k=Math.round(F+G),G+=F-k)):k=D[g.$hashCode],d)C=a,g.setLayoutBoundsSize(k,U),g.getLayoutBounds(I);else{var W=0/0,L=g.$UIComponent;if(!isNaN(g.percentHeight)){var X=Math.min(100,L[7]);W=Math.round(p*X*.01)}g.setLayoutBoundsSize(k,W),g.getLayoutBounds(I),j=(p-I.height)*f,j=j>0?j:0,C=a+j}g.setLayoutBoundsPosition(Math.round(E),Math.round(C)),H=Math.ceil(I.width),z=Math.ceil(I.height),w=Math.max(w,E+H),V=Math.max(V,C+z),E+=H+l}}this.maxElementSize=x,r.setContentSize(w+s,V+h)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,s=this.$paddingRight,a=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(u)-l+s,void r.setContentSize(o,r.contentHeight);var p=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,p);var c=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,d=this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;c||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var y,g=egret.$TempRectangle,v=Math.max(0,n-a-h),m=Math.ceil(v),$=this.$typicalHeight,E=this.$typicalWidth,C=this.maxElementSize,_=Math.max($,this.maxElementSize);if(d){for(var b=this.startIndex;p>=b;b++)y=r.getVirtualElementAt(b),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(g),C=Math.max(C,g.height));m=Math.ceil(Math.max(v,C))}for(var S,T=0,x=0,I=0,P=!1,L=this.elementSizeTable,N=this.startIndex;p>=N;N++){var O=0;y=r.getVirtualElementAt(N),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(g),d||(C=Math.max(C,g.height)),c?(x=a,y.setLayoutBoundsSize(0/0,m),y.getLayoutBounds(g)):(y.getLayoutBounds(g),O=(v-g.height)*f,O=O>0?O:0,x=a+O),I=Math.max(I,g.height),P||(S=isNaN(L[N])?E:L[N],S!=g.width&&(P=!0)),L[N]=g.width,T=this.getStartPosition(N),y.setLayoutBoundsPosition(Math.round(T),Math.round(x)))}I+=a+h,o=this.getStartPosition(u)-l+s,this.maxElementSize=C,r.setContentSize(o,I),(P||_<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,r=this.$gap,o=this.elementSizeTable,s=0;t>s;s++){var a=o[s];isNaN(a)&&(a=i),n+=a+r}return n},n.prototype.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalWidth),e}return this.$target?this.$target.getElementAt(t).width:0},n.prototype.getElementTotalSize=function(){for(var t=this.$typicalWidth,e=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var s=r[o];isNaN(s)&&(s=t),i+=s+e}return i-=e},n.prototype.elementAdded=function(t){this.useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalWidth))},n.prototype.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(e[10]<=0||e[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,r=t.scrollH;if(r>n-this.$paddingRight)return this.startIndex=-1,this.endIndex=-1,!1;var o=t.scrollH+e[10];if(o<this.$paddingLeft)return this.startIndex=-1,this.endIndex=-1,!1;var s=this.startIndex,a=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),s!=this.startIndex||a!=this.endIndex},n}(t.LinearLayoutBase);t.HorizontalLayout=i,__reflect(i.prototype,"eui.HorizontalLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.JustifyAlign=e,__reflect(e.prototype,"eui.JustifyAlign")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.TOP="top",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t}();t.RowAlign=e,__reflect(e.prototype,"eui.RowAlign")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){var e=i.call(this)||this;return e.explicitHorizontalGap=0/0,e._horizontalGap=6,e.explicitVerticalGap=0/0,e._verticalGap=6,e._columnCount=-1,e._requestedColumnCount=0,e._rowCount=-1,e._requestedRowCount=0,e.explicitColumnWidth=0/0,e._columnWidth=0/0,e.explicitRowHeight=0/0,e._rowHeight=0/0,e._paddingLeft=0,e._paddingRight=0,e._paddingTop=0,e._paddingBottom=0,e._horizontalAlign=t.JustifyAlign.JUSTIFY,e._verticalAlign=t.JustifyAlign.JUSTIFY,e._columnAlign=t.ColumnAlign.LEFT,e._rowAlign=t.RowAlign.TOP,e._orientation=t.TileOrientation.ROWS,e.maxElementWidth=0,e.maxElementHeight=0,e.startIndex=-1,e.endIndex=-1,e.indexInViewCalculated=!1,e}return __extends(n,i),Object.defineProperty(n.prototype,"horizontalGap",{get:function(){return this._horizontalGap},set:function(t){t=+t,t!==this._horizontalGap&&(this.explicitHorizontalGap=t,this._horizontalGap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalGap",{get:function(){return this._verticalGap},set:function(t){t=+t,t!==this._verticalGap&&(this.explicitVerticalGap=t,this._verticalGap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedColumnCount",{get:function(){return this._requestedColumnCount},set:function(t){t=+t||0,this._requestedColumnCount!==t&&(this._requestedColumnCount=t,this._columnCount=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedRowCount",{get:function(){return this._requestedRowCount},set:function(t){t=+t||0,this._requestedRowCount!=t&&(this._requestedRowCount=t,this._rowCount=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(t){t=+t,t!==this._columnWidth&&(this.explicitColumnWidth=t,this._columnWidth=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t=+t,t!==this._rowHeight&&(this.explicitRowHeight=t,this._rowHeight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){t=+t||0,this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){t=+t||0,this._paddingRight!==t&&(this._paddingRight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){t=+t||0,this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){t=+t||0,this._paddingBottom!==t&&(this._paddingBottom=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAlign",{get:function(){return this._columnAlign},set:function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAlign",{get:function(){return this._rowAlign},set:function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),n.prototype.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},n.prototype.measure=function(){var t=this.$target;if(t){var e=this._columnCount,i=this._rowCount,n=this._columnWidth,r=this._rowHeight,o=0,s=0,a=t.$UIComponent;this.calculateRowAndColumn(a[8],a[9]);var h=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount,l=this._requestedRowCount>0?this._requestedRowCount:this._rowCount,u=isNaN(this._horizontalGap)?0:this._horizontalGap,p=isNaN(this._verticalGap)?0:this._verticalGap;h>0&&(o=h*(this._columnWidth+u)-u),l>0&&(s=l*(this._rowHeight+p)-p);var c=this._paddingLeft+this._paddingRight,d=this._paddingTop+this._paddingBottom;t.setMeasuredSize(o+c,s+d),this._columnCount=e,this._rowCount=i,this._columnWidth=n,this._rowHeight=r}},n.prototype.calculateRowAndColumn=function(i,n){var r=this.$target,o=isNaN(this._horizontalGap)?0:this._horizontalGap,s=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var a=r.numElements,h=a,l=0;h>l;l++){var u=r.getElementAt(l);!u||egret.is(u,e)&&u.$includeInLayout||a--}if(0==a)return void(this._rowCount=this._columnCount=0);(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight;var p=this._columnWidth+o;0>=p&&(p=1);var c=this._rowHeight+s;0>=c&&(c=1);var d=this._orientation==t.TileOrientation.COLUMNS,f=!isNaN(i),y=!isNaN(n),g=this._paddingLeft,v=this._paddingRight,m=this._paddingTop,$=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0)this._requestedRowCount>0&&(this._rowCount=Math.min(this._requestedRowCount,a)),this._requestedColumnCount>0&&(this._columnCount=Math.min(this._requestedColumnCount,a));else if(f||y)if(!f||y&&d){var E=Math.max(0,n-m-$);this._rowCount=Math.floor((E+s)/c),this._rowCount=Math.max(1,Math.min(this._rowCount,a))}else{var C=Math.max(0,i-g-v);this._columnCount=Math.floor((C+o)/p),this._columnCount=Math.max(1,Math.min(this._columnCount,a))}else{var _=Math.sqrt(a*p*c);d?this._rowCount=Math.max(1,Math.round(_/c)):this._columnCount=Math.max(1,Math.round(_/p))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(a/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(a/this._rowCount))),this._requestedColumnCount>0&&this._requestedRowCount>0&&(this._orientation==t.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(a/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(a/this._requestedRowCount)))},n.prototype.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},n.prototype.doUpdateMaxElementSize=function(t,i){var n=this.maxElementWidth,r=this.maxElementHeight,o=egret.$TempRectangle,s=this.$target;if(-1!=t&&-1!=i)for(var a=t;i>=a;a++){var h=s.getVirtualElementAt(a);egret.is(h,e)&&h.$includeInLayout&&(h.getPreferredBounds(o),n=Math.max(n,o.width),r=Math.max(r,o.height))}this.maxElementWidth=n,this.maxElementHeight=r},n.prototype.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},n.prototype.scrollPositionChanged=function(){if(this.$useVirtualLayout){var t=this.getIndexInView();t&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList())}},n.prototype.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var e=this.$target,i=e.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=i-1,!1;var n=e.$UIComponent;if(0==n[10]||0==n[11])return this.startIndex=this.endIndex=-1,!1;var r=this.startIndex,o=this.endIndex,s=this._paddingLeft,a=this._paddingTop,h=isNaN(this._horizontalGap)?0:this._horizontalGap,l=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==t.TileOrientation.COLUMNS){var u=this._columnWidth+h;if(0>=u)return this.startIndex=0,this.endIndex=i-1,!1;var p=e.scrollH,c=p+n[10],d=Math.floor((p-s)/u);0>d&&(d=0);var f=Math.ceil((c-s)/u);0>f&&(f=0),this.startIndex=Math.min(i-1,Math.max(0,d*this._rowCount)),this.endIndex=Math.min(i-1,Math.max(0,f*this._rowCount-1))}else{var y=this._rowHeight+l;if(0>=y)return this.startIndex=0,this.endIndex=i-1,!1;var g=e.scrollV,v=g+n[11],m=Math.floor((g-a)/y);0>m&&(m=0);var $=Math.ceil((v-a)/y);0>$&&($=0),this.startIndex=Math.min(i-1,Math.max(0,m*this._columnCount)),this.endIndex=Math.min(i-1,Math.max(0,$*this._columnCount-1))}return this.startIndex!=r||this.endIndex!=o},n.prototype.updateDisplayList=function(n,r){if(i.prototype.updateDisplayList.call(this,n,r),this.$target){var o=this.$target,s=this._paddingLeft,a=this._paddingRight,h=this._paddingTop,l=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(n,r),0==this._rowCount||0==this._columnCount)return void o.setContentSize(s+a,h+l);this.adjustForJustify(n,r),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(n,r),this.adjustForJustify(n,r)),-1==this.startIndex||-1==this.endIndex)return void o.setContentSize(0,0);var u=this.endIndex;o.setVirtualElementIndicesInView(this.startIndex,u);for(var p,c,d,f,y,g=this._orientation==t.TileOrientation.COLUMNS,v=this.startIndex,m=isNaN(this._horizontalGap)?0:this._horizontalGap,$=isNaN(this._verticalGap)?0:this._verticalGap,E=this._rowCount,C=this._columnCount,_=this._columnWidth,b=this._rowHeight,S=this.startIndex;u>=S;S++)if(p=this.$useVirtualLayout?this.target.getVirtualElementAt(S):this.target.getElementAt(S),egret.is(p,e)&&p.$includeInLayout){switch(g?(f=Math.ceil((v+1)/E)-1,y=Math.ceil((v+1)%E)-1,-1==y&&(y=E-1)):(f=Math.ceil((v+1)%C)-1,-1==f&&(f=C-1),y=Math.ceil((v+1)/C)-1),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:c=n-(f+1)*(_+m)+m-a;
break;case egret.HorizontalAlign.LEFT:c=f*(_+m)+s;break;default:c=f*(_+m)+s}switch(this._verticalAlign){case egret.VerticalAlign.TOP:d=y*(b+$)+h;break;case egret.VerticalAlign.BOTTOM:d=r-(y+1)*(b+$)+$-l;break;default:d=y*(b+$)+h}this.sizeAndPositionElement(p,c,d,_,b),v++}var T=s+a,x=h+l,I=(_+m)*C-m,P=(b+$)*E-$;o.setContentSize(I+T,P+x)}},n.prototype.sizeAndPositionElement=function(e,i,n,r,o){var s=0/0,a=0/0,h=e.$UIComponent;this._horizontalAlign==t.JustifyAlign.JUSTIFY?s=r:isNaN(h[6])||(s=r*h[6]*.01),this._verticalAlign==t.JustifyAlign.JUSTIFY?a=o:isNaN(h[7])||(a=o*h[7]*.01),e.setLayoutBoundsSize(Math.round(s),Math.round(a));var l=i,u=egret.$TempRectangle;switch(e.getLayoutBounds(u),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:l+=r-u.width;break;case egret.HorizontalAlign.CENTER:l=i+(r-u.width)/2}var p=n;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:p+=o-u.height;break;case egret.VerticalAlign.MIDDLE:p+=(o-u.height)/2}e.setLayoutBoundsPosition(Math.round(l),Math.round(p))},n.prototype.adjustForJustify=function(e,i){var n=this._paddingLeft,r=this._paddingRight,o=this._paddingTop,s=this._paddingBottom,a=Math.max(0,e-n-r),h=Math.max(0,i-o-s);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var l,u=h-this._rowHeight*this._rowCount,p=a-this._columnWidth*this._columnCount;u>0&&(this._rowAlign==t.RowAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._rowCount-1),this._verticalGap=u/l):this._rowAlign==t.RowAlign.JUSTIFY_USING_HEIGHT&&this._rowCount>0&&(this._rowHeight+=(u-(this._rowCount-1)*this._verticalGap)/this._rowCount)),p>0&&(this._columnAlign==t.ColumnAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._columnCount-1),this._horizontalGap=p/l):this._columnAlign==t.ColumnAlign.JUSTIFY_USING_WIDTH&&this._columnCount>0&&(this._columnWidth+=(p-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(t.LayoutBase);t.TileLayout=i,__reflect(i.prototype,"eui.TileLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.ROWS="rows",t.COLUMNS="columns",t}();t.TileOrientation=e,__reflect(e.prototype,"eui.TileOrientation")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,r=0,o=0,s=egret.$TempRectangle,a=0;i>a;a++){var h=t.getElementAt(a);egret.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(s),o+=s.height,r=Math.max(r,s.width)):n--}o+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+l,o+u)},n.prototype.measureVirtual=function(){for(var t=this.$target,i=this.$typicalHeight,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalWidth),o=egret.$TempRectangle,s=this.endIndex,a=this.elementSizeTable,h=this.startIndex;s>h;h++){var l=t.getElementAt(h);egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(o),n+=o.height,n-=isNaN(a[h])?i:a[h],r=Math.max(r,o.width))}var u=this.$paddingLeft+this.$paddingRight,p=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+u,n+p)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,s=this.$paddingRight,a=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-o-s),p=Math.max(0,n-a-h),c=this.$verticalAlign==t.JustifyAlign.JUSTIFY,d=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var y,g,v,m=r.numElements,$=m,E=o,C=a,_=0,b=0,S=[],T=p,x=this.maxElementSize,I=egret.$TempRectangle;for(y=0;m>y;y++){var P=r.getElementAt(y);if(egret.is(P,e)&&P.$includeInLayout)if(P.getPreferredBounds(I),x=Math.max(x,I.width),c)_+=I.height;else{var L=P.$UIComponent;isNaN(L[7])?T-=I.height:(b+=L[7],v=new t.sys.ChildInfo,v.layoutElement=P,v.percent=L[7],v.min=L[14],v.max=L[15],S.push(v))}else $--}T-=l*($-1),T=T>0?T:0;var N,O=p-_-l*($-1),A=$,D={};if(c){if(0>O){for(N=T/$,y=0;m>y;y++)g=r.getElementAt(y),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(I),I.height<=N&&(T-=I.height,A--));T=T>0?T:0}}else if(b>0){this.flexChildrenProportionally(p,T,b,S);var B=0,R=S.length;for(y=0;R>y;y++){v=S[y];var M=Math.round(v.size+B);B+=v.size-M,D[v.layoutElement.$hashCode]=M,T-=M}T=T>0?T:0}this.$verticalAlign==egret.VerticalAlign.MIDDLE?C=a+.5*T:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(C=a+T);var w=o,V=a,H=0,z=0,U=Math.ceil(u);this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(U=Math.ceil(Math.max(u,x)));var k,F,G=0;for(y=0;m>y;y++){var j=0;if(g=r.getElementAt(y),egret.is(g,e)&&g.$includeInLayout){if(g.getPreferredBounds(I),k=0/0,c?(F=0/0,O>0?F=T*I.height/_:0>O&&I.height>N&&(F=T/A),isNaN(F)||(k=Math.round(F+G),G+=F-k)):k=D[g.$hashCode],d)E=o,g.setLayoutBoundsSize(U,k),g.getLayoutBounds(I);else{var W=0/0,L=g.$UIComponent;if(!isNaN(L[6])){var X=Math.min(100,L[6]);W=Math.round(u*X*.01)}g.setLayoutBoundsSize(W,k),g.getLayoutBounds(I),j=(u-I.width)*f,j=j>0?j:0,E=o+j}g.setLayoutBoundsPosition(Math.round(E),Math.round(C)),H=Math.ceil(I.width),z=Math.ceil(I.height),w=Math.max(w,E+H),V=Math.max(V,C+z),C+=z+l}}this.maxElementSize=x,r.setContentSize(w+s,V+h)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,s=this.$paddingBottom,a=this.$paddingLeft,h=this.$paddingRight,l=this.$gap,u=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(u)-l+s,void r.setContentSize(r.contentWidth,o);var p=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,p);var c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,d=this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;c||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var y,g=egret.$TempRectangle,v=Math.max(0,i-a-h),m=Math.ceil(v),$=this.$typicalHeight,E=this.$typicalWidth,C=this.maxElementSize,_=Math.max(E,this.maxElementSize);if(d){for(var b=this.startIndex;p>=b;b++)y=r.getVirtualElementAt(b),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(g),C=Math.max(C,g.width));m=Math.ceil(Math.max(v,C))}for(var S,T=0,x=0,I=0,P=!1,L=this.elementSizeTable,N=this.startIndex;p>=N;N++){var O=0;y=r.getVirtualElementAt(N),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(g),d||(C=Math.max(C,g.width)),c?(T=a,y.setLayoutBoundsSize(m,0/0),y.getLayoutBounds(g)):(y.getLayoutBounds(g),O=(v-g.width)*f,O=O>0?O:0,T=a+O),I=Math.max(I,g.width),P||(S=isNaN(L[N])?$:L[N],S!=g.height&&(P=!0)),L[N]=g.height,x=this.getStartPosition(N),y.setLayoutBoundsPosition(Math.round(T),Math.round(x)))}I+=a+h,o=this.getStartPosition(u)-l+s,this.maxElementSize=C,r.setContentSize(I,o),(P||_<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.y}for(var i=this.$typicalHeight,n=this.$paddingTop,r=this.$gap,o=this.elementSizeTable,s=0;t>s;s++){var a=o[s];isNaN(a)&&(a=i),n+=a+r}return n},n.prototype.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalHeight),e}return this.$target?this.$target.getElementAt(t).height:0},n.prototype.getElementTotalSize=function(){for(var t=this.$typicalHeight,e=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var s=r[o];isNaN(s)&&(s=t),i+=s+e}return i-=e},n.prototype.elementAdded=function(t){this.$useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight))},n.prototype.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(0==e[10]||0==e[11])return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,r=t.scrollV;if(r>n-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var o=t.scrollV+e[11];if(o<this.$paddingTop)return this.startIndex=-1,this.endIndex=-1,!1;var s=this.startIndex,a=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),s!=this.startIndex||a!=this.endIndex},n}(t.LinearLayoutBase);t.VerticalLayout=i,__reflect(i.prototype,"eui.VerticalLayout")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var s=o.width,a=o.y,h=r.scrollH,l=r.contentWidth,u=r.width;if(0>=h){var p=s*(1- -h/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(p,0/0),n.setLayoutBoundsPosition(0,a)}else if(h>=l-u){var p=s*(1-(h-l+u)/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(p,0/0),n.setLayoutBoundsPosition(e-p,a)}else{var c=(e-s)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(c,a)}}},e.prototype.onPropertyChanged=function(t){switch(t.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.HScrollBar=e,__reflect(e.prototype,"eui.HScrollBar")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(t,e,i,n){this.target=t,this.propertyName=e,this.position=i,this.relativeTo=n}return t.prototype.apply=function(t,e){var i,n=t[this.relativeTo],r=t[this.target],o=this.propertyName?t[this.propertyName]:e;if(r&&o){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=o.getChildIndex(n);break;case 3:i=o.getChildIndex(n)+1}-1==i&&(i=o.numChildren),egret.is(o,"eui.Component")&&o.$Component[8].$elementsContent.push(r),o.addChildAt(r,i)}},t.prototype.remove=function(t,e){var i=this.propertyName?t[this.propertyName]:e,n=t[this.target];if(n&&i&&(n.$parent===i&&i.removeChild(n),egret.is(i,"eui.Component"))){var r=i.$Component[8].$elementsContent,o=r.indexOf(n);o>-1&&r.splice(o,1)}},t}();t.AddItems=e,__reflect(e.prototype,"eui.AddItems",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e=function(){function t(t,e,i){this.target=t,this.name=e,this.value=i}return t.prototype.apply=function(t,e){var i=this.target?t[this.target]:t;i&&(this.oldValue=i[this.name],this.setPropertyValue(i,this.name,this.value,this.oldValue))},t.prototype.remove=function(t,e){var i=this.target?t[this.target]:t;i&&(this.setPropertyValue(i,this.name,this.oldValue,this.oldValue),this.oldValue=null)},t.prototype.setPropertyValue=function(t,e,i,n){void 0===i||null===i?t[e]=i:"number"==typeof n?t[e]=+i:"boolean"==typeof n?t[e]=this.toBoolean(i):t[e]=i},t.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();t.SetProperty=e,__reflect(e.prototype,"eui.SetProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e=function(){function e(t,e,i,n,r){this.host=t,this.templates=e,this.chainIndex=i,this.target=n,this.prop=r}return e.prototype.apply=function(e,i){if(this.target){var n=this.target[this.prop];this.oldValue&&this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue),n&&(this.oldValue=n),t.Binding.$bindProperties(this.host,this.templates.concat(),this.chainIndex.concat(),this.target,this.prop)}},e.prototype.remove=function(t,e){if(this.target){var i=this.oldValue;this.target[this.prop]&&(this.oldValue=this.target[this.prop]),i&&this.setPropertyValue(this.target,this.prop,i,i)}},e.prototype.setPropertyValue=function(t,e,i,n){void 0===i||null===i?t[e]=i:"number"==typeof n?t[e]=+i:"boolean"==typeof n?t[e]=this.toBoolean(i):t[e]=i},e.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},e}();t.SetStateProperty=e,__reflect(e.prototype,"eui.SetStateProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t,e,i,n,o,s,a,h,l,u){var p;if(!isNaN(i)&&isNaN(n)){if(p=r(t,e,i,s,i,h,i,u))return p}else if(isNaN(i)&&!isNaN(n)&&(p=r(t,e,o,n,a,n,l,n)))return p;return p=r(t,e,o,s,a,h,l,u)}function i(t,e,i,r,o,s,a,h,l,u){var p;if(!isNaN(i)&&isNaN(r)){if(p=n(t,e,i,s,i,h,i,u))return p}else if(isNaN(i)&&!isNaN(r)&&(p=n(t,e,o,r,a,r,l,r)))return p;return p=n(t,e,o,s,a,h,l,u)}function n(t,e,i,n,r,s,h,l){var u=e.b,p=e.d;if(u>-1e-9&&1e-9>u&&(u=0),p>-1e-9&&1e-9>p&&(p=0),0==u&&0==p)return null;if(0==u&&0==p)return null;if(0==u)return egret.Point.create(i,t/Math.abs(p));if(0==p)return egret.Point.create(t/Math.abs(u),n);var c,d,f,y=u*p>=0?p:-p;if(0!=y&&i>0){var g=1/y;i=Math.max(r,Math.min(h,i)),d=i,f=(t-u*d)*g,f>=s&&l>=f&&u*d+y*f>=0&&(c=egret.Point.create(d,f)),f=(-t-u*d)*g,f>=s&&l>=f&&0>u*d+y*f&&(!c||a(c.x,c.y,e).width>a(d,f,e).width)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(0!=u&&n>0){var v=1/u;n=Math.max(s,Math.min(l,n)),f=n,d=(t-y*f)*v,d>=r&&h>=d&&u*d+y*f>=0&&(!c||a(c.x,c.y,e).width>a(d,f,e).width)&&(c=egret.Point.create(d,f)),d=(-t-y*f)*v,d>=r&&h>=d&&0>u*d+y*f&&(!c||a(c.x,c.y,e).width>a(d,f,e).width)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(c)return c;var m=e.a,$=e.c,E=m*$>=0?$:-$;return o(u,y,t,r,s,h,l,m,E)}function r(t,e,i,n,r,s,h,l){var u=e.a,p=e.c;if(u>-1e-9&&1e-9>u&&(u=0),p>-1e-9&&1e-9>p&&(p=0),0==u&&0==p)return null;if(0==u)return egret.Point.create(i,t/Math.abs(p));if(0==p)return egret.Point.create(t/Math.abs(u),n);var c,d,f,y=u*p>=0?p:-p;if(0!=y&&i>0){var g=1/y;i=Math.max(r,Math.min(h,i)),d=i,f=(t-u*d)*g,f>=s&&l>=f&&u*d+y*f>=0&&(c=egret.Point.create(d,f)),f=(-t-u*d)*g,f>=s&&l>=f&&0>u*d+y*f&&(!c||a(c.x,c.y,e).height>a(d,f,e).height)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(0!=u&&n>0){var v=1/u;n=Math.max(s,Math.min(l,n)),f=n,d=(t-y*f)*v,d>=r&&h>=d&&u*d+y*f>=0&&(!c||a(c.x,c.y,e).height>a(d,f,e).height)&&(egret.Point.release(c),c=egret.Point.create(d,f)),d=(-t-y*f)*v,d>=r&&h>=d&&0>u*d+y*f&&(!c||a(c.x,c.y,e).height>a(d,f,e).height)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(c)return c;var m=e.b,$=e.d,E=m*$>=0?$:-$;return o(u,y,t,r,s,h,l,m,E)}function o(t,e,i,n,r,o,s,a,h){if(0==t||0==e)return null;var l,u,p=(i-n*t)/e,c=(i-o*t)/e,d=Math.max(r,Math.min(p,c)),f=Math.min(s,Math.max(p,c)),y=a*e-t*h;return f>=d?(u=Math.abs(y)<1e-9?i/(t+e):a*i/y,u=Math.max(d,Math.min(u,f)),l=(i-e*u)/t,egret.Point.create(l,u)):(p=-(n*t+i)/e,c=-(o*t+i)/e,d=Math.max(r,Math.min(p,c)),f=Math.min(s,Math.max(p,c)),f>=d?(u=Math.abs(y)<1e-9?-i/(t+e):-a*i/y,u=Math.max(d,Math.min(u,f)),l=(-i-e*u)/t,egret.Point.create(l,u)):null)}function s(t,e,i,n,r,s,a){var l=i.a,u=i.b,p=i.c,c=i.d;if(l>-1e-9&&1e-9>l&&(l=0),u>-1e-9&&1e-9>u&&(u=0),p>-1e-9&&1e-9>p&&(p=0),c>-1e-9&&1e-9>c&&(c=0),0==u&&0==p)return 0==l||0==c?null:egret.Point.create(t/Math.abs(l),e/Math.abs(c));if(0==l&&0==c)return 0==u||0==p?null:egret.Point.create(e/Math.abs(u),t/Math.abs(p));var d=l*p>=0?p:-p,f=u*c>=0?c:-c,y=l*f-u*d;if(Math.abs(y)<1e-9)return 0==d||0==l||l==-d?null:Math.abs(l*e-u*t)>1e-9?null:o(l,d,t,n,n,s,a,u,f);var g=1/y;t*=g,e*=g;var v;return v=h(l,d,u,f,t,e),v&&n<=v.x&&v.x<=s&&r<=v.y&&v.y<=a&&l*v.x+d*v.x>=0&&u*v.x+f*v.y>=0?v:(v=h(l,d,u,f,t,-e),v&&n<=v.x&&v.x<=s&&r<=v.y&&v.y<=a&&l*v.x+d*v.x>=0&&u*v.x+f*v.y<0?v:(v=h(l,d,u,f,-t,e),v&&n<=v.x&&v.x<=s&&r<=v.y&&v.y<=a&&l*v.x+d*v.x<0&&u*v.x+f*v.y>=0?v:(v=h(l,d,u,f,-t,-e),v&&n<=v.x&&v.x<=s&&r<=v.y&&v.y<=a&&l*v.x+d*v.x<0&&u*v.x+f*v.y<0?v:(egret.Point.release(v),null))))}function a(t,e,i){var n=egret.$TempRectangle.setTo(0,0,t,e);return i.$transformBounds(n),n}function h(t,e,i,n,r,o){return egret.Point.create(n*r-e*o,t*o-i*r)}var l=.1,u=.1,p=function(){function t(){}return t.fitBounds=function(t,n,r,o,h,p,c,d,f,y,g){if(isNaN(t)&&isNaN(n))return egret.Point.create(p,c);var v,m=u>d?0:d-u,$=u>f?0:f-u,E=y+u,C=g+u;if(isNaN(t)||isNaN(n))return isNaN(t)?i(n,r,o,h,p,c,m,$,E,C):e(t,r,o,h,p,c,m,$,E,C);if(v=s(t,n,r,m,$,E,C),!v){var _=void 0;if(_=e(t,r,o,h,p,c,m,$,E,C)){var b=a(_.x,_.y,r).height;b-l>n&&(egret.Point.release(_),_=null)}var S=void 0;if(S=i(n,r,o,h,p,c,m,$,E,C)){var T=a(S.x,S.y,r).width;T-l>t&&(egret.Point.release(S),S=null)}v=_&&S?_.x*_.y>S.x*S.y?_:S:_?_:S,egret.Point.release(_),egret.Point.release(S)}return v},t}();t.MatrixUtil=p,__reflect(p.prototype,"eui.sys.MatrixUtil")}(e=t.sys||(t.sys={}))}(eui||(eui={}));

//js/dragonBones.min_6252b9c4.js
"use strict";var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)if(e.hasOwnProperty(a))t[a]=e[a]};return function(e,a){t(e,a);function r(){this.constructor=e}e.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();var dragonBones;(function(t){})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function e(a){this._clock=new t.WorldClock;this._events=[];this._objects=[];this._eventManager=null;this._eventManager=a;console.info("DragonBones: "+e.VERSION+"\nWebsite: http://dragonbones.com/\nSource and Demo: https://github.com/DragonBones/")}e.prototype.advanceTime=function(e){if(this._objects.length>0){for(var a=0,r=this._objects;a<r.length;a++){var i=r[a];i.returnToPool()}this._objects.length=0}this._clock.advanceTime(e);if(this._events.length>0){for(var n=0;n<this._events.length;++n){var s=this._events[n];var o=s.armature;if(o._armatureData!==null){o.eventDispatcher.dispatchDBEvent(s.type,s);if(s.type===t.EventObject.SOUND_EVENT){this._eventManager.dispatchDBEvent(s.type,s)}}this.bufferObject(s)}this._events.length=0}};e.prototype.bufferEvent=function(t){if(this._events.indexOf(t)<0){this._events.push(t)}};e.prototype.bufferObject=function(t){if(this._objects.indexOf(t)<0){this._objects.push(t)}};Object.defineProperty(e.prototype,"clock",{get:function(){return this._clock},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:true,configurable:true});e.VERSION="5.6.300";e.yDown=true;e.debug=false;e.debugDraw=false;e.webAssembly=false;return e}();t.DragonBones=e})(dragonBones||(dragonBones={}));if(typeof global==="undefined"){var global=window}if(!console.warn){console.warn=function(){}}if(!console.assert){console.assert=function(){}}if(!Date.now){Date.now=function t(){return(new Date).getTime()}}var __extends=function(t,e){function a(){this.constructor=t}for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}a.prototype=e.prototype,t.prototype=new a};var dragonBones;(function(t){var e=function(){function t(){this.hashCode=t._hashCode++;this._isInPool=false}t._returnObject=function(e){var a=String(e.constructor);var r=a in t._maxCountMap?t._maxCountMap[a]:t._defaultMaxCount;var i=t._poolsMap[a]=t._poolsMap[a]||[];if(i.length<r){if(!e._isInPool){e._isInPool=true;i.push(e)}else{console.warn("The object is already in the pool.")}}else{}};t.toString=function(){throw new Error};t.setMaxCount=function(e,a){if(a<0||a!==a){a=0}if(e!==null){var r=String(e);var i=r in t._poolsMap?t._poolsMap[r]:null;if(i!==null&&i.length>a){i.length=a}t._maxCountMap[r]=a}else{t._defaultMaxCount=a;for(var r in t._poolsMap){var i=t._poolsMap[r];if(i.length>a){i.length=a}if(r in t._maxCountMap){t._maxCountMap[r]=a}}}};t.clearPool=function(e){if(e===void 0){e=null}if(e!==null){var a=String(e);var r=a in t._poolsMap?t._poolsMap[a]:null;if(r!==null&&r.length>0){r.length=0}}else{for(var i in t._poolsMap){var r=t._poolsMap[i];r.length=0}}};t.borrowObject=function(e){var a=String(e);var r=a in t._poolsMap?t._poolsMap[a]:null;if(r!==null&&r.length>0){var i=r.pop();i._isInPool=false;return i}var n=new e;n._onClear();return n};t.prototype.returnToPool=function(){this._onClear();t._returnObject(this)};t._hashCode=0;t._defaultMaxCount=3e3;t._maxCountMap={};t._poolsMap={};return t}();t.BaseObject=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(t,e,a,r,i,n){if(t===void 0){t=1}if(e===void 0){e=0}if(a===void 0){a=0}if(r===void 0){r=1}if(i===void 0){i=0}if(n===void 0){n=0}this.a=t;this.b=e;this.c=a;this.d=r;this.tx=i;this.ty=n}t.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty};t.prototype.copyFrom=function(t){this.a=t.a;this.b=t.b;this.c=t.c;this.d=t.d;this.tx=t.tx;this.ty=t.ty;return this};t.prototype.copyFromArray=function(t,e){if(e===void 0){e=0}this.a=t[e];this.b=t[e+1];this.c=t[e+2];this.d=t[e+3];this.tx=t[e+4];this.ty=t[e+5];return this};t.prototype.identity=function(){this.a=this.d=1;this.b=this.c=0;this.tx=this.ty=0;return this};t.prototype.concat=function(t){var e=this.a*t.a;var a=0;var r=0;var i=this.d*t.d;var n=this.tx*t.a+t.tx;var s=this.ty*t.d+t.ty;if(this.b!==0||this.c!==0){e+=this.b*t.c;a+=this.b*t.d;r+=this.c*t.a;i+=this.c*t.b}if(t.b!==0||t.c!==0){a+=this.a*t.b;r+=this.d*t.c;n+=this.ty*t.c;s+=this.tx*t.b}this.a=e;this.b=a;this.c=r;this.d=i;this.tx=n;this.ty=s;return this};t.prototype.invert=function(){var t=this.a;var e=this.b;var a=this.c;var r=this.d;var i=this.tx;var n=this.ty;if(e===0&&a===0){this.b=this.c=0;if(t===0||r===0){this.a=this.b=this.tx=this.ty=0}else{t=this.a=1/t;r=this.d=1/r;this.tx=-t*i;this.ty=-r*n}return this}var s=t*r-e*a;if(s===0){this.a=this.d=1;this.b=this.c=0;this.tx=this.ty=0;return this}s=1/s;var o=this.a=r*s;e=this.b=-e*s;a=this.c=-a*s;r=this.d=t*s;this.tx=-(o*i+a*n);this.ty=-(e*i+r*n);return this};t.prototype.transformPoint=function(t,e,a,r){if(r===void 0){r=false}a.x=this.a*t+this.c*e;a.y=this.b*t+this.d*e;if(!r){a.x+=this.tx;a.y+=this.ty}};t.prototype.transformRectangle=function(t,e){if(e===void 0){e=false}var a=this.a;var r=this.b;var i=this.c;var n=this.d;var s=e?0:this.tx;var o=e?0:this.ty;var l=t.x;var h=t.y;var f=l+t.width;var u=h+t.height;var _=a*l+i*h+s;var c=r*l+n*h+o;var p=a*f+i*h+s;var m=r*f+n*h+o;var d=a*f+i*u+s;var v=r*f+n*u+o;var y=a*l+i*u+s;var g=r*l+n*u+o;var b=0;if(_>p){b=_;_=p;p=b}if(d>y){b=d;d=y;y=b}t.x=Math.floor(_<d?_:d);t.width=Math.ceil((p>y?p:y)-t.x);if(c>m){b=c;c=m;m=b}if(v>g){b=v;v=g;g=b}t.y=Math.floor(c<v?c:v);t.height=Math.ceil((m>g?m:g)-t.y)};return t}();t.Matrix=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(t,e,a,r,i,n){if(t===void 0){t=0}if(e===void 0){e=0}if(a===void 0){a=0}if(r===void 0){r=0}if(i===void 0){i=1}if(n===void 0){n=1}this.x=t;this.y=e;this.skew=a;this.rotation=r;this.scaleX=i;this.scaleY=n}t.normalizeRadian=function(t){t=(t+Math.PI)%(Math.PI*2);t+=t>0?-Math.PI:Math.PI;return t};t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+this.skew*180/Math.PI+" skewY:"+this.rotation*180/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY};t.prototype.copyFrom=function(t){this.x=t.x;this.y=t.y;this.skew=t.skew;this.rotation=t.rotation;this.scaleX=t.scaleX;this.scaleY=t.scaleY;return this};t.prototype.identity=function(){this.x=this.y=0;this.skew=this.rotation=0;this.scaleX=this.scaleY=1;return this};t.prototype.add=function(t){this.x+=t.x;this.y+=t.y;this.skew+=t.skew;this.rotation+=t.rotation;this.scaleX*=t.scaleX;this.scaleY*=t.scaleY;return this};t.prototype.minus=function(t){this.x-=t.x;this.y-=t.y;this.skew-=t.skew;this.rotation-=t.rotation;this.scaleX/=t.scaleX;this.scaleY/=t.scaleY;return this};t.prototype.fromMatrix=function(e){var a=this.scaleX,r=this.scaleY;var i=t.PI_Q;this.x=e.tx;this.y=e.ty;this.rotation=Math.atan(e.b/e.a);var n=Math.atan(-e.c/e.d);this.scaleX=this.rotation>-i&&this.rotation<i?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation);this.scaleY=n>-i&&n<i?e.d/Math.cos(n):-e.c/Math.sin(n);if(a>=0&&this.scaleX<0){this.scaleX=-this.scaleX;this.rotation=this.rotation-Math.PI}if(r>=0&&this.scaleY<0){this.scaleY=-this.scaleY;n=n-Math.PI}this.skew=n-this.rotation;return this};t.prototype.toMatrix=function(t){if(this.rotation===0){t.a=1;t.b=0}else{t.a=Math.cos(this.rotation);t.b=Math.sin(this.rotation)}if(this.skew===0){t.c=-t.b;t.d=t.a}else{t.c=-Math.sin(this.skew+this.rotation);t.d=Math.cos(this.skew+this.rotation)}if(this.scaleX!==1){t.a*=this.scaleX;t.b*=this.scaleX}if(this.scaleY!==1){t.c*=this.scaleY;t.d*=this.scaleY}t.tx=this.x;t.ty=this.y;return this};t.PI=Math.PI;t.PI_D=Math.PI*2;t.PI_H=Math.PI/2;t.PI_Q=Math.PI/4;t.RAD_DEG=180/Math.PI;t.DEG_RAD=Math.PI/180;return t}();t.Transform=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(t,e,a,r,i,n,s,o){if(t===void 0){t=1}if(e===void 0){e=1}if(a===void 0){a=1}if(r===void 0){r=1}if(i===void 0){i=0}if(n===void 0){n=0}if(s===void 0){s=0}if(o===void 0){o=0}this.alphaMultiplier=t;this.redMultiplier=e;this.greenMultiplier=a;this.blueMultiplier=r;this.alphaOffset=i;this.redOffset=n;this.greenOffset=s;this.blueOffset=o}t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier;this.redMultiplier=t.redMultiplier;this.greenMultiplier=t.greenMultiplier;this.blueMultiplier=t.blueMultiplier;this.alphaOffset=t.alphaOffset;this.redOffset=t.redOffset;this.greenOffset=t.greenOffset;this.blueOffset=t.blueOffset};t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1;this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0};return t}();t.ColorTransform=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(t,e){if(t===void 0){t=0}if(e===void 0){e=0}this.x=t;this.y=e}t.prototype.copyFrom=function(t){this.x=t.x;this.y=t.y};t.prototype.clear=function(){this.x=this.y=0};return t}();t.Point=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(t,e,a,r){if(t===void 0){t=0}if(e===void 0){e=0}if(a===void 0){a=0}if(r===void 0){r=0}this.x=t;this.y=e;this.width=a;this.height=r}t.prototype.copyFrom=function(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height};t.prototype.clear=function(){this.x=this.y=0;this.width=this.height=0};return t}();t.Rectangle=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.ints=[];e.floats=[];e.strings=[];return e}e.toString=function(){return"[class dragonBones.UserData]"};e.prototype._onClear=function(){this.ints.length=0;this.floats.length=0;this.strings.length=0};e.prototype.addInt=function(t){this.ints.push(t)};e.prototype.addFloat=function(t){this.floats.push(t)};e.prototype.addString=function(t){this.strings.push(t)};e.prototype.getInt=function(t){if(t===void 0){t=0}return t>=0&&t<this.ints.length?this.ints[t]:0};e.prototype.getFloat=function(t){if(t===void 0){t=0}return t>=0&&t<this.floats.length?this.floats[t]:0};e.prototype.getString=function(t){if(t===void 0){t=0}return t>=0&&t<this.strings.length?this.strings[t]:""};return e}(t.BaseObject);t.UserData=e;var a=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.data=null;return e}e.toString=function(){return"[class dragonBones.ActionData]"};e.prototype._onClear=function(){if(this.data!==null){this.data.returnToPool()}this.type=0;this.name="";this.bone=null;this.slot=null;this.data=null};return e}(t.BaseObject);t.ActionData=a})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.frameIndices=[];e.cachedFrames=[];e.armatureNames=[];e.armatures={};e.userData=null;return e}e.toString=function(){return"[class dragonBones.DragonBonesData]"};e.prototype._onClear=function(){for(var t in this.armatures){this.armatures[t].returnToPool();delete this.armatures[t]}if(this.userData!==null){this.userData.returnToPool()}this.autoSearch=false;this.frameRate=0;this.version="";this.name="";this.stage=null;this.frameIndices.length=0;this.cachedFrames.length=0;this.armatureNames.length=0;this.binary=null;this.intArray=null;this.floatArray=null;this.frameIntArray=null;this.frameFloatArray=null;this.frameArray=null;this.timelineArray=null;this.userData=null};e.prototype.addArmature=function(t){if(t.name in this.armatures){console.warn("Same armature: "+t.name);return}t.parent=this;this.armatures[t.name]=t;this.armatureNames.push(t.name)};e.prototype.getArmature=function(t){return t in this.armatures?this.armatures[t]:null};e.prototype.dispose=function(){console.warn("");this.returnToPool()};return e}(t.BaseObject);t.DragonBonesData=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.aabb=new t.Rectangle;a.animationNames=[];a.sortedBones=[];a.sortedSlots=[];a.defaultActions=[];a.actions=[];a.bones={};a.slots={};a.constraints={};a.skins={};a.animations={};a.canvas=null;a.userData=null;return a}a.toString=function(){return"[class dragonBones.ArmatureData]"};a.prototype._onClear=function(){for(var t=0,e=this.defaultActions;t<e.length;t++){var a=e[t];a.returnToPool()}for(var r=0,i=this.actions;r<i.length;r++){var a=i[r];a.returnToPool()}for(var n in this.bones){this.bones[n].returnToPool();delete this.bones[n]}for(var n in this.slots){this.slots[n].returnToPool();delete this.slots[n]}for(var n in this.constraints){this.constraints[n].returnToPool();delete this.constraints[n]}for(var n in this.skins){this.skins[n].returnToPool();delete this.skins[n]}for(var n in this.animations){this.animations[n].returnToPool();delete this.animations[n]}if(this.canvas!==null){this.canvas.returnToPool()}if(this.userData!==null){this.userData.returnToPool()}this.type=0;this.frameRate=0;this.cacheFrameRate=0;this.scale=1;this.name="";this.aabb.clear();this.animationNames.length=0;this.sortedBones.length=0;this.sortedSlots.length=0;this.defaultActions.length=0;this.actions.length=0;this.defaultSkin=null;this.defaultAnimation=null;this.canvas=null;this.userData=null;this.parent=null};a.prototype.sortBones=function(){var t=this.sortedBones.length;if(t<=0){return}var e=this.sortedBones.concat();var a=0;var r=0;this.sortedBones.length=0;while(r<t){var i=e[a++];if(a>=t){a=0}if(this.sortedBones.indexOf(i)>=0){continue}var n=false;for(var s in this.constraints){var o=this.constraints[s];if(o.root===i&&this.sortedBones.indexOf(o.target)<0){n=true;break}}if(n){continue}if(i.parent!==null&&this.sortedBones.indexOf(i.parent)<0){continue}this.sortedBones.push(i);r++}};a.prototype.cacheFrames=function(t){if(this.cacheFrameRate>0){return}this.cacheFrameRate=t;for(var e in this.animations){this.animations[e].cacheFrames(this.cacheFrameRate)}};a.prototype.setCacheFrame=function(t,e){var a=this.parent.cachedFrames;var r=a.length;a.length+=10;a[r]=t.a;a[r+1]=t.b;a[r+2]=t.c;a[r+3]=t.d;a[r+4]=t.tx;a[r+5]=t.ty;a[r+6]=e.rotation;a[r+7]=e.skew;a[r+8]=e.scaleX;a[r+9]=e.scaleY;return r};a.prototype.getCacheFrame=function(t,e,a){var r=this.parent.cachedFrames;t.a=r[a];t.b=r[a+1];t.c=r[a+2];t.d=r[a+3];t.tx=r[a+4];t.ty=r[a+5];e.rotation=r[a+6];e.skew=r[a+7];e.scaleX=r[a+8];e.scaleY=r[a+9];e.x=t.tx;e.y=t.ty};a.prototype.addBone=function(t){if(t.name in this.bones){console.warn("Same bone: "+t.name);return}this.bones[t.name]=t;this.sortedBones.push(t)};a.prototype.addSlot=function(t){if(t.name in this.slots){console.warn("Same slot: "+t.name);return}this.slots[t.name]=t;this.sortedSlots.push(t)};a.prototype.addConstraint=function(t){if(t.name in this.constraints){console.warn("Same constraint: "+t.name);return}this.constraints[t.name]=t};a.prototype.addSkin=function(t){if(t.name in this.skins){console.warn("Same skin: "+t.name);return}t.parent=this;this.skins[t.name]=t;if(this.defaultSkin===null){this.defaultSkin=t}if(t.name==="default"){this.defaultSkin=t}};a.prototype.addAnimation=function(t){if(t.name in this.animations){console.warn("Same animation: "+t.name);return}t.parent=this;this.animations[t.name]=t;this.animationNames.push(t.name);if(this.defaultAnimation===null){this.defaultAnimation=t}};a.prototype.addAction=function(t,e){if(e){this.defaultActions.push(t)}else{this.actions.push(t)}};a.prototype.getBone=function(t){return t in this.bones?this.bones[t]:null};a.prototype.getSlot=function(t){return t in this.slots?this.slots[t]:null};a.prototype.getConstraint=function(t){return t in this.constraints?this.constraints[t]:null};a.prototype.getSkin=function(t){return t in this.skins?this.skins[t]:null};a.prototype.getMesh=function(t,e,a){var r=this.getSkin(t);if(r===null){return null}return r.getDisplay(e,a)};a.prototype.getAnimation=function(t){return t in this.animations?this.animations[t]:null};return a}(t.BaseObject);t.ArmatureData=e;var a=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.transform=new t.Transform;a.userData=null;return a}a.toString=function(){return"[class dragonBones.BoneData]"};a.prototype._onClear=function(){if(this.userData!==null){this.userData.returnToPool()}this.inheritTranslation=false;this.inheritRotation=false;this.inheritScale=false;this.inheritReflection=false;this.type=0;this.length=0;this.name="";this.transform.identity();this.userData=null;this.parent=null};return a}(t.BaseObject);t.BoneData=a;var r=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.vertices=[];return e}e.toString=function(){return"[class dragonBones.SurfaceData]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.type=1;this.segmentX=0;this.segmentY=0;this.vertices.length=0};return e}(a);t.SurfaceData=r;var i=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t.color=null;t.userData=null;return t}a.createColor=function(){return new t.ColorTransform};a.toString=function(){return"[class dragonBones.SlotData]"};a.prototype._onClear=function(){if(this.userData!==null){this.userData.returnToPool()}this.blendMode=0;this.displayIndex=0;this.zOrder=0;this.name="";this.color=null;this.userData=null;this.parent=null};a.DEFAULT_COLOR=new t.ColorTransform;return a}(t.BaseObject);t.SlotData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.CanvasData]"};e.prototype._onClear=function(){this.hasBackground=false;this.color=0;this.x=0;this.y=0;this.width=0;this.height=0};return e}(t.BaseObject);t.CanvasData=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.displays={};return e}e.toString=function(){return"[class dragonBones.SkinData]"};e.prototype._onClear=function(){for(var t in this.displays){var e=this.displays[t];for(var a=0,r=e;a<r.length;a++){var i=r[a];if(i!==null){i.returnToPool()}}delete this.displays[t]}this.name="";this.parent=null};e.prototype.addDisplay=function(t,e){if(!(t in this.displays)){this.displays[t]=[]}if(e!==null){e.parent=this}var a=this.displays[t];a.push(e)};e.prototype.getDisplay=function(t,e){var a=this.getDisplays(t);if(a!==null){for(var r=0,i=a;r<i.length;r++){var n=i[r];if(n!==null&&n.name===e){return n}}}return null};e.prototype.getDisplays=function(t){if(!(t in this.displays)){return null}return this.displays[t]};return e}(t.BaseObject);t.SkinData=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype._onClear=function(){this.order=0;this.name="";this.type=0;this.target=null;this.root=null;this.bone=null};return e}(t.BaseObject);t.ConstraintData=e;var a=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.IKConstraintData]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.scaleEnabled=false;this.bendPositive=false;this.weight=1};return e}(e);t.IKConstraintData=a;var r=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.bones=[];return e}e.toString=function(){return"[class dragonBones.PathConstraintData]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.pathSlot=null;this.pathDisplayData=null;this.bones.length=0;this.positionMode=0;this.spacingMode=1;this.rotateMode=1;this.position=0;this.spacing=0;this.rotateOffset=0;this.rotateMix=0;this.translateMix=0};e.prototype.AddBone=function(t){this.bones.push(t)};return e}(e);t.PathConstraintData=r})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(){this.weight=null}t.prototype.clear=function(){if(!this.isShared&&this.weight!==null){this.weight.returnToPool()}this.isShared=false;this.inheritDeform=false;this.offset=0;this.data=null;this.weight=null};t.prototype.shareFrom=function(t){this.isShared=true;this.offset=t.offset;this.weight=t.weight};return t}();t.VerticesData=e;var a=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.transform=new t.Transform;return a}a.prototype._onClear=function(){this.name="";this.path="";this.transform.identity();this.parent=null};return a}(t.BaseObject);t.DisplayData=a;var r=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.pivot=new t.Point;return a}a.toString=function(){return"[class dragonBones.ImageDisplayData]"};a.prototype._onClear=function(){e.prototype._onClear.call(this);this.type=0;this.pivot.clear();this.texture=null};return a}(a);t.ImageDisplayData=r;var i=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.actions=[];return e}e.toString=function(){return"[class dragonBones.ArmatureDisplayData]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=0,a=this.actions;e<a.length;e++){var r=a[e];r.returnToPool()}this.type=1;this.inheritAnimation=false;this.actions.length=0;this.armature=null};e.prototype.addAction=function(t){this.actions.push(t)};return e}(a);t.ArmatureDisplayData=i;var n=function(t){__extends(a,t);function a(){var a=t!==null&&t.apply(this,arguments)||this;a.vertices=new e;return a}a.toString=function(){return"[class dragonBones.MeshDisplayData]"};a.prototype._onClear=function(){t.prototype._onClear.call(this);this.type=2;this.vertices.clear();this.texture=null};return a}(a);t.MeshDisplayData=n;var s=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.boundingBox=null;return e}e.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);if(this.boundingBox!==null){this.boundingBox.returnToPool()}this.type=3;this.boundingBox=null};return e}(a);t.BoundingBoxDisplayData=s;var o=function(t){__extends(a,t);function a(){var a=t!==null&&t.apply(this,arguments)||this;a.vertices=new e;a.curveLengths=[];return a}a.toString=function(){return"[class dragonBones.PathDisplayData]"};a.prototype._onClear=function(){t.prototype._onClear.call(this);this.type=4;this.closed=false;this.constantSpeed=false;this.vertices.clear();this.curveLengths.length=0};return a}(a);t.PathDisplayData=o;var l=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.bones=[];return e}e.toString=function(){return"[class dragonBones.WeightData]"};e.prototype._onClear=function(){this.count=0;this.offset=0;this.bones.length=0};e.prototype.addBone=function(t){this.bones.push(t)};return e}(t.BaseObject);t.WeightData=l})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype._onClear=function(){this.color=0;this.width=0;this.height=0};return e}(t.BaseObject);t.BoundingBoxData=e;var a=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"};e._computeOutCode=function(t,e,a,r,i,n){var s=0;if(t<a){s|=1}else if(t>i){s|=2}if(e<r){s|=4}else if(e>n){s|=8}return s};e.rectangleIntersectsSegment=function(t,a,r,i,n,s,o,l,h,f,u){if(h===void 0){h=null}if(f===void 0){f=null}if(u===void 0){u=null}var _=t>n&&t<o&&a>s&&a<l;var c=r>n&&r<o&&i>s&&i<l;if(_&&c){return-1}var p=0;var m=e._computeOutCode(t,a,n,s,o,l);var d=e._computeOutCode(r,i,n,s,o,l);while(true){if((m|d)===0){p=2;break}else if((m&d)!==0){break}var v=0;var y=0;var g=0;var b=m!==0?m:d;if((b&4)!==0){v=t+(r-t)*(s-a)/(i-a);y=s;if(u!==null){g=-Math.PI*.5}}else if((b&8)!==0){v=t+(r-t)*(l-a)/(i-a);y=l;if(u!==null){g=Math.PI*.5}}else if((b&2)!==0){y=a+(i-a)*(o-t)/(r-t);v=o;if(u!==null){g=0}}else if((b&1)!==0){y=a+(i-a)*(n-t)/(r-t);v=n;if(u!==null){g=Math.PI}}if(b===m){t=v;a=y;m=e._computeOutCode(t,a,n,s,o,l);if(u!==null){u.x=g}}else{r=v;i=y;d=e._computeOutCode(r,i,n,s,o,l);if(u!==null){u.y=g}}}if(p){if(_){p=2;if(h!==null){h.x=r;h.y=i}if(f!==null){f.x=r;f.y=r}if(u!==null){u.x=u.y+Math.PI}}else if(c){p=1;if(h!==null){h.x=t;h.y=a}if(f!==null){f.x=t;f.y=a}if(u!==null){u.y=u.x+Math.PI}}else{p=3;if(h!==null){h.x=t;h.y=a}if(f!==null){f.x=r;f.y=i}}}return p};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.type=0};e.prototype.containsPoint=function(t,e){var a=this.width*.5;if(t>=-a&&t<=a){var r=this.height*.5;if(e>=-r&&e<=r){return true}}return false};e.prototype.intersectsSegment=function(t,a,r,i,n,s,o){if(n===void 0){n=null}if(s===void 0){s=null}if(o===void 0){o=null}var l=this.width*.5;var h=this.height*.5;var f=e.rectangleIntersectsSegment(t,a,r,i,-l,-h,l,h,n,s,o);return f};return e}(e);t.RectangleBoundingBoxData=a;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.EllipseData]"};e.ellipseIntersectsSegment=function(t,e,a,r,i,n,s,o,l,h,f){if(l===void 0){l=null}if(h===void 0){h=null}if(f===void 0){f=null}var u=s/o;var _=u*u;e*=u;r*=u;var c=a-t;var p=r-e;var m=Math.sqrt(c*c+p*p);var d=c/m;var v=p/m;var y=(i-t)*d+(n-e)*v;var g=y*y;var b=t*t+e*e;var D=s*s;var T=D-b+g;var A=0;if(T>=0){var x=Math.sqrt(T);var P=y-x;var O=y+x;var S=P<0?-1:P<=m?0:1;var E=O<0?-1:O<=m?0:1;var M=S*E;if(M<0){return-1}else if(M===0){if(S===-1){A=2;a=t+O*d;r=(e+O*v)/u;if(l!==null){l.x=a;l.y=r}if(h!==null){h.x=a;h.y=r}if(f!==null){f.x=Math.atan2(r/D*_,a/D);f.y=f.x+Math.PI}}else if(E===1){A=1;t=t+P*d;e=(e+P*v)/u;if(l!==null){l.x=t;l.y=e}if(h!==null){h.x=t;h.y=e}if(f!==null){f.x=Math.atan2(e/D*_,t/D);f.y=f.x+Math.PI}}else{A=3;if(l!==null){l.x=t+P*d;l.y=(e+P*v)/u;if(f!==null){f.x=Math.atan2(l.y/D*_,l.x/D)}}if(h!==null){h.x=t+O*d;h.y=(e+O*v)/u;if(f!==null){f.y=Math.atan2(h.y/D*_,h.x/D)}}}}}return A};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.type=1};e.prototype.containsPoint=function(t,e){var a=this.width*.5;if(t>=-a&&t<=a){var r=this.height*.5;if(e>=-r&&e<=r){e*=a/r;return Math.sqrt(t*t+e*e)<=a}}return false};e.prototype.intersectsSegment=function(t,a,r,i,n,s,o){if(n===void 0){n=null}if(s===void 0){s=null}if(o===void 0){o=null}var l=e.ellipseIntersectsSegment(t,a,r,i,0,0,this.width*.5,this.height*.5,n,s,o);return l};return e}(e);t.EllipseBoundingBoxData=r;var i=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.vertices=[];return e}e.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"};e.polygonIntersectsSegment=function(t,e,a,r,i,n,s,o){if(n===void 0){n=null}if(s===void 0){s=null}if(o===void 0){o=null}if(t===a){t=a+1e-6}if(e===r){e=r+1e-6}var l=i.length;var h=t-a;var f=e-r;var u=t*r-e*a;var _=0;var c=i[l-2];var p=i[l-1];var m=0;var d=0;var v=0;var y=0;var g=0;var b=0;for(var D=0;D<l;D+=2){var T=i[D];var A=i[D+1];if(c===T){c=T+1e-4}if(p===A){p=A+1e-4}var x=c-T;var P=p-A;var O=c*A-p*T;var S=h*P-f*x;var E=(u*x-h*O)/S;if((E>=c&&E<=T||E>=T&&E<=c)&&(h===0||E>=t&&E<=a||E>=a&&E<=t)){var M=(u*P-f*O)/S;if((M>=p&&M<=A||M>=A&&M<=p)&&(f===0||M>=e&&M<=r||M>=r&&M<=e)){if(s!==null){var B=E-t;if(B<0){B=-B}if(_===0){m=B;d=B;v=E;y=M;g=E;b=M;if(o!==null){o.x=Math.atan2(A-p,T-c)-Math.PI*.5;o.y=o.x}}else{if(B<m){m=B;v=E;y=M;if(o!==null){o.x=Math.atan2(A-p,T-c)-Math.PI*.5}}if(B>d){d=B;g=E;b=M;if(o!==null){o.y=Math.atan2(A-p,T-c)-Math.PI*.5}}}_++}else{v=E;y=M;g=E;b=M;_++;if(o!==null){o.x=Math.atan2(A-p,T-c)-Math.PI*.5;o.y=o.x}break}}}c=T;p=A}if(_===1){if(n!==null){n.x=v;n.y=y}if(s!==null){s.x=v;s.y=y}if(o!==null){o.y=o.x+Math.PI}}else if(_>1){_++;if(n!==null){n.x=v;n.y=y}if(s!==null){s.x=g;s.y=b}}return _};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.type=2;this.x=0;this.y=0;this.vertices.length=0};e.prototype.containsPoint=function(t,e){var a=false;if(t>=this.x&&t<=this.width&&e>=this.y&&e<=this.height){for(var r=0,i=this.vertices.length,n=i-2;r<i;r+=2){var s=this.vertices[n+1];var o=this.vertices[r+1];if(o<e&&s>=e||s<e&&o>=e){var l=this.vertices[n];var h=this.vertices[r];if((e-o)*(l-h)/(s-o)+h<t){a=!a}}n=r}}return a};e.prototype.intersectsSegment=function(t,r,i,n,s,o,l){if(s===void 0){s=null}if(o===void 0){o=null}if(l===void 0){l=null}var h=0;if(a.rectangleIntersectsSegment(t,r,i,n,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)!==0){h=e.polygonIntersectsSegment(t,r,i,n,this.vertices,s,o,l)}return h};return e}(e);t.PolygonBoundingBoxData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.cachedFrames=[];e.boneTimelines={};e.surfaceTimelines={};e.slotTimelines={};e.constraintTimelines={};e.animationTimelines={};e.boneCachedFrameIndices={};e.slotCachedFrameIndices={};e.actionTimeline=null;e.zOrderTimeline=null;return e}e.toString=function(){return"[class dragonBones.AnimationData]"};e.prototype._onClear=function(){for(var t in this.boneTimelines){for(var e=0,a=this.boneTimelines[t];e<a.length;e++){var r=a[e];r.returnToPool()}delete this.boneTimelines[t]}for(var t in this.surfaceTimelines){for(var i=0,n=this.surfaceTimelines[t];i<n.length;i++){var r=n[i];r.returnToPool()}delete this.surfaceTimelines[t]}for(var t in this.slotTimelines){for(var s=0,o=this.slotTimelines[t];s<o.length;s++){var r=o[s];r.returnToPool()}delete this.slotTimelines[t]}for(var t in this.constraintTimelines){for(var l=0,h=this.constraintTimelines[t];l<h.length;l++){var r=h[l];r.returnToPool()}delete this.constraintTimelines[t]}for(var t in this.animationTimelines){for(var f=0,u=this.animationTimelines[t];f<u.length;f++){var r=u[f];r.returnToPool()}delete this.animationTimelines[t]}for(var t in this.boneCachedFrameIndices){delete this.boneCachedFrameIndices[t]}for(var t in this.slotCachedFrameIndices){delete this.slotCachedFrameIndices[t]}if(this.actionTimeline!==null){this.actionTimeline.returnToPool()}if(this.zOrderTimeline!==null){this.zOrderTimeline.returnToPool()}this.frameIntOffset=0;this.frameFloatOffset=0;this.frameOffset=0;this.frameCount=0;this.playTimes=0;this.duration=0;this.scale=1;this.fadeInTime=0;this.cacheFrameRate=0;this.name="";this.cachedFrames.length=0;this.actionTimeline=null;this.zOrderTimeline=null;this.parent=null};e.prototype.cacheFrames=function(t){if(this.cacheFrameRate>0){return}this.cacheFrameRate=Math.max(Math.ceil(t*this.scale),1);var e=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=e;for(var a=0,r=this.cacheFrames.length;a<r;++a){this.cachedFrames[a]=false}for(var i=0,n=this.parent.sortedBones;i<n.length;i++){var s=n[i];var o=new Array(e);for(var a=0,r=o.length;a<r;++a){o[a]=-1}this.boneCachedFrameIndices[s.name]=o}for(var l=0,h=this.parent.sortedSlots;l<h.length;l++){var f=h[l];var o=new Array(e);for(var a=0,r=o.length;a<r;++a){o[a]=-1}this.slotCachedFrameIndices[f.name]=o}};e.prototype.addBoneTimeline=function(t,e){var a=t.name in this.boneTimelines?this.boneTimelines[t.name]:this.boneTimelines[t.name]=[];if(a.indexOf(e)<0){a.push(e)}};e.prototype.addSurfaceTimeline=function(t,e){var a=t.name in this.surfaceTimelines?this.surfaceTimelines[t.name]:this.surfaceTimelines[t.name]=[];if(a.indexOf(e)<0){a.push(e)}};e.prototype.addSlotTimeline=function(t,e){var a=t.name in this.slotTimelines?this.slotTimelines[t.name]:this.slotTimelines[t.name]=[];if(a.indexOf(e)<0){a.push(e)}};e.prototype.addConstraintTimeline=function(t,e){var a=t.name in this.constraintTimelines?this.constraintTimelines[t.name]:this.constraintTimelines[t.name]=[];if(a.indexOf(e)<0){a.push(e)}};e.prototype.addAnimationTimeline=function(t,e){var a=t in this.animationTimelines?this.animationTimelines[t]:this.animationTimelines[t]=[];if(a.indexOf(e)<0){a.push(e)}};e.prototype.getBoneTimelines=function(t){return t in this.boneTimelines?this.boneTimelines[t]:null};e.prototype.getSurfaceTimelines=function(t){return t in this.surfaceTimelines?this.surfaceTimelines[t]:null};e.prototype.getSlotTimelines=function(t){return t in this.slotTimelines?this.slotTimelines[t]:null};e.prototype.getConstraintTimelines=function(t){return t in this.constraintTimelines?this.constraintTimelines[t]:null};e.prototype.getAnimationTimelines=function(t){return t in this.animationTimelines?this.animationTimelines[t]:null};e.prototype.getBoneCachedFrameIndices=function(t){return t in this.boneCachedFrameIndices?this.boneCachedFrameIndices[t]:null};e.prototype.getSlotCachedFrameIndices=function(t){return t in this.slotCachedFrameIndices?this.slotCachedFrameIndices[t]:null};return e}(t.BaseObject);t.AnimationData=e;var a=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.TimelineData]"};e.prototype._onClear=function(){this.type=10;this.offset=0;this.frameIndicesOffset=-1};return e}(t.BaseObject);t.TimelineData=a})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.boneMask=[];return e}e.toString=function(){return"[class dragonBones.AnimationConfig]"};e.prototype._onClear=function(){this.pauseFadeOut=true;this.fadeOutMode=4;this.fadeOutTweenType=1;this.fadeOutTime=-1;this.actionEnabled=true;this.additiveBlending=false;this.displayControl=true;this.pauseFadeIn=true;this.resetToPose=true;this.fadeInTweenType=1;this.playTimes=-1;this.layer=0;this.position=0;this.duration=-1;this.timeScale=-100;this.weight=1;this.fadeInTime=-1;this.autoFadeOutTime=-1;this.name="";this.animation="";this.group="";this.boneMask.length=0};e.prototype.clear=function(){this._onClear()};e.prototype.copyFrom=function(t){this.pauseFadeOut=t.pauseFadeOut;this.fadeOutMode=t.fadeOutMode;this.autoFadeOutTime=t.autoFadeOutTime;this.fadeOutTweenType=t.fadeOutTweenType;this.actionEnabled=t.actionEnabled;this.additiveBlending=t.additiveBlending;this.displayControl=t.displayControl;this.pauseFadeIn=t.pauseFadeIn;this.resetToPose=t.resetToPose;this.playTimes=t.playTimes;this.layer=t.layer;this.position=t.position;this.duration=t.duration;this.timeScale=t.timeScale;this.fadeInTime=t.fadeInTime;this.fadeOutTime=t.fadeOutTime;this.fadeInTweenType=t.fadeInTweenType;this.weight=t.weight;this.name=t.name;this.animation=t.animation;this.group=t.group;this.boneMask.length=t.boneMask.length;for(var e=0,a=this.boneMask.length;e<a;++e){this.boneMask[e]=t.boneMask[e]}};e.prototype.containsBoneMask=function(t){return this.boneMask.length===0||this.boneMask.indexOf(t)>=0};e.prototype.addBoneMask=function(t,e,a){if(a===void 0){a=true}var r=t.getBone(e);if(r===null){return}if(this.boneMask.indexOf(e)<0){this.boneMask.push(e)}if(a){for(var i=0,n=t.getBones();i<n.length;i++){var s=n[i];if(this.boneMask.indexOf(s.name)<0&&r.contains(s)){this.boneMask.push(s.name)}}}};e.prototype.removeBoneMask=function(t,e,a){if(a===void 0){a=true}var r=this.boneMask.indexOf(e);if(r>=0){this.boneMask.splice(r,1)}if(a){var i=t.getBone(e);if(i!==null){if(this.boneMask.length>0){for(var n=0,s=t.getBones();n<s.length;n++){var o=s[n];var l=this.boneMask.indexOf(o.name);if(l>=0&&i.contains(o)){this.boneMask.splice(l,1)}}}else{for(var h=0,f=t.getBones();h<f.length;h++){var o=f[h];if(o===i){continue}if(!i.contains(o)){this.boneMask.push(o.name)}}}}}};return e}(t.BaseObject);t.AnimationConfig=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.textures={};return e}e.prototype._onClear=function(){for(var t in this.textures){this.textures[t].returnToPool();delete this.textures[t]}this.autoSearch=false;this.width=0;this.height=0;this.scale=1;this.name="";this.imagePath=""};e.prototype.copyFrom=function(t){this.autoSearch=t.autoSearch;this.scale=t.scale;this.width=t.width;this.height=t.height;this.name=t.name;this.imagePath=t.imagePath;for(var e in this.textures){this.textures[e].returnToPool();delete this.textures[e]}for(var e in t.textures){var a=this.createTexture();a.copyFrom(t.textures[e]);this.textures[e]=a}};e.prototype.addTexture=function(t){if(t.name in this.textures){console.warn("Same texture: "+t.name);return}t.parent=this;this.textures[t.name]=t};e.prototype.getTexture=function(t){return t in this.textures?this.textures[t]:null};return e}(t.BaseObject);t.TextureAtlasData=e;var a=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.region=new t.Rectangle;a.frame=null;return a}a.createRectangle=function(){return new t.Rectangle};a.prototype._onClear=function(){this.rotated=false;this.name="";this.region.clear();this.parent=null;this.frame=null};a.prototype.copyFrom=function(t){this.rotated=t.rotated;this.name=t.name;this.region.copyFrom(t.region);this.parent=t.parent;if(this.frame===null&&t.frame!==null){this.frame=a.createRectangle()}else if(this.frame!==null&&t.frame===null){this.frame=null}if(this.frame!==null&&t.frame!==null){this.frame.copyFrom(t.frame)}};return a}(t.BaseObject);t.TextureData=a})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.vertices=[];e.bones=[];return e}e.toString=function(){return"[class dragonBones.DeformVertices]"};e.prototype._onClear=function(){this.verticesDirty=false;this.vertices.length=0;this.bones.length=0;this.verticesData=null};e.prototype.init=function(t,e){this.verticesData=t;if(this.verticesData!==null){var a=0;if(this.verticesData.weight!==null){a=this.verticesData.weight.count*2}else{a=this.verticesData.data.intArray[this.verticesData.offset+0]*2}this.verticesDirty=true;this.vertices.length=a;this.bones.length=0;for(var r=0,i=this.vertices.length;r<i;++r){this.vertices[r]=0}if(this.verticesData.weight!==null){for(var r=0,i=this.verticesData.weight.bones.length;r<i;++r){var n=e.getBone(this.verticesData.weight.bones[r].name);this.bones.push(n)}}}else{this.verticesDirty=false;this.vertices.length=0;this.bones.length=0;this.verticesData=null}};e.prototype.isBonesUpdate=function(){for(var t=0,e=this.bones;t<e.length;t++){var a=e[t];if(a!==null&&a._childrenTransformDirty){return true}}return false};return e}(t.BaseObject);t.DeformVertices=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t._bones=[];t._slots=[];t._constraints=[];t._actions=[];t._animation=null;t._proxy=null;t._replaceTextureAtlasData=null;t._clock=null;return t}a.toString=function(){return"[class dragonBones.Armature]"};a._onSortSlots=function(t,e){return t._zOrder>e._zOrder?1:-1};a.prototype._onClear=function(){if(this._clock!==null){this._clock.remove(this)}for(var t=0,e=this._bones;t<e.length;t++){var a=e[t];a.returnToPool()}for(var r=0,i=this._slots;r<i.length;r++){var n=i[r];n.returnToPool()}for(var s=0,o=this._constraints;s<o.length;s++){var l=o[s];l.returnToPool()}for(var h=0,f=this._actions;h<f.length;h++){var u=f[h];u.returnToPool()}if(this._animation!==null){this._animation.returnToPool()}if(this._proxy!==null){this._proxy.dbClear()}if(this._replaceTextureAtlasData!==null){this._replaceTextureAtlasData.returnToPool()}this.inheritAnimation=true;this.userData=null;this._lockUpdate=false;this._slotsDirty=true;this._zOrderDirty=false;this._flipX=false;this._flipY=false;this._cacheFrameIndex=-1;this._bones.length=0;this._slots.length=0;this._constraints.length=0;this._actions.length=0;this._armatureData=null;this._animation=null;this._proxy=null;this._display=null;this._replaceTextureAtlasData=null;this._replacedTexture=null;this._dragonBones=null;this._clock=null;this._parent=null};a.prototype._sortZOrder=function(t,e){var a=this._armatureData.sortedSlots;var r=t===null;if(this._zOrderDirty||!r){for(var i=0,n=a.length;i<n;++i){var s=r?i:t[e+i];if(s<0||s>=n){continue}var o=a[s];var l=this.getSlot(o.name);if(l!==null){l._setZorder(i)}}this._slotsDirty=true;this._zOrderDirty=!r}};a.prototype._addBone=function(t){if(this._bones.indexOf(t)<0){this._bones.push(t)}};a.prototype._addSlot=function(t){if(this._slots.indexOf(t)<0){this._slots.push(t)}};a.prototype._addConstraint=function(t){if(this._constraints.indexOf(t)<0){this._constraints.push(t)}};a.prototype._bufferAction=function(t,e){if(this._actions.indexOf(t)<0){if(e){this._actions.push(t)}else{this._actions.unshift(t)}}};a.prototype.dispose=function(){if(this._armatureData!==null){this._lockUpdate=true;this._dragonBones.bufferObject(this)}};a.prototype.init=function(e,a,r,i){if(this._armatureData!==null){return}this._armatureData=e;this._animation=t.BaseObject.borrowObject(t.Animation);this._proxy=a;this._display=r;this._dragonBones=i;this._proxy.dbInit(this);this._animation.init(this);this._animation.animations=this._armatureData.animations};a.prototype.advanceTime=function(t){if(this._lockUpdate){return}if(this._armatureData===null){console.warn("The armature has been disposed.");return}else if(this._armatureData.parent===null){console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");return}var e=this._cacheFrameIndex;this._animation.advanceTime(t);if(this._slotsDirty){this._slotsDirty=false;this._slots.sort(a._onSortSlots)}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==e){var r=0,i=0;for(r=0,i=this._bones.length;r<i;++r){this._bones[r].update(this._cacheFrameIndex)}for(r=0,i=this._slots.length;r<i;++r){this._slots[r].update(this._cacheFrameIndex)}}if(this._actions.length>0){this._lockUpdate=true;for(var n=0,s=this._actions;n<s.length;n++){var o=s[n];var l=o.actionData;if(l!==null){if(l.type===0){if(o.slot!==null){var h=o.slot.childArmature;if(h!==null){h.animation.fadeIn(l.name)}}else if(o.bone!==null){for(var f=0,u=this.getSlots();f<u.length;f++){var _=u[f];if(_.parent===o.bone){var h=_.childArmature;if(h!==null){h.animation.fadeIn(l.name)}}}}else{this._animation.fadeIn(l.name)}}}o.returnToPool()}this._actions.length=0;this._lockUpdate=false}this._proxy.dbUpdate()};a.prototype.invalidUpdate=function(t,e){if(t===void 0){t=null}if(e===void 0){e=false}if(t!==null&&t.length>0){var a=this.getBone(t);if(a!==null){a.invalidUpdate();if(e){for(var r=0,i=this._slots;r<i.length;r++){var n=i[r];if(n.parent===a){n.invalidUpdate()}}}}}else{for(var s=0,o=this._bones;s<o.length;s++){var a=o[s];a.invalidUpdate()}if(e){for(var l=0,h=this._slots;l<h.length;l++){var n=h[l];n.invalidUpdate()}}}};a.prototype.containsPoint=function(t,e){for(var a=0,r=this._slots;a<r.length;a++){var i=r[a];if(i.containsPoint(t,e)){return i}}return null};a.prototype.intersectsSegment=function(t,e,a,r,i,n,s){if(i===void 0){i=null}if(n===void 0){n=null}if(s===void 0){s=null}var o=t===a;var l=0;var h=0;var f=0;var u=0;var _=0;var c=0;var p=0;var m=0;var d=null;var v=null;for(var y=0,g=this._slots;y<g.length;y++){var b=g[y];var D=b.intersectsSegment(t,e,a,r,i,n,s);if(D>0){if(i!==null||n!==null){if(i!==null){var T=o?i.y-e:i.x-t;if(T<0){T=-T}if(d===null||T<l){l=T;f=i.x;u=i.y;d=b;if(s){p=s.x}}}if(n!==null){var T=n.x-t;if(T<0){T=-T}if(v===null||T>h){h=T;_=n.x;c=n.y;v=b;if(s!==null){m=s.y}}}}else{d=b;break}}}if(d!==null&&i!==null){i.x=f;i.y=u;if(s!==null){s.x=p}}if(v!==null&&n!==null){n.x=_;n.y=c;if(s!==null){s.y=m}}return d};a.prototype.getBone=function(t){for(var e=0,a=this._bones;e<a.length;e++){var r=a[e];if(r.name===t){return r}}return null};a.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return e!==null?e.parent:null};a.prototype.getSlot=function(t){for(var e=0,a=this._slots;e<a.length;e++){var r=a[e];if(r.name===t){return r}}return null};a.prototype.getSlotByDisplay=function(t){if(t!==null){for(var e=0,a=this._slots;e<a.length;e++){var r=a[e];if(r.display===t){return r}}}return null};a.prototype.getBones=function(){return this._bones};a.prototype.getSlots=function(){return this._slots};Object.defineProperty(a.prototype,"flipX",{get:function(){return this._flipX},set:function(t){if(this._flipX===t){return}this._flipX=t;this.invalidUpdate()},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"flipY",{get:function(){return this._flipY},set:function(t){if(this._flipY===t){return}this._flipY=t;this.invalidUpdate()},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!==t){this._armatureData.cacheFrames(t);for(var e=0,a=this._slots;e<a.length;e++){var r=a[e];var i=r.childArmature;if(i!==null){i.cacheFrameRate=t}}}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"name",{get:function(){return this._armatureData.name},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animation",{get:function(){return this._animation},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"proxy",{get:function(){return this._proxy},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(t){if(this._replacedTexture===t){return}if(this._replaceTextureAtlasData!==null){this._replaceTextureAtlasData.returnToPool();this._replaceTextureAtlasData=null}this._replacedTexture=t;for(var e=0,a=this._slots;e<a.length;e++){var r=a[e];r.invalidUpdate();r.update(-1)}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock===t){return}if(this._clock!==null){this._clock.remove(this)}this._clock=t;if(this._clock){this._clock.add(this)}for(var e=0,a=this._slots;e<a.length;e++){var r=a[e];var i=r.childArmature;if(i!==null){i.clock=this._clock}}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:true,configurable:true});a.prototype.replaceTexture=function(t){this.replacedTexture=t};a.prototype.hasEventListener=function(t){console.warn("Deprecated.");return this._proxy.hasDBEventListener(t)};a.prototype.addEventListener=function(t,e,a){console.warn("Deprecated.");this._proxy.addDBEventListener(t,e,a)};a.prototype.removeEventListener=function(t,e,a){console.warn("Deprecated.");this._proxy.removeDBEventListener(t,e,a)};a.prototype.enableAnimationCache=function(t){console.warn("Deprecated.");this.cacheFrameRate=t};a.prototype.getDisplay=function(){return this._display};return a}(t.BaseObject);t.Armature=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.globalTransformMatrix=new t.Matrix;a.global=new t.Transform;a.offset=new t.Transform;return a}a.prototype._onClear=function(){this.globalTransformMatrix.identity();this.global.identity();this.offset.identity();this.origin=null;this.userData=null;this._globalDirty=false;this._armature=null};a.prototype.updateGlobalTransform=function(){if(this._globalDirty){this._globalDirty=false;this.global.fromMatrix(this.globalTransformMatrix)}};Object.defineProperty(a.prototype,"armature",{get:function(){return this._armature},enumerable:true,configurable:true});a._helpMatrix=new t.Matrix;a._helpTransform=new t.Transform;a._helpPoint=new t.Point;return a}(t.BaseObject);t.TransformObject=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.animationPose=new t.Transform;a._blendState=new t.BlendState;return a}a.toString=function(){return"[class dragonBones.Bone]"};a.prototype._onClear=function(){e.prototype._onClear.call(this);this.offsetMode=1;this.animationPose.identity();this._transformDirty=false;this._childrenTransformDirty=false;this._localDirty=true;this._hasConstraint=false;this._visible=true;this._cachedFrameIndex=-1;this._blendState.clear();this._boneData=null;this._parent=null;this._cachedFrameIndices=null};a.prototype._updateGlobalTransformMatrix=function(e){var a=this._boneData;var r=this.global;var i=this.globalTransformMatrix;var n=this.origin;var s=this.offset;var o=this.animationPose;var l=this._parent;var h=this._armature.flipX;var f=this._armature.flipY===t.DragonBones.yDown;var u=l!==null;var _=0;if(this.offsetMode===1){if(n!==null){r.x=n.x+s.x+o.x;r.y=n.y+s.y+o.y;r.skew=n.skew+s.skew+o.skew;r.rotation=n.rotation+s.rotation+o.rotation;r.scaleX=n.scaleX*s.scaleX*o.scaleX;r.scaleY=n.scaleY*s.scaleY*o.scaleY}else{r.copyFrom(s).add(o)}}else if(this.offsetMode===0){if(n!==null){r.copyFrom(n).add(o)}else{r.copyFrom(o)}}else{u=false;r.copyFrom(s)}if(u){var c=l._boneData.type===0?l.globalTransformMatrix:l._getGlobalTransformMatrix(r.x,r.y);if(a.inheritScale){if(!a.inheritRotation){l.updateGlobalTransform();if(h&&f){_=r.rotation-(l.global.rotation+Math.PI)}else if(h){_=r.rotation+l.global.rotation+Math.PI}else if(f){_=r.rotation+l.global.rotation}else{_=r.rotation-l.global.rotation}r.rotation=_}r.toMatrix(i);i.concat(c);if(a.inheritTranslation){r.x=i.tx;r.y=i.ty}else{i.tx=r.x;i.ty=r.y}if(e){r.fromMatrix(i)}else{this._globalDirty=true}}else{if(a.inheritTranslation){var p=r.x;var m=r.y;r.x=c.a*p+c.c*m+c.tx;r.y=c.b*p+c.d*m+c.ty}else{if(h){r.x=-r.x}if(f){r.y=-r.y}}if(a.inheritRotation){l.updateGlobalTransform();if(l.global.scaleX<0){_=r.rotation+l.global.rotation+Math.PI}else{_=r.rotation+l.global.rotation}if(c.a*c.d-c.b*c.c<0){_-=r.rotation*2;if(h!==f||a.inheritReflection){r.skew+=Math.PI}}r.rotation=_}else if(h||f){if(h&&f){_=r.rotation+Math.PI}else{if(h){_=Math.PI-r.rotation}else{_=-r.rotation}r.skew+=Math.PI}r.rotation=_}r.toMatrix(i)}}else{if(h||f){if(h){r.x=-r.x}if(f){r.y=-r.y}if(h&&f){_=r.rotation+Math.PI}else{if(h){_=Math.PI-r.rotation}else{_=-r.rotation}r.skew+=Math.PI}r.rotation=_}r.toMatrix(i)}};a.prototype.init=function(t,e){if(this._boneData!==null){return}this._boneData=t;this._armature=e;if(this._boneData.parent!==null){this._parent=this._armature.getBone(this._boneData.parent.name)}this._armature._addBone(this);this.origin=this._boneData.transform};a.prototype.update=function(t){this._blendState.dirty=false;if(t>=0&&this._cachedFrameIndices!==null){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e){this._transformDirty=false}else if(e>=0){this._transformDirty=true;this._cachedFrameIndex=e}else{if(this._hasConstraint){for(var a=0,r=this._armature._constraints;a<r.length;a++){var i=r[a];if(i._root===this){i.update()}}}if(this._transformDirty||this._parent!==null&&this._parent._childrenTransformDirty){this._transformDirty=true;this._cachedFrameIndex=-1}else if(this._cachedFrameIndex>=0){this._transformDirty=false;this._cachedFrameIndices[t]=this._cachedFrameIndex}else{this._transformDirty=true;this._cachedFrameIndex=-1}}}else{if(this._hasConstraint){for(var n=0,s=this._armature._constraints;n<s.length;n++){var i=s[n];if(i._root===this){i.update()}}}if(this._transformDirty||this._parent!==null&&this._parent._childrenTransformDirty){t=-1;this._transformDirty=true;this._cachedFrameIndex=-1}}if(this._transformDirty){this._transformDirty=false;this._childrenTransformDirty=true;if(this._cachedFrameIndex<0){var o=t>=0;if(this._localDirty){this._updateGlobalTransformMatrix(o)}if(o&&this._cachedFrameIndices!==null){this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global)}}else{this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex)}}else if(this._childrenTransformDirty){this._childrenTransformDirty=false}this._localDirty=true};a.prototype.updateByConstraint=function(){if(this._localDirty){this._localDirty=false;if(this._transformDirty||this._parent!==null&&this._parent._childrenTransformDirty){this._updateGlobalTransformMatrix(true)}this._transformDirty=true}};a.prototype.invalidUpdate=function(){this._transformDirty=true};a.prototype.contains=function(t){if(t===this){return false}var e=t;while(e!==this&&e!==null){e=e.parent}return e===this};Object.defineProperty(a.prototype,"boneData",{get:function(){return this._boneData},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible===t){return}this._visible=t;for(var e=0,a=this._armature.getSlots();e<a.length;e++){var r=a[e];if(r.parent===this){r._updateVisible()}}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"name",{get:function(){return this._boneData.name},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:true,configurable:true});a.prototype.getBones=function(){console.warn("Deprecated.");var t=new Array;for(var e=0,a=this._armature.getBones();e<a.length;e++){var r=a[e];if(r.parent===this){t.push(r)}}return t};a.prototype.getSlots=function(){console.warn("Deprecated.");var t=new Array;for(var e=0,a=this._armature.getSlots();e<a.length;e++){var r=a[e];if(r.parent===this){t.push(r)}}return t};Object.defineProperty(a.prototype,"slot",{get:function(){console.warn("Deprecated.");for(var t=0,e=this._armature.getSlots();t<e.length;t++){var a=e[t];if(a.parent===this){return a}}return null},enumerable:true,configurable:true});return a}(t.TransformObject);t.Bone=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._vertices=[];e._deformVertices=[];e._hullCache=[];e._matrixCahce=[];return e}e.toString=function(){return"[class dragonBones.Surface]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this._dX=0;this._dY=0;this._k=0;this._kX=0;this._kY=0;this._vertices.length=0;this._deformVertices.length=0;this._matrixCahce.length=0;this._hullCache.length=0};e.prototype._getAffineTransform=function(t,e,a,r,i,n,s,o,l,h,f,u,_){var c=s-i;var p=o-n;var m=l-i;var d=h-n;f.rotation=Math.atan2(p,c);f.skew=Math.atan2(d,m)-Math.PI*.5-f.rotation;if(_){f.rotation+=Math.PI}f.scaleX=Math.sqrt(c*c+p*p)/a;f.scaleY=Math.sqrt(m*m+d*d)/r;f.toMatrix(u);f.x=u.tx=i-(u.a*t+u.c*e);f.y=u.ty=n-(u.b*t+u.d*e)};e.prototype._updateVertices=function(){var t=this._boneData.vertices;var e=this._vertices;var a=this._deformVertices;if(this._parent!==null){if(this._parent._boneData.type===1){for(var r=0,i=t.length;r<i;r+=2){var n=t[r]+a[r];var s=t[r+1]+a[r];var o=this._parent._getGlobalTransformMatrix(n,s);e[r]=o.a*n+o.c*s+o.tx;e[r+1]=o.b*n+o.d*s+o.ty}}else{var l=this._parent.globalTransformMatrix;for(var r=0,i=t.length;r<i;r+=2){var n=t[r]+a[r];var s=t[r+1]+a[r+1];e[r]=l.a*n+l.c*s+l.tx;e[r+1]=l.b*n+l.d*s+l.ty}}}else{for(var r=0,i=t.length;r<i;r+=2){e[r]=t[r]+a[r];e[r+1]=t[r+1]+a[r+1]}}};e.prototype._updateGlobalTransformMatrix=function(t){t;var e=this._boneData.segmentX*2;var a=this._vertices.length-2;var r=200;var i=this._vertices[0];var n=this._vertices[1];var s=this._vertices[e];var o=this._vertices[e+1];var l=this._vertices[a];var h=this._vertices[a+1];var f=this._vertices[a-e];var u=this._vertices[a-e+1];var _=i+(l-i)*.5;var c=n+(h-n)*.5;var p=s+(f-s)*.5;var m=o+(u-o)*.5;var d=_+(p-_)*.5;var v=c+(m-c)*.5;var y=s+(l-s)*.5;var g=o+(h-o)*.5;var b=f+(l-f)*.5;var D=u+(h-u)*.5;this._globalDirty=false;this._getAffineTransform(0,0,r,r,d,v,y,g,b,D,this.global,this.globalTransformMatrix,false)};e.prototype._getGlobalTransformMatrix=function(t,a){var r=1e3;if(t<-r||r<t||a<-r||r<a){return this.globalTransformMatrix}var i=false;var n=200;var s=this._boneData;var o=s.segmentX;var l=s.segmentY;var h=s.segmentX*2;var f=this._dX;var u=this._dY;var _=Math.floor((t+n)/f);var c=Math.floor((a+n)/u);var p=0;var m=_*f-n;var d=c*u-n;var v=this._matrixCahce;var y=e._helpMatrix;if(t<-n){if(a<-n||a>=n){return this.globalTransformMatrix}i=a>this._kX*(t+n)+d;p=((o*(l+1)+o*2+l+c)*2+(i?1:0))*7;if(this._matrixCahce[p]>0){y.copyFromArray(v,p+1)}else{var g=c*(h+2);var b=this._hullCache[4];var D=this._hullCache[5];var T=this._hullCache[2]-(l-c)*b;var A=this._hullCache[3]-(l-c)*D;var x=this._vertices;if(i){this._getAffineTransform(-n,d+u,r-n,u,x[g+h+2],x[g+h+3],T+b,A+D,x[g],x[g+1],e._helpTransform,y,true)}else{this._getAffineTransform(-r,d,r-n,u,T,A,x[g],x[g+1],T+b,A+D,e._helpTransform,y,false)}v[p]=1;v[p+1]=y.a;v[p+2]=y.b;v[p+3]=y.c;v[p+4]=y.d;v[p+5]=y.tx;v[p+6]=y.ty}}else if(t>=n){if(a<-n||a>=n){return this.globalTransformMatrix}i=a>this._kX*(t-r)+d;p=((o*(l+1)+o+c)*2+(i?1:0))*7;if(this._matrixCahce[p]>0){y.copyFromArray(v,p+1)}else{var g=(c+1)*(h+2)-2;var b=this._hullCache[4];var D=this._hullCache[5];var T=this._hullCache[0]+c*b;var A=this._hullCache[1]+c*D;var x=this._vertices;if(i){this._getAffineTransform(r,d+u,r-n,u,T+b,A+D,x[g+h+2],x[g+h+3],T,A,e._helpTransform,y,true)}else{this._getAffineTransform(n,d,r-n,u,x[g],x[g+1],T,A,x[g+h+2],x[g+h+3],e._helpTransform,y,false)}v[p]=1;v[p+1]=y.a;v[p+2]=y.b;v[p+3]=y.c;v[p+4]=y.d;v[p+5]=y.tx;v[p+6]=y.ty}}else if(a<-n){if(t<-n||t>=n){return this.globalTransformMatrix}i=a>this._kY*(t-m-f)-r;p=(o*(l+1)+_*2+(i?1:0))*7;if(this._matrixCahce[p]>0){y.copyFromArray(v,p+1)}else{var g=_*2;var b=this._hullCache[10];var D=this._hullCache[11];var T=this._hullCache[8]+_*b;var A=this._hullCache[9]+_*D;var x=this._vertices;if(i){this._getAffineTransform(m+f,-n,f,r-n,x[g+2],x[g+3],x[g],x[g+1],T+b,A+D,e._helpTransform,y,true)}else{this._getAffineTransform(m,-r,f,r-n,T,A,T+b,A+D,x[g],x[g+1],e._helpTransform,y,false)}v[p]=1;v[p+1]=y.a;v[p+2]=y.b;v[p+3]=y.c;v[p+4]=y.d;v[p+5]=y.tx;v[p+6]=y.ty}}else if(a>=n){if(t<-n||t>=n){return this.globalTransformMatrix}i=a>this._kY*(t-m-f)+n;p=((o*(l+1)+o+l+c)*2+(i?1:0))*7;if(this._matrixCahce[p]>0){y.copyFromArray(v,p+1)}else{var g=l*(h+2)+_*2;var b=this._hullCache[10];var D=this._hullCache[11];var T=this._hullCache[6]-(o-_)*b;var A=this._hullCache[7]-(o-_)*D;var x=this._vertices;if(i){this._getAffineTransform(m+f,r,f,r-n,T+b,A+D,T,A,x[g+2],x[g+3],e._helpTransform,y,true)}else{this._getAffineTransform(m,n,f,r-n,x[g],x[g+1],x[g+2],x[g+3],T,A,e._helpTransform,y,false)}v[p]=1;v[p+1]=y.a;v[p+2]=y.b;v[p+3]=y.c;v[p+4]=y.d;v[p+5]=y.tx;v[p+6]=y.ty}}else{i=a>this._k*(t-m-f)+d;p=((o*c+_)*2+(i?1:0))*7;if(this._matrixCahce[p]>0){y.copyFromArray(v,p+1)}else{var g=_*2+c*(h+2);var x=this._vertices;if(i){this._getAffineTransform(m+f,d+u,f,u,x[g+h+4],x[g+h+5],x[g+h+2],x[g+h+3],x[g+2],x[g+3],e._helpTransform,y,true)}else{this._getAffineTransform(m,d,f,u,x[g],x[g+1],x[g+2],x[g+3],x[g+h+2],x[g+h+3],e._helpTransform,y,false)}v[p]=1;v[p+1]=y.a;v[p+2]=y.b;v[p+3]=y.c;v[p+4]=y.d;v[p+5]=y.tx;v[p+6]=y.ty}}return y};e.prototype.init=function(e,a){if(this._boneData!==null){return}t.prototype.init.call(this,e,a);var r=e.segmentX;var i=e.segmentY;var n=e.vertices.length;var s=1e3;var o=200;this._dX=o*2/r;this._dY=o*2/i;this._k=-this._dY/this._dX;this._kX=-this._dY/(s-o);this._kY=-(s-o)/this._dX;this._vertices.length=n;this._deformVertices.length=n;this._matrixCahce.length=(r*i+r*2+i*2)*2*7;this._hullCache.length=10;for(var l=0;l<n;++l){this._deformVertices[l]=0}};e.prototype.update=function(t){this._blendState.dirty=false;if(t>=0&&this._cachedFrameIndices!==null){var a=this._cachedFrameIndices[t];if(a>=0&&this._cachedFrameIndex===a){this._transformDirty=false}else if(a>=0){this._transformDirty=true;this._cachedFrameIndex=a}else{if(this._hasConstraint){for(var r=0,i=this._armature._constraints;r<i.length;r++){var n=i[r];if(n._root===this){n.update()}}}if(this._transformDirty||this._parent!==null&&this._parent._childrenTransformDirty){this._transformDirty=true;this._cachedFrameIndex=-1}else if(this._cachedFrameIndex>=0){this._transformDirty=false;this._cachedFrameIndices[t]=this._cachedFrameIndex}else{this._transformDirty=true;this._cachedFrameIndex=-1}}}else{if(this._hasConstraint){for(var s=0,o=this._armature._constraints;s<o.length;s++){var n=o[s];if(n._root===this){n.update()}}}if(this._transformDirty||this._parent!==null&&this._parent._childrenTransformDirty){t=-1;this._transformDirty=true;this._cachedFrameIndex=-1}}if(this._transformDirty){this._transformDirty=false;this._childrenTransformDirty=true;for(var l=0,h=this._matrixCahce.length;l<h;l+=7){this._matrixCahce[l]=-1}this._updateVertices();if(this._cachedFrameIndex<0){var f=t>=0;if(this._localDirty){this._updateGlobalTransformMatrix(f)}if(f&&this._cachedFrameIndices!==null){this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global)}}else{this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex)}var u=1e3;var _=200;var c=2*this.global.x;var p=2*this.global.y;var m=e._helpPoint;this.globalTransformMatrix.transformPoint(u,-_,m);this._hullCache[0]=m.x;this._hullCache[1]=m.y;this._hullCache[2]=c-m.x;this._hullCache[3]=p-m.y;this.globalTransformMatrix.transformPoint(0,this._dY,m,true);this._hullCache[4]=m.x;this._hullCache[5]=m.y;this.globalTransformMatrix.transformPoint(_,u,m);this._hullCache[6]=m.x;this._hullCache[7]=m.y;this._hullCache[8]=c-m.x;this._hullCache[9]=p-m.y;this.globalTransformMatrix.transformPoint(this._dX,0,m,true);this._hullCache[10]=m.x;this._hullCache[11]=m.y}else if(this._childrenTransformDirty){this._childrenTransformDirty=false}this._localDirty=true};return e}(t.Bone);t.Surface=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a._localMatrix=new t.Matrix;a._colorTransform=new t.ColorTransform;a._displayDatas=[];a._displayList=[];a._deformVertices=null;a._rawDisplay=null;a._meshDisplay=null;return a}a.prototype._onClear=function(){e.prototype._onClear.call(this);var a=[];for(var r=0,i=this._displayList;r<i.length;r++){var n=i[r];if(n!==null&&n!==this._rawDisplay&&n!==this._meshDisplay&&a.indexOf(n)<0){a.push(n)}}for(var s=0,o=a;s<o.length;s++){var n=o[s];if(n instanceof t.Armature){n.dispose()}else{this._disposeDisplay(n,true)}}if(this._deformVertices!==null){this._deformVertices.returnToPool()}if(this._meshDisplay!==null&&this._meshDisplay!==this._rawDisplay){this._disposeDisplay(this._meshDisplay,false)}if(this._rawDisplay!==null){this._disposeDisplay(this._rawDisplay,false)}this.displayController=null;this._displayDirty=false;this._zOrderDirty=false;this._blendModeDirty=false;this._colorDirty=false;this._transformDirty=false;this._visible=true;this._blendMode=0;this._displayIndex=-1;this._animationDisplayIndex=-1;this._zOrder=0;this._cachedFrameIndex=-1;this._pivotX=0;this._pivotY=0;this._localMatrix.identity();this._colorTransform.identity();this._displayList.length=0;this._displayDatas.length=0;this._slotData=null;this._rawDisplayDatas=null;this._displayData=null;this._boundingBoxData=null;this._textureData=null;this._deformVertices=null;this._rawDisplay=null;this._meshDisplay=null;this._display=null;this._childArmature=null;this._parent=null;this._cachedFrameIndices=null};a.prototype._getDefaultRawDisplayData=function(t){var e=this._armature._armatureData.defaultSkin;if(e!==null){var a=e.getDisplays(this._slotData.name);if(a!==null){return t<a.length?a[t]:null}}return null};a.prototype._updateDisplayData=function(){var e=this._displayData;var r=this._deformVertices!==null?this._deformVertices.verticesData:null;var i=this._textureData;var n=null;var s=null;this._displayData=null;this._boundingBoxData=null;this._textureData=null;if(this._displayIndex>=0){if(this._rawDisplayDatas!==null){n=this._displayIndex<this._rawDisplayDatas.length?this._rawDisplayDatas[this._displayIndex]:null}if(n===null){n=this._getDefaultRawDisplayData(this._displayIndex)}if(this._displayIndex<this._displayDatas.length){this._displayData=this._displayDatas[this._displayIndex]}}if(this._displayData!==null){if(this._displayData.type===2){s=this._displayData.vertices}else if(this._displayData.type===4){s=this._displayData.vertices}else if(n!==null){if(n.type===2){s=n.vertices}else if(n.type===4){s=n.vertices}}if(this._displayData.type===3){this._boundingBoxData=this._displayData.boundingBox}else if(n!==null){if(n.type===3){this._boundingBoxData=n.boundingBox}}if(this._displayData.type===0){this._textureData=this._displayData.texture}else if(this._displayData.type===2){this._textureData=this._displayData.texture}}if(this._displayData!==e||s!==r||this._textureData!==i){if(s===null&&this._textureData!==null){var o=this._displayData;var l=this._textureData.parent.scale*this._armature._armatureData.scale;var h=this._textureData.frame;this._pivotX=o.pivot.x;this._pivotY=o.pivot.y;var f=h!==null?h:this._textureData.region;var u=f.width;var _=f.height;if(this._textureData.rotated&&h===null){u=f.height;_=f.width}this._pivotX*=u*l;this._pivotY*=_*l;if(h!==null){this._pivotX+=h.x*l;this._pivotY+=h.y*l}if(this._displayData!==null&&n!==null&&this._displayData!==n){n.transform.toMatrix(a._helpMatrix);a._helpMatrix.invert();a._helpMatrix.transformPoint(0,0,a._helpPoint);this._pivotX-=a._helpPoint.x;this._pivotY-=a._helpPoint.y;this._displayData.transform.toMatrix(a._helpMatrix);a._helpMatrix.invert();a._helpMatrix.transformPoint(0,0,a._helpPoint);this._pivotX+=a._helpPoint.x;this._pivotY+=a._helpPoint.y}if(!t.DragonBones.yDown){this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*l-this._pivotY}}else{this._pivotX=0;this._pivotY=0}if(n!==null){this.origin=n.transform}else if(this._displayData!==null){this.origin=this._displayData.transform}else{this.origin=null}if(s!==r){if(this._deformVertices===null){this._deformVertices=t.BaseObject.borrowObject(t.DeformVertices)}this._deformVertices.init(s,this._armature)}else if(this._deformVertices!==null&&this._textureData!==i){this._deformVertices.verticesDirty=true}this._displayDirty=true;this._transformDirty=true}};a.prototype._updateDisplay=function(){var e=this._display!==null?this._display:this._rawDisplay;var a=this._childArmature;if(this._displayIndex>=0&&this._displayIndex<this._displayList.length){this._display=this._displayList[this._displayIndex];if(this._display!==null&&this._display instanceof t.Armature){this._childArmature=this._display;this._display=this._childArmature.display}else{this._childArmature=null}}else{this._display=null;this._childArmature=null}var r=this._display!==null?this._display:this._rawDisplay;if(r!==e){this._onUpdateDisplay();this._replaceDisplay(e);this._transformDirty=true;this._visibleDirty=true;this._blendModeDirty=true;this._colorDirty=true}if(r===this._rawDisplay||r===this._meshDisplay){this._updateFrame()}if(this._childArmature!==a){if(a!==null){a._parent=null;a.clock=null;if(a.inheritAnimation){a.animation.reset()}}if(this._childArmature!==null){this._childArmature._parent=this;this._childArmature.clock=this._armature.clock;if(this._childArmature.inheritAnimation){if(this._childArmature.cacheFrameRate===0){var i=this._armature.cacheFrameRate;if(i!==0){this._childArmature.cacheFrameRate=i}}var n=null;if(this._displayData!==null&&this._displayData.type===1){n=this._displayData.actions}else if(this._displayIndex>=0&&this._rawDisplayDatas!==null){var s=this._displayIndex<this._rawDisplayDatas.length?this._rawDisplayDatas[this._displayIndex]:null;if(s===null){s=this._getDefaultRawDisplayData(this._displayIndex)}if(s!==null&&s.type===1){n=s.actions}}if(n!==null&&n.length>0){for(var o=0,l=n;o<l.length;o++){var h=l[o];var f=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(h,f,this._armature);f.slot=this;this._armature._bufferAction(f,false)}}else{this._childArmature.animation.play()}}}}};a.prototype._updateGlobalTransformMatrix=function(t){var e=this._parent._boneData.type===0?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix);this.globalTransformMatrix.concat(e);if(t){this.global.fromMatrix(this.globalTransformMatrix)}else{this._globalDirty=true}};a.prototype._setDisplayIndex=function(t,e){if(e===void 0){e=false}if(e){if(this._animationDisplayIndex===t){return false}this._animationDisplayIndex=t}if(this._displayIndex===t){return false}this._displayIndex=t;this._displayDirty=true;this._updateDisplayData();return this._displayDirty};a.prototype._setZorder=function(t){if(this._zOrder===t){}this._zOrder=t;this._zOrderDirty=true;return this._zOrderDirty};a.prototype._setColor=function(t){this._colorTransform.copyFrom(t);this._colorDirty=true;return this._colorDirty};a.prototype._setDisplayList=function(e){if(e!==null&&e.length>0){if(this._displayList.length!==e.length){this._displayList.length=e.length}for(var a=0,r=e.length;a<r;++a){var i=e[a];if(i!==null&&i!==this._rawDisplay&&i!==this._meshDisplay&&!(i instanceof t.Armature)&&this._displayList.indexOf(i)<0){this._initDisplay(i,true)}this._displayList[a]=i}}else if(this._displayList.length>0){this._displayList.length=0}if(this._displayIndex>=0&&this._displayIndex<this._displayList.length){this._displayDirty=this._display!==this._displayList[this._displayIndex]}else{this._displayDirty=this._display!==null}this._updateDisplayData();return this._displayDirty};a.prototype.init=function(t,e,a,r){if(this._slotData!==null){return}this._slotData=t;this._visibleDirty=true;this._blendModeDirty=true;this._colorDirty=true;this._blendMode=this._slotData.blendMode;this._zOrder=this._slotData.zOrder;this._colorTransform.copyFrom(this._slotData.color);this._rawDisplay=a;this._meshDisplay=r;this._armature=e;var i=this._armature.getBone(this._slotData.parent.name);if(i!==null){this._parent=i}else{}this._armature._addSlot(this);this._initDisplay(this._rawDisplay,false);if(this._rawDisplay!==this._meshDisplay){this._initDisplay(this._meshDisplay,false)}this._onUpdateDisplay();this._addDisplay()};a.prototype.update=function(t){if(this._displayDirty){this._displayDirty=false;this._updateDisplay();if(this._transformDirty){if(this.origin!==null){this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix)}else{this.global.copyFrom(this.offset).toMatrix(this._localMatrix)}}}if(this._zOrderDirty){this._zOrderDirty=false;this._updateZOrder()}if(t>=0&&this._cachedFrameIndices!==null){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e){this._transformDirty=false}else if(e>=0){this._transformDirty=true;this._cachedFrameIndex=e}else if(this._transformDirty||this._parent._childrenTransformDirty){this._transformDirty=true;this._cachedFrameIndex=-1}else if(this._cachedFrameIndex>=0){this._transformDirty=false;this._cachedFrameIndices[t]=this._cachedFrameIndex}else{this._transformDirty=true;this._cachedFrameIndex=-1}}else if(this._transformDirty||this._parent._childrenTransformDirty){t=-1;this._transformDirty=true;this._cachedFrameIndex=-1}if(this._display===null){return}if(this._visibleDirty){this._visibleDirty=false;this._updateVisible()}if(this._blendModeDirty){this._blendModeDirty=false;this._updateBlendMode()}if(this._colorDirty){this._colorDirty=false;this._updateColor()}if(this._deformVertices!==null&&this._deformVertices.verticesData!==null&&this._display===this._meshDisplay){var a=this._deformVertices.verticesData.weight!==null;var r=this._parent._boneData.type!==0;if(this._deformVertices.verticesDirty||a&&this._deformVertices.isBonesUpdate()||r&&this._parent._childrenTransformDirty){this._deformVertices.verticesDirty=false;this._updateMesh()}if(a||r){return}}if(this._transformDirty){this._transformDirty=false;if(this._cachedFrameIndex<0){var i=t>=0;this._updateGlobalTransformMatrix(i);if(i&&this._cachedFrameIndices!==null){this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global)}}else{this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex)}this._updateTransform()}};a.prototype.updateTransformAndMatrix=function(){if(this._transformDirty){this._transformDirty=false;this._updateGlobalTransformMatrix(false)}};a.prototype.replaceDisplayData=function(t,e){if(e===void 0){e=-1}if(e<0){if(this._displayIndex<0){e=0}else{e=this._displayIndex}}if(this._displayDatas.length<=e){this._displayDatas.length=e+1;for(var a=0,r=this._displayDatas.length;a<r;++a){if(!this._displayDatas[a]){this._displayDatas[a]=null}}}this._displayDatas[e]=t};a.prototype.containsPoint=function(t,e){if(this._boundingBoxData===null){return false}this.updateTransformAndMatrix();a._helpMatrix.copyFrom(this.globalTransformMatrix);a._helpMatrix.invert();a._helpMatrix.transformPoint(t,e,a._helpPoint);return this._boundingBoxData.containsPoint(a._helpPoint.x,a._helpPoint.y)};a.prototype.intersectsSegment=function(t,e,r,i,n,s,o){if(n===void 0){n=null}if(s===void 0){s=null}if(o===void 0){o=null}if(this._boundingBoxData===null){return 0}this.updateTransformAndMatrix();a._helpMatrix.copyFrom(this.globalTransformMatrix);a._helpMatrix.invert();a._helpMatrix.transformPoint(t,e,a._helpPoint);t=a._helpPoint.x;e=a._helpPoint.y;a._helpMatrix.transformPoint(r,i,a._helpPoint);r=a._helpPoint.x;i=a._helpPoint.y;var l=this._boundingBoxData.intersectsSegment(t,e,r,i,n,s,o);if(l>0){if(l===1||l===2){if(n!==null){this.globalTransformMatrix.transformPoint(n.x,n.y,n);if(s!==null){s.x=n.x;s.y=n.y}}else if(s!==null){this.globalTransformMatrix.transformPoint(s.x,s.y,s)}}else{if(n!==null){this.globalTransformMatrix.transformPoint(n.x,n.y,n)}if(s!==null){this.globalTransformMatrix.transformPoint(s.x,s.y,s)}}if(o!==null){this.globalTransformMatrix.transformPoint(Math.cos(o.x),Math.sin(o.x),a._helpPoint,true);o.x=Math.atan2(a._helpPoint.y,a._helpPoint.x);this.globalTransformMatrix.transformPoint(Math.cos(o.y),Math.sin(o.y),a._helpPoint,true);o.y=Math.atan2(a._helpPoint.y,a._helpPoint.x)}}return l};a.prototype.invalidUpdate=function(){this._displayDirty=true;this._transformDirty=true};Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible===t){return}this._visible=t;this._updateVisible()},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){if(this._setDisplayIndex(t)){this.update(-1)}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"name",{get:function(){return this._slotData.name},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"displayList",{get:function(){return this._displayList.concat()},set:function(e){var a=this._displayList.concat();var r=new Array;if(this._setDisplayList(e)){this.update(-1)}for(var i=0,n=a;i<n.length;i++){var s=n[i];if(s!==null&&s!==this._rawDisplay&&s!==this._meshDisplay&&this._displayList.indexOf(s)<0&&r.indexOf(s)<0){r.push(s)}}for(var o=0,l=r;o<l.length;o++){var s=l[o];if(s instanceof t.Armature){}else{this._disposeDisplay(s,true)}}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"slotData",{get:function(){return this._slotData},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"rawDisplayDatas",{get:function(){return this._rawDisplayDatas},set:function(t){if(this._rawDisplayDatas===t){return}this._displayDirty=true;this._rawDisplayDatas=t;if(this._rawDisplayDatas!==null){this._displayDatas.length=this._rawDisplayDatas.length;for(var e=0,a=this._displayDatas.length;e<a;++e){var r=this._rawDisplayDatas[e];if(r===null){r=this._getDefaultRawDisplayData(e)}this._displayDatas[e]=r}}else{this._displayDatas.length=0}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"displayData",{get:function(){return this._displayData},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},set:function(t){if(this._display===t){return}var e=this._displayList.length;if(this._displayIndex<0&&e===0){this._displayIndex=0}if(this._displayIndex<0){return}else{var a=this.displayList;if(e<=this._displayIndex){a.length=this._displayIndex+1}a[this._displayIndex]=t;this.displayList=a}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){if(this._childArmature===t){return}this.display=t},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:true,configurable:true});a.prototype.getDisplay=function(){return this._display};a.prototype.setDisplay=function(t){this.display=t};return a}(t.TransformObject);t.Slot=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}a.prototype._onClear=function(){this._armature=null;this._target=null;this._root=null;this._bone=null};Object.defineProperty(a.prototype,"name",{get:function(){return this._constraintData.name},enumerable:true,configurable:true});a._helpMatrix=new t.Matrix;a._helpTransform=new t.Transform;a._helpPoint=new t.Point;return a}(t.BaseObject);t.Constraint=e;var a=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}a.toString=function(){return"[class dragonBones.IKConstraint]"};a.prototype._onClear=function(){e.prototype._onClear.call(this);this._scaleEnabled=false;this._bendPositive=false;this._weight=1;this._constraintData=null};a.prototype._computeA=function(){var e=this._target.global;var a=this._root.global;var r=this._root.globalTransformMatrix;var i=Math.atan2(e.y-a.y,e.x-a.x);if(a.scaleX<0){i+=Math.PI}a.rotation+=t.Transform.normalizeRadian(i-a.rotation)*this._weight;a.toMatrix(r)};a.prototype._computeB=function(){var e=this._bone._boneData.length;var a=this._root;var r=this._target.global;var i=a.global;var n=this._bone.global;var s=this._bone.globalTransformMatrix;var o=s.a*e;var l=s.b*e;var h=o*o+l*l;var f=Math.sqrt(h);var u=n.x-i.x;var _=n.y-i.y;var c=u*u+_*_;var p=Math.sqrt(c);var m=n.rotation;var d=i.rotation;var v=Math.atan2(_,u);u=r.x-i.x;_=r.y-i.y;var y=u*u+_*_;var g=Math.sqrt(y);var b=0;if(f+p<=g||g+f<=p||g+p<=f){b=Math.atan2(r.y-i.y,r.x-i.x);if(f+p<=g){}else if(p<f){b+=Math.PI}}else{var D=(c-h+y)/(2*y);var T=Math.sqrt(c-D*D*y)/g;var A=i.x+u*D;var x=i.y+_*D;var P=-_*T;var O=u*T;var S=false;var E=a.parent;if(E!==null){var M=E.globalTransformMatrix;S=M.a*M.d-M.b*M.c<0}if(S!==this._bendPositive){n.x=A-P;n.y=x-O}else{n.x=A+P;n.y=x+O}b=Math.atan2(n.y-i.y,n.x-i.x)}var B=t.Transform.normalizeRadian(b-v);i.rotation=d+B*this._weight;i.toMatrix(a.globalTransformMatrix);var C=v+B*this._weight;n.x=i.x+Math.cos(C)*p;n.y=i.y+Math.sin(C)*p;var w=Math.atan2(r.y-n.y,r.x-n.x);if(n.scaleX<0){w+=Math.PI}n.rotation=i.rotation+m-d+t.Transform.normalizeRadian(w-B-m)*this._weight;n.toMatrix(s)};a.prototype.init=function(t,e){if(this._constraintData!==null){return}this._constraintData=t;this._armature=e;this._target=this._armature.getBone(this._constraintData.target.name);this._root=this._armature.getBone(this._constraintData.root.name);this._bone=this._constraintData.bone!==null?this._armature.getBone(this._constraintData.bone.name):null;{var a=this._constraintData;this._scaleEnabled=a.scaleEnabled;this._bendPositive=a.bendPositive;this._weight=a.weight}this._root._hasConstraint=true};a.prototype.update=function(){this._root.updateByConstraint();if(this._bone!==null){this._bone.updateByConstraint();this._computeB()}else{this._computeA()}};a.prototype.invalidUpdate=function(){this._root.invalidUpdate();if(this._bone!==null){this._bone.invalidUpdate()}};return a}(e);t.IKConstraint=a;var r=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t._bones=[];t._spaces=[];t._positions=[];t._curves=[];t._boneLengths=[];t._pathGlobalVertices=[];t._segments=[10];return t}a.toString=function(){return"[class dragonBones.PathConstraint]"};a.prototype._onClear=function(){e.prototype._onClear.call(this);this.dirty=false;this.pathOffset=0;this.position=0;this.spacing=0;this.rotateOffset=0;this.rotateMix=1;this.translateMix=1;this._pathSlot=null;this._bones.length=0;this._spaces.length=0;this._positions.length=0;this._curves.length=0;this._boneLengths.length=0;this._pathGlobalVertices.length=0};a.prototype._updatePathVertices=function(t){var e=this._armature;var a=e.armatureData.parent;var r=e.armatureData.scale;var i=a.intArray;var n=a.floatArray;var s=t.offset;var o=i[s+0];var l=i[s+2];this._pathGlobalVertices.length=o*2;var h=t.weight;if(h===null){var f=this._pathSlot.parent;f.updateByConstraint();var u=f.globalTransformMatrix;for(var _=0,c=l;_<o;_+=2){var p=n[c++]*r;var m=n[c++]*r;var d=u.a*p+u.c*m+u.tx;var v=u.b*p+u.d*m+u.ty;this._pathGlobalVertices[_]=d;this._pathGlobalVertices[_+1]=v}return}var y=this._pathSlot._deformVertices.bones;var g=h.bones.length;var b=h.offset;var D=i[b+1];var T=D;var A=b+2+g;for(var _=0,x=0;_<o;_++){var P=i[A++];var O=0,S=0;for(var E=0,M=P;E<M;E++){var B=i[A++];var C=y[B];if(C===null){continue}C.updateByConstraint();var u=C.globalTransformMatrix;var w=n[T++];var p=n[T++]*r;var m=n[T++]*r;O+=(u.a*p+u.c*m+u.tx)*w;S+=(u.b*p+u.d*m+u.ty)*w}this._pathGlobalVertices[x++]=O;this._pathGlobalVertices[x++]=S}};a.prototype._computeVertices=function(t,e,a,r){for(var i=a,n=t;i<e;i+=2){r[i]=this._pathGlobalVertices[n++];r[i+1]=this._pathGlobalVertices[n++]}};a.prototype._computeBezierCurve=function(t,e,a,r,i){var n=this._armature;var s=n.armatureData.parent.intArray;var o=s[t.vertices.offset+0];var l=this._positions;var h=this._spaces;var f=t.closed;var u=Array();var _=o*2;var c=_/6;var p=-1;var m=this.position;l.length=e*3+2;var d=0;if(!t.constantSpeed){var v=t.curveLengths;c-=f?1:2;d=v[c];if(r){m*=d}if(i){for(var y=0;y<e;y++){h[y]*=d}}u.length=8;for(var y=0,g=0,b=0;y<e;y++,g+=3){var D=h[y];m+=D;if(f){m%=d;if(m<0){m+=d}b=0}else if(m<0){continue}else if(m>d){continue}var T=0;for(;;b++){var A=v[b];if(m>A){continue}if(b===0){T=m/A}else{var x=v[b-1];T=(m-x)/(A-x)}break}if(b!==p){p=b;if(f&&b===c){this._computeVertices(_-4,4,0,u);this._computeVertices(0,4,4,u)}else{this._computeVertices(b*6+2,8,0,u)}}this.addCurvePosition(T,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,g,a)}return}if(f){_+=2;u.length=o;this._computeVertices(2,_-4,0,u);this._computeVertices(0,2,_-4,u);u[_-2]=u[0];u[_-1]=u[1]}else{c--;_-=4;u.length=_;this._computeVertices(2,_,0,u)}var P=new Array(c);d=0;var O=u[0],S=u[1],E=0,M=0,B=0,C=0,w=0,I=0;var F,N,R,k,j,L,V,U;for(var y=0,Y=2;y<c;y++,Y+=6){E=u[Y];M=u[Y+1];B=u[Y+2];C=u[Y+3];w=u[Y+4];I=u[Y+5];F=(O-E*2+B)*.1875;N=(S-M*2+C)*.1875;R=((E-B)*3-O+w)*.09375;k=((M-C)*3-S+I)*.09375;j=F*2+R;L=N*2+k;V=(E-O)*.75+F+R*.16666667;U=(M-S)*.75+N+k*.16666667;d+=Math.sqrt(V*V+U*U);V+=j;U+=L;j+=R;L+=k;d+=Math.sqrt(V*V+U*U);V+=j;U+=L;d+=Math.sqrt(V*V+U*U);V+=j+R;U+=L+k;d+=Math.sqrt(V*V+U*U);P[y]=d;O=w;S=I}if(r){m*=d}if(i){for(var y=0;y<e;y++){h[y]*=d}}var X=this._segments;var H=0;for(var y=0,g=0,b=0,$=0;y<e;y++,g+=3){var D=h[y];m+=D;var G=m;if(f){G%=d;if(G<0)G+=d;b=0}else if(G<0){continue}else if(G>d){continue}for(;;b++){var W=P[b];if(G>W)continue;if(b===0)G/=W;else{var z=P[b-1];G=(G-z)/(W-z)}break}if(b!==p){p=b;var K=b*6;O=u[K];S=u[K+1];E=u[K+2];M=u[K+3];B=u[K+4];C=u[K+5];w=u[K+6];I=u[K+7];F=(O-E*2+B)*.03;N=(S-M*2+C)*.03;R=((E-B)*3-O+w)*.006;k=((M-C)*3-S+I)*.006;j=F*2+R;L=N*2+k;V=(E-O)*.3+F+R*.16666667;U=(M-S)*.3+N+k*.16666667;H=Math.sqrt(V*V+U*U);X[0]=H;for(K=1;K<8;K++){V+=j;U+=L;j+=R;L+=k;H+=Math.sqrt(V*V+U*U);X[K]=H}V+=j;U+=L;H+=Math.sqrt(V*V+U*U);X[8]=H;V+=j+R;U+=L+k;H+=Math.sqrt(V*V+U*U);X[9]=H;$=0}G*=H;for(;;$++){var Z=X[$];if(G>Z)continue;if($===0)G/=Z;else{var z=X[$-1];G=$+(G-z)/(Z-z)}break}this.addCurvePosition(G*.1,O,S,E,M,B,C,w,I,l,g,a)}};a.prototype.addCurvePosition=function(t,e,a,r,i,n,s,o,l,h,f,u){if(t===0){h[f]=e;h[f+1]=a;h[f+2]=0;return}if(t===1){h[f]=o;h[f+1]=l;h[f+2]=0;return}var _=1-t;var c=_*_;var p=t*t;var m=c*_;var d=c*t*3;var v=_*p*3;var y=t*p;var g=m*e+d*r+v*n+y*o;var b=m*a+d*i+v*s+y*l;h[f]=g;h[f+1]=b;if(u){h[f+2]=Math.atan2(b-(m*a+d*i+v*s),g-(m*e+d*r+v*n))}else{h[f+2]=0}};a.prototype.init=function(t,e){this._constraintData=t;this._armature=e;var a=t;this.pathOffset=a.pathDisplayData.vertices.offset;this.position=a.position;this.spacing=a.spacing;this.rotateOffset=a.rotateOffset;this.rotateMix=a.rotateMix;this.translateMix=a.translateMix;this._root=this._armature.getBone(a.root.name);this._target=this._armature.getBone(a.target.name);this._pathSlot=this._armature.getSlot(a.pathSlot.name);for(var r=0,i=a.bones.length;r<i;r++){var n=this._armature.getBone(a.bones[r].name);if(n!==null){this._bones.push(n)}}if(a.rotateMode===2){this._boneLengths.length=this._bones.length}this._root._hasConstraint=true};a.prototype.update=function(){var e=this._pathSlot;if(e._deformVertices===null||e._deformVertices.verticesData===null||e._deformVertices.verticesData.offset!==this.pathOffset){return}var a=this._constraintData;var r=e._displayData;var i=false;var n=e._deformVertices;if(this._root._childrenTransformDirty){this._updatePathVertices(r.vertices);i=true}else if(n!==null&&(n.verticesDirty||n.isBonesUpdate())){this._updatePathVertices(r.vertices);n.verticesDirty=false;i=true}if(!i&&!this.dirty){return}var s=a.positionMode;var o=a.spacingMode;var l=a.rotateMode;var h=this._bones;var f=o===0;var u=l===2;var _=l===0;var c=h.length;var p=_?c:c+1;var m=this.spacing;var d=this._spaces;d.length=p;if(u||f){d[0]=0;for(var v=0,y=p-1;v<y;v++){var g=h[v];g.updateByConstraint();var b=g._boneData.length;var D=g.globalTransformMatrix;var T=b*D.a;var A=b*D.b;var x=Math.sqrt(T*T+A*A);if(u){this._boneLengths[v]=x}d[v+1]=(b+m)*x/b}}else{for(var v=0;v<p;v++){d[v]=m}}this._computeBezierCurve(r,p,_,s===1,o===2);var P=this._positions;var O=this.rotateOffset;var S=P[0],E=P[1];var M;if(O===0){M=l===1}else{M=false;var g=e.parent;if(g!==null){var D=g.globalTransformMatrix;O*=D.a*D.d-D.b*D.c>0?t.Transform.DEG_RAD:-t.Transform.DEG_RAD}}var B=this.rotateMix;var C=this.translateMix;for(var v=0,w=3;v<c;v++,w+=3){var g=h[v];g.updateByConstraint();var D=g.globalTransformMatrix;D.tx+=(S-D.tx)*C;D.ty+=(E-D.ty)*C;var T=P[w],A=P[w+1];var I=T-S,F=A-E;if(u){var N=this._boneLengths[v];var R=(Math.sqrt(I*I+F*F)/N-1)*B+1;D.a*=R;D.b*=R}S=T;E=A;if(B>0){var k=D.a,j=D.b,L=D.c,V=D.d,U=void 0,Y=void 0,X=void 0;if(_){U=P[w-1]}else{U=Math.atan2(F,I)}U-=Math.atan2(j,k);if(M){Y=Math.cos(U);X=Math.sin(U);var H=g._boneData.length;S+=(H*(Y*k-X*j)-I)*B;E+=(H*(X*k+Y*j)-F)*B}else{U+=O}if(U>t.Transform.PI){U-=t.Transform.PI_D}else if(U<-t.Transform.PI){U+=t.Transform.PI_D}U*=B;Y=Math.cos(U);X=Math.sin(U);D.a=Y*k-X*j;D.b=X*k+Y*j;D.c=Y*L-X*V;D.d=X*L+Y*V}g.global.fromMatrix(D)}this.dirty=false};a.prototype.invalidUpdate=function(){};return a}(e);t.PathConstraint=r})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function t(t){if(t===void 0){t=0}this.time=0;this.timeScale=1;this._systemTime=0;this._animatebles=[];this._clock=null;this.time=t;this._systemTime=(new Date).getTime()*.001}t.prototype.advanceTime=function(t){if(t!==t){t=0}var e=Date.now()*.001;if(t<0){t=e-this._systemTime}this._systemTime=e;if(this.timeScale!==1){t*=this.timeScale}if(t===0){return}if(t<0){this.time-=t}else{this.time+=t}var a=0,r=0,i=this._animatebles.length;for(;a<i;++a){var n=this._animatebles[a];if(n!==null){if(r>0){this._animatebles[a-r]=n;this._animatebles[a]=null}n.advanceTime(t)}else{r++}}if(r>0){i=this._animatebles.length;for(;a<i;++a){var s=this._animatebles[a];if(s!==null){this._animatebles[a-r]=s}else{r++}}this._animatebles.length-=r}};t.prototype.contains=function(t){if(t===this){return false}var e=t;while(e!==this&&e!==null){e=e.clock}return e===this};t.prototype.add=function(t){if(this._animatebles.indexOf(t)<0){this._animatebles.push(t);t.clock=this}};t.prototype.remove=function(t){var e=this._animatebles.indexOf(t);if(e>=0){this._animatebles[e]=null;t.clock=null}};t.prototype.clear=function(){for(var t=0,e=this._animatebles;t<e.length;t++){var a=e[t];if(a!==null){a.clock=null}}};Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock===t){return}if(this._clock!==null){this._clock.remove(this)}this._clock=t;if(this._clock!==null){this._clock.add(this)}},enumerable:true,configurable:true});t.clock=new t;return t}();t.WorldClock=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t._animationNames=[];t._animationStates=[];t._animations={};t._animationConfig=null;return t}a.toString=function(){return"[class dragonBones.Animation]"};a.prototype._onClear=function(){for(var t=0,e=this._animationStates;t<e.length;t++){var a=e[t];a.returnToPool()}for(var r in this._animations){delete this._animations[r]}if(this._animationConfig!==null){this._animationConfig.returnToPool()}this.timeScale=1;this._lockUpdate=false;this._animationDirty=false;this._inheritTimeScale=1;this._animationNames.length=0;this._animationStates.length=0;this._armature=null;this._animationConfig=null;this._lastAnimationState=null};a.prototype._fadeOut=function(t){switch(t.fadeOutMode){case 1:for(var e=0,a=this._animationStates;e<a.length;e++){var r=a[e];if(r._parent!==null){continue}if(r.layer===t.layer){r.fadeOut(t.fadeOutTime,t.pauseFadeOut)}}break;case 2:for(var i=0,n=this._animationStates;i<n.length;i++){var r=n[i];if(r._parent!==null){continue}if(r.group===t.group){r.fadeOut(t.fadeOutTime,t.pauseFadeOut)}}break;case 3:for(var s=0,o=this._animationStates;s<o.length;s++){var r=o[s];if(r._parent!==null){continue}if(r.layer===t.layer&&r.group===t.group){r.fadeOut(t.fadeOutTime,t.pauseFadeOut)}}break;case 4:for(var l=0,h=this._animationStates;l<h.length;l++){var r=h[l];if(r._parent!==null){continue}r.fadeOut(t.fadeOutTime,t.pauseFadeOut)}break;case 0:case 5:default:break}};a.prototype.init=function(e){if(this._armature!==null){return}this._armature=e;this._animationConfig=t.BaseObject.borrowObject(t.AnimationConfig)};a.prototype.advanceTime=function(t){if(t<0){t=-t}if(this._armature.inheritAnimation&&this._armature._parent!==null){this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale}else{this._inheritTimeScale=this.timeScale}if(this._inheritTimeScale!==1){t*=this._inheritTimeScale}var e=this._animationStates.length;if(e===1){var a=this._animationStates[0];if(a._fadeState>0&&a._subFadeState>0){this._armature._dragonBones.bufferObject(a);this._animationStates.length=0;this._lastAnimationState=null}else{var r=a._animationData;var i=r.cacheFrameRate;if(this._animationDirty&&i>0){this._animationDirty=false;for(var n=0,s=this._armature.getBones();n<s.length;n++){var o=s[n];o._cachedFrameIndices=r.getBoneCachedFrameIndices(o.name)}for(var l=0,h=this._armature.getSlots();l<h.length;l++){var f=h[l];var u=f.rawDisplayDatas;if(u!==null&&u.length>0){var _=u[0];if(_!==null){if(_.parent===this._armature.armatureData.defaultSkin){f._cachedFrameIndices=r.getSlotCachedFrameIndices(f.name);continue}}}f._cachedFrameIndices=null}}a.advanceTime(t,i)}}else if(e>1){for(var c=0,p=0;c<e;++c){var a=this._animationStates[c];if(a._fadeState>0&&a._subFadeState>0){p++;this._armature._dragonBones.bufferObject(a);this._animationDirty=true;if(this._lastAnimationState===a){this._lastAnimationState=null}}else{if(p>0){this._animationStates[c-p]=a}a.advanceTime(t,0)}if(c===e-1&&p>0){this._animationStates.length-=p;if(this._lastAnimationState===null&&this._animationStates.length>0){this._lastAnimationState=this._animationStates[this._animationStates.length-1]}}}this._armature._cacheFrameIndex=-1}else{this._armature._cacheFrameIndex=-1}};a.prototype.reset=function(){for(var t=0,e=this._animationStates;t<e.length;t++){var a=e[t];a.returnToPool()}this._animationDirty=false;this._animationConfig.clear();this._animationStates.length=0;this._lastAnimationState=null};a.prototype.stop=function(t){if(t===void 0){t=null}if(t!==null){var e=this.getState(t);if(e!==null){e.stop()}}else{for(var a=0,r=this._animationStates;a<r.length;a++){var e=r[a];e.stop()}}};a.prototype.playConfig=function(e){var a=e.animation;if(!(a in this._animations)){console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+a);return null}var r=this._animations[a];if(e.fadeOutMode===5){for(var i=0,n=this._animationStates;i<n.length;i++){var s=n[i];if(s._animationData===r){return s}}}if(this._animationStates.length===0){e.fadeInTime=0}else if(e.fadeInTime<0){e.fadeInTime=r.fadeInTime}if(e.fadeOutTime<0){e.fadeOutTime=e.fadeInTime}if(e.timeScale<=-100){e.timeScale=1/r.scale}if(r.frameCount>1){if(e.position<0){e.position%=r.duration;e.position=r.duration-e.position}else if(e.position===r.duration){e.position-=1e-6}else if(e.position>r.duration){e.position%=r.duration}if(e.duration>0&&e.position+e.duration>r.duration){e.duration=r.duration-e.position}if(e.playTimes<0){e.playTimes=r.playTimes}}else{e.playTimes=1;e.position=0;if(e.duration>0){e.duration=0}}if(e.duration===0){e.duration=-1}this._fadeOut(e);var o=t.BaseObject.borrowObject(t.AnimationState);o.init(this._armature,r,e);this._animationDirty=true;this._armature._cacheFrameIndex=-1;if(this._animationStates.length>0){var l=false;for(var h=0,f=this._animationStates.length;h<f;++h){if(o.layer>this._animationStates[h].layer){l=true;this._animationStates.splice(h,0,o);break}else if(h!==f-1&&o.layer>this._animationStates[h+1].layer){l=true;this._animationStates.splice(h+1,0,o);break}}if(!l){this._animationStates.push(o)}}else{this._animationStates.push(o)}for(var u=0,_=this._armature.getSlots();u<_.length;u++){var c=_[u];var p=c.childArmature;if(p!==null&&p.inheritAnimation&&p.animation.hasAnimation(a)&&p.animation.getState(a)===null){p.animation.fadeIn(a)}}var m=false;for(var d in r.animationTimelines){if(!this._lockUpdate){m=true;this._lockUpdate=true}var v=this.fadeIn(d,e.fadeInTime,1,o.layer,null,0);if(v!==null){v.resetToPose=false;v._parent=o;v.stop()}}if(m){this._lockUpdate=false}if(!this._lockUpdate){if(e.fadeInTime<=0){this._armature.advanceTime(0)}this._lastAnimationState=o}return o};a.prototype.play=function(t,e){if(t===void 0){t=null}if(e===void 0){e=-1}this._animationConfig.clear();this._animationConfig.resetToPose=true;this._animationConfig.playTimes=e;this._animationConfig.fadeInTime=0;this._animationConfig.animation=t!==null?t:"";if(t!==null&&t.length>0){this.playConfig(this._animationConfig)}else if(this._lastAnimationState===null){var a=this._armature.armatureData.defaultAnimation;if(a!==null){this._animationConfig.animation=a.name;this.playConfig(this._animationConfig)}}else if(!this._lastAnimationState.isPlaying&&!this._lastAnimationState.isCompleted){this._lastAnimationState.play()}else{this._animationConfig.animation=this._lastAnimationState.name;this.playConfig(this._animationConfig)}return this._lastAnimationState};a.prototype.fadeIn=function(t,e,a,r,i,n){if(e===void 0){e=-1}if(a===void 0){a=-1}if(r===void 0){r=0}if(i===void 0){i=null}if(n===void 0){n=3}this._animationConfig.clear();this._animationConfig.fadeOutMode=n;this._animationConfig.playTimes=a;this._animationConfig.layer=r;this._animationConfig.fadeInTime=e;this._animationConfig.animation=t;this._animationConfig.group=i!==null?i:"";return this.playConfig(this._animationConfig)};a.prototype.gotoAndPlayByTime=function(t,e,a){if(e===void 0){e=0}if(a===void 0){a=-1}this._animationConfig.clear();this._animationConfig.resetToPose=true;this._animationConfig.playTimes=a;this._animationConfig.position=e;this._animationConfig.fadeInTime=0;this._animationConfig.animation=t;return this.playConfig(this._animationConfig)};a.prototype.gotoAndPlayByFrame=function(t,e,a){if(e===void 0){e=0}if(a===void 0){a=-1}this._animationConfig.clear();this._animationConfig.resetToPose=true;this._animationConfig.playTimes=a;this._animationConfig.fadeInTime=0;this._animationConfig.animation=t;var r=t in this._animations?this._animations[t]:null;if(r!==null){this._animationConfig.position=r.duration*e/r.frameCount}return this.playConfig(this._animationConfig)};a.prototype.gotoAndPlayByProgress=function(t,e,a){if(e===void 0){e=0}if(a===void 0){a=-1}this._animationConfig.clear();this._animationConfig.resetToPose=true;this._animationConfig.playTimes=a;this._animationConfig.fadeInTime=0;this._animationConfig.animation=t;var r=t in this._animations?this._animations[t]:null;if(r!==null){this._animationConfig.position=r.duration*(e>0?e:0)}return this.playConfig(this._animationConfig)};a.prototype.gotoAndStopByTime=function(t,e){if(e===void 0){e=0}var a=this.gotoAndPlayByTime(t,e,1);if(a!==null){a.stop()}return a};a.prototype.gotoAndStopByFrame=function(t,e){if(e===void 0){e=0}var a=this.gotoAndPlayByFrame(t,e,1);if(a!==null){a.stop()}return a};a.prototype.gotoAndStopByProgress=function(t,e){if(e===void 0){e=0}var a=this.gotoAndPlayByProgress(t,e,1);if(a!==null){a.stop()}return a};a.prototype.getState=function(t){var e=this._animationStates.length;while(e--){var a=this._animationStates[e];if(a.name===t){return a}}return null};a.prototype.hasAnimation=function(t){return t in this._animations};a.prototype.getStates=function(){return this._animationStates};Object.defineProperty(a.prototype,"isPlaying",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){var a=e[t];if(a.isPlaying){return true}}return false},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"isCompleted",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){var a=e[t];if(!a.isCompleted){return false}}return this._animationStates.length>0},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"lastAnimationName",{get:function(){return this._lastAnimationState!==null?this._lastAnimationState.name:""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations===t){return}this._animationNames.length=0;for(var e in this._animations){delete this._animations[e]}for(var e in t){this._animationNames.push(e);this._animations[e]=t[e]}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animationConfig",{get:function(){this._animationConfig.clear();return this._animationConfig},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:true,configurable:true});a.prototype.gotoAndPlay=function(t,e,a,r,i,n,s,o,l){if(e===void 0){e=-1}if(a===void 0){a=-1}if(r===void 0){r=-1}if(i===void 0){i=0}if(n===void 0){n=null}if(s===void 0){s=3}if(o===void 0){o=true}if(l===void 0){l=true}console.warn("Deprecated.");o;l;this._animationConfig.clear();this._animationConfig.resetToPose=true;this._animationConfig.fadeOutMode=s;this._animationConfig.playTimes=r;this._animationConfig.layer=i;this._animationConfig.fadeInTime=e;this._animationConfig.animation=t;this._animationConfig.group=n!==null?n:"";var h=this._animations[t];if(h&&a>0){this._animationConfig.timeScale=h.duration/a}return this.playConfig(this._animationConfig)};a.prototype.gotoAndStop=function(t,e){if(e===void 0){e=0}console.warn("Deprecated.");return this.gotoAndStopByTime(t,e)};Object.defineProperty(a.prototype,"animationList",{get:function(){console.warn("Deprecated.");return this._animationNames},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animationDataList",{get:function(){console.warn("Deprecated.");var t=[];for(var e=0,a=this._animationNames.length;e<a;++e){t.push(this._animations[this._animationNames[e]])}return t},enumerable:true,configurable:true});return a}(t.BaseObject);t.Animation=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t._blendState=new r;t._boneMask=[];t._boneTimelines=[];t._surfaceTimelines=[];t._slotTimelines=[];t._constraintTimelines=[];t._animationTimelines=[];t._poseTimelines=[];t._bonePoses={};t._actionTimeline=null;t._zOrderTimeline=null;t._parent=null;return t}i.toString=function(){return"[class dragonBones.AnimationState]"};i.prototype._onClear=function(){for(var t=0,e=this._boneTimelines;t<e.length;t++){var a=e[t];a.returnToPool()}for(var r=0,i=this._surfaceTimelines;r<i.length;r++){var a=i[r];a.returnToPool()}for(var n=0,s=this._slotTimelines;n<s.length;n++){var a=s[n];a.returnToPool()}for(var o=0,l=this._constraintTimelines;o<l.length;o++){var a=l[o];a.returnToPool()}for(var h=0,f=this._animationTimelines;h<f.length;h++){var a=f[h];a.returnToPool()}for(var u in this._bonePoses){this._bonePoses[u].returnToPool();delete this._bonePoses[u]}if(this._actionTimeline!==null){this._actionTimeline.returnToPool()}if(this._zOrderTimeline!==null){this._zOrderTimeline.returnToPool()}this.actionEnabled=false;this.additiveBlending=false;this.displayControl=false;this.resetToPose=false;this.playTimes=1;this.layer=0;this.timeScale=1;this.weight=1;this.autoFadeOutTime=0;this.fadeTotalTime=0;this.name="";this.group="";this._timelineDirty=2;this._playheadState=0;this._fadeState=-1;this._subFadeState=-1;this._position=0;this._duration=0;this._fadeTime=0;this._time=0;this._fadeProgress=0;this._weightResult=0;this._blendState.clear();this._boneMask.length=0;this._boneTimelines.length=0;this._surfaceTimelines.length=0;this._slotTimelines.length=0;this._constraintTimelines.length=0;this._animationTimelines.length=0;this._poseTimelines.length=0;this._animationData=null;this._armature=null;this._actionTimeline=null;this._zOrderTimeline=null;this._parent=null};i.prototype._updateTimelines=function(){{for(var e=0,a=this._armature._constraints;e<a.length;e++){var r=a[e];var i=this._animationData.getConstraintTimelines(r.name);if(i!==null){for(var n=0,s=i;n<s.length;n++){var o=s[n];switch(o.type){case 30:{var l=t.BaseObject.borrowObject(t.IKConstraintTimelineState);l.constraint=r;l.init(this._armature,this,o);this._constraintTimelines.push(l);break}default:break}}}else if(this.resetToPose){var l=t.BaseObject.borrowObject(t.IKConstraintTimelineState);l.constraint=r;l.init(this._armature,this,null);this._constraintTimelines.push(l);this._poseTimelines.push(l)}}}{for(var h=0,f=this._armature.animation.getStates();h<f.length;h++){var u=f[h];if(u._parent!==this){continue}var i=this._animationData.getAnimationTimelines(u.name);if(i===null){continue}for(var _=0,c=i;_<c.length;_++){var o=c[_];switch(o.type){case 40:{var l=t.BaseObject.borrowObject(t.AnimationTimelineState);l.animationState=u;l.init(this._armature,this,o);this._animationTimelines.push(l);break}default:break}}}}};i.prototype._updateBoneAndSlotTimelines=function(){{var e={};for(var r=0,i=this._boneTimelines;r<i.length;r++){var n=i[r];var s=n.bone.name;if(!(s in e)){e[s]=[]}e[s].push(n)}for(var o=0,l=this._armature.getBones();o<l.length;o++){var h=l[o];var s=h.name;if(!this.containsBoneMask(s)){continue}if(s in e){delete e[s]}else if(h._boneData.type===0){var f=this._animationData.getBoneTimelines(s);var u=s in this._bonePoses?this._bonePoses[s]:this._bonePoses[s]=t.BaseObject.borrowObject(a);if(f!==null){for(var _=0,c=f;_<c.length;_++){var p=c[_];switch(p.type){case 10:{var n=t.BaseObject.borrowObject(t.BoneAllTimelineState);n.bone=h;n.bonePose=u;n.init(this._armature,this,p);this._boneTimelines.push(n);break}case 11:{var n=t.BaseObject.borrowObject(t.BoneTranslateTimelineState);n.bone=h;n.bonePose=u;n.init(this._armature,this,p);this._boneTimelines.push(n);break}case 12:{var n=t.BaseObject.borrowObject(t.BoneRotateTimelineState);n.bone=h;n.bonePose=u;n.init(this._armature,this,p);this._boneTimelines.push(n);break}case 13:{var n=t.BaseObject.borrowObject(t.BoneScaleTimelineState);n.bone=h;n.bonePose=u;n.init(this._armature,this,p);this._boneTimelines.push(n);break}default:break}}}else if(this.resetToPose){var n=t.BaseObject.borrowObject(t.BoneAllTimelineState);n.bone=h;n.bonePose=u;n.init(this._armature,this,null);this._boneTimelines.push(n);this._poseTimelines.push(n)}}else if(h._boneData.type===1){var f=this._animationData.getSurfaceTimelines(s);if(f!==null){for(var m=0,d=f;m<d.length;m++){var p=d[m];switch(p.type){case 50:{var n=t.BaseObject.borrowObject(t.SurfaceTimelineState);n.surface=h;n.init(this._armature,this,p);this._surfaceTimelines.push(n);break}default:break}}}else if(this.resetToPose){var n=t.BaseObject.borrowObject(t.SurfaceTimelineState);n.surface=h;n.init(this._armature,this,null);this._surfaceTimelines.push(n);this._poseTimelines.push(n)}}}for(var v in e){for(var y=0,g=e[v];y<g.length;y++){var n=g[y];this._boneTimelines.splice(this._boneTimelines.indexOf(n),1);n.returnToPool()}}}{var b={};var D=[];for(var T=0,A=this._slotTimelines;T<A.length;T++){var n=A[T];var s=n.slot.name;if(!(s in b)){b[s]=[]}b[s].push(n)}for(var x=0,P=this._armature.getSlots();x<P.length;x++){var O=P[x];var S=O.parent.name;if(!this.containsBoneMask(S)){continue}var s=O.name;var f=this._animationData.getSlotTimelines(s);if(s in b){delete b[s]}else{var E=false;var M=false;D.length=0;if(f!==null){for(var B=0,C=f;B<C.length;B++){var p=C[B];switch(p.type){case 20:{var n=t.BaseObject.borrowObject(t.SlotDislayTimelineState);n.slot=O;n.init(this._armature,this,p);this._slotTimelines.push(n);E=true;break}case 21:{var n=t.BaseObject.borrowObject(t.SlotColorTimelineState);n.slot=O;n.init(this._armature,this,p);this._slotTimelines.push(n);M=true;break}case 22:{var n=t.BaseObject.borrowObject(t.DeformTimelineState);n.slot=O;n.init(this._armature,this,p);this._slotTimelines.push(n);D.push(n.vertexOffset);break}default:break}}}if(this.resetToPose){if(!E){var n=t.BaseObject.borrowObject(t.SlotDislayTimelineState);n.slot=O;n.init(this._armature,this,null);this._slotTimelines.push(n);this._poseTimelines.push(n)}if(!M){var n=t.BaseObject.borrowObject(t.SlotColorTimelineState);n.slot=O;n.init(this._armature,this,null);this._slotTimelines.push(n);this._poseTimelines.push(n)}if(O.rawDisplayDatas!==null){for(var w=0,I=O.rawDisplayDatas;w<I.length;w++){var F=I[w];if(F!==null&&F.type===2){var N=F.vertices.offset;if(D.indexOf(N)<0){var n=t.BaseObject.borrowObject(t.DeformTimelineState);n.vertexOffset=N;n.slot=O;n.init(this._armature,this,null);this._slotTimelines.push(n);this._poseTimelines.push(n)}}}}}}}for(var v in b){for(var R=0,k=b[v];R<k.length;R++){var n=k[R];this._slotTimelines.splice(this._slotTimelines.indexOf(n),1);n.returnToPool()}}}};i.prototype._advanceFadeTime=function(e){var a=this._fadeState>0;if(this._subFadeState<0){this._subFadeState=0;var r=a?t.EventObject.FADE_OUT:t.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasDBEventListener(r)){var i=t.BaseObject.borrowObject(t.EventObject);i.type=r;i.armature=this._armature;i.animationState=this;this._armature._dragonBones.bufferEvent(i)}}if(e<0){e=-e}this._fadeTime+=e;if(this._fadeTime>=this.fadeTotalTime){this._subFadeState=1;this._fadeProgress=a?0:1}else if(this._fadeTime>0){this._fadeProgress=a?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime}else{this._fadeProgress=a?1:0}if(this._subFadeState>0){if(!a){this._playheadState|=1;this._fadeState=0}var r=a?t.EventObject.FADE_OUT_COMPLETE:t.EventObject.FADE_IN_COMPLETE;if(this._armature.eventDispatcher.hasDBEventListener(r)){var i=t.BaseObject.borrowObject(t.EventObject);i.type=r;i.armature=this._armature;i.animationState=this;this._armature._dragonBones.bufferEvent(i)}}};i.prototype.init=function(e,a,r){if(this._armature!==null){return}this._armature=e;this._animationData=a;this.resetToPose=r.resetToPose;this.additiveBlending=r.additiveBlending;this.displayControl=r.displayControl;this.actionEnabled=r.actionEnabled;this.layer=r.layer;this.playTimes=r.playTimes;this.timeScale=r.timeScale;this.fadeTotalTime=r.fadeInTime;this.autoFadeOutTime=r.autoFadeOutTime;this.weight=r.weight;this.name=r.name.length>0?r.name:r.animation;this.group=r.group;if(r.pauseFadeIn){this._playheadState=2}else{this._playheadState=3}if(r.duration<0){this._position=0;this._duration=this._animationData.duration;if(r.position!==0){if(this.timeScale>=0){this._time=r.position}else{this._time=r.position-this._duration}}else{this._time=0}}else{this._position=r.position;this._duration=r.duration;this._time=0}if(this.timeScale<0&&this._time===0){this._time=-1e-6}if(this.fadeTotalTime<=0){this._fadeProgress=.999999}if(r.boneMask.length>0){this._boneMask.length=r.boneMask.length;for(var i=0,n=this._boneMask.length;i<n;++i){this._boneMask[i]=r.boneMask[i]}}this._actionTimeline=t.BaseObject.borrowObject(t.ActionTimelineState);this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline);this._actionTimeline.currentTime=this._time;if(this._actionTimeline.currentTime<0){this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime}if(this._animationData.zOrderTimeline!==null){this._zOrderTimeline=t.BaseObject.borrowObject(t.ZOrderTimelineState);this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline)}};i.prototype.advanceTime=function(e,a){this._blendState.dirty=false;if(this._fadeState!==0||this._subFadeState!==0){this._advanceFadeTime(e)}if(this._playheadState===3){if(this.timeScale!==1){e*=this.timeScale}this._time+=e}if(this._timelineDirty!==0){if(this._timelineDirty===2){this._updateTimelines()}this._timelineDirty=0;this._updateBoneAndSlotTimelines()}if(this.weight===0){return}var r=this._fadeState===0&&a>0;var i=true;var n=true;var s=this._time;this._weightResult=this.weight*this._fadeProgress;if(this._parent!==null){this._weightResult*=this._parent._weightResult/this._parent._fadeProgress}if(this._actionTimeline.playState<=0){this._actionTimeline.update(s)}if(r){var o=a*2;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*o)/o}if(this._zOrderTimeline!==null&&this._zOrderTimeline.playState<=0){this._zOrderTimeline.update(s)}if(r){var l=Math.floor(this._actionTimeline.currentTime*a);if(this._armature._cacheFrameIndex===l){i=false;n=false}else{this._armature._cacheFrameIndex=l;if(this._animationData.cachedFrames[l]){n=false}else{this._animationData.cachedFrames[l]=true}}}if(i){if(n){for(var h=0,f=this._boneTimelines.length;h<f;++h){var u=this._boneTimelines[h];if(u.playState<=0){u.update(s)}if(h===f-1||u.bone!==this._boneTimelines[h+1].bone){var _=u.bone._blendState.update(this._weightResult,this.layer);if(_!==0){u.blend(_)}}}}for(var h=0,f=this._surfaceTimelines.length;h<f;++h){var u=this._surfaceTimelines[h];var _=u.surface._blendState.update(this._weightResult,this.layer);if(u.playState<=0){u.update(s)}if(_!==0){u.blend(_)}}if(this.displayControl){for(var h=0,f=this._slotTimelines.length;h<f;++h){var u=this._slotTimelines[h];var c=u.slot.displayController;if(c===null||c===this.name||c===this.group){if(u.playState<=0){u.update(s)}}}}for(var h=0,f=this._constraintTimelines.length;h<f;++h){var u=this._constraintTimelines[h];if(u.playState<=0){u.update(s)}}for(var h=0,f=this._animationTimelines.length;h<f;++h){var u=this._animationTimelines[h];var _=u.animationState._blendState.update(this._weightResult,this.layer);if(u.playState<=0){u.update(s)}if(_!==0){u.blend(_)}}}if(this._fadeState===0){if(this._subFadeState>0){this._subFadeState=0;if(this._poseTimelines.length>0){for(var p=0,m=this._poseTimelines;p<m.length;p++){var u=m[p];if(u instanceof t.BoneTimelineState){this._boneTimelines.splice(this._boneTimelines.indexOf(u),1)}else if(u instanceof t.SurfaceTimelineState){this._surfaceTimelines.splice(this._surfaceTimelines.indexOf(u),1)}else if(u instanceof t.SlotTimelineState){this._slotTimelines.splice(this._slotTimelines.indexOf(u),1)}else if(u instanceof t.ConstraintTimelineState){this._constraintTimelines.splice(this._constraintTimelines.indexOf(u),1)}u.returnToPool()}this._poseTimelines.length=0}}if(this._actionTimeline.playState>0){if(this.autoFadeOutTime>=0){this.fadeOut(this.autoFadeOutTime)}}}};i.prototype.play=function(){this._playheadState=3};i.prototype.stop=function(){this._playheadState&=1};i.prototype.fadeOut=function(t,e){if(e===void 0){e=true}if(t<0){t=0}if(e){this._playheadState&=2}if(this._fadeState>0){if(t>this.fadeTotalTime-this._fadeTime){return}}else{this._fadeState=1;this._subFadeState=-1;if(t<=0||this._fadeProgress<=0){this._fadeProgress=1e-6}for(var a=0,r=this._boneTimelines;a<r.length;a++){var i=r[a];i.fadeOut()}for(var n=0,s=this._surfaceTimelines;n<s.length;n++){var i=s[n];i.fadeOut()}for(var o=0,l=this._slotTimelines;o<l.length;o++){var i=l[o];i.fadeOut()}for(var h=0,f=this._constraintTimelines;h<f.length;h++){var i=f[h];i.fadeOut()}for(var u=0,_=this._animationTimelines;u<_.length;u++){var i=_[u];i.animationState.fadeOut(t,e);i.fadeOut()}}this.displayControl=false;this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0;this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)};i.prototype.containsBoneMask=function(t){return this._boneMask.length===0||this._boneMask.indexOf(t)>=0};i.prototype.addBoneMask=function(t,e){if(e===void 0){e=true}var a=this._armature.getBone(t);if(a===null){return}if(this._boneMask.indexOf(t)<0){this._boneMask.push(t)}if(e){for(var r=0,i=this._armature.getBones();r<i.length;r++){var n=i[r];if(this._boneMask.indexOf(n.name)<0&&a.contains(n)){this._boneMask.push(n.name)}}}this._timelineDirty=1};i.prototype.removeBoneMask=function(t,e){if(e===void 0){e=true}var a=this._boneMask.indexOf(t);if(a>=0){this._boneMask.splice(a,1)}if(e){var r=this._armature.getBone(t);if(r!==null){var i=this._armature.getBones();if(this._boneMask.length>0){for(var n=0,s=i;n<s.length;n++){var o=s[n];var l=this._boneMask.indexOf(o.name);if(l>=0&&r.contains(o)){this._boneMask.splice(l,1)}}}else{for(var h=0,f=i;h<f.length;h++){var o=f[h];if(o===r){continue}if(!r.contains(o)){this._boneMask.push(o.name)}}}}}this._timelineDirty=1};i.prototype.removeAllBoneMask=function(){this._boneMask.length=0;this._timelineDirty=1};Object.defineProperty(i.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"isFadeComplete",{get:function(){return this._fadeState===0},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"isPlaying",{get:function(){return(this._playheadState&2)!==0&&this._actionTimeline.playState<=0},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"totalTime",{get:function(){return this._duration},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(t){var e=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if(t<0||this._duration<t){t=t%this._duration+e*this._duration;if(t<0){t+=this._duration}}if(this.playTimes>0&&e===this.playTimes-1&&t===this._duration){t=this._duration-1e-6}if(this._time===t){return}this._time=t;this._actionTimeline.setCurrentTime(this._time);if(this._zOrderTimeline!==null){this._zOrderTimeline.playState=-1}for(var a=0,r=this._boneTimelines;a<r.length;a++){var i=r[a];i.playState=-1}for(var n=0,s=this._slotTimelines;n<s.length;n++){var i=s[n];i.playState=-1}},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"animationData",{get:function(){return this._animationData},enumerable:true,configurable:true});return i}(t.BaseObject);t.AnimationState=e;var a=function(e){__extends(a,e);function a(){var a=e!==null&&e.apply(this,arguments)||this;a.current=new t.Transform;a.delta=new t.Transform;a.result=new t.Transform;return a}a.toString=function(){return"[class dragonBones.BonePose]"};a.prototype._onClear=function(){this.current.identity();this.delta.identity();this.result.identity()};return a}(t.BaseObject);t.BonePose=a;var r=function(){function t(){}t.prototype.update=function(t,e){if(this.dirty){if(this.leftWeight>0){if(this.layer!==e){if(this.layerWeight>=this.leftWeight){this.leftWeight=0;return 0}else{this.layer=e;this.leftWeight-=this.layerWeight;this.layerWeight=0}}}else{return 0}t*=this.leftWeight;this.layerWeight+=t;this.blendWeight=t;return 2}this.dirty=true;this.layer=e;this.layerWeight=t;this.leftWeight=1;this.blendWeight=t;return 1};t.prototype.clear=function(){this.dirty=false;this.layer=0;this.leftWeight=0;this.layerWeight=0;this.blendWeight=0};return t}();t.BlendState=r})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype._onClear=function(){this.playState=-1;this.currentPlayTimes=-1;this.currentTime=-1;this._tweenState=0;this._frameRate=0;this._frameValueOffset=0;this._frameCount=0;this._frameOffset=0;this._frameIndex=-1;this._frameRateR=0;this._position=0;this._duration=0;this._timeScale=1;this._timeOffset=0;this._dragonBonesData=null;this._animationData=null;this._timelineData=null;this._armature=null;this._animationState=null;this._actionTimeline=null;this._frameArray=null;this._frameIntArray=null;this._frameFloatArray=null;this._timelineArray=null;this._frameIndices=null};e.prototype._setCurrentTime=function(t){var e=this.playState;var a=this.currentPlayTimes;var r=this.currentTime;if(this._actionTimeline!==null&&this._frameCount<=1){this.playState=this._actionTimeline.playState>=0?1:-1;this.currentPlayTimes=1;this.currentTime=this._actionTimeline.currentTime}else if(this._actionTimeline===null||this._timeScale!==1||this._timeOffset!==0){var i=this._animationState.playTimes;var n=i*this._duration;t*=this._timeScale;if(this._timeOffset!==0){t+=this._timeOffset*this._animationData.duration}if(i>0&&(t>=n||t<=-n)){if(this.playState<=0&&this._animationState._playheadState===3){this.playState=1}this.currentPlayTimes=i;if(t<0){this.currentTime=0}else{this.currentTime=this._duration+1e-6}}else{if(this.playState!==0&&this._animationState._playheadState===3){this.playState=0}if(t<0){t=-t;this.currentPlayTimes=Math.floor(t/this._duration);this.currentTime=this._duration-t%this._duration}else{this.currentPlayTimes=Math.floor(t/this._duration);this.currentTime=t%this._duration}}this.currentTime+=this._position}else{this.playState=this._actionTimeline.playState;this.currentPlayTimes=this._actionTimeline.currentPlayTimes;this.currentTime=this._actionTimeline.currentTime}if(this.currentPlayTimes===a&&this.currentTime===r){return false}if(e<0&&this.playState!==e||this.playState<=0&&this.currentPlayTimes!==a){this._frameIndex=-1}return true};e.prototype.init=function(t,e,a){this._armature=t;this._animationState=e;this._timelineData=a;this._actionTimeline=this._animationState._actionTimeline;if(this===this._actionTimeline){this._actionTimeline=null}this._animationData=this._animationState._animationData;this._frameRate=this._animationData.parent.frameRate;this._frameRateR=1/this._frameRate;this._position=this._animationState._position;this._duration=this._animationState._duration;this._dragonBonesData=this._animationData.parent.parent;if(this._timelineData!==null){this._frameIntArray=this._dragonBonesData.frameIntArray;this._frameFloatArray=this._dragonBonesData.frameFloatArray;this._frameArray=this._dragonBonesData.frameArray;this._timelineArray=this._dragonBonesData.timelineArray;this._frameIndices=this._dragonBonesData.frameIndices;this._frameCount=this._timelineArray[this._timelineData.offset+2];this._frameValueOffset=this._timelineArray[this._timelineData.offset+4];this._timeScale=100/this._timelineArray[this._timelineData.offset+0];this._timeOffset=this._timelineArray[this._timelineData.offset+1]*.01}};e.prototype.fadeOut=function(){};e.prototype.update=function(t){if(this._setCurrentTime(t)){if(this._frameCount>1){var e=Math.floor(this.currentTime*this._frameRate);var a=this._frameIndices[this._timelineData.frameIndicesOffset+e];if(this._frameIndex!==a){this._frameIndex=a;this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex];this._onArriveAtFrame()}}else if(this._frameIndex<0){this._frameIndex=0;if(this._timelineData!==null){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]}this._onArriveAtFrame()}if(this._tweenState!==0){this._onUpdateFrame()}}};return e}(t.BaseObject);t.TimelineState=e;var a=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e._getEasingValue=function(t,e,a){var r=e;switch(t){case 3:r=Math.pow(e,2);break;case 4:r=1-Math.pow(1-e,2);break;case 5:r=.5*(1-Math.cos(e*Math.PI));break}return(r-e)*a+e};e._getEasingCurveValue=function(t,e,a,r){if(t<=0){return 0}else if(t>=1){return 1}var i=a+1;var n=Math.floor(t*i);var s=n===0?0:e[r+n-1];var o=n===i-1?1e4:e[r+n];return(s+(o-s)*(t*i-n))*1e-4};e.prototype._onClear=function(){t.prototype._onClear.call(this);this._tweenType=0;this._curveCount=0;this._framePosition=0;this._frameDurationR=0;this._tweenProgress=0;this._tweenEasing=0};e.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||this._animationState.playTimes===0||this._animationState.currentPlayTimes<this._animationState.playTimes-1)){this._tweenType=this._frameArray[this._frameOffset+1];this._tweenState=this._tweenType===0?1:2;if(this._tweenType===2){this._curveCount=this._frameArray[this._frameOffset+2]}else if(this._tweenType!==0&&this._tweenType!==1){this._tweenEasing=this._frameArray[this._frameOffset+2]*.01}this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR;if(this._frameIndex===this._frameCount-1){this._frameDurationR=1/(this._animationData.duration-this._framePosition)}else{var t=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1];var e=this._frameArray[t]*this._frameRateR-this._framePosition;if(e>0){this._frameDurationR=1/e}else{this._frameDurationR=0}}}else{this._tweenState=1}};e.prototype._onUpdateFrame=function(){if(this._tweenState===2){this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR;if(this._tweenType===2){this._tweenProgress=e._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3)}else if(this._tweenType!==1){this._tweenProgress=e._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)}}else{this._tweenProgress=0}};return e}(e);t.TweenTimelineState=a;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype._onClear=function(){t.prototype._onClear.call(this);this.bone=null;this.bonePose=null};e.prototype.blend=function(t){var e=this.bone._blendState.blendWeight;var a=this.bone.animationPose;var r=this.bonePose.result;if(t===2){a.x+=r.x*e;a.y+=r.y*e;a.rotation+=r.rotation*e;a.skew+=r.skew*e;a.scaleX+=(r.scaleX-1)*e;a.scaleY+=(r.scaleY-1)*e}else if(e!==1){a.x=r.x*e;a.y=r.y*e;a.rotation=r.rotation*e;a.skew=r.skew*e;a.scaleX=(r.scaleX-1)*e+1;a.scaleY=(r.scaleY-1)*e+1}else{a.x=r.x;a.y=r.y;a.rotation=r.rotation;a.skew=r.skew;a.scaleX=r.scaleX;a.scaleY=r.scaleY}if(this._animationState._fadeState!==0||this._animationState._subFadeState!==0){this.bone._transformDirty=true}};return e}(a);t.BoneTimelineState=r;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype._onClear=function(){t.prototype._onClear.call(this);this.slot=null};return e}(a);t.SlotTimelineState=i;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype._onClear=function(){t.prototype._onClear.call(this);this.constraint=null};return e}(a);t.ConstraintTimelineState=n})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}a.toString=function(){return"[class dragonBones.ActionTimelineState]"};a.prototype._onCrossFrame=function(e){var a=this._armature.eventDispatcher;if(this._animationState.actionEnabled){var r=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+e];var i=this._frameArray[r+1];var n=this._animationData.parent.actions;for(var s=0;s<i;++s){var o=this._frameArray[r+2+s];var l=n[o];if(l.type===0){var h=t.BaseObject.borrowObject(t.EventObject);h.time=this._frameArray[r]/this._frameRate;h.animationState=this._animationState;t.EventObject.actionDataToInstance(l,h,this._armature);this._armature._bufferAction(h,true)}else{var f=l.type===10?t.EventObject.FRAME_EVENT:t.EventObject.SOUND_EVENT;if(l.type===11||a.hasDBEventListener(f)){var h=t.BaseObject.borrowObject(t.EventObject);h.time=this._frameArray[r]/this._frameRate;h.animationState=this._animationState;t.EventObject.actionDataToInstance(l,h,this._armature);this._armature._dragonBones.bufferEvent(h)}}}}};a.prototype._onArriveAtFrame=function(){};a.prototype._onUpdateFrame=function(){};a.prototype.update=function(e){var a=this.playState;var r=this.currentPlayTimes;var i=this.currentTime;if(this._setCurrentTime(e)){var n=this._armature.eventDispatcher;if(a<0){if(this.playState!==a){if(this._animationState.displayControl&&this._animationState.resetToPose){this._armature._sortZOrder(null,0)}r=this.currentPlayTimes;if(n.hasDBEventListener(t.EventObject.START)){var s=t.BaseObject.borrowObject(t.EventObject);s.type=t.EventObject.START;s.armature=this._armature;s.animationState=this._animationState;this._armature._dragonBones.bufferEvent(s)}}else{return}}var o=this._animationState.timeScale<0;var l=null;var h=null;if(this.currentPlayTimes!==r){if(n.hasDBEventListener(t.EventObject.LOOP_COMPLETE)){l=t.BaseObject.borrowObject(t.EventObject);l.type=t.EventObject.LOOP_COMPLETE;l.armature=this._armature;l.animationState=this._animationState}if(this.playState>0){if(n.hasDBEventListener(t.EventObject.COMPLETE)){h=t.BaseObject.borrowObject(t.EventObject);h.type=t.EventObject.COMPLETE;h.armature=this._armature;h.animationState=this._animationState}}}if(this._frameCount>1){var f=this._timelineData;var u=Math.floor(this.currentTime*this._frameRate);var _=this._frameIndices[f.frameIndicesOffset+u];if(this._frameIndex!==_){var c=this._frameIndex;this._frameIndex=_;if(this._timelineArray!==null){this._frameOffset=this._animationData.frameOffset+this._timelineArray[f.offset+5+this._frameIndex];if(o){if(c<0){var p=Math.floor(i*this._frameRate);c=this._frameIndices[f.frameIndicesOffset+p];if(this.currentPlayTimes===r){if(c===_){c=-1}}}while(c>=0){var m=this._animationData.frameOffset+this._timelineArray[f.offset+5+c];var d=this._frameArray[m]/this._frameRate;if(this._position<=d&&d<=this._position+this._duration){this._onCrossFrame(c)}if(l!==null&&c===0){this._armature._dragonBones.bufferEvent(l);l=null}if(c>0){c--}else{c=this._frameCount-1}if(c===_){break}}}else{if(c<0){var p=Math.floor(i*this._frameRate);c=this._frameIndices[f.frameIndicesOffset+p];var m=this._animationData.frameOffset+this._timelineArray[f.offset+5+c];var d=this._frameArray[m]/this._frameRate;if(this.currentPlayTimes===r){if(i<=d){if(c>0){c--}else{c=this._frameCount-1}}else if(c===_){c=-1}}}while(c>=0){if(c<this._frameCount-1){c++}else{c=0}var m=this._animationData.frameOffset+this._timelineArray[f.offset+5+c];var d=this._frameArray[m]/this._frameRate;if(this._position<=d&&d<=this._position+this._duration){this._onCrossFrame(c)}if(l!==null&&c===0){this._armature._dragonBones.bufferEvent(l);l=null}if(c===_){break}}}}}}else if(this._frameIndex<0){this._frameIndex=0;if(this._timelineData!==null){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];var d=this._frameArray[this._frameOffset]/this._frameRate;if(this.currentPlayTimes===r){if(i<=d){this._onCrossFrame(this._frameIndex)}}else if(this._position<=d){if(!o&&l!==null){this._armature._dragonBones.bufferEvent(l);l=null}this._onCrossFrame(this._frameIndex)}}}if(l!==null){this._armature._dragonBones.bufferEvent(l)}if(h!==null){this._armature._dragonBones.bufferEvent(h)}}};a.prototype.setCurrentTime=function(t){this._setCurrentTime(t);this._frameIndex=-1};return a}(t.TimelineState);t.ActionTimelineState=e;var a=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"};e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this._frameArray[this._frameOffset+1];if(t>0){this._armature._sortZOrder(this._frameArray,this._frameOffset+2)}else{this._armature._sortZOrder(null,0)}}};e.prototype._onUpdateFrame=function(){};return e}(t.TimelineState);t.ZOrderTimelineState=a;var r=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}a.toString=function(){return"[class dragonBones.BoneAllTimelineState]"};a.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var t=this._animationData.frameFloatOffset+this._frameValueOffset+this._frameIndex*6;var a=this._armature._armatureData.scale;var r=this._frameFloatArray;var i=this.bonePose.current;var n=this.bonePose.delta;i.x=r[t++]*a;i.y=r[t++]*a;i.rotation=r[t++];i.skew=r[t++];i.scaleX=r[t++];i.scaleY=r[t++];if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){t=this._animationData.frameFloatOffset+this._frameValueOffset}n.x=r[t++]*a-i.x;n.y=r[t++]*a-i.y;n.rotation=r[t++]-i.rotation;n.skew=r[t++]-i.skew;n.scaleX=r[t++]-i.scaleX;n.scaleY=r[t++]-i.scaleY}else{n.x=0;n.y=0;n.rotation=0;n.skew=0;n.scaleX=0;n.scaleY=0}}else{var i=this.bonePose.current;var n=this.bonePose.delta;i.x=0;i.y=0;i.rotation=0;i.skew=0;i.scaleX=1;i.scaleY=1;n.x=0;n.y=0;n.rotation=0;n.skew=0;n.scaleX=0;n.scaleY=0}};a.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this);var t=this.bonePose.current;var a=this.bonePose.delta;var r=this.bonePose.result;this.bone._transformDirty=true;if(this._tweenState!==2){this._tweenState=0}r.x=t.x+a.x*this._tweenProgress;r.y=t.y+a.y*this._tweenProgress;r.rotation=t.rotation+a.rotation*this._tweenProgress;r.skew=t.skew+a.skew*this._tweenProgress;r.scaleX=t.scaleX+a.scaleX*this._tweenProgress;r.scaleY=t.scaleY+a.scaleY*this._tweenProgress};a.prototype.fadeOut=function(){var e=this.bonePose.result;e.rotation=t.Transform.normalizeRadian(e.rotation);e.skew=t.Transform.normalizeRadian(e.skew)};return a}(t.BoneTimelineState);t.BoneAllTimelineState=r;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var e=this._animationData.frameFloatOffset+this._frameValueOffset+this._frameIndex*2;var a=this._armature._armatureData.scale;var r=this._frameFloatArray;var i=this.bonePose.current;var n=this.bonePose.delta;i.x=r[e++]*a;i.y=r[e++]*a;if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){e=this._animationData.frameFloatOffset+this._frameValueOffset}n.x=r[e++]*a-i.x;n.y=r[e++]*a-i.y}else{n.x=0;n.y=0}}else{var i=this.bonePose.current;var n=this.bonePose.delta;i.x=0;i.y=0;n.x=0;n.y=0}};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.bonePose.current;var a=this.bonePose.delta;var r=this.bonePose.result;this.bone._transformDirty=true;if(this._tweenState!==2){this._tweenState=0}r.x=e.x+a.x*this._tweenProgress;r.y=e.y+a.y*this._tweenProgress};return e}(t.BoneTimelineState);t.BoneTranslateTimelineState=i;var n=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}a.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"};a.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var a=this._animationData.frameFloatOffset+this._frameValueOffset+this._frameIndex*2;var r=this._frameFloatArray;var i=this.bonePose.current;var n=this.bonePose.delta;i.rotation=r[a++];i.skew=r[a++];if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){a=this._animationData.frameFloatOffset+this._frameValueOffset;n.rotation=t.Transform.normalizeRadian(r[a++]-i.rotation)}else{n.rotation=r[a++]-i.rotation}n.skew=r[a++]-i.skew}else{n.rotation=0;n.skew=0}}else{var i=this.bonePose.current;var n=this.bonePose.delta;i.rotation=0;i.skew=0;n.rotation=0;n.skew=0}};a.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this);var t=this.bonePose.current;var a=this.bonePose.delta;var r=this.bonePose.result;this.bone._transformDirty=true;if(this._tweenState!==2){this._tweenState=0}r.rotation=t.rotation+a.rotation*this._tweenProgress;r.skew=t.skew+a.skew*this._tweenProgress};a.prototype.fadeOut=function(){var e=this.bonePose.result;e.rotation=t.Transform.normalizeRadian(e.rotation);e.skew=t.Transform.normalizeRadian(e.skew)};return a}(t.BoneTimelineState);t.BoneRotateTimelineState=n;var s=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var e=this._animationData.frameFloatOffset+this._frameValueOffset+this._frameIndex*2;var a=this._frameFloatArray;var r=this.bonePose.current;var i=this.bonePose.delta;r.scaleX=a[e++];r.scaleY=a[e++];if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){e=this._animationData.frameFloatOffset+this._frameValueOffset}i.scaleX=a[e++]-r.scaleX;i.scaleY=a[e++]-r.scaleY}else{i.scaleX=0;i.scaleY=0}}else{var r=this.bonePose.current;var i=this.bonePose.delta;r.scaleX=1;r.scaleY=1;i.scaleX=0;i.scaleY=0}};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.bonePose.current;var a=this.bonePose.delta;var r=this.bonePose.result;this.bone._transformDirty=true;if(this._tweenState!==2){this._tweenState=0}r.scaleX=e.scaleX+a.scaleX*this._tweenProgress;r.scaleY=e.scaleY+a.scaleY*this._tweenProgress};return e}(t.BoneTimelineState);t.BoneScaleTimelineState=s;var o=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._current=[];e._delta=[];e._result=[];return e}e.toString=function(){return"[class dragonBones.SurfaceTimelineState]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.surface=null;this._frameFloatOffset=0;this._valueCount=0;this._deformCount=0;this._valueOffset=0;this._current.length=0;this._delta.length=0;this._result.length=0};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var e=this._animationData.frameFloatOffset+this._frameValueOffset+this._frameIndex*this._valueCount;var a=this._armature._armatureData.scale;var r=this._frameFloatArray;if(this._tweenState===2){var i=e+this._valueCount;if(this._frameIndex===this._frameCount-1){i=this._animationData.frameFloatOffset+this._frameValueOffset}for(var n=0;n<this._valueCount;++n){this._delta[n]=r[i+n]*a-(this._current[n]=r[e+n]*a)}}else{for(var n=0;n<this._valueCount;++n){this._current[n]=r[e+n]*a}}}else{for(var n=0;n<this._valueCount;++n){this._current[n]=0}}};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);this.surface._transformDirty=true;if(this._tweenState!==2){this._tweenState=0}for(var e=0;e<this._valueCount;++e){this._result[e]=this._current[e]+this._delta[e]*this._tweenProgress}};e.prototype.init=function(e,a,r){t.prototype.init.call(this,e,a,r);if(this._timelineData!==null){var i=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._deformCount=this._frameIntArray[i+1];this._valueCount=this._frameIntArray[i+2];this._valueOffset=this._frameIntArray[i+3];this._frameFloatOffset=this._frameIntArray[i+4]+this._animationData.frameFloatOffset}else{this._deformCount=this.surface._deformVertices.length;this._valueCount=this._deformCount;this._valueOffset=0;this._frameFloatOffset=0}this._current.length=this._valueCount;this._delta.length=this._valueCount;this._result.length=this._valueCount;for(var n=0;n<this._valueCount;++n){this._delta[n]=0}};e.prototype.blend=function(t){var e=this.surface._blendState.blendWeight;var a=this.surface._deformVertices;for(var r=0;r<this._deformCount;++r){var i=0;if(r<this._valueOffset){i=this._frameFloatArray[this._frameFloatOffset+r]}else if(r<this._valueOffset+this._valueCount){i=this._result[r-this._valueOffset]}else{i=this._frameFloatArray[this._frameFloatOffset+r-this._valueCount]}if(t===2){a[r]+=i*e}else if(e!==1){a[r]=i*e}else{a[r]=i}}if(this._animationState._fadeState!==0||this._animationState._subFadeState!==0){this.surface._transformDirty=true}};return e}(t.TweenTimelineState);t.SurfaceTimelineState=o;var l=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.SlotDislayTimelineState]"};e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this._timelineData!==null?this._frameArray[this._frameOffset+1]:this.slot._slotData.displayIndex;if(this.slot.displayIndex!==t){this.slot._setDisplayIndex(t,true)}}};return e}(t.SlotTimelineState);t.SlotDislayTimelineState=l;var h=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._current=[0,0,0,0,0,0,0,0];e._delta=[0,0,0,0,0,0,0,0];e._result=[0,0,0,0,0,0,0,0];return e}e.toString=function(){return"[class dragonBones.SlotColorTimelineState]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this._dirty=false};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var e=this._dragonBonesData.intArray;var a=this._frameIntArray;var r=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex*1;var i=a[r];if(i<0){i+=65536}this._current[0]=e[i++];this._current[1]=e[i++];this._current[2]=e[i++];this._current[3]=e[i++];this._current[4]=e[i++];this._current[5]=e[i++];this._current[6]=e[i++];this._current[7]=e[i++];if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){i=a[this._animationData.frameIntOffset+this._frameValueOffset]}else{i=a[r+1*1]}if(i<0){i+=65536}this._delta[0]=e[i++]-this._current[0];this._delta[1]=e[i++]-this._current[1];this._delta[2]=e[i++]-this._current[2];this._delta[3]=e[i++]-this._current[3];this._delta[4]=e[i++]-this._current[4];this._delta[5]=e[i++]-this._current[5];this._delta[6]=e[i++]-this._current[6];this._delta[7]=e[i++]-this._current[7]}}else{var n=this.slot._slotData.color;this._current[0]=n.alphaMultiplier*100;this._current[1]=n.redMultiplier*100;this._current[2]=n.greenMultiplier*100;this._current[3]=n.blueMultiplier*100;this._current[4]=n.alphaOffset;this._current[5]=n.redOffset;this._current[6]=n.greenOffset;this._current[7]=n.blueOffset}};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);this._dirty=true;if(this._tweenState!==2){this._tweenState=0}this._result[0]=(this._current[0]+this._delta[0]*this._tweenProgress)*.01;this._result[1]=(this._current[1]+this._delta[1]*this._tweenProgress)*.01;this._result[2]=(this._current[2]+this._delta[2]*this._tweenProgress)*.01;this._result[3]=(this._current[3]+this._delta[3]*this._tweenProgress)*.01;this._result[4]=this._current[4]+this._delta[4]*this._tweenProgress;this._result[5]=this._current[5]+this._delta[5]*this._tweenProgress;this._result[6]=this._current[6]+this._delta[6]*this._tweenProgress;this._result[7]=this._current[7]+this._delta[7]*this._tweenProgress};e.prototype.fadeOut=function(){this._tweenState=0;this._dirty=false};e.prototype.update=function(e){t.prototype.update.call(this,e);if(this._tweenState!==0||this._dirty){var a=this.slot._colorTransform;if(this._animationState._fadeState!==0||this._animationState._subFadeState!==0){if(a.alphaMultiplier!==this._result[0]||a.redMultiplier!==this._result[1]||a.greenMultiplier!==this._result[2]||a.blueMultiplier!==this._result[3]||a.alphaOffset!==this._result[4]||a.redOffset!==this._result[5]||a.greenOffset!==this._result[6]||a.blueOffset!==this._result[7]){var r=Math.pow(this._animationState._fadeProgress,4);a.alphaMultiplier+=(this._result[0]-a.alphaMultiplier)*r;a.redMultiplier+=(this._result[1]-a.redMultiplier)*r;a.greenMultiplier+=(this._result[2]-a.greenMultiplier)*r;a.blueMultiplier+=(this._result[3]-a.blueMultiplier)*r;a.alphaOffset+=(this._result[4]-a.alphaOffset)*r;a.redOffset+=(this._result[5]-a.redOffset)*r;a.greenOffset+=(this._result[6]-a.greenOffset)*r;a.blueOffset+=(this._result[7]-a.blueOffset)*r;this.slot._colorDirty=true}}else if(this._dirty){this._dirty=false;if(a.alphaMultiplier!==this._result[0]||a.redMultiplier!==this._result[1]||a.greenMultiplier!==this._result[2]||a.blueMultiplier!==this._result[3]||a.alphaOffset!==this._result[4]||a.redOffset!==this._result[5]||a.greenOffset!==this._result[6]||a.blueOffset!==this._result[7]){a.alphaMultiplier=this._result[0];a.redMultiplier=this._result[1];a.greenMultiplier=this._result[2];a.blueMultiplier=this._result[3];a.alphaOffset=this._result[4];a.redOffset=this._result[5];a.greenOffset=this._result[6];a.blueOffset=this._result[7];this.slot._colorDirty=true}}}};return e}(t.SlotTimelineState);t.SlotColorTimelineState=h;var f=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._current=[];e._delta=[];e._result=[];return e}e.toString=function(){return"[class dragonBones.DeformTimelineState]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.vertexOffset=0;this._dirty=false;this._frameFloatOffset=0;this._valueCount=0;this._deformCount=0;this._valueOffset=0;this._current.length=0;this._delta.length=0;this._result.length=0};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);if(this._timelineData!==null){var e=this._animationData.frameFloatOffset+this._frameValueOffset+this._frameIndex*this._valueCount;var a=this._armature._armatureData.scale;var r=this._frameFloatArray;if(this._tweenState===2){var i=e+this._valueCount;if(this._frameIndex===this._frameCount-1){i=this._animationData.frameFloatOffset+this._frameValueOffset}for(var n=0;n<this._valueCount;++n){this._delta[n]=r[i+n]*a-(this._current[n]=r[e+n]*a)}}else{for(var n=0;n<this._valueCount;++n){this._current[n]=r[e+n]*a}}}else{for(var n=0;n<this._valueCount;++n){this._current[n]=0}}};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);this._dirty=true;if(this._tweenState!==2){this._tweenState=0}for(var e=0;e<this._valueCount;++e){this._result[e]=this._current[e]+this._delta[e]*this._tweenProgress}};e.prototype.init=function(e,a,r){t.prototype.init.call(this,e,a,r);if(this._timelineData!==null){var i=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this.vertexOffset=this._frameIntArray[i+0];if(this.vertexOffset<0){this.vertexOffset+=65536}this._deformCount=this._frameIntArray[i+1];this._valueCount=this._frameIntArray[i+2];this._valueOffset=this._frameIntArray[i+3];this._frameFloatOffset=this._frameIntArray[i+4]+this._animationData.frameFloatOffset}else{var n=this.slot._deformVertices;this._deformCount=n!==null?n.vertices.length:0;this._valueCount=this._deformCount;this._valueOffset=0;this._frameFloatOffset=0}this._current.length=this._valueCount;this._delta.length=this._valueCount;this._result.length=this._valueCount;for(var s=0;s<this._valueCount;++s){this._delta[s]=0}};e.prototype.fadeOut=function(){this._tweenState=0;this._dirty=false};e.prototype.update=function(e){var a=this.slot._deformVertices;if(a===null||a.verticesData===null||a.verticesData.offset!==this.vertexOffset){return}t.prototype.update.call(this,e);if(this._tweenState!==0||this._dirty){var r=a.vertices;if(this._animationState._fadeState!==0||this._animationState._subFadeState!==0){var i=Math.pow(this._animationState._fadeProgress,2);for(var n=0;n<this._deformCount;++n){if(n<this._valueOffset){r[n]+=(this._frameFloatArray[this._frameFloatOffset+n]-r[n])*i}else if(n<this._valueOffset+this._valueCount){r[n]+=(this._result[n-this._valueOffset]-r[n])*i}else{r[n]+=(this._frameFloatArray[this._frameFloatOffset+n-this._valueCount]-r[n])*i}}a.verticesDirty=true}else if(this._dirty){this._dirty=false;for(var n=0;n<this._deformCount;++n){if(n<this._valueOffset){r[n]=this._frameFloatArray[this._frameFloatOffset+n]}else if(n<this._valueOffset+this._valueCount){r[n]=this._result[n-this._valueOffset]}else{r[n]=this._frameFloatArray[this._frameFloatOffset+n-this._valueCount]}}a.verticesDirty=true}}};return e}(t.SlotTimelineState);t.DeformTimelineState=f;var u=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this._current=0;this._delta=0};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);var e=this.constraint;if(this._timelineData!==null){var a=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex*2;var r=this._frameIntArray;var i=r[a++]!==0;this._current=r[a++]*.01;if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){a=this._animationData.frameIntOffset+this._frameValueOffset}this._delta=r[a+1]*.01-this._current}else{this._delta=0}e._bendPositive=i}else{var n=e._constraintData;this._current=n.weight;this._delta=0;e._bendPositive=n.bendPositive}e.invalidUpdate()};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);if(this._tweenState!==2){this._tweenState=0}var e=this.constraint;e._weight=this._current+this._delta*this._tweenProgress;e.invalidUpdate()};return e}(t.ConstraintTimelineState);t.IKConstraintTimelineState=u;var _=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._floats=[0,0,0,0,0,0];return e}e.toString=function(){return"[class dragonBones.AnimationTimelineState]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);this.animationState=null};e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);if(this._timelineData===null){return}var e=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex*2;var a=1/this.animationState._animationData.parent.frameRate;var r=this._frameIntArray;this._floats[0]=r[e++]*a;this._floats[3]=r[e++]*.01;if(this._tweenState===2){if(this._frameIndex===this._frameCount-1){e=this._animationData.frameIntOffset+this._frameValueOffset}this._floats[1]=r[e++]*a-this._floats[0];this._floats[4]=r[e++]*.01-this._floats[3]}else{this._floats[1]=0;this._floats[4]=0}};e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);if(this._tweenState!==2){this._tweenState=0}if(this._floats[0]>=0){this._floats[2]=this._floats[0]+this._floats[1]*this._tweenProgress}this._floats[5]=this._floats[3]+this._floats[4]*this._tweenProgress};e.prototype.blend=function(t){var e=this.animationState;var a=e._blendState.blendWeight;if(t===2){e.weight+=this._floats[5]*a;e.currentTime+=this._floats[2]*a}else{e.weight=this._floats[5]*a;e.currentTime=this._floats[2]*a}};return e}(t.TweenTimelineState);t.AnimationTimelineState=_})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.actionDataToInstance=function(t,a,r){if(t.type===0){a.type=e.FRAME_EVENT}else{a.type=t.type===10?e.FRAME_EVENT:e.SOUND_EVENT}a.name=t.name;a.armature=r;a.actionData=t;a.data=t.data;if(t.bone!==null){a.bone=r.getBone(t.bone.name)}if(t.slot!==null){a.slot=r.getSlot(t.slot.name)}};e.toString=function(){return"[class dragonBones.EventObject]"};e.prototype._onClear=function(){this.time=0;this.type="";this.name="";this.armature=null;this.bone=null;this.slot=null;this.animationState=null;this.actionData=null;this.data=null};e.START="start";e.LOOP_COMPLETE="loopComplete";e.COMPLETE="complete";e.FADE_IN="fadeIn";e.FADE_IN_COMPLETE="fadeInComplete";e.FADE_OUT="fadeOut";e.FADE_OUT_COMPLETE="fadeOutComplete";e.FRAME_EVENT="frameEvent";e.SOUND_EVENT="soundEvent";return e}(t.BaseObject);t.EventObject=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function e(){}e._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 2;case"armature":return 0;case"movieclip":return 1;default:return 0}};e._getBoneType=function(t){switch(t.toLowerCase()){case"bone":return 0;case"surface":return 1;default:return 0}};e._getDisplayType=function(t){switch(t.toLowerCase()){case"image":return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4;default:return 0}};e._getBoundingBoxType=function(t){switch(t.toLowerCase()){case"rectangle":return 0;case"ellipse":return 1;case"polygon":return 2;default:return 0}};e._getActionType=function(t){switch(t.toLowerCase()){case"play":return 0;case"frame":return 10;case"sound":return 11;default:return 0}};e._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}};e._getPositionMode=function(t){switch(t.toLocaleLowerCase()){case"percent":return 1;case"fixed":return 0;default:return 1}};e._getSpacingMode=function(t){switch(t.toLocaleLowerCase()){case"length":return 0;case"percent":return 2;case"fixed":return 1;default:return 0}};e._getRotateMode=function(t){switch(t.toLocaleLowerCase()){case"tangent":return 0;case"chain":return 1;case"chainscale":return 2;default:return 0}};e.parseDragonBonesData=function(e){console.warn("Deprecated.");if(e instanceof ArrayBuffer){return t.BinaryDataParser.getInstance().parseDragonBonesData(e)}else{return t.ObjectDataParser.getInstance().parseDragonBonesData(e)}};e.parseTextureAtlasData=function(a,r){if(r===void 0){r=1}console.warn("");var i={};var n=a[e.SUB_TEXTURE];for(var s=0,o=n.length;s<o;s++){var l=n[s];var h=l[e.NAME];var f=new t.Rectangle;var u=null;f.x=l[e.X]/r;f.y=l[e.Y]/r;f.width=l[e.WIDTH]/r;f.height=l[e.HEIGHT]/r;if(e.FRAME_WIDTH in l){u=new t.Rectangle;u.x=l[e.FRAME_X]/r;u.y=l[e.FRAME_Y]/r;u.width=l[e.FRAME_WIDTH]/r;u.height=l[e.FRAME_HEIGHT]/r}i[h]={region:f,frame:u,rotated:false}}return i};e.DATA_VERSION_2_3="2.3";e.DATA_VERSION_3_0="3.0";e.DATA_VERSION_4_0="4.0";e.DATA_VERSION_4_5="4.5";e.DATA_VERSION_5_0="5.0";e.DATA_VERSION_5_5="5.5";e.DATA_VERSION=e.DATA_VERSION_5_5;e.DATA_VERSIONS=[e.DATA_VERSION_4_0,e.DATA_VERSION_4_5,e.DATA_VERSION_5_0,e.DATA_VERSION_5_5];e.TEXTURE_ATLAS="textureAtlas";e.SUB_TEXTURE="SubTexture";e.FORMAT="format";e.IMAGE_PATH="imagePath";e.WIDTH="width";e.HEIGHT="height";e.ROTATED="rotated";e.FRAME_X="frameX";e.FRAME_Y="frameY";e.FRAME_WIDTH="frameWidth";e.FRAME_HEIGHT="frameHeight";e.DRADON_BONES="dragonBones";e.USER_DATA="userData";e.ARMATURE="armature";e.BONE="bone";e.SURFACE="surface";e.SLOT="slot";e.CONSTRAINT="constraint";e.IK="ik";e.PATH_CONSTRAINT="path";e.SKIN="skin";e.DISPLAY="display";e.ANIMATION="animation";e.Z_ORDER="zOrder";e.FFD="ffd";e.FRAME="frame";e.TRANSLATE_FRAME="translateFrame";e.ROTATE_FRAME="rotateFrame";e.SCALE_FRAME="scaleFrame";e.DISPLAY_FRAME="displayFrame";e.COLOR_FRAME="colorFrame";e.DEFAULT_ACTIONS="defaultActions";e.ACTIONS="actions";e.EVENTS="events";e.INTS="ints";e.FLOATS="floats";e.STRINGS="strings";e.CANVAS="canvas";e.TRANSFORM="transform";e.PIVOT="pivot";e.AABB="aabb";e.COLOR="color";e.VERSION="version";e.COMPATIBLE_VERSION="compatibleVersion";e.FRAME_RATE="frameRate";e.TYPE="type";e.SUB_TYPE="subType";e.NAME="name";e.PARENT="parent";e.TARGET="target";e.STAGE="stage";e.SHARE="share";e.PATH="path";e.LENGTH="length";e.DISPLAY_INDEX="displayIndex";e.BLEND_MODE="blendMode";e.INHERIT_TRANSLATION="inheritTranslation";e.INHERIT_ROTATION="inheritRotation";e.INHERIT_SCALE="inheritScale";e.INHERIT_REFLECTION="inheritReflection";e.INHERIT_ANIMATION="inheritAnimation";e.INHERIT_DEFORM="inheritDeform";e.SEGMENT_X="segmentX";e.SEGMENT_Y="segmentY";e.BEND_POSITIVE="bendPositive";e.CHAIN="chain";e.WEIGHT="weight";e.FADE_IN_TIME="fadeInTime";e.PLAY_TIMES="playTimes";e.SCALE="scale";e.OFFSET="offset";e.POSITION="position";e.DURATION="duration";e.TWEEN_EASING="tweenEasing";e.TWEEN_ROTATE="tweenRotate";e.TWEEN_SCALE="tweenScale";e.CLOCK_WISE="clockwise";e.CURVE="curve";e.SOUND="sound";e.EVENT="event";e.ACTION="action";e.X="x";e.Y="y";e.SKEW_X="skX";e.SKEW_Y="skY";e.SCALE_X="scX";e.SCALE_Y="scY";e.VALUE="value";e.ROTATE="rotate";e.SKEW="skew";e.ALPHA_OFFSET="aO";e.RED_OFFSET="rO";e.GREEN_OFFSET="gO";e.BLUE_OFFSET="bO";e.ALPHA_MULTIPLIER="aM";e.RED_MULTIPLIER="rM";e.GREEN_MULTIPLIER="gM";e.BLUE_MULTIPLIER="bM";e.UVS="uvs";e.VERTICES="vertices";e.TRIANGLES="triangles";e.WEIGHTS="weights";e.SLOT_POSE="slotPose";e.BONE_POSE="bonePose";e.GLUE_WEIGHTS="glueWeights";e.GLUE_MESHES="glueMeshes";e.BONES="bones";e.POSITION_MODE="positionMode";e.SPACING_MODE="spacingMode";e.ROTATE_MODE="rotateMode";e.SPACING="spacing";e.ROTATE_OFFSET="rotateOffset";e.ROTATE_MIX="rotateMix";e.TRANSLATE_MIX="translateMix";e.TARGET_DISPLAY="targetDisplay";e.CLOSED="closed";e.CONSTANT_SPEED="constantSpeed";e.VERTEX_COUNT="vertexCount";e.LENGTHS="lengths";e.GOTO_AND_PLAY="gotoAndPlay";e.DEFAULT_NAME="default";return e}();t.DataParser=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(r,e);function r(){var a=e!==null&&e.apply(this,arguments)||this;a._rawTextureAtlasIndex=0;a._rawBones=[];a._data=null;a._armature=null;a._bone=null;a._surface=null;a._slot=null;a._skin=null;a._mesh=null;a._animation=null;a._timeline=null;a._rawTextureAtlases=null;a._defaultColorOffset=-1;a._prevClockwise=0;a._prevRotation=0;a._helpMatrixA=new t.Matrix;a._helpMatrixB=new t.Matrix;a._helpTransform=new t.Transform;a._helpColorTransform=new t.ColorTransform;a._helpPoint=new t.Point;a._helpArray=[];a._intArray=[];a._floatArray=[];a._frameIntArray=[];a._frameFloatArray=[];a._frameArray=[];a._timelineArray=[];a._cacheRawMeshes=[];a._cacheMeshes=[];a._actionFrames=[];a._weightSlotPose={};a._weightBonePoses={};a._cacheBones={};a._slotChildActions={};return a}r._getBoolean=function(t,e,a){if(e in t){var r=t[e];var i=typeof r;if(i==="boolean"){return r}else if(i==="string"){switch(r){case"0":case"NaN":case"":case"false":case"null":case"undefined":return false;default:return true}}else{return!!r}}return a};r._getNumber=function(t,e,a){if(e in t){var r=t[e];if(r===null||r==="NaN"){return a}return+r||0}return a};r._getString=function(e,a,r){if(a in e){var i=e[a];var n=typeof i;if(n==="string"){if(t.DragonBones.webAssembly){for(var s=0,o=i.length;s<o;++s){if(i.charCodeAt(s)>255){return encodeURI(i)}}}return i}return String(i)}return r};r.prototype._getCurvePoint=function(t,e,a,r,i,n,s,o,l,h){var f=1-l;var u=f*f;var _=l*l;var c=f*u;var p=3*l*u;var m=3*f*_;var d=l*_;h.x=c*t+p*a+m*i+d*s;h.y=c*e+p*r+m*n+d*o};r.prototype._samplingEasingCurve=function(t,e){var a=t.length;var r=-2;for(var i=0,n=e.length;i<n;++i){var s=(i+1)/(n+1);while((r+6<a?t[r+6]:1)<s){r+=6}var o=r>=0&&r+6<a;var l=o?t[r]:0;var h=o?t[r+1]:0;var f=t[r+2];var u=t[r+3];var _=t[r+4];var c=t[r+5];var p=o?t[r+6]:1;var m=o?t[r+7]:1;var d=0;var v=1;while(v-d>1e-4){var y=(v+d)*.5;this._getCurvePoint(l,h,f,u,_,c,p,m,y,this._helpPoint);if(s-this._helpPoint.x>0){d=y}else{v=y}}e[i]=this._helpPoint.y}};r.prototype._parseActionDataInFrame=function(e,a,r,i){if(t.DataParser.EVENT in e){this._mergeActionFrame(e[t.DataParser.EVENT],a,10,r,i)}if(t.DataParser.SOUND in e){this._mergeActionFrame(e[t.DataParser.SOUND],a,11,r,i)}if(t.DataParser.ACTION in e){this._mergeActionFrame(e[t.DataParser.ACTION],a,0,r,i)}if(t.DataParser.EVENTS in e){this._mergeActionFrame(e[t.DataParser.EVENTS],a,10,r,i)}if(t.DataParser.ACTIONS in e){this._mergeActionFrame(e[t.DataParser.ACTIONS],a,0,r,i)}};r.prototype._mergeActionFrame=function(e,r,i,n,s){var o=t.DragonBones.webAssembly?this._armature.actions.size():this._armature.actions.length;var l=this._parseActionData(e,i,n,s);var h=0;var f=null;for(var u=0,_=l;u<_.length;u++){var c=_[u];this._armature.addAction(c,false)}if(this._actionFrames.length===0){f=new a;f.frameStart=0;this._actionFrames.push(f);f=null}for(var p=0,m=this._actionFrames;p<m.length;p++){var d=m[p];if(d.frameStart===r){f=d;break}else if(d.frameStart>r){break}h++}if(f===null){f=new a;f.frameStart=r;this._actionFrames.splice(h+1,0,f)}for(var v=0;v<l.length;++v){f.actions.push(o+v)}};r.prototype._parseArmature=function(e,a){var i=t.BaseObject.borrowObject(t.ArmatureData);i.name=r._getString(e,t.DataParser.NAME,"");i.frameRate=r._getNumber(e,t.DataParser.FRAME_RATE,this._data.frameRate);i.scale=a;if(t.DataParser.TYPE in e&&typeof e[t.DataParser.TYPE]==="string"){i.type=t.DataParser._getArmatureType(e[t.DataParser.TYPE])}else{i.type=r._getNumber(e,t.DataParser.TYPE,0)}if(i.frameRate===0){i.frameRate=24}this._armature=i;if(t.DataParser.CANVAS in e){var n=e[t.DataParser.CANVAS];var s=t.BaseObject.borrowObject(t.CanvasData);if(t.DataParser.COLOR in n){s.hasBackground=true}else{s.hasBackground=false}s.color=r._getNumber(n,t.DataParser.COLOR,0);s.x=r._getNumber(n,t.DataParser.X,0)*i.scale;s.y=r._getNumber(n,t.DataParser.Y,0)*i.scale;s.width=r._getNumber(n,t.DataParser.WIDTH,0)*i.scale;s.height=r._getNumber(n,t.DataParser.HEIGHT,0)*i.scale;i.canvas=s}if(t.DataParser.AABB in e){var o=e[t.DataParser.AABB];i.aabb.x=r._getNumber(o,t.DataParser.X,0)*i.scale;i.aabb.y=r._getNumber(o,t.DataParser.Y,0)*i.scale;i.aabb.width=r._getNumber(o,t.DataParser.WIDTH,0)*i.scale;i.aabb.height=r._getNumber(o,t.DataParser.HEIGHT,0)*i.scale}if(t.DataParser.BONE in e){var l=e[t.DataParser.BONE];for(var h=0,f=l;h<f.length;h++){var u=f[h];var _=r._getString(u,t.DataParser.PARENT,"");var c=this._parseBone(u);if(_.length>0){var p=i.getBone(_);if(p!==null){c.parent=p}else{if(!(_ in this._cacheBones)){this._cacheBones[_]=[]}this._cacheBones[_].push(c)}}if(c.name in this._cacheBones){for(var m=0,d=this._cacheBones[c.name];m<d.length;m++){var v=d[m];v.parent=c}delete this._cacheBones[c.name]}i.addBone(c);this._rawBones.push(c)}}if(t.DataParser.IK in e){var y=e[t.DataParser.IK];for(var g=0,b=y;g<b.length;g++){var D=b[g];var T=this._parseIKConstraint(D);if(T){i.addConstraint(T)}}}i.sortBones();if(t.DataParser.SLOT in e){var A=0;var x=e[t.DataParser.SLOT];for(var P=0,O=x;P<O.length;P++){var S=O[P];i.addSlot(this._parseSlot(S,A++))}}if(t.DataParser.SKIN in e){var E=e[t.DataParser.SKIN];for(var M=0,B=E;M<B.length;M++){var C=B[M];i.addSkin(this._parseSkin(C))}}if(t.DataParser.PATH_CONSTRAINT in e){var w=e[t.DataParser.PATH_CONSTRAINT];for(var I=0,F=w;I<F.length;I++){var N=F[I];var T=this._parsePathConstraint(N);if(T){i.addConstraint(T)}}}for(var R=0,k=this._cacheRawMeshes.length;R<k;++R){var j=this._cacheRawMeshes[R];if(!(t.DataParser.GLUE_WEIGHTS in j)||!(t.DataParser.GLUE_MESHES in j)){continue}this._parseMeshGlue(j,this._cacheMeshes[R])}for(var R=0,k=this._cacheRawMeshes.length;R<k;++R){var L=this._cacheRawMeshes[R];var V=r._getString(L,t.DataParser.SHARE,"");if(V.length===0){continue}var U=r._getString(L,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME);if(U.length===0){U=t.DataParser.DEFAULT_NAME}var Y=i.getMesh(U,"",V);if(Y===null){continue}var X=this._cacheMeshes[R];X.vertices.shareFrom(Y.vertices)}if(t.DataParser.ANIMATION in e){var H=e[t.DataParser.ANIMATION];for(var $=0,G=H;$<G.length;$++){var W=G[$];var z=this._parseAnimation(W);i.addAnimation(z)}}if(t.DataParser.DEFAULT_ACTIONS in e){var K=this._parseActionData(e[t.DataParser.DEFAULT_ACTIONS],0,null,null);for(var Z=0,q=K;Z<q.length;Z++){var J=q[Z];i.addAction(J,true);if(J.type===0){var z=i.getAnimation(J.name);if(z!==null){i.defaultAnimation=z}}}}if(t.DataParser.ACTIONS in e){var K=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);for(var Q=0,tt=K;Q<tt.length;Q++){var J=tt[Q];i.addAction(J,false)}}this._rawBones.length=0;this._cacheRawMeshes.length=0;this._cacheMeshes.length=0;this._armature=null;for(var et in this._weightSlotPose){delete this._weightSlotPose[et]}for(var et in this._weightBonePoses){delete this._weightBonePoses[et]}for(var et in this._cacheBones){delete this._cacheBones[et]}for(var et in this._slotChildActions){delete this._slotChildActions[et]}return i};r.prototype._parseBone=function(e){var a=0;var i=this._armature.scale;if(t.DataParser.TYPE in e&&typeof e[t.DataParser.TYPE]==="string"){a=t.DataParser._getBoneType(e[t.DataParser.TYPE])}else{a=r._getNumber(e,t.DataParser.TYPE,0)}if(a===0){var n=t.BaseObject.borrowObject(t.BoneData);n.inheritTranslation=r._getBoolean(e,t.DataParser.INHERIT_TRANSLATION,true);n.inheritRotation=r._getBoolean(e,t.DataParser.INHERIT_ROTATION,true);n.inheritScale=r._getBoolean(e,t.DataParser.INHERIT_SCALE,true);n.inheritReflection=r._getBoolean(e,t.DataParser.INHERIT_REFLECTION,true);n.length=r._getNumber(e,t.DataParser.LENGTH,0)*i;n.name=r._getString(e,t.DataParser.NAME,"");if(t.DataParser.TRANSFORM in e){this._parseTransform(e[t.DataParser.TRANSFORM],n.transform,i)}return n}var s=t.BaseObject.borrowObject(t.SurfaceData);s.name=r._getString(e,t.DataParser.NAME,"");s.segmentX=r._getNumber(e,t.DataParser.SEGMENT_X,0);s.segmentY=r._getNumber(e,t.DataParser.SEGMENT_Y,0);s.vertices.length=(s.segmentX+1)*(s.segmentY+1)*2;if(t.DataParser.VERTICES in e){var o=e[t.DataParser.VERTICES];for(var l=0,h=s.vertices.length;l<h;++l){if(l<o.length){s.vertices[l]=o[l]*i}else{s.vertices[l]=0}}}return s};r.prototype._parseIKConstraint=function(e){var a=this._armature.getBone(r._getString(e,t.DataParser.BONE,""));if(a===null){return null}var i=this._armature.getBone(r._getString(e,t.DataParser.TARGET,""));if(i===null){return null}var n=t.BaseObject.borrowObject(t.IKConstraintData);n.scaleEnabled=r._getBoolean(e,t.DataParser.SCALE,false);n.bendPositive=r._getBoolean(e,t.DataParser.BEND_POSITIVE,true);n.weight=r._getNumber(e,t.DataParser.WEIGHT,1);n.name=r._getString(e,t.DataParser.NAME,"");n.type=0;n.target=i;var s=r._getNumber(e,t.DataParser.CHAIN,0);if(s>0&&a.parent!==null){n.root=a.parent;n.bone=a}else{n.root=a;n.bone=null}return n};r.prototype._parsePathConstraint=function(e){var a=this._armature.getSlot(r._getString(e,t.DataParser.TARGET,""));if(a===null){return null}var i=this._armature.defaultSkin;if(i===null){return null}var n=i.getDisplay(a.name,r._getString(e,t.DataParser.TARGET_DISPLAY,a.name));if(n===null||!(n instanceof t.PathDisplayData)){return null}var s=e[t.DataParser.BONES];if(s===null||s.length===0){return null}var o=t.BaseObject.borrowObject(t.PathConstraintData);o.name=r._getString(e,t.DataParser.NAME,"");o.type=1;o.pathSlot=a;o.pathDisplayData=n;o.target=a.parent;o.positionMode=t.DataParser._getPositionMode(r._getString(e,t.DataParser.POSITION_MODE,""));o.spacingMode=t.DataParser._getSpacingMode(r._getString(e,t.DataParser.SPACING_MODE,""));o.rotateMode=t.DataParser._getRotateMode(r._getString(e,t.DataParser.ROTATE_MODE,""));o.position=r._getNumber(e,t.DataParser.POSITION,0);o.spacing=r._getNumber(e,t.DataParser.SPACING,0);o.rotateOffset=r._getNumber(e,t.DataParser.ROTATE_OFFSET,0);o.rotateMix=r._getNumber(e,t.DataParser.ROTATE_MIX,1);o.translateMix=r._getNumber(e,t.DataParser.TRANSLATE_MIX,1);for(var l=0,h=s;l<h.length;l++){var f=h[l];var u=this._armature.getBone(f);if(u!==null){o.AddBone(u);if(o.root===null){o.root=u}}}return o};r.prototype._parseSlot=function(e,a){var i=t.BaseObject.borrowObject(t.SlotData);i.displayIndex=r._getNumber(e,t.DataParser.DISPLAY_INDEX,0);i.zOrder=a;i.name=r._getString(e,t.DataParser.NAME,"");i.parent=this._armature.getBone(r._getString(e,t.DataParser.PARENT,""));if(t.DataParser.BLEND_MODE in e&&typeof e[t.DataParser.BLEND_MODE]==="string"){i.blendMode=t.DataParser._getBlendMode(e[t.DataParser.BLEND_MODE])}else{i.blendMode=r._getNumber(e,t.DataParser.BLEND_MODE,0)}if(t.DataParser.COLOR in e){i.color=t.SlotData.createColor();this._parseColorTransform(e[t.DataParser.COLOR],i.color)}else{i.color=t.SlotData.DEFAULT_COLOR}if(t.DataParser.ACTIONS in e){this._slotChildActions[i.name]=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null)}return i};r.prototype._parseSkin=function(e){var a=t.BaseObject.borrowObject(t.SkinData);a.name=r._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME);if(a.name.length===0){a.name=t.DataParser.DEFAULT_NAME}if(t.DataParser.SLOT in e){var i=e[t.DataParser.SLOT];this._skin=a;for(var n=0,s=i;n<s.length;n++){var o=s[n];var l=r._getString(o,t.DataParser.NAME,"");var h=this._armature.getSlot(l);if(h!==null){this._slot=h;if(t.DataParser.DISPLAY in o){var f=o[t.DataParser.DISPLAY];for(var u=0,_=f;u<_.length;u++){var c=_[u];if(c){a.addDisplay(l,this._parseDisplay(c))}else{a.addDisplay(l,null)}}}this._slot=null}}this._skin=null}return a};r.prototype._parseDisplay=function(e){var a=r._getString(e,t.DataParser.NAME,"");var i=r._getString(e,t.DataParser.PATH,"");var n=0;var s=null;if(t.DataParser.TYPE in e&&typeof e[t.DataParser.TYPE]==="string"){n=t.DataParser._getDisplayType(e[t.DataParser.TYPE])}else{n=r._getNumber(e,t.DataParser.TYPE,n)}switch(n){case 0:var o=s=t.BaseObject.borrowObject(t.ImageDisplayData);o.name=a;o.path=i.length>0?i:a;this._parsePivot(e,o);break;case 1:var l=s=t.BaseObject.borrowObject(t.ArmatureDisplayData);l.name=a;l.path=i.length>0?i:a;l.inheritAnimation=true;if(t.DataParser.ACTIONS in e){var h=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);for(var f=0,u=h;f<u.length;f++){var _=u[f];l.addAction(_)}}else if(this._slot.name in this._slotChildActions){var c=this._skin.getDisplays(this._slot.name);if(c===null?this._slot.displayIndex===0:this._slot.displayIndex===c.length){for(var p=0,m=this._slotChildActions[this._slot.name];p<m.length;p++){var _=m[p];l.addAction(_)}delete this._slotChildActions[this._slot.name]}}break;case 2:var d=s=t.BaseObject.borrowObject(t.MeshDisplayData);d.vertices.inheritDeform=r._getBoolean(e,t.DataParser.INHERIT_DEFORM,true);d.name=a;d.path=i.length>0?i:a;d.vertices.data=this._data;if(t.DataParser.SHARE in e){this._cacheRawMeshes.push(e);this._cacheMeshes.push(d)}else{this._parseMesh(e,d)}if(t.DataParser.GLUE_WEIGHTS in e&&t.DataParser.GLUE_MESHES in e){this._cacheRawMeshes.push(e);this._cacheMeshes.push(d)}break;case 3:var v=this._parseBoundingBox(e);if(v!==null){var y=s=t.BaseObject.borrowObject(t.BoundingBoxDisplayData);y.name=a;y.path=i.length>0?i:a;y.boundingBox=v}break;case 4:var g=e[t.DataParser.LENGTHS];var b=s=t.BaseObject.borrowObject(t.PathDisplayData);b.closed=r._getBoolean(e,t.DataParser.CLOSED,false);b.constantSpeed=r._getBoolean(e,t.DataParser.CONSTANT_SPEED,false);b.name=a;b.path=i.length>0?i:a;b.vertices.data=this._data;b.curveLengths.length=g.length;for(var D=0,T=g.length;D<T;++D){b.curveLengths[D]=g[D]}this._parsePath(e,b);break}if(s!==null&&t.DataParser.TRANSFORM in e){this._parseTransform(e[t.DataParser.TRANSFORM],s.transform,this._armature.scale)}return s};r.prototype._parsePath=function(e,a){var i=e[t.DataParser.VERTICES];var n=r._getNumber(e,t.DataParser.VERTEX_COUNT,0);var s=this._floatArray.length;var o=this._intArray.length;a.vertices.offset=o;this._intArray.length+=1+1;this._intArray[o+0]=n;this._intArray[o+2]=s;if(!(t.DataParser.WEIGHTS in e)){this._floatArray.length+=i.length;for(var l=0,h=i.length;l<h;++l){this._floatArray[s+l]=i[l]}}else{var f=e[t.DataParser.WEIGHTS];var u=e[t.DataParser.BONES];var _=u.length;var c=Math.floor(f.length-n)/2;var p=this._intArray.length;var m=this._floatArray.length;var d=this._armature.sortedBones;var v=t.BaseObject.borrowObject(t.WeightData);v.count=c;v.offset=p;this._intArray.length+=1+1+_+n+c;this._intArray[p+0]=_;this._intArray[p+1]=m;for(var l=0;l<_;l++){var y=u[l];var g=this._rawBones[y];v.addBone(g);this._intArray[p+2+l]=d.indexOf(g)}this._floatArray.length+=c*3;for(var l=0,b=0,D=0,T=p+2+_,A=m;l<c;l++){var x=f[b++];this._intArray[T++]=x;for(var P=0;P<x;P++){var O=f[b++];var S=f[b++];var E=i[D++];var M=i[D++];this._intArray[T++]=u.indexOf(O);this._floatArray[A++]=S;this._floatArray[A++]=E;this._floatArray[A++]=M}}a.vertices.weight=v}};r.prototype._parsePivot=function(e,a){if(t.DataParser.PIVOT in e){var i=e[t.DataParser.PIVOT];a.pivot.x=r._getNumber(i,t.DataParser.X,0);a.pivot.y=r._getNumber(i,t.DataParser.Y,0)}else{a.pivot.x=.5;a.pivot.y=.5}};r.prototype._parseMesh=function(e,a){var r=e[t.DataParser.VERTICES];var i=e[t.DataParser.UVS];var n=e[t.DataParser.TRIANGLES];var s=Math.floor(r.length/2);var o=Math.floor(n.length/3);var l=this._floatArray.length;var h=l+s*2;var f=this._intArray.length;var u=this._skin.name+"_"+this._slot.name+"_"+a.name;a.vertices.offset=f;this._intArray.length+=1+1+1+1+o*3;this._intArray[f+0]=s;this._intArray[f+1]=o;this._intArray[f+2]=l;for(var _=0,c=o*3;_<c;++_){this._intArray[f+4+_]=n[_]}this._floatArray.length+=s*2+s*2;for(var _=0,c=s*2;_<c;++_){this._floatArray[l+_]=r[_];this._floatArray[h+_]=i[_]}if(t.DataParser.WEIGHTS in e){var p=e[t.DataParser.WEIGHTS];var m=e[t.DataParser.SLOT_POSE];var d=e[t.DataParser.BONE_POSE];var v=this._armature.sortedBones;var y=new Array;var g=Math.floor(d.length/7);var b=this._floatArray.length;var D=Math.floor(p.length-s)/2;var T=this._intArray.length;var A=t.BaseObject.borrowObject(t.WeightData);A.count=D;A.offset=T;y.length=g;this._intArray.length+=1+1+g+s+D;this._intArray[T+1]=b;for(var _=0;_<g;++_){var x=d[_*7];var P=this._rawBones[x];A.addBone(P);y[_]=x;this._intArray[T+2+_]=v.indexOf(P)}this._floatArray.length+=D*3;this._helpMatrixA.copyFromArray(m,0);for(var _=0,O=0,S=T+2+g,E=b;_<s;++_){var M=_*2;var B=this._intArray[S++]=p[O++];var C=this._floatArray[l+M];var w=this._floatArray[l+M+1];this._helpMatrixA.transformPoint(C,w,this._helpPoint);C=this._helpPoint.x;w=this._helpPoint.y;for(var I=0;I<B;++I){var x=p[O++];var F=y.indexOf(x);this._helpMatrixB.copyFromArray(d,F*7+1);this._helpMatrixB.invert();this._helpMatrixB.transformPoint(C,w,this._helpPoint);this._intArray[S++]=F;this._floatArray[E++]=p[O++];this._floatArray[E++]=this._helpPoint.x;this._floatArray[E++]=this._helpPoint.y}}a.vertices.weight=A;this._weightSlotPose[u]=m;this._weightBonePoses[u]=d}};r.prototype._parseMeshGlue=function(t,e){t;e};r.prototype._parseBoundingBox=function(e){var a=null;var i=0;if(t.DataParser.SUB_TYPE in e&&typeof e[t.DataParser.SUB_TYPE]==="string"){i=t.DataParser._getBoundingBoxType(e[t.DataParser.SUB_TYPE])}else{i=r._getNumber(e,t.DataParser.SUB_TYPE,i)}switch(i){case 0:a=t.BaseObject.borrowObject(t.RectangleBoundingBoxData);break;case 1:a=t.BaseObject.borrowObject(t.EllipseBoundingBoxData);break;case 2:a=this._parsePolygonBoundingBox(e);break}if(a!==null){a.color=r._getNumber(e,t.DataParser.COLOR,0);if(a.type===0||a.type===1){a.width=r._getNumber(e,t.DataParser.WIDTH,0);a.height=r._getNumber(e,t.DataParser.HEIGHT,0)}}return a};r.prototype._parsePolygonBoundingBox=function(e){var a=t.BaseObject.borrowObject(t.PolygonBoundingBoxData);if(t.DataParser.VERTICES in e){var r=this._armature.scale;var i=e[t.DataParser.VERTICES];var n=a.vertices;if(t.DragonBones.webAssembly){n.resize(i.length,0)}else{n.length=i.length}for(var s=0,o=i.length;s<o;s+=2){var l=i[s]*r;var h=i[s+1]*r;if(t.DragonBones.webAssembly){n.set(s,l);n.set(s+1,h)}else{n[s]=l;n[s+1]=h}if(s===0){a.x=l;a.y=h;a.width=l;a.height=h}else{if(l<a.x){a.x=l}else if(l>a.width){a.width=l}if(h<a.y){a.y=h}else if(h>a.height){a.height=h}}}a.width-=a.x;a.height-=a.y}else{console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.")}return a};r.prototype._parseAnimation=function(e){var a=t.BaseObject.borrowObject(t.AnimationData);a.frameCount=Math.max(r._getNumber(e,t.DataParser.DURATION,1),1);a.playTimes=r._getNumber(e,t.DataParser.PLAY_TIMES,1);a.duration=a.frameCount/this._armature.frameRate;a.fadeInTime=r._getNumber(e,t.DataParser.FADE_IN_TIME,0);a.scale=r._getNumber(e,t.DataParser.SCALE,1);a.name=r._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME);if(a.name.length===0){a.name=t.DataParser.DEFAULT_NAME}a.frameIntOffset=this._frameIntArray.length;a.frameFloatOffset=this._frameFloatArray.length;a.frameOffset=this._frameArray.length;this._animation=a;if(t.DataParser.FRAME in e){var i=e[t.DataParser.FRAME];var n=i.length;if(n>0){for(var s=0,o=0;s<n;++s){var l=i[s];this._parseActionDataInFrame(l,o,null,null);o+=r._getNumber(l,t.DataParser.DURATION,1)}}}if(t.DataParser.Z_ORDER in e){this._animation.zOrderTimeline=this._parseTimeline(e[t.DataParser.Z_ORDER],null,t.DataParser.FRAME,1,false,false,0,this._parseZOrderFrame)}if(t.DataParser.BONE in e){var h=e[t.DataParser.BONE];for(var f=0,u=h;f<u.length;f++){var _=u[f];this._parseBoneTimeline(_)}}if(t.DataParser.SURFACE in e){var h=e[t.DataParser.SURFACE];for(var c=0,p=h;c<p.length;c++){var _=p[c];var m=r._getString(_,t.DataParser.NAME,"");this._surface=this._armature.getBone(m);if(this._surface===null){continue}var d=this._parseTimeline(_,null,t.DataParser.FRAME,50,false,true,0,this._parseSurfaceFrame);if(d!==null){this._animation.addSurfaceTimeline(this._surface,d)}this._surface=null}}if(t.DataParser.SLOT in e){var h=e[t.DataParser.SLOT];for(var v=0,y=h;v<y.length;v++){var _=y[v];this._parseSlotTimeline(_)}}if(t.DataParser.FFD in e){var h=e[t.DataParser.FFD];for(var g=0,b=h;g<b.length;g++){var _=b[g];var D=r._getString(_,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME);var T=r._getString(_,t.DataParser.SLOT,"");var A=r._getString(_,t.DataParser.NAME,"");if(D.length===0){D=t.DataParser.DEFAULT_NAME}this._slot=this._armature.getSlot(T);this._mesh=this._armature.getMesh(D,T,A);if(this._slot===null||this._mesh===null){continue}var d=this._parseTimeline(_,null,t.DataParser.FRAME,22,false,true,0,this._parseSlotFFDFrame);if(d!==null){this._animation.addSlotTimeline(this._slot,d)}this._slot=null;this._mesh=null}}if(t.DataParser.IK in e){var h=e[t.DataParser.IK];for(var x=0,P=h;x<P.length;x++){var _=P[x];var O=r._getString(_,t.DataParser.NAME,"");var S=this._armature.getConstraint(O);if(S===null){continue}var d=this._parseTimeline(_,null,t.DataParser.FRAME,30,true,false,2,this._parseIKConstraintFrame);if(d!==null){this._animation.addConstraintTimeline(S,d)}}}if(t.DataParser.ANIMATION in e){var h=e[t.DataParser.ANIMATION];for(var E=0,M=h;E<M.length;E++){var _=M[E];var B=r._getString(_,t.DataParser.NAME,"");var d=this._parseTimeline(_,null,t.DataParser.FRAME,40,true,false,2,this._parseAnimationFrame);if(d!==null){this._animation.addAnimationTimeline(B,d)}}}if(this._actionFrames.length>0){this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,false,false,0,this._parseActionFrame);this._actionFrames.length=0}this._animation=null;return a};r.prototype._parseTimeline=function(e,i,n,s,o,l,h,f){if(e!==null&&n.length>0&&n in e){i=e[n]}if(i===null){return null}var u=i.length;if(u===0){return null}var _=this._frameIntArray.length;var c=this._frameFloatArray.length;var p=t.BaseObject.borrowObject(t.TimelineData);var m=this._timelineArray.length;this._timelineArray.length+=1+1+1+1+1+u;if(e!==null){this._timelineArray[m+0]=Math.round(r._getNumber(e,t.DataParser.SCALE,1)*100);this._timelineArray[m+1]=Math.round(r._getNumber(e,t.DataParser.OFFSET,0)*100)}else{this._timelineArray[m+0]=100;this._timelineArray[m+1]=0}this._timelineArray[m+2]=u;this._timelineArray[m+3]=h;if(o){this._timelineArray[m+4]=_-this._animation.frameIntOffset}else if(l){this._timelineArray[m+4]=c-this._animation.frameFloatOffset}else{this._timelineArray[m+4]=0}this._timeline=p;p.type=s;p.offset=m;if(u===1){p.frameIndicesOffset=-1;this._timelineArray[m+5+0]=f.call(this,i[0],0,0)-this._animation.frameOffset}else{var d=this._animation.frameCount+1;var v=this._data.frameIndices;var y=0;if(t.DragonBones.webAssembly){y=v.size();v.resize(y+d,0)}else{y=v.length;v.length+=d}p.frameIndicesOffset=y;for(var g=0,b=0,D=0,T=0;g<d;++g){if(D+T<=g&&b<u){var A=i[b];D=g;if(b===u-1){T=this._animation.frameCount-D}else{if(A instanceof a){T=this._actionFrames[b+1].frameStart-D}else{T=r._getNumber(A,t.DataParser.DURATION,1)}}this._timelineArray[m+5+b]=f.call(this,A,D,T)-this._animation.frameOffset;b++}if(t.DragonBones.webAssembly){v.set(y+g,b-1)}else{v[y+g]=b-1}}}this._timeline=null;return p};r.prototype._parseBoneTimeline=function(e){var a=this._armature.getBone(r._getString(e,t.DataParser.NAME,""));if(a===null){return}this._bone=a;this._slot=this._armature.getSlot(this._bone.name);if(t.DataParser.TRANSLATE_FRAME in e){var i=this._parseTimeline(e,null,t.DataParser.TRANSLATE_FRAME,11,false,true,2,this._parseBoneTranslateFrame);if(i!==null){this._animation.addBoneTimeline(a,i)}}if(t.DataParser.ROTATE_FRAME in e){var i=this._parseTimeline(e,null,t.DataParser.ROTATE_FRAME,12,false,true,2,this._parseBoneRotateFrame);if(i!==null){this._animation.addBoneTimeline(a,i)}}if(t.DataParser.SCALE_FRAME in e){var i=this._parseTimeline(e,null,t.DataParser.SCALE_FRAME,13,false,true,2,this._parseBoneScaleFrame);if(i!==null){this._animation.addBoneTimeline(a,i)}}if(t.DataParser.FRAME in e){var i=this._parseTimeline(e,null,t.DataParser.FRAME,10,false,true,6,this._parseBoneAllFrame);if(i!==null){this._animation.addBoneTimeline(a,i)}}this._bone=null;this._slot=null};r.prototype._parseSlotTimeline=function(e){var a=this._armature.getSlot(r._getString(e,t.DataParser.NAME,""));if(a===null){return}this._slot=a;var i=null;if(t.DataParser.DISPLAY_FRAME in e){i=this._parseTimeline(e,null,t.DataParser.DISPLAY_FRAME,20,false,false,0,this._parseSlotDisplayFrame)}else{i=this._parseTimeline(e,null,t.DataParser.FRAME,20,false,false,0,this._parseSlotDisplayFrame)}if(i!==null){this._animation.addSlotTimeline(a,i)}var n=null;if(t.DataParser.COLOR_FRAME in e){n=this._parseTimeline(e,null,t.DataParser.COLOR_FRAME,21,true,false,1,this._parseSlotColorFrame)}else{n=this._parseTimeline(e,null,t.DataParser.FRAME,21,true,false,1,this._parseSlotColorFrame)}if(n!==null){this._animation.addSlotTimeline(a,n)}this._slot=null};r.prototype._parseFrame=function(t,e,a){t;a;var r=this._frameArray.length;this._frameArray.length+=1;this._frameArray[r+0]=e;return r};r.prototype._parseTweenFrame=function(e,a,i){var n=this._parseFrame(e,a,i);if(i>0){if(t.DataParser.CURVE in e){var s=i+1;this._helpArray.length=s;this._samplingEasingCurve(e[t.DataParser.CURVE],this._helpArray);this._frameArray.length+=1+1+this._helpArray.length;this._frameArray[n+1]=2;this._frameArray[n+2]=s;for(var o=0;o<s;++o){this._frameArray[n+3+o]=Math.round(this._helpArray[o]*1e4)}}else{var l=-2;var h=l;if(t.DataParser.TWEEN_EASING in e){h=r._getNumber(e,t.DataParser.TWEEN_EASING,l)}if(h===l){this._frameArray.length+=1;this._frameArray[n+1]=0}else if(h===0){this._frameArray.length+=1;this._frameArray[n+1]=1}else if(h<0){this._frameArray.length+=1+1;this._frameArray[n+1]=3;this._frameArray[n+2]=Math.round(-h*100)}else if(h<=1){this._frameArray.length+=1+1;this._frameArray[n+1]=4;this._frameArray[n+2]=Math.round(h*100)}else{this._frameArray.length+=1+1;this._frameArray[n+1]=5;this._frameArray[n+2]=Math.round(h*100-100)}}}else{this._frameArray.length+=1;this._frameArray[n+1]=0}return n};r.prototype._parseActionFrame=function(t,e,a){a;var r=this._frameArray.length;var i=t.actions.length;this._frameArray.length+=1+1+i;this._frameArray[r+0]=e;this._frameArray[r+0+1]=i;for(var n=0;n<i;++n){this._frameArray[r+0+2+n]=t.actions[n]}return r};r.prototype._parseZOrderFrame=function(e,a,r){var i=this._parseFrame(e,a,r);if(t.DataParser.Z_ORDER in e){var n=e[t.DataParser.Z_ORDER];if(n.length>0){var s=this._armature.sortedSlots.length;var o=new Array(s-n.length/2);var l=new Array(s);for(var h=0;h<o.length;++h){o[h]=0}for(var f=0;f<s;++f){l[f]=-1}var u=0;var _=0;for(var c=0,p=n.length;c<p;c+=2){var m=n[c];var d=n[c+1];while(u!==m){o[_++]=u++}var v=u+d;l[v]=u++}while(u<s){o[_++]=u++}this._frameArray.length+=1+s;this._frameArray[i+1]=s;var y=s;while(y--){if(l[y]===-1){this._frameArray[i+2+y]=o[--_]||0}else{this._frameArray[i+2+y]=l[y]||0}}return i}}this._frameArray.length+=1;this._frameArray[i+1]=0;return i};r.prototype._parseBoneAllFrame=function(e,a,i){this._helpTransform.identity();if(t.DataParser.TRANSFORM in e){this._parseTransform(e[t.DataParser.TRANSFORM],this._helpTransform,1)}var n=this._helpTransform.rotation;if(a!==0){if(this._prevClockwise===0){n=this._prevRotation+t.Transform.normalizeRadian(n-this._prevRotation)}else{if(this._prevClockwise>0?n>=this._prevRotation:n<=this._prevRotation){this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1}n=this._prevRotation+n-this._prevRotation+t.Transform.PI_D*this._prevClockwise}}this._prevClockwise=r._getNumber(e,t.DataParser.TWEEN_ROTATE,0);this._prevRotation=n;var s=this._parseTweenFrame(e,a,i);var o=this._frameFloatArray.length;this._frameFloatArray.length+=6;this._frameFloatArray[o++]=this._helpTransform.x;this._frameFloatArray[o++]=this._helpTransform.y;this._frameFloatArray[o++]=n;this._frameFloatArray[o++]=this._helpTransform.skew;this._frameFloatArray[o++]=this._helpTransform.scaleX;this._frameFloatArray[o++]=this._helpTransform.scaleY;this._parseActionDataInFrame(e,a,this._bone,this._slot);return s};r.prototype._parseBoneTranslateFrame=function(e,a,i){var n=this._parseTweenFrame(e,a,i);var s=this._frameFloatArray.length;this._frameFloatArray.length+=2;this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.X,0);this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.Y,0);return n};r.prototype._parseBoneRotateFrame=function(e,a,i){var n=r._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD;if(a!==0){if(this._prevClockwise===0){n=this._prevRotation+t.Transform.normalizeRadian(n-this._prevRotation)}else{if(this._prevClockwise>0?n>=this._prevRotation:n<=this._prevRotation){this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1}n=this._prevRotation+n-this._prevRotation+t.Transform.PI_D*this._prevClockwise}}this._prevClockwise=r._getNumber(e,t.DataParser.CLOCK_WISE,0);this._prevRotation=n;var s=this._parseTweenFrame(e,a,i);var o=this._frameFloatArray.length;this._frameFloatArray.length+=2;this._frameFloatArray[o++]=n;this._frameFloatArray[o++]=r._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD;return s};r.prototype._parseBoneScaleFrame=function(e,a,i){var n=this._parseTweenFrame(e,a,i);var s=this._frameFloatArray.length;this._frameFloatArray.length+=2;this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.X,1);this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.Y,1);return n};r.prototype._parseSurfaceFrame=function(e,a,i){var n=this._frameFloatArray.length;var s=this._parseTweenFrame(e,a,i);var o=e[t.DataParser.VERTICES];var l=r._getNumber(e,t.DataParser.OFFSET,0);var h=this._surface.vertices.length/2;var f=0;var u=0;this._frameFloatArray.length+=h*2;for(var _=0;_<h*2;_+=2){if(_<l||_-l>=o.length){f=0}else{f=o[_-l]}if(_+1<l||_+1-l>=o.length){u=0}else{u=o[_+1-l]}this._frameFloatArray[n+_]=f;this._frameFloatArray[n+_+1]=u}if(a===0){var c=this._frameIntArray.length;this._frameIntArray.length+=1+1+1+1+1;this._frameIntArray[c+0]=0;this._frameIntArray[c+1]=this._frameFloatArray.length-n;this._frameIntArray[c+2]=this._frameFloatArray.length-n;this._frameIntArray[c+3]=0;this._frameIntArray[c+4]=n-this._animation.frameFloatOffset;this._timelineArray[this._timeline.offset+3]=c-this._animation.frameIntOffset}return s};r.prototype._parseSlotDisplayFrame=function(e,a,i){var n=this._parseFrame(e,a,i);this._frameArray.length+=1;if(t.DataParser.VALUE in e){this._frameArray[n+1]=r._getNumber(e,t.DataParser.VALUE,0)}else{this._frameArray[n+1]=r._getNumber(e,t.DataParser.DISPLAY_INDEX,0)}this._parseActionDataInFrame(e,a,this._slot.parent,this._slot);return n};r.prototype._parseSlotColorFrame=function(e,a,r){var i=this._parseTweenFrame(e,a,r);var n=-1;if(t.DataParser.VALUE in e||t.DataParser.COLOR in e){var s=t.DataParser.VALUE in e?e[t.DataParser.VALUE]:e[t.DataParser.COLOR];for(var o in s){o;this._parseColorTransform(s,this._helpColorTransform);n=this._intArray.length;this._intArray.length+=8;this._intArray[n++]=Math.round(this._helpColorTransform.alphaMultiplier*100);this._intArray[n++]=Math.round(this._helpColorTransform.redMultiplier*100);this._intArray[n++]=Math.round(this._helpColorTransform.greenMultiplier*100);this._intArray[n++]=Math.round(this._helpColorTransform.blueMultiplier*100);this._intArray[n++]=Math.round(this._helpColorTransform.alphaOffset);this._intArray[n++]=Math.round(this._helpColorTransform.redOffset);this._intArray[n++]=Math.round(this._helpColorTransform.greenOffset);this._intArray[n++]=Math.round(this._helpColorTransform.blueOffset);n-=8;break}}if(n<0){if(this._defaultColorOffset<0){this._defaultColorOffset=n=this._intArray.length;this._intArray.length+=8;this._intArray[n++]=100;this._intArray[n++]=100;this._intArray[n++]=100;this._intArray[n++]=100;this._intArray[n++]=0;this._intArray[n++]=0;this._intArray[n++]=0;this._intArray[n++]=0}n=this._defaultColorOffset}var l=this._frameIntArray.length;this._frameIntArray.length+=1;this._frameIntArray[l]=n;return i};r.prototype._parseSlotFFDFrame=function(e,a,i){var n=this._frameFloatArray.length;var s=this._parseTweenFrame(e,a,i);var o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:null;var l=r._getNumber(e,t.DataParser.OFFSET,0);var h=this._intArray[this._mesh.vertices.offset+0];var f=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name;var u=this._mesh.vertices.weight;var _=0;var c=0;var p=0;var m=0;if(u!==null){var d=this._weightSlotPose[f];this._helpMatrixA.copyFromArray(d,0);this._frameFloatArray.length+=u.count*2;p=u.offset+2+u.bones.length}else{this._frameFloatArray.length+=h*2}for(var v=0;v<h*2;v+=2){if(o===null){_=0;c=0}else{if(v<l||v-l>=o.length){_=0}else{_=o[v-l]}if(v+1<l||v+1-l>=o.length){c=0}else{c=o[v+1-l]}}if(u!==null){var y=this._weightBonePoses[f];var g=this._intArray[p++];this._helpMatrixA.transformPoint(_,c,this._helpPoint,true);_=this._helpPoint.x;c=this._helpPoint.y;for(var b=0;b<g;++b){var D=this._intArray[p++];this._helpMatrixB.copyFromArray(y,D*7+1);this._helpMatrixB.invert();this._helpMatrixB.transformPoint(_,c,this._helpPoint,true);this._frameFloatArray[n+m++]=this._helpPoint.x;this._frameFloatArray[n+m++]=this._helpPoint.y}}else{this._frameFloatArray[n+v]=_;this._frameFloatArray[n+v+1]=c}}if(a===0){var T=this._frameIntArray.length;this._frameIntArray.length+=1+1+1+1+1;this._frameIntArray[T+0]=this._mesh.vertices.offset;this._frameIntArray[T+1]=this._frameFloatArray.length-n;this._frameIntArray[T+2]=this._frameFloatArray.length-n;this._frameIntArray[T+3]=0;this._frameIntArray[T+4]=n-this._animation.frameFloatOffset;this._timelineArray[this._timeline.offset+3]=T-this._animation.frameIntOffset}return s};r.prototype._parseIKConstraintFrame=function(e,a,i){var n=this._parseTweenFrame(e,a,i);var s=this._frameIntArray.length;this._frameIntArray.length+=2;this._frameIntArray[s++]=r._getBoolean(e,t.DataParser.BEND_POSITIVE,true)?1:0;this._frameIntArray[s++]=Math.round(r._getNumber(e,t.DataParser.WEIGHT,1)*100);return n};r.prototype._parseAnimationFrame=function(e,a,i){var n=this._parseTweenFrame(e,a,i);var s=this._frameIntArray.length;this._frameIntArray.length+=2;this._frameIntArray[s++]=r._getNumber(e,t.DataParser.VALUE,0);this._frameIntArray[s++]=Math.round(r._getNumber(e,t.DataParser.WEIGHT,1)*100);return n};r.prototype._parseActionData=function(e,a,i,n){var s=new Array;if(typeof e==="string"){var o=t.BaseObject.borrowObject(t.ActionData);o.type=a;o.name=e;o.bone=i;o.slot=n;s.push(o)}else if(e instanceof Array){for(var l=0,h=e;l<h.length;l++){var f=h[l];var o=t.BaseObject.borrowObject(t.ActionData);if(t.DataParser.GOTO_AND_PLAY in f){o.type=0;o.name=r._getString(f,t.DataParser.GOTO_AND_PLAY,"")}else{if(t.DataParser.TYPE in f&&typeof f[t.DataParser.TYPE]==="string"){o.type=t.DataParser._getActionType(f[t.DataParser.TYPE])}else{o.type=r._getNumber(f,t.DataParser.TYPE,a)}o.name=r._getString(f,t.DataParser.NAME,"")}if(t.DataParser.BONE in f){var u=r._getString(f,t.DataParser.BONE,"");o.bone=this._armature.getBone(u)}else{o.bone=i}if(t.DataParser.SLOT in f){var _=r._getString(f,t.DataParser.SLOT,"");o.slot=this._armature.getSlot(_)}else{o.slot=n}var c=null;if(t.DataParser.INTS in f){if(c===null){c=t.BaseObject.borrowObject(t.UserData)}var p=f[t.DataParser.INTS];for(var m=0,d=p;m<d.length;m++){var v=d[m];c.addInt(v)}}if(t.DataParser.FLOATS in f){if(c===null){c=t.BaseObject.borrowObject(t.UserData)}var y=f[t.DataParser.FLOATS];for(var g=0,b=y;g<b.length;g++){var v=b[g];c.addFloat(v)}}if(t.DataParser.STRINGS in f){if(c===null){c=t.BaseObject.borrowObject(t.UserData)}var D=f[t.DataParser.STRINGS];for(var T=0,A=D;T<A.length;T++){var v=A[T];c.addString(v)}}o.data=c;s.push(o)}}return s};r.prototype._parseTransform=function(e,a,i){a.x=r._getNumber(e,t.DataParser.X,0)*i;a.y=r._getNumber(e,t.DataParser.Y,0)*i;if(t.DataParser.ROTATE in e||t.DataParser.SKEW in e){a.rotation=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD);a.skew=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD)}else if(t.DataParser.SKEW_X in e||t.DataParser.SKEW_Y in e){a.rotation=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.SKEW_Y,0)*t.Transform.DEG_RAD);a.skew=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.SKEW_X,0)*t.Transform.DEG_RAD)-a.rotation}a.scaleX=r._getNumber(e,t.DataParser.SCALE_X,1);a.scaleY=r._getNumber(e,t.DataParser.SCALE_Y,1)};r.prototype._parseColorTransform=function(e,a){a.alphaMultiplier=r._getNumber(e,t.DataParser.ALPHA_MULTIPLIER,100)*.01;a.redMultiplier=r._getNumber(e,t.DataParser.RED_MULTIPLIER,100)*.01;a.greenMultiplier=r._getNumber(e,t.DataParser.GREEN_MULTIPLIER,100)*.01;a.blueMultiplier=r._getNumber(e,t.DataParser.BLUE_MULTIPLIER,100)*.01;a.alphaOffset=r._getNumber(e,t.DataParser.ALPHA_OFFSET,0);a.redOffset=r._getNumber(e,t.DataParser.RED_OFFSET,0);a.greenOffset=r._getNumber(e,t.DataParser.GREEN_OFFSET,0);a.blueOffset=r._getNumber(e,t.DataParser.BLUE_OFFSET,0)};r.prototype._parseArray=function(t){t;this._intArray.length=0;this._floatArray.length=0;this._frameIntArray.length=0;this._frameFloatArray.length=0;this._frameArray.length=0;this._timelineArray.length=0};r.prototype._modifyArray=function(){if(this._intArray.length%Int16Array.BYTES_PER_ELEMENT!==0){this._intArray.push(0)}if(this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!==0){this._frameIntArray.push(0)}if(this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!==0){this._frameArray.push(0)}if(this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!==0){this._timelineArray.push(0)}var e=this._intArray.length*Int16Array.BYTES_PER_ELEMENT;var a=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT;var r=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT;var i=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT;var n=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT;var s=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT;var o=e+a+r+i+n+s;if(t.DragonBones.webAssembly){var l=t.webAssemblyModule.HEAP16.buffer;var h=t.webAssemblyModule._malloc(o);var f=new Int16Array(l,h,this._intArray.length);var u=new Float32Array(l,h+e,this._floatArray.length);var _=new Int16Array(l,h+e+a,this._frameIntArray.length);var c=new Float32Array(l,h+e+a+r,this._frameFloatArray.length);var p=new Int16Array(l,h+e+a+r+i,this._frameArray.length);var m=new Uint16Array(l,h+e+a+r+i+n,this._timelineArray.length);for(var d=0,v=this._intArray.length;d<v;++d){f[d]=this._intArray[d]}for(var d=0,v=this._floatArray.length;d<v;++d){u[d]=this._floatArray[d]}for(var d=0,v=this._frameIntArray.length;d<v;++d){_[d]=this._frameIntArray[d]}for(var d=0,v=this._frameFloatArray.length;d<v;++d){c[d]=this._frameFloatArray[d]}for(var d=0,v=this._frameArray.length;d<v;++d){p[d]=this._frameArray[d]}for(var d=0,v=this._timelineArray.length;d<v;++d){m[d]=this._timelineArray[d]}t.webAssemblyModule.setDataBinary(this._data,h,e,a,r,i,n,s)}else{var y=new ArrayBuffer(o);var f=new Int16Array(y,0,this._intArray.length);var u=new Float32Array(y,e,this._floatArray.length);var _=new Int16Array(y,e+a,this._frameIntArray.length);var c=new Float32Array(y,e+a+r,this._frameFloatArray.length);var p=new Int16Array(y,e+a+r+i,this._frameArray.length);var m=new Uint16Array(y,e+a+r+i+n,this._timelineArray.length);for(var d=0,v=this._intArray.length;d<v;++d){f[d]=this._intArray[d]}for(var d=0,v=this._floatArray.length;d<v;++d){u[d]=this._floatArray[d]}for(var d=0,v=this._frameIntArray.length;d<v;++d){_[d]=this._frameIntArray[d]}for(var d=0,v=this._frameFloatArray.length;d<v;++d){c[d]=this._frameFloatArray[d]}for(var d=0,v=this._frameArray.length;d<v;++d){p[d]=this._frameArray[d]}for(var d=0,v=this._timelineArray.length;d<v;++d){m[d]=this._timelineArray[d]}this._data.binary=y;this._data.intArray=f;this._data.floatArray=u;this._data.frameIntArray=_;this._data.frameFloatArray=c;this._data.frameArray=p;this._data.timelineArray=m}this._defaultColorOffset=-1};r.prototype.parseDragonBonesData=function(e,a){if(a===void 0){a=1}console.assert(e!==null&&e!==undefined,"Data error.");var i=r._getString(e,t.DataParser.VERSION,"");var n=r._getString(e,t.DataParser.COMPATIBLE_VERSION,"");if(t.DataParser.DATA_VERSIONS.indexOf(i)>=0||t.DataParser.DATA_VERSIONS.indexOf(n)>=0){var s=t.BaseObject.borrowObject(t.DragonBonesData);s.version=i;s.name=r._getString(e,t.DataParser.NAME,"");s.frameRate=r._getNumber(e,t.DataParser.FRAME_RATE,24);if(s.frameRate===0){s.frameRate=24}if(t.DataParser.ARMATURE in e){this._data=s;this._parseArray(e);var o=e[t.DataParser.ARMATURE];for(var l=0,h=o;l<h.length;l++){var f=h[l];s.addArmature(this._parseArmature(f,a))}if(!this._data.binary){this._modifyArray()}if(t.DataParser.STAGE in e){s.stage=s.getArmature(r._getString(e,t.DataParser.STAGE,""))}else if(s.armatureNames.length>0){s.stage=s.getArmature(s.armatureNames[0])}this._data=null}if(t.DataParser.TEXTURE_ATLAS in e){this._rawTextureAtlases=e[t.DataParser.TEXTURE_ATLAS]}return s}else{console.assert(false,"Nonsupport data version: "+i+"\n"+"Please convert DragonBones data to support version.\n"+"Read more: https://github.com/DragonBones/Tools/")}return null};r.prototype.parseTextureAtlasData=function(e,a,i){if(i===void 0){i=1}console.assert(e!==undefined);if(e===null){if(this._rawTextureAtlases===null||this._rawTextureAtlases.length===0){return false}var n=this._rawTextureAtlases[this._rawTextureAtlasIndex++];this.parseTextureAtlasData(n,a,i);if(this._rawTextureAtlasIndex>=this._rawTextureAtlases.length){this._rawTextureAtlasIndex=0;this._rawTextureAtlases=null}return true}a.width=r._getNumber(e,t.DataParser.WIDTH,0);a.height=r._getNumber(e,t.DataParser.HEIGHT,0);a.scale=i===1?1/r._getNumber(e,t.DataParser.SCALE,1):i;a.name=r._getString(e,t.DataParser.NAME,"");a.imagePath=r._getString(e,t.DataParser.IMAGE_PATH,"");if(t.DataParser.SUB_TEXTURE in e){var s=e[t.DataParser.SUB_TEXTURE];for(var o=0,l=s.length;o<l;++o){var h=s[o];var f=a.createTexture();f.rotated=r._getBoolean(h,t.DataParser.ROTATED,false);f.name=r._getString(h,t.DataParser.NAME,"");f.region.x=r._getNumber(h,t.DataParser.X,0);f.region.y=r._getNumber(h,t.DataParser.Y,0);f.region.width=r._getNumber(h,t.DataParser.WIDTH,0);f.region.height=r._getNumber(h,t.DataParser.HEIGHT,0);var u=r._getNumber(h,t.DataParser.FRAME_WIDTH,-1);var _=r._getNumber(h,t.DataParser.FRAME_HEIGHT,-1);if(u>0&&_>0){f.frame=t.TextureData.createRectangle();f.frame.x=r._getNumber(h,t.DataParser.FRAME_X,0);f.frame.y=r._getNumber(h,t.DataParser.FRAME_Y,0);f.frame.width=u;f.frame.height=_}a.addTexture(f)}}return true};r.getInstance=function(){if(r._objectDataParserInstance===null){r._objectDataParserInstance=new r}return r._objectDataParserInstance};r._objectDataParserInstance=null;return r}(t.DataParser);t.ObjectDataParser=e;var a=function(){function t(){this.frameStart=0;this.actions=[]}return t}();t.ActionFrame=a})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}a.prototype._inRange=function(t,e,a){return e<=t&&t<=a};a.prototype._decodeUTF8=function(t){var e=-1;var a=-1;var r=65533;var i=0;var n="";var s;var o=0;var l=0;var h=0;var f=0;while(t.length>i){var u=t[i++];if(u===e){if(l!==0){s=r}else{s=a}}else{if(l===0){if(this._inRange(u,0,127)){s=u}else{if(this._inRange(u,194,223)){l=1;f=128;o=u-192}else if(this._inRange(u,224,239)){l=2;f=2048;o=u-224}else if(this._inRange(u,240,244)){l=3;f=65536;o=u-240}else{}o=o*Math.pow(64,l);s=null}}else if(!this._inRange(u,128,191)){o=0;l=0;h=0;f=0;i--;s=u}else{h+=1;o=o+(u-128)*Math.pow(64,l-h);if(h!==l){s=null}else{var _=o;var c=f;o=0;l=0;h=0;f=0;if(this._inRange(_,c,1114111)&&!this._inRange(_,55296,57343)){s=_}else{s=u}}}}if(s!==null&&s!==a){if(s<=65535){if(s>0)n+=String.fromCharCode(s)}else{s-=65536;n+=String.fromCharCode(55296+(s>>10&1023));n+=String.fromCharCode(56320+(s&1023))}}}return n};a.prototype._getUTF16Key=function(t){for(var e=0,a=t.length;e<a;++e){if(t.charCodeAt(e)>255){return encodeURI(t)}}return t};a.prototype._parseBinaryTimeline=function(e,a,r){if(r===void 0){r=null}var i=r!==null?r:t.BaseObject.borrowObject(t.TimelineData);i.type=e;i.offset=a;this._timeline=i;var n=this._timelineArrayBuffer[i.offset+2];if(n===1){i.frameIndicesOffset=-1}else{var s=0;var o=this._animation.frameCount+1;var l=this._data.frameIndices;if(t.DragonBones.webAssembly){s=l.size();l.resize(s+o,0)}else{s=l.length;l.length+=o}i.frameIndicesOffset=s;for(var h=0,f=0,u=0,_=0;h<o;++h){if(u+_<=h&&f<n){u=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[i.offset+5+f]];if(f===n-1){_=this._animation.frameCount-u}else{_=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[i.offset+5+f+1]]-u}f++}if(t.DragonBones.webAssembly){l.set(s+h,f-1)}else{l[s+h]=f-1}}}this._timeline=null;return i};a.prototype._parseVertices=function(e,a){a.offset=e[t.DataParser.OFFSET];var r=this._intArrayBuffer[a.offset+3];if(r>=0){var i=t.BaseObject.borrowObject(t.WeightData);var n=this._intArrayBuffer[a.offset+0];var s=this._intArrayBuffer[r+0];i.offset=r;for(var o=0;o<s;++o){var l=this._intArrayBuffer[r+2+o];i.addBone(this._rawBones[l])}var h=r+2+s;var f=0;for(var o=0,u=n;o<u;++o){var _=this._intArrayBuffer[h++];f+=_;h+=_}i.count=f;a.weight=i}};a.prototype._parseMesh=function(t,e){this._parseVertices(t,e.vertices)};a.prototype._parsePath=function(t,e){this._parseVertices(t,e.vertices)};a.prototype._parseAnimation=function(e){var a=t.BaseObject.borrowObject(t.AnimationData);a.frameCount=Math.max(t.ObjectDataParser._getNumber(e,t.DataParser.DURATION,1),1);a.playTimes=t.ObjectDataParser._getNumber(e,t.DataParser.PLAY_TIMES,1);a.duration=a.frameCount/this._armature.frameRate;a.fadeInTime=t.ObjectDataParser._getNumber(e,t.DataParser.FADE_IN_TIME,0);a.scale=t.ObjectDataParser._getNumber(e,t.DataParser.SCALE,1);a.name=t.ObjectDataParser._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME);if(a.name.length===0){a.name=t.DataParser.DEFAULT_NAME}var r=e[t.DataParser.OFFSET];a.frameIntOffset=r[0];a.frameFloatOffset=r[1];a.frameOffset=r[2];this._animation=a;if(t.DataParser.ACTION in e){a.actionTimeline=this._parseBinaryTimeline(0,e[t.DataParser.ACTION])}if(t.DataParser.Z_ORDER in e){a.zOrderTimeline=this._parseBinaryTimeline(1,e[t.DataParser.Z_ORDER])}if(t.DataParser.BONE in e){var i=e[t.DataParser.BONE];for(var n in i){var s=i[n];if(t.DragonBones.webAssembly){n=this._getUTF16Key(n)}var o=this._armature.getBone(n);if(o===null){continue}for(var l=0,h=s.length;l<h;l+=2){var f=s[l];var u=s[l+1];var _=this._parseBinaryTimeline(f,u);this._animation.addBoneTimeline(o,_)}}}if(t.DataParser.SURFACE in e){var i=e[t.DataParser.SURFACE];for(var n in i){var s=i[n];if(t.DragonBones.webAssembly){n=this._getUTF16Key(n)}var c=this._armature.getBone(n);if(c===null){continue}for(var l=0,h=s.length;l<h;l+=2){var f=s[l];var u=s[l+1];var _=this._parseBinaryTimeline(f,u);this._animation.addSurfaceTimeline(c,_)}}}if(t.DataParser.SLOT in e){var i=e[t.DataParser.SLOT];for(var n in i){var s=i[n];if(t.DragonBones.webAssembly){n=this._getUTF16Key(n)}var p=this._armature.getSlot(n);if(p===null){continue}for(var l=0,h=s.length;l<h;l+=2){var f=s[l];var u=s[l+1];var _=this._parseBinaryTimeline(f,u);this._animation.addSlotTimeline(p,_)}}}if(t.DataParser.CONSTRAINT in e){var i=e[t.DataParser.CONSTRAINT];for(var n in i){var s=i[n];if(t.DragonBones.webAssembly){n=this._getUTF16Key(n)}var m=this._armature.getConstraint(n);if(m===null){continue}for(var l=0,h=s.length;l<h;l+=2){var f=s[l];var u=s[l+1];var _=this._parseBinaryTimeline(f,u);this._animation.addConstraintTimeline(m,_)}}}if(t.DataParser.ANIMATION in e){var i=e[t.DataParser.ANIMATION];for(var n in i){var s=i[n];if(t.DragonBones.webAssembly){n=this._getUTF16Key(n)}for(var l=0,h=s.length;l<h;l+=2){var f=s[l];var u=s[l+1];var _=this._parseBinaryTimeline(f,u);this._animation.addAnimationTimeline(n,_)}}}this._animation=null;return a};a.prototype._parseArray=function(e){var a=e[t.DataParser.OFFSET];var r=a[1];var i=a[3];var n=a[5];var s=a[7];var o=a[9];var l=a[11];var h=new Int16Array(this._binary,this._binaryOffset+a[0],r/Int16Array.BYTES_PER_ELEMENT);var f=new Float32Array(this._binary,this._binaryOffset+a[2],i/Float32Array.BYTES_PER_ELEMENT);var u=new Int16Array(this._binary,this._binaryOffset+a[4],n/Int16Array.BYTES_PER_ELEMENT);var _=new Float32Array(this._binary,this._binaryOffset+a[6],s/Float32Array.BYTES_PER_ELEMENT);var c=new Int16Array(this._binary,this._binaryOffset+a[8],o/Int16Array.BYTES_PER_ELEMENT);var p=new Uint16Array(this._binary,this._binaryOffset+a[10],l/Uint16Array.BYTES_PER_ELEMENT);if(t.DragonBones.webAssembly){var m=r+i+n+s+o+l;var d=t.webAssemblyModule._malloc(m);var v=new Uint8Array(this._binary,this._binaryOffset,m/Uint8Array.BYTES_PER_ELEMENT);var y=new Uint8Array(t.webAssemblyModule.HEAP16.buffer,d,v.length);for(var g=0,b=v.length;g<b;++g){y[g]=v[g]}t.webAssemblyModule.setDataBinary(this._data,d,r,i,n,s,o,l);this._intArrayBuffer=h;this._floatArrayBuffer=f;this._frameIntArrayBuffer=u;this._frameFloatArrayBuffer=_;this._frameArrayBuffer=c;this._timelineArrayBuffer=p}else{this._data.binary=this._binary;this._data.intArray=this._intArrayBuffer=h;this._data.floatArray=this._floatArrayBuffer=f;this._data.frameIntArray=this._frameIntArrayBuffer=u;this._data.frameFloatArray=this._frameFloatArrayBuffer=_;this._data.frameArray=this._frameArrayBuffer=c;this._data.timelineArray=this._timelineArrayBuffer=p}};a.prototype.parseDragonBonesData=function(t,a){if(a===void 0){a=1}console.assert(t!==null&&t!==undefined&&t instanceof ArrayBuffer,"Data error.");var r=new Uint8Array(t,0,8);if(r[0]!=="D".charCodeAt(0)||r[1]!=="B".charCodeAt(0)||r[2]!=="D".charCodeAt(0)||r[3]!=="T".charCodeAt(0)){console.assert(false,"Nonsupport data.");return null}var i=new Uint32Array(t,8,1)[0];var n=new Uint8Array(t,8+4,i);var s=this._decodeUTF8(n);var o=JSON.parse(s);this._binaryOffset=8+4+i;this._binary=t;return e.prototype.parseDragonBonesData.call(this,o,a)};a.getInstance=function(){if(a._binaryDataParserInstance===null){a._binaryDataParserInstance=new a}return a._binaryDataParserInstance};a._binaryDataParserInstance=null;return a}(t.ObjectDataParser);t.BinaryDataParser=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(){function e(a){if(a===void 0){a=null}this.autoSearch=false;this._dragonBonesDataMap={};this._textureAtlasDataMap={};this._dragonBones=null;this._dataParser=null;if(e._objectParser===null){e._objectParser=new t.ObjectDataParser}if(e._binaryParser===null){e._binaryParser=new t.BinaryDataParser}this._dataParser=a!==null?a:e._objectParser}e.prototype._isSupportMesh=function(){return true};e.prototype._getTextureData=function(t,e){if(t in this._textureAtlasDataMap){for(var a=0,r=this._textureAtlasDataMap[t];a<r.length;a++){var i=r[a];var n=i.getTexture(e);if(n!==null){return n}}}if(this.autoSearch){for(var s in this._textureAtlasDataMap){for(var o=0,l=this._textureAtlasDataMap[s];o<l.length;o++){var i=l[o];if(i.autoSearch){var n=i.getTexture(e);if(n!==null){return n}}}}}return null};e.prototype._fillBuildArmaturePackage=function(t,e,a,r,i){var n=null;var s=null;if(e.length>0){if(e in this._dragonBonesDataMap){n=this._dragonBonesDataMap[e];s=n.getArmature(a)}}if(s===null&&(e.length===0||this.autoSearch)){for(var o in this._dragonBonesDataMap){n=this._dragonBonesDataMap[o];if(e.length===0||n.autoSearch){s=n.getArmature(a);if(s!==null){e=o;break}}}}if(s!==null){t.dataName=e;t.textureAtlasName=i;t.data=n;t.armature=s;t.skin=null;if(r.length>0){t.skin=s.getSkin(r);if(t.skin===null&&this.autoSearch){for(var o in this._dragonBonesDataMap){var l=this._dragonBonesDataMap[o];var h=l.getArmature(r);if(h!==null){t.skin=h.defaultSkin;break}}}}if(t.skin===null){t.skin=s.defaultSkin}return true}return false};e.prototype._buildBones=function(e,a){for(var r=0,i=e.armature.sortedBones;r<i.length;r++){var n=i[r];var s=t.BaseObject.borrowObject(n.type===0?t.Bone:t.Surface);s.init(n,a)}};e.prototype._buildSlots=function(e,a){var r=e.skin;var i=e.armature.defaultSkin;if(r===null||i===null){return}var n={};for(var s in i.displays){var o=i.getDisplays(s);n[s]=o}if(r!==i){for(var s in r.displays){var o=r.getDisplays(s);n[s]=o}}for(var l=0,h=e.armature.sortedSlots;l<h.length;l++){var f=h[l];var u=f.name in n?n[f.name]:null;var _=this._buildSlot(e,f,a);_.rawDisplayDatas=u;if(u!==null){var c=new Array;for(var p=0,m=t.DragonBones.webAssembly?u.size():u.length;p<m;++p){var d=t.DragonBones.webAssembly?u.get(p):u[p];if(d!==null){c.push(this._getSlotDisplay(e,d,null,_))}else{c.push(null)}}_._setDisplayList(c)}_._setDisplayIndex(f.displayIndex,true)}};e.prototype._buildConstraints=function(e,a){var r=e.armature.constraints;for(var i in r){var n=r[i];switch(n.type){case 0:var s=t.BaseObject.borrowObject(t.IKConstraint);s.init(n,a);a._addConstraint(s);break;case 1:var o=t.BaseObject.borrowObject(t.PathConstraint);o.init(n,a);a._addConstraint(o);break;default:var l=t.BaseObject.borrowObject(t.IKConstraint);l.init(n,a);a._addConstraint(l);break}}};e.prototype._buildChildArmature=function(t,e,a){e;return this.buildArmature(a.path,t!==null?t.dataName:"","",t!==null?t.textureAtlasName:"")};e.prototype._getSlotDisplay=function(e,a,r,i){var n=e!==null?e.dataName:a.parent.parent.parent.name;var s=null;switch(a.type){case 0:{var o=a;if(o.texture===null){o.texture=this._getTextureData(n,a.path)}else if(e!==null&&e.textureAtlasName.length>0){o.texture=this._getTextureData(e.textureAtlasName,a.path)}if(r!==null&&r.type===2&&this._isSupportMesh()){s=i.meshDisplay}else{s=i.rawDisplay}break}case 2:{var l=a;if(l.texture===null){l.texture=this._getTextureData(n,l.path)}else if(e!==null&&e.textureAtlasName.length>0){l.texture=this._getTextureData(e.textureAtlasName,l.path)}if(this._isSupportMesh()){s=i.meshDisplay}else{s=i.rawDisplay}break}case 1:{var h=a;var f=this._buildChildArmature(e,i,a);if(f!==null){f.inheritAnimation=h.inheritAnimation;if(!f.inheritAnimation){var u=h.actions.length>0?h.actions:f.armatureData.defaultActions;if(u.length>0){for(var _=0,c=u;_<c.length;_++){var p=c[_];var m=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(p,m,i.armature);m.slot=i;i.armature._bufferAction(m,false)}}else{f.animation.play()}}h.armature=f.armatureData}s=f;break}case 3:break;default:break}return s};e.prototype.parseDragonBonesData=function(t,a,r){if(a===void 0){a=null}if(r===void 0){r=1}var i=t instanceof ArrayBuffer?e._binaryParser:this._dataParser;var n=i.parseDragonBonesData(t,r);while(true){var s=this._buildTextureAtlasData(null,null);if(i.parseTextureAtlasData(null,s,r)){this.addTextureAtlasData(s,a)}else{s.returnToPool();break}}if(n!==null){this.addDragonBonesData(n,a)}return n};e.prototype.parseTextureAtlasData=function(t,e,a,r){if(a===void 0){a=null}if(r===void 0){r=1}var i=this._buildTextureAtlasData(null,null);this._dataParser.parseTextureAtlasData(t,i,r);this._buildTextureAtlasData(i,e||null);this.addTextureAtlasData(i,a);return i};e.prototype.updateTextureAtlasData=function(t,e){var a=this.getTextureAtlasData(t);if(a!==null){for(var r=0,i=a.length;r<i;++r){if(r<e.length){this._buildTextureAtlasData(a[r],e[r])}}}};e.prototype.getDragonBonesData=function(t){return t in this._dragonBonesDataMap?this._dragonBonesDataMap[t]:null};e.prototype.addDragonBonesData=function(t,e){if(e===void 0){e=null}e=e!==null?e:t.name;if(e in this._dragonBonesDataMap){if(this._dragonBonesDataMap[e]===t){return}console.warn("Can not add same name data: "+e);return}this._dragonBonesDataMap[e]=t};e.prototype.removeDragonBonesData=function(t,e){if(e===void 0){e=true}if(t in this._dragonBonesDataMap){if(e){this._dragonBones.bufferObject(this._dragonBonesDataMap[t])}delete this._dragonBonesDataMap[t]}};e.prototype.getTextureAtlasData=function(t){return t in this._textureAtlasDataMap?this._textureAtlasDataMap[t]:null};e.prototype.addTextureAtlasData=function(t,e){if(e===void 0){e=null}e=e!==null?e:t.name;var a=e in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:this._textureAtlasDataMap[e]=[];if(a.indexOf(t)<0){a.push(t)}};e.prototype.removeTextureAtlasData=function(t,e){if(e===void 0){e=true}if(t in this._textureAtlasDataMap){var a=this._textureAtlasDataMap[t];if(e){for(var r=0,i=a;r<i.length;r++){var n=i[r];this._dragonBones.bufferObject(n)}}delete this._textureAtlasDataMap[t]}};e.prototype.getArmatureData=function(t,e){if(e===void 0){e=""}var r=new a;if(!this._fillBuildArmaturePackage(r,e,t,"","")){return null}return r.armature};e.prototype.clear=function(t){if(t===void 0){t=true}for(var e in this._dragonBonesDataMap){if(t){this._dragonBones.bufferObject(this._dragonBonesDataMap[e])}delete this._dragonBonesDataMap[e]}for(var e in this._textureAtlasDataMap){if(t){var a=this._textureAtlasDataMap[e];for(var r=0,i=a;r<i.length;r++){var n=i[r];this._dragonBones.bufferObject(n)}}delete this._textureAtlasDataMap[e]}};e.prototype.buildArmature=function(t,e,r,i){if(e===void 0){e=""}if(r===void 0){r=""}if(i===void 0){i=""}var n=new a;if(!this._fillBuildArmaturePackage(n,e||"",t,r||"",i||"")){console.warn("No armature data: "+t+", "+(e!==null?e:""));return null}var s=this._buildArmature(n);this._buildBones(n,s);this._buildSlots(n,s);this._buildConstraints(n,s);s.invalidUpdate(null,true);s.advanceTime(0);return s};e.prototype.replaceDisplay=function(e,a,r){if(r===void 0){r=-1}if(r<0){r=e.displayIndex}if(r<0){r=0}e.replaceDisplayData(a,r);var i=e.displayList;if(i.length<=r){i.length=r+1;for(var n=0,s=i.length;n<s;++n){if(!i[n]){i[n]=null}}}if(a!==null){var o=e.rawDisplayDatas;var l=null;if(o){if(t.DragonBones.webAssembly){if(r<o.size()){l=o.get(r)}}else{if(r<o.length){l=o[r]}}}i[r]=this._getSlotDisplay(null,a,l,e)}else{i[r]=null}e.displayList=i};e.prototype.replaceSlotDisplay=function(t,e,a,r,i,n){if(n===void 0){n=-1}var s=this.getArmatureData(e,t||"");if(!s||!s.defaultSkin){return false}var o=s.defaultSkin.getDisplay(a,r);if(!o){return false}this.replaceDisplay(i,o,n);return true};e.prototype.replaceSlotDisplayList=function(e,a,r,i){var n=this.getArmatureData(a,e||"");if(!n||!n.defaultSkin){return false}var s=n.defaultSkin.getDisplays(r);if(!s){return false}var o=0;for(var l=0,h=t.DragonBones.webAssembly?s.size():s.length;l<h;++l){var f=t.DragonBones.webAssembly?s.get(l):s[l];this.replaceDisplay(i,f,o++)}return true};e.prototype.replaceSkin=function(e,a,r,i){if(r===void 0){r=false}if(i===void 0){i=null}var n=false;var s=a.parent.defaultSkin;for(var o=0,l=e.getSlots();o<l.length;o++){var h=l[o];if(i!==null&&i.indexOf(h.name)>=0){continue}var f=a.getDisplays(h.name);if(!f){if(s!==null&&a!==s){f=s.getDisplays(h.name)}if(!f){if(r){h.rawDisplayDatas=null;h.displayList=[]}continue}}var u=t.DragonBones.webAssembly?f.size():f.length;var _=h.displayList;_.length=u;for(var c=0,p=u;c<p;++c){var m=t.DragonBones.webAssembly?f.get(c):f[c];if(m!==null){_[c]=this._getSlotDisplay(null,m,null,h)}else{_[c]=null}}n=true;h.rawDisplayDatas=f;h.displayList=_}return n};e.prototype.replaceAnimation=function(e,a,r){if(r===void 0){r=true}var i=a.defaultSkin;if(i===null){return false}if(r){e.animation.animations=a.animations}else{var n=e.animation.animations;var s={};for(var o in n){s[o]=n[o]}for(var o in a.animations){s[o]=a.animations[o]}e.animation.animations=s}for(var l=0,h=e.getSlots();l<h.length;l++){var f=h[l];var u=0;for(var _=0,c=f.displayList;_<c.length;_++){var p=c[_];if(p instanceof t.Armature){var m=i.getDisplays(f.name);if(m!==null&&u<(t.DragonBones.webAssembly?m.size():m.length)){var d=t.DragonBones.webAssembly?m.get(u):m[u];if(d!==null&&d.type===1){var v=this.getArmatureData(d.path,d.parent.parent.parent.name);if(v){this.replaceAnimation(p,v,r)}}}}u++}}return true};e.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap};e.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap};Object.defineProperty(e.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:true,configurable:true});e.prototype.changeSkin=function(t,e,a){if(a===void 0){a=null}return this.replaceSkin(t,e,false,a)};e.prototype.copyAnimationsToArmature=function(t,e,a,r,i){if(a===void 0){a=""}if(r===void 0){r=""}if(i===void 0){i=true}a;var n=this.getArmatureData(e,r);if(!n){return false}return this.replaceAnimation(t,n,i)};e._objectParser=null;e._binaryParser=null;return e}();t.BaseFactory=e;var a=function(){function t(){this.dataName="";this.textureAtlasName="";this.skin=null}return t}();t.BuildArmaturePackage=a})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;t._renderTexture=null;return t}r.toString=function(){return"[class dragonBones.EgretTextureAtlasData]"};r.prototype._onClear=function(){e.prototype._onClear.call(this);if(this.disposeEnabled&&this._renderTexture!==null){this._renderTexture.dispose()}this.disposeEnabled=false;this._renderTexture=null};r.prototype.createTexture=function(){return t.BaseObject.borrowObject(a)};Object.defineProperty(r.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(t){if(this._renderTexture===t){return}this._renderTexture=t;if(this._renderTexture!==null){var e=this._renderTexture.bitmapData;var a=this.width>0?this.width:e.width;var r=this.height>0?this.height:e.height;for(var i in this.textures){var n=egret.$TextureScaleFactor;var s=this.textures[i];var o=s.region.width;var l=s.region.height;if(s.renderTexture===null){s.renderTexture=new egret.Texture}s.renderTexture.bitmapData=e;if(s.rotated){s.renderTexture.$initData(s.region.x*n,s.region.y*n,l*n,o*n,0,0,l*n,o*n,a,r,s.rotated)}else{s.renderTexture.$initData(s.region.x*n,s.region.y*n,o*n,l*n,0,0,o*n,l*n,a,r)}}}else{for(var i in this.textures){var s=this.textures[i];s.renderTexture=null}}},enumerable:true,configurable:true});r.prototype.dispose=function(){console.warn("");this.returnToPool()};Object.defineProperty(r.prototype,"texture",{get:function(){console.warn("");return this.renderTexture},enumerable:true,configurable:true});return r}(t.TextureAtlasData);t.EgretTextureAtlasData=e;var a=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.renderTexture=null;return e}e.toString=function(){return"[class dragonBones.EgretTextureData]"};e.prototype._onClear=function(){t.prototype._onClear.call(this);if(this.renderTexture!==null){}this.renderTexture=null};return e}(t.TextureData);t.EgretTextureData=a})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(a.prototype,"eventObject",{get:function(){return this.data},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animationName",{get:function(){var t=this.eventObject.animationState;return t!==null?t.name:""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"armature",{get:function(){return this.eventObject.armature},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"bone",{get:function(){return this.eventObject.bone},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"slot",{get:function(){return this.eventObject.slot},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"animationState",{get:function(){return this.eventObject.animationState},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"frameLabel",{get:function(){return this.eventObject.name},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"sound",{get:function(){return this.eventObject.name},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"movementID",{get:function(){return this.animationName},enumerable:true,configurable:true});a.START=t.EventObject.START;a.LOOP_COMPLETE=t.EventObject.LOOP_COMPLETE;a.COMPLETE=t.EventObject.COMPLETE;a.FADE_IN=t.EventObject.FADE_IN;a.FADE_IN_COMPLETE=t.EventObject.FADE_IN_COMPLETE;a.FADE_OUT=t.EventObject.FADE_OUT;a.FADE_OUT_COMPLETE=t.EventObject.FADE_OUT_COMPLETE;a.FRAME_EVENT=t.EventObject.FRAME_EVENT;a.SOUND_EVENT=t.EventObject.SOUND_EVENT;a.ANIMATION_FRAME_EVENT=t.EventObject.FRAME_EVENT;a.BONE_FRAME_EVENT=t.EventObject.FRAME_EVENT;a.MOVEMENT_FRAME_EVENT=t.EventObject.FRAME_EVENT;a.SOUND=t.EventObject.SOUND_EVENT;return a}(egret.Event);t.EgretEvent=e;var a=function(a){__extends(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;t.debugDraw=false;t._batchEnabled=!(global["nativeRender"]||global["bricks"]);t._childDirty=true;t._debugDraw=false;t._armature=null;t._bounds=null;t._debugDrawer=null;return t}r._cleanBeforeRender=function(){};r.prototype.dbInit=function(t){this._armature=t;if(this._batchEnabled){this.$renderNode=new egret.sys.GroupNode;this.$renderNode.cleanBeforeRender=r._cleanBeforeRender}};r.prototype.dbClear=function(){this._armature=null;this._bounds=null;this._debugDrawer=null};r.prototype.dbUpdate=function(){var e=t.DragonBones.debugDraw||this.debugDraw;if(e||this._debugDraw){this._debugDraw=e;if(this._debugDraw){if(this._debugDrawer===null){this._debugDrawer=new egret.Sprite}if(this._debugDrawer.parent!==this){this.addChild(this._debugDrawer)}var a=2;var r=this._debugDrawer.graphics;r.clear();for(var i=0,n=this._armature.getBones();i<n.length;i++){var s=n[i];if(s.boneData.type===0){var o=Math.max(s.boneData.length,a);var l=s.globalTransformMatrix.tx;var h=s.globalTransformMatrix.ty;var f=l-s.globalTransformMatrix.a*a;var u=h-s.globalTransformMatrix.b*a;var _=l+s.globalTransformMatrix.a*o;var c=h+s.globalTransformMatrix.b*o;var p=l+u-h;var m=h+f-l;var d=l-u+h;var v=h-f+l;r.lineStyle(2,65535,.7);r.moveTo(f,u);r.lineTo(_,c);r.moveTo(p,m);r.lineTo(d,v)}else{var y=s;var g=y._boneData;var b=g.segmentX;var D=g.segmentY;var T=y._vertices;r.lineStyle(2,16776960,.7);for(var A=0;A<D;++A){for(var x=0;x<b;++x){var P=(x+A*(b+1))*2;var O=T[P];var S=T[P+1];r.moveTo(O,S);r.lineTo(T[P+2],T[P+3]);r.moveTo(O,S);r.lineTo(T[P+(b+1)*2],T[P+(b+1)*2+1]);if(x===b-1){r.moveTo(T[P+2],T[P+3]);r.lineTo(T[P+(b+2)*2],T[P+(b+2)*2+1])}if(A===D-1){r.moveTo(T[P+(b+1)*2],T[P+(b+1)*2+1]);r.lineTo(T[P+(b+2)*2],T[P+(b+2)*2+1])}}}}}for(var E=0,M=this._armature.getSlots();E<M.length;E++){var B=M[E];var C=B.boundingBoxData;if(C!==null){var w=this._debugDrawer.getChildByName(B.name);if(w===null){w=new egret.Shape;w.name=B.name;this._debugDrawer.addChild(w)}w.graphics.clear();w.graphics.lineStyle(2,16711935,.7);switch(C.type){case 0:w.graphics.drawRect(-C.width*.5,-C.height*.5,C.width,C.height);break;case 1:w.graphics.drawEllipse(-C.width*.5,-C.height*.5,C.width,C.height);break;case 2:var T=C.vertices;for(var I=0;I<T.length;I+=2){var O=T[I];var S=T[I+1];if(I===0){w.graphics.moveTo(O,S)}else{w.graphics.lineTo(O,S)}}w.graphics.lineTo(T[0],T[1]);break;default:break}B.updateTransformAndMatrix();B.updateGlobalTransform();w.$setMatrix(B.globalTransformMatrix,false)}else{var w=this._debugDrawer.getChildByName(B.name);if(w!==null){this._debugDrawer.removeChild(w)}}}}else if(this._debugDrawer!==null&&this._debugDrawer.parent===this){this.removeChild(this._debugDrawer)}}if(!t.isV5&&this._batchEnabled&&this._childDirty){this.$invalidateContentBounds()}};r.prototype.dispose=function(t){if(t===void 0){t=true}t;if(this._armature!==null){this._armature.dispose();this._armature=null}};r.prototype.dispatchDBEvent=function(t,r){var i=egret.Event.create(e,t);i.data=r;a.prototype.dispatchEvent.call(this,i);egret.Event.release(i)};r.prototype.hasDBEventListener=function(t){return this.hasEventListener(t)};r.prototype.addDBEventListener=function(t,e,a){this.addEventListener(t,e,a)};r.prototype.removeDBEventListener=function(t,e,a){this.removeEventListener(t,e,a)};r.prototype.disableBatch=function(){if(!this._batchEnabled||!this._armature){return}for(var t=0,e=this._armature.getSlots();t<e.length;t++){var a=e[t];var r=a._deformVertices&&a._deformVertices.verticesData?a.meshDisplay:a.rawDisplay;if(!a.display&&r===a.meshDisplay){r=a.rawDisplay}var i=r.$renderNode;if(i.matrix){r.$setMatrix(a.globalTransformMatrix,false)}this.addChild(r)}this._batchEnabled=false;this.$renderNode.cleanBeforeRender=null;this.$renderNode=null;this.armature.invalidUpdate(null,true)};Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"animation",{get:function(){return this._armature.animation},enumerable:true,configurable:true});r.prototype.$measureContentBounds=function(e){if(this._batchEnabled&&this._armature){if(this._childDirty){this._childDirty=false;var r=true;var i=new egret.Rectangle;for(var n=0,s=this._armature.getSlots();n<s.length;n++){var o=s[n];var l=o.display;if(!l||!l.$renderNode||!l.$renderNode.image){continue}var h=l.$renderNode.matrix;if(l===o.meshDisplay){var f=l.$renderNode.vertices;if(f&&f.length>0){i.setTo(999999,999999,-999999,-999999);for(var u=0,_=f.length;u<_;u+=2){var c=f[u];var p=f[u+1];if(i.x>c)i.x=c;if(i.width<c)i.width=c;if(i.y>p)i.y=p;if(i.height<p)i.height=p}i.width-=i.x;i.height-=i.y}else{continue}}else{var m=o.displayData;if(m&&m instanceof t.ImageDisplayData&&m.texture){var d=m.texture.parent.scale;i.x=0;i.y=0;i.width=m.texture.region.width*d;i.height=m.texture.region.height*d}else{continue}}h.$transformBounds(i);var v=i.x;var y=i.y;var g=i.x+i.width;var b=i.y+i.height;if(r){r=false;e.x=v;e.y=y;e.width=g;e.height=b}else{if(v<e.x){e.x=v}if(y<e.y){e.y=y}if(g>e.width){e.width=g}if(b>e.height){e.height=b}}}e.width-=e.x;e.height-=e.y;if(t.isV5){if(this._bounds===null){this._bounds=new egret.Rectangle}this._bounds.copyFrom(e)}}else if(t.isV5){if(this._bounds===null){this._bounds=new egret.Rectangle}e.copyFrom(this._bounds)}return e}return a.prototype.$measureContentBounds.call(this,e)};r.prototype.hasEvent=function(t){return this.hasDBEventListener(t)};r.prototype.addEvent=function(t,e,a){this.addDBEventListener(t,e,a)};r.prototype.removeEvent=function(t,e,a){this.removeDBEventListener(t,e,a)};r.prototype.advanceTimeBySelf=function(e){if(e){this._armature.clock=t.EgretFactory.factory.clock}else{this._armature.clock=null}};return r}(egret.DisplayObjectContainer);t.EgretArmatureDisplay=a;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);t.Event=r;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);t.ArmatureEvent=i;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);t.AnimationEvent=n;var s=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);t.FrameEvent=s;var o=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);t.SoundEvent=o;var l=function(e){__extends(a,e);function a(a,r,i){if(i===void 0){i=1}var n=e.call(this)||this;console.warn("");n._onClear();t.ObjectDataParser.getInstance().parseTextureAtlasData(r,n,i);n.renderTexture=a;return n}a.toString=function(){return"[class dragonBones.EgretTextureAtlas]"};return a}(t.EgretTextureAtlasData);t.EgretTextureAtlas=l;var h=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(l);t.EgretSheetAtlas=h;var f=function(){function e(){}e.getInstance=function(){console.warn("");return t.EgretFactory.factory.soundEventManager};return e}();t.SoundEventManager=f;var u=function(){function t(){console.warn("")}return t}();t.AnimationCacheManager=u})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t.transformUpdateEnabled=false;t._armatureDisplay=null;t._renderDisplay=null;t._colorFilter=null;return t}a.toString=function(){return"[class dragonBones.EgretSlot]"};a.prototype.init=function(a,r,i,n){e.prototype.init.call(this,a,r,i,n);if(t.isV5){this._updateTransform=this._updateTransformV5}else{this._updateTransform=this._updateTransformV4}};a.prototype._onClear=function(){e.prototype._onClear.call(this);this._armatureDisplay=null;this._renderDisplay=null;this._colorFilter=null};a.prototype._initDisplay=function(t,e){t;e};a.prototype._disposeDisplay=function(t,e){t;e};a.prototype._onUpdateDisplay=function(){this._armatureDisplay=this._armature.display;this._renderDisplay=this._display!==null?this._display:this._rawDisplay;if(t.isV5&&this._armatureDisplay._batchEnabled){if(this._renderDisplay===this._rawDisplay&&!(this._renderDisplay.$renderNode instanceof egret.sys.BitmapNode)){this._renderDisplay.$renderNode=new egret.sys.BitmapNode}}if(this._armatureDisplay._batchEnabled){if(this._renderDisplay!==this._rawDisplay&&this._renderDisplay!==this._meshDisplay){this._armatureDisplay.disableBatch()}else{var e=this._renderDisplay.$renderNode;if(!e.matrix){e.matrix=new egret.Matrix}}}};a.prototype._addDisplay=function(){if(this._armatureDisplay._batchEnabled){this._armatureDisplay.$renderNode.addNode(this._renderDisplay.$renderNode)}else{this._armatureDisplay.addChild(this._renderDisplay)}};a.prototype._replaceDisplay=function(t){var e=t;if(this._armatureDisplay._batchEnabled){var a=this._armatureDisplay.$renderNode.drawData;a[a.indexOf(e.$renderNode)]=this._renderDisplay.$renderNode}else{this._armatureDisplay.addChild(this._renderDisplay);this._armatureDisplay.swapChildren(this._renderDisplay,e);this._armatureDisplay.removeChild(e)}};a.prototype._removeDisplay=function(){if(this._armatureDisplay._batchEnabled){var t=this._armatureDisplay.$renderNode.drawData;t.splice(t.indexOf(this._renderDisplay.$renderNode),1)}else{this._renderDisplay.parent.removeChild(this._renderDisplay)}};a.prototype._updateZOrder=function(){if(this._armatureDisplay._batchEnabled){var t=this._armatureDisplay.$renderNode.drawData;t[this._zOrder]=this._renderDisplay.$renderNode}else{var e=this._armatureDisplay.getChildIndex(this._renderDisplay);if(e===this._zOrder){return}this._armatureDisplay.addChildAt(this._renderDisplay,this._zOrder)}};a.prototype._updateVisible=function(){var t=this._parent.visible&&this._visible;if(this._armatureDisplay._batchEnabled){var e=this._renderDisplay.$renderNode;e.alpha=t?1:0}else{this._renderDisplay.visible=t}};a.prototype._updateBlendMode=function(){switch(this._blendMode){case 0:this._renderDisplay.blendMode=egret.BlendMode.NORMAL;break;case 1:this._renderDisplay.blendMode=egret.BlendMode.ADD;break;case 5:this._renderDisplay.blendMode=egret.BlendMode.ERASE;break;default:break}if(this._armatureDisplay._batchEnabled){var t=this._renderDisplay.$renderNode;t.blendMode=egret.sys.blendModeToNumber(this._renderDisplay.blendMode)}};a.prototype._updateColor=function(){if(this._colorTransform.redMultiplier!==1||this._colorTransform.greenMultiplier!==1||this._colorTransform.blueMultiplier!==1||this._colorTransform.redOffset!==0||this._colorTransform.greenOffset!==0||this._colorTransform.blueOffset!==0||this._colorTransform.alphaOffset!==0){if(this._colorFilter===null){this._colorFilter=new egret.ColorMatrixFilter}var t=this._colorFilter.matrix;t[0]=this._colorTransform.redMultiplier;t[6]=this._colorTransform.greenMultiplier;t[12]=this._colorTransform.blueMultiplier;t[18]=this._colorTransform.alphaMultiplier;t[4]=this._colorTransform.redOffset;t[9]=this._colorTransform.greenOffset;t[14]=this._colorTransform.blueOffset;t[19]=this._colorTransform.alphaOffset;this._colorFilter.matrix=t;if(this._armatureDisplay._batchEnabled){var e=this._renderDisplay.$renderNode;e.filter=this._colorFilter;e.alpha=1}var a=this._renderDisplay.filters;if(!a){a=[]}if(a.indexOf(this._colorFilter)<0){a.push(this._colorFilter)}this._renderDisplay.filters=a;this._renderDisplay.alpha=1}else{if(this._armatureDisplay._batchEnabled){var e=this._renderDisplay.$renderNode;e.filter=null;e.alpha=this._colorTransform.alphaMultiplier}this._renderDisplay.filters=null;this._renderDisplay.alpha=this._colorTransform.alphaMultiplier}};a.prototype._updateFrame=function(){var e=this._deformVertices!==null&&this._display===this._meshDisplay?this._deformVertices.verticesData:null;var a=this._textureData;if(this._displayIndex>=0&&this._display!==null&&a!==null){if(this._armature.replacedTexture!==null&&this._rawDisplayDatas!==null&&this._rawDisplayDatas.indexOf(this._displayData)>=0){var r=a.parent;if(this._armature._replaceTextureAtlasData===null){r=t.BaseObject.borrowObject(t.EgretTextureAtlasData);r.copyFrom(a.parent);r.renderTexture=this._armature.replacedTexture;this._armature._replaceTextureAtlasData=r}else{r=this._armature._replaceTextureAtlasData}a=r.getTexture(a.name)}if(a.renderTexture!==null){if(e!==null){var i=e.data;var n=i.intArray;var s=i.floatArray;var o=n[e.offset+0];var l=n[e.offset+1];var h=n[e.offset+2];if(h<0){h+=65536}var f=h+o*2;var u=this._armature._armatureData.scale;var _=this._renderDisplay;var c=_.$renderNode;c.uvs.length=o*2;c.vertices.length=o*2;c.indices.length=l*3;for(var p=0,m=o*2;p<m;++p){c.vertices[p]=s[h+p]*u;c.uvs[p]=s[f+p]}for(var p=0;p<l*3;++p){c.indices[p]=n[e.offset+4+p]}if(this._armatureDisplay._batchEnabled){var d=a.renderTexture;var v=this._renderDisplay.$renderNode;egret.sys.RenderNode.prototype.cleanBeforeRender.call(v);v.image=d.bitmapData;if(t.isV5){v.drawMesh(d.$bitmapX,d.$bitmapY,d.$bitmapWidth,d.$bitmapHeight,d.$offsetX,d.$offsetY,d.textureWidth,d.textureHeight);v.imageWidth=d.$sourceWidth;v.imageHeight=d.$sourceHeight}else{var y=d;v.drawMesh(y._bitmapX,y._bitmapY,y._bitmapWidth,y._bitmapHeight,y._offsetX,y._offsetY,y.textureWidth,y.textureHeight);v.imageWidth=y._sourceWidth;v.imageHeight=y._sourceHeight}this._blendModeDirty=true;this._colorDirty=true}_.texture=a.renderTexture;_.anchorOffsetX=this._pivotX;_.anchorOffsetY=this._pivotY;_.$updateVertices();if(!t.isV5){_.$invalidateTransform()}var g=e.weight!==null;var b=this._parent._boneData.type!==0;if(g||b){this._identityTransform()}}else{var u=a.parent.scale*this._armature._armatureData.scale;var D=(a.rotated?a.region.height:a.region.width)*u;var T=(a.rotated?a.region.width:a.region.height)*u;var A=this._renderDisplay;var d=a.renderTexture;A.texture=d;if(this._armatureDisplay._batchEnabled){var v=this._renderDisplay.$renderNode;egret.sys.RenderNode.prototype.cleanBeforeRender.call(v);v.image=d.bitmapData;if(t.isV5){v.drawImage(d.$bitmapX,d.$bitmapY,d.$bitmapWidth,d.$bitmapHeight,d.$offsetX,d.$offsetY,D,T);v.imageWidth=d.$sourceWidth;v.imageHeight=d.$sourceHeight}else{var y=d;v.drawImage(y._bitmapX,y._bitmapY,y._bitmapWidth,y._bitmapHeight,y._offsetX,y._offsetY,D,T);v.imageWidth=y._sourceWidth;v.imageHeight=y._sourceHeight}this._blendModeDirty=true;this._colorDirty=true}else{A.width=D;A.height=T}A.anchorOffsetX=this._pivotX;A.anchorOffsetY=this._pivotY}this._visibleDirty=true;return}}if(this._armatureDisplay._batchEnabled){this._renderDisplay.$renderNode.image=null}var x=this._renderDisplay;x.texture=null;x.x=0;x.y=0;x.visible=false};a.prototype._updateMesh=function(){var e=this._armature._armatureData.scale;var a=this._deformVertices.vertices;var r=this._deformVertices.bones;var i=this._deformVertices.verticesData;var n=i.weight;var s=a.length>0&&i.inheritDeform;var o=this._renderDisplay;var l=o.$renderNode;if(n!==null){var h=i.data;var f=h.intArray;var u=h.floatArray;var _=f[i.offset+0];var c=f[n.offset+1];if(c<0){c+=65536}for(var p=0,m=0,d=n.offset+2+r.length,v=c,y=0;p<_;++p){var g=f[d++];var b=0,D=0;for(var T=0;T<g;++T){var A=f[d++];var x=r[A];if(x!==null){var P=x.globalTransformMatrix;var O=u[v++];var S=u[v++]*e;var E=u[v++]*e;if(s){S+=a[y++];E+=a[y++]}b+=(P.a*S+P.c*E+P.tx)*O;D+=(P.b*S+P.d*E+P.ty)*O}}l.vertices[m++]=b;l.vertices[m++]=D}o.$updateVertices();if(!t.isV5){o.$invalidateTransform()}}else if(s){var M=this._parent._boneData.type!==0;var h=i.data;var f=h.intArray;var u=h.floatArray;var _=f[i.offset+0];var B=f[i.offset+2];if(B<0){B+=65536}for(var p=0,C=_*2;p<C;p+=2){var w=u[B+p]*e+a[p];var I=u[B+p+1]*e+a[p+1];if(M){var P=this._parent._getGlobalTransformMatrix(w,I);l.vertices[p]=P.a*w+P.c*I+P.tx;l.vertices[p+1]=P.b*w+P.d*I+P.ty}else{l.vertices[p]=w;l.vertices[p+1]=I}}o.$updateVertices();if(!t.isV5){o.$invalidateTransform()}}if(this._armatureDisplay._batchEnabled){this._armatureDisplay._childDirty=true}};a.prototype._updateGlueMesh=function(){};a.prototype._updateTransform=function(){throw new Error};a.prototype._identityTransform=function(){if(this._armatureDisplay._batchEnabled){this._armatureDisplay._childDirty=true;var t=this._renderDisplay.$renderNode.matrix;t.a=1;t.b=0;t.c=0;t.d=1;t.tx=0;t.ty=0}else{egret.$TempMatrix.identity();this._renderDisplay.$setMatrix(egret.$TempMatrix,this.transformUpdateEnabled)}};a.prototype._updateTransformV4=function(){var t=this.globalTransformMatrix;if(this._armatureDisplay._batchEnabled){this._armatureDisplay._childDirty=true;var e=this._renderDisplay.$renderNode.matrix;e.a=t.a;e.b=t.b;e.c=t.c;e.d=t.d;e.tx=this.globalTransformMatrix.tx-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY);e.ty=this.globalTransformMatrix.ty-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY)}else if(this.transformUpdateEnabled){this._renderDisplay.$setMatrix(t,true)}else{var a=this._renderDisplay.$DisplayObject;var e=a[6];e.a=this.globalTransformMatrix.a;e.b=this.globalTransformMatrix.b;e.c=this.globalTransformMatrix.c;e.d=this.globalTransformMatrix.d;e.tx=this.globalTransformMatrix.tx;e.ty=this.globalTransformMatrix.ty;this._renderDisplay.$removeFlags(8);this._renderDisplay.$invalidatePosition()}};a.prototype._updateTransformV5=function(){var t=this.globalTransformMatrix;if(this._armatureDisplay._batchEnabled){this._armatureDisplay._childDirty=true;var e=this._renderDisplay.$renderNode.matrix;e.a=t.a;e.b=t.b;e.c=t.c;e.d=t.d;e.tx=this.globalTransformMatrix.tx-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY);e.ty=this.globalTransformMatrix.ty-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY)}else{this._renderDisplay.$setMatrix(t,this.transformUpdateEnabled)}};return a}(t.Slot);t.EgretSlot=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){t.isV5=Number(egret.Capabilities.engineVersion.substr(0,3))>=5.1;var e=function(e){__extends(a,e);function a(r){if(r===void 0){r=null}var i=e.call(this,r)||this;if(a._dragonBonesInstance===null){var n=new t.EgretArmatureDisplay;a._dragonBonesInstance=new t.DragonBones(n);a._time=egret.getTimer()*.001;egret.startTick(a._clockHandler,a)}i._dragonBones=a._dragonBonesInstance;return i}a._clockHandler=function(t){t*=.001;var e=t-this._time;a._dragonBonesInstance.advanceTime(e);this._time=t;return false};Object.defineProperty(a,"factory",{get:function(){if(a._factory===null){a._factory=new a}return a._factory},enumerable:true,configurable:true});a.prototype._isSupportMesh=function(){if(egret.Capabilities.renderMode==="webgl"||egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE){return true}console.warn("Canvas can not support mesh, please change renderMode to webgl.");return false};a.prototype._buildTextureAtlasData=function(e,a){if(e!==null){if(a instanceof egret.Texture){e.renderTexture=a}else{var r=new egret.Texture;r.bitmapData=new egret.BitmapData(a);e.disposeEnabled=true;e.renderTexture=r}}else{e=t.BaseObject.borrowObject(t.EgretTextureAtlasData)}return e};a.prototype._buildArmature=function(e){var a=t.BaseObject.borrowObject(t.Armature);var r=new t.EgretArmatureDisplay;a.init(e.armature,r,r,this._dragonBones);return a};a.prototype._buildSlot=function(e,a,r){e;var i=t.BaseObject.borrowObject(t.EgretSlot);i.init(a,r,new egret.Bitmap,new egret.Mesh);return i};a.prototype.buildArmatureDisplay=function(t,e,a,r){if(e===void 0){e=""}if(a===void 0){a=""}if(r===void 0){r=""}var i=this.buildArmature(t,e||"",a||"",r||"");if(i!==null){this._dragonBones.clock.add(i);return i.display}return null};a.prototype.getTextureDisplay=function(t,e){if(e===void 0){e=null}var a=this._getTextureData(e!==null?e:"",t);if(a!==null&&a.renderTexture!==null){var r=a.renderTexture;var i=new egret.Bitmap(r);i.width=r.textureWidth*a.parent.scale;i.height=r.textureHeight*a.parent.scale;return i}return null};Object.defineProperty(a.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:true,configurable:true});Object.defineProperty(a,"clock",{get:function(){return a.factory.clock},enumerable:true,configurable:true});a.prototype.addSkeletonData=function(t,e){if(e===void 0){e=null}console.warn("");this.addDragonBonesData(t,e)};a.prototype.getSkeletonData=function(t){console.warn("");return this.getDragonBonesData(t)};a.prototype.removeSkeletonData=function(t){console.warn("");this.removeDragonBonesData(t)};a.prototype.addTextureAtlas=function(t,e){if(e===void 0){e=null}console.warn("");this.addTextureAtlasData(t,e)};a.prototype.getTextureAtlas=function(t){console.warn("");return this.getTextureAtlasData(t)};a.prototype.removeTextureAtlas=function(t){console.warn("");this.removeTextureAtlasData(t)};a.prototype.buildFastArmature=function(t,e,a){if(e===void 0){e=""}if(a===void 0){a=""}console.warn("");return this.buildArmature(t,e||"",a||"")};a.prototype.dispose=function(){console.warn("");this.clear()};a._time=0;a._dragonBonesInstance=null;a._factory=null;return a}(t.BaseFactory);t.EgretFactory=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var e=new egret.Rectangle;var a=new egret.Matrix;var r={};function i(t,e){for(var a=0,r=t.length;a<r;++a){var i=t[a];if(i.name===e){return i}}return null}function n(t){if(t.groupName){var e=r[t.groupName];if(e){var a=i(e.movie||e.animation,t.movieName);if(a){t.groupConfig=e;t.movieConfig=a;return true}}}if(!t.groupName){for(var n in r){var e=r[n];if(!t.groupName){var a=i(e.movie||e.animation,t.movieName);if(a){t.groupName=n;t.groupConfig=e;t.movieConfig=a;return true}}}}return false}function s(t){return t in r}t.hasMovieGroup=s;function o(t,e,a){if(a===void 0){a=null}if(t){var i=new egret.ByteArray(t);i.endian=egret.Endian.LITTLE_ENDIAN;i.position=8;var n=JSON.parse(i.readUTF());n.offset=i.position;n.arrayBuffer=t;n.textures=[];var s=n.offset%4;if(s){n.offset+=4-s}for(var o=0,l=n.position.length;o<l;o+=3){switch(o/3){case 1:n.displayFrameArray=new Int16Array(n.arrayBuffer,n.offset+n.position[o],n.position[o+1]/n.position[o+2]);break;case 2:n.rectangleArray=new Float32Array(n.arrayBuffer,n.offset+n.position[o],n.position[o+1]/n.position[o+2]);break;case 3:n.transformArray=new Float32Array(n.arrayBuffer,n.offset+n.position[o],n.position[o+1]/n.position[o+2]);break;case 4:n.colorArray=new Int16Array(n.arrayBuffer,n.offset+n.position[o],n.position[o+1]/n.position[o+2]);break}}a=a||n.name;if(r[a]){console.warn("Replace group: "+a)}r[a]=n;if(e instanceof Array){for(var o=0,l=e.length;o<l;++o){var h=e[o];n.textures.push(h)}}else{n.textures.push(e)}}else{throw new Error}}t.addMovieGroup=o;function l(t){var e=r[t];if(e){delete r[t]}}t.removeMovieGroup=l;function h(){for(var t in r){delete r[t]}}t.removeAllMovieGroup=h;function f(e,a){if(a===void 0){a=null}var r={movieName:e,groupName:a};if(n(r)){var i=new p(r);i.clock=t.EgretFactory.factory.clock;return i}else{console.warn("No movie named: "+e)}return null}t.buildMovie=f;function u(t){var e=r[t];if(e){var a=[];var i=e.movie||e.animation;for(var n=0,s=i.length;n<s;++n){a.push(i[n].name)}return a}else{console.warn("No group named: "+t)}return null}t.getMovieNames=u;var _=function(t){__extends(e,t);function e(e){var a=t.call(this,e)||this;a.name="";a.slotName="";a.clipName="";return a}Object.defineProperty(e.prototype,"armature",{get:function(){return this.movie},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bone",{get:function(){return null},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"animationState",{get:function(){return{name:this.clipName}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"frameLabel",{get:function(){return this.name},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"movementID",{get:function(){return this.clipName},enumerable:true,configurable:true});e.START="start";e.LOOP_COMPLETE="loopComplete";e.COMPLETE="complete";e.FRAME_EVENT="frameEvent";e.SOUND_EVENT="soundEvent";return e}(egret.Event);t.MovieEvent=_;var c=function(t){__extends(e,t);function e(e){var a=t.call(this)||this;a.displayIndex=-1;a.colorIndex=-1;a.transformIndex=-1;a.rawDisplay=new egret.Bitmap;a.childMovies={};a.displayConfig=null;a.childMovie=null;a.colorFilter=null;a.display=a.rawDisplay;a.config=e;a.rawDisplay.name=a.config.name;if(!a.config.blendMode){a.config.blendMode=0}return a}e.prototype.dispose=function(){this.rawDisplay=null;this.childMovies=null;this.config=null;this.displayConfig=null;this.display=null;this.childMovie=null;this.colorFilter=null};return e}(egret.HashObject);var p=function(r){__extends(i,r);function i(t){var e=r.call(this)||this;e.timeScale=1;e.clipTimeScale=1;e._batchEnabled=true;e._isLockDispose=false;e._isDelayDispose=false;e._isStarted=false;e._isPlaying=false;e._isReversing=false;e._isCompleted=false;e._playTimes=0;e._time=0;e._currentTime=0;e._currentPlayTimes=0;e._cacheFrameIndex=0;e._frameSize=0;e._cacheRectangle=null;e._clock=null;e._currentFrameConfig=null;e._clipNames=[];e._slots=[];e._childMovies=[];e._groupConfig=t.groupConfig;e._config=t.movieConfig;e._batchEnabled=!(e._config.isNested||e._config.hasChildAnimation);if(e._batchEnabled){e.$renderNode=new egret.sys.GroupNode;e.$renderNode.cleanBeforeRender=i._cleanBeforeRender}e._clipNames.length=0;for(var a=0,n=e._config.clip.length;a<n;++a){e._clipNames.push(e._config.clip[a].name)}for(var a=0,n=e._config.slot.length;a<n;++a){var s=new c(e._config.slot[a]);e._updateSlotBlendMode(s);e._slots.push(s);if(e._batchEnabled){e.$renderNode.addNode(s.rawDisplay.$renderNode)}else{e.addChild(s.rawDisplay)}}e._frameSize=(1+1)*e._slots.length;e.name=e._config.name;e.play();e.advanceTime(1e-6);e.stop();return e}i._cleanBeforeRender=function(){};i.prototype._configToEvent=function(t,e){e.movie=this;e.clipName=this._clipConfig.name;e.name=t.name;e.slotName=t.slot||""};i.prototype._onCrossFrame=function(e){for(var a=0,r=e.actionAndEvent.length;a<r;++a){var i=e.actionAndEvent[a];if(i){switch(i.type){case 11:if(t.EgretFactory.factory.soundEventManager.hasEventListener(_.SOUND_EVENT)){var n=egret.Event.create(_,_.SOUND_EVENT);this._configToEvent(i,n);t.EgretFactory.factory.soundEventManager.dispatchEvent(n);egret.Event.release(n)}break;case 10:if(this.hasEventListener(_.FRAME_EVENT)){var s=egret.Event.create(_,_.FRAME_EVENT);this._configToEvent(i,s);this.dispatchEvent(s);egret.Event.release(s)}break;case 0:if(i.slot){var o=this._getSlot(i.slot);if(o&&o.childMovie){o.childMovie.play(i.name)}}else{this.play(i.name)}break}}}};i.prototype._updateSlotBlendMode=function(t){var e="";switch(t.config.blendMode){case 0:e=egret.BlendMode.NORMAL;break;case 1:e=egret.BlendMode.ADD;break;case 5:e=egret.BlendMode.ERASE;break;default:break}if(e){if(this._batchEnabled){t.display.$renderNode.blendMode=egret.sys.blendModeToNumber(e)}else{t.display.blendMode=e}}};i.prototype._updateSlotColor=function(t,e,a,r,i,n,s,o,l){if(a!==1||r!==1||i!==1||s!==0||o!==0||l!==0||n!==0){if(!t.colorFilter){t.colorFilter=new egret.ColorMatrixFilter}var h=t.colorFilter.matrix;h[0]=a;h[6]=r;h[12]=i;h[18]=e;h[4]=s;h[9]=o;h[14]=l;h[19]=n;t.colorFilter.matrix=h;if(this._batchEnabled){t.display.$renderNode.filter=t.colorFilter;t.display.$renderNode.alpha=1}else{var f=t.display.filters;if(!f){f=[]}if(f.indexOf(t.colorFilter)<0){f.push(t.colorFilter)}t.display.filters=f;t.display.$setAlpha(1)}}else{if(t.colorFilter){t.colorFilter=null}if(this._batchEnabled){t.display.$renderNode.filter=null;t.display.$renderNode.alpha=e}else{t.display.filters=null;t.display.$setAlpha(e)}}};i.prototype._updateSlotDisplay=function(e){var a=e.display||e.rawDisplay;var r=e.childMovie;if(e.displayIndex>=0){e.displayConfig=this._groupConfig.display[e.displayIndex];if(e.displayConfig.type===1){var i=e.displayConfig.name in e.childMovies?e.childMovies[e.displayConfig.name]:null;if(!i){i=f(e.displayConfig.name,this._groupConfig.name);if(i){e.childMovies[e.displayConfig.name]=i}}if(i){e.display=i;e.childMovie=i}else{e.display=e.rawDisplay;e.childMovie=null}}else{e.display=e.rawDisplay;e.childMovie=null}}else{e.displayConfig=null;e.display=e.rawDisplay;e.childMovie=null}if(e.display!==a){if(a){this.addChild(e.display);this.swapChildren(e.display,a);this.removeChild(a)}this._updateSlotBlendMode(e)}if(e.display===e.rawDisplay){if(e.displayConfig&&e.displayConfig.regionIndex!==null&&e.displayConfig.regionIndex!==undefined){if(!e.displayConfig.texture){var n=this._groupConfig.textures[e.displayConfig.textureIndex||0];var s=e.displayConfig.regionIndex*4;var o=this._groupConfig.rectangleArray[s];var l=this._groupConfig.rectangleArray[s+1];var h=this._groupConfig.rectangleArray[s+2];var u=this._groupConfig.rectangleArray[s+3];e.displayConfig.texture=new egret.Texture;e.displayConfig.texture.bitmapData=n.bitmapData;e.displayConfig.texture.$initData(o,l,Math.min(h,n.textureWidth-o),Math.min(u,n.textureHeight-l),0,0,Math.min(h,n.textureWidth-o),Math.min(u,n.textureHeight-l),n.textureWidth,n.textureHeight)}if(this._batchEnabled){var _=e.displayConfig.texture;var c=e.rawDisplay.$renderNode;egret.sys.RenderNode.prototype.cleanBeforeRender.call(e.rawDisplay.$renderNode);c.image=_.bitmapData;if(t.isV5){c.drawImage(_.$bitmapX,_.$bitmapY,_.$bitmapWidth,_.$bitmapHeight,_.$offsetX,_.$offsetY,_.textureWidth,_.textureHeight);c.imageWidth=_._sourceWidth;c.imageHeight=_._sourceHeight}else{var p=_;c.drawImage(p._bitmapX,p._bitmapY,p._bitmapWidth,p._bitmapHeight,p._offsetX,p._offsetY,_.textureWidth,_.textureHeight);c.imageWidth=p._sourceWidth;c.imageHeight=p._sourceHeight}}else{e.rawDisplay.visible=true;e.rawDisplay.$setBitmapData(e.displayConfig.texture)}}else{if(this._batchEnabled){e.rawDisplay.$renderNode.image=null}else{e.rawDisplay.visible=false;e.rawDisplay.$setBitmapData(null)}}}if(e.childMovie!==r){if(r){r.stop();this._childMovies.slice(this._childMovies.indexOf(r),1)}if(e.childMovie){if(this._childMovies.indexOf(e.childMovie)<0){this._childMovies.push(e.childMovie)}if(e.config.action){e.childMovie.play(e.config.action)}else{e.childMovie.play(e.childMovie._config.action)}}}};i.prototype._getSlot=function(t){for(var e=0,a=this._slots.length;e<a;++e){var r=this._slots[e];if(r.config.name===t){return r}}return null};i.prototype.$render=function(){if(this._batchEnabled){}else{r.prototype.$render.call(this)}};i.prototype.$updateRenderNode=function(){if(this._batchEnabled){}else{r.prototype.$updateRenderNode.call(this)}};i.prototype.$measureContentBounds=function(t){if(this._batchEnabled&&this._cacheRectangle){t.setTo(this._cacheRectangle.x,this._cacheRectangle.y,this._cacheRectangle.width-this._cacheRectangle.x,this._cacheRectangle.height-this._cacheRectangle.y)}else{r.prototype.$measureContentBounds.call(this,t)}};i.prototype.$doAddChild=function(t,e,a){if(this._batchEnabled){console.warn("Can not add child.");return null}return r.prototype.$doAddChild.call(this,t,e,a)};i.prototype.$doRemoveChild=function(t,e){if(this._batchEnabled){console.warn("Can not remove child.");return null}return r.prototype.$doRemoveChild.call(this,t,e)};i.prototype.dispose=function(){if(this._isLockDispose){this._isDelayDispose=true}else{if(this._clock){this._clock.remove(this)}if(this._slots){for(var t=0,e=this._slots.length;t<e;++t){this._slots[t].dispose()}}this._isPlaying=false;this._cacheRectangle=null;this._clock=null;this._groupConfig=null;this._config=null;this._clipConfig=null;this._currentFrameConfig=null;this._clipArray=null;this._clipNames=null;this._slots=null;this._childMovies=null}};i.prototype.advanceTime=function(r){if(this._isPlaying){this._isLockDispose=true;if(r<0){r=-r}r*=this.timeScale;this._time+=r*this.clipTimeScale;var i=this._clipConfig.duration;var n=i*this._playTimes;var s=this._time;var o=this._currentPlayTimes;if(this._playTimes>0&&(s>=n||s<=-n)){this._isCompleted=true;o=this._playTimes;if(s<0){s=0}else{s=i}}else{this._isCompleted=false;if(s<0){o=Math.floor(-s/i);s=i- -s%i}else{o=Math.floor(s/i);s%=i}if(this._playTimes>0&&o>this._playTimes){o=this._playTimes}}if(this._currentTime===s){return}var l=Math.floor(s*this._clipConfig.cacheTimeToFrameScale);if(this._cacheFrameIndex!==l){this._cacheFrameIndex=l;var h=this._groupConfig.displayFrameArray;var f=this._groupConfig.transformArray;var u=this._groupConfig.colorArray;var c=true;var p=false;var m=false;var d=this._cacheRectangle;this._cacheRectangle=this._clipConfig.cacheRectangles[this._cacheFrameIndex];if(this._batchEnabled&&!this._cacheRectangle){m=true;this._cacheRectangle=new egret.Rectangle;this._clipConfig.cacheRectangles[this._cacheFrameIndex]=this._cacheRectangle}for(var v=0,y=this._slots.length;v<y;++v){var g=this._slots[v];var b=this._frameSize*this._cacheFrameIndex+v*2;if(b>=this._clipArray.length){b=this._frameSize*(this._cacheFrameIndex-1)+v*2}var D=this._clipArray[b]*2;if(D>=0){var T=h[D];var A=h[D+1]*8;var x=this._clipArray[b+1]*6;var P=false;if(g.displayIndex!==T){g.displayIndex=T;P=true;this._updateSlotDisplay(g)}if(g.colorIndex!==A||P){g.colorIndex=A;if(g.colorIndex>=0){this._updateSlotColor(g,u[A]*.01,u[A+1]*.01,u[A+2]*.01,u[A+3]*.01,u[A+4],u[A+5],u[A+6],u[A+7])}else{this._updateSlotColor(g,1,1,1,1,0,0,0,0)}}p=true;if(g.transformIndex!==x){g.transformIndex=x;if(this._batchEnabled){var O=g.display.$renderNode.matrix;if(!O){O=g.display.$renderNode.matrix=new egret.Matrix}O.a=f[x];O.b=f[x+1];O.c=f[x+2];O.d=f[x+3];O.tx=f[x+4];O.ty=f[x+5]}else{a.a=f[x];a.b=f[x+1];a.c=f[x+2];a.d=f[x+3];a.tx=f[x+4];a.ty=f[x+5];g.display.$setMatrix(a)}}if(this._batchEnabled&&m&&g.displayConfig){var O=g.display.$renderNode.matrix;e.x=0;e.y=0;e.width=g.displayConfig.texture.textureWidth;e.height=g.displayConfig.texture.textureHeight;O.$transformBounds(e);if(c){c=false;this._cacheRectangle.x=e.x;this._cacheRectangle.width=e.x+e.width;this._cacheRectangle.y=e.y;this._cacheRectangle.height=e.y+e.height}else{this._cacheRectangle.x=Math.min(this._cacheRectangle.x,e.x);this._cacheRectangle.width=Math.max(this._cacheRectangle.width,e.x+e.width);this._cacheRectangle.y=Math.min(this._cacheRectangle.y,e.y);this._cacheRectangle.height=Math.max(this._cacheRectangle.height,e.y+e.height)}}}else if(g.displayIndex!==-1){g.displayIndex=-1;this._updateSlotDisplay(g)}}if(this._cacheRectangle){if(p&&m&&c&&d){this._cacheRectangle.x=d.x;this._cacheRectangle.y=d.y;this._cacheRectangle.width=d.width;this._cacheRectangle.height=d.height}if(!t.isV5){this.$invalidateContentBounds()}}}if(this._isCompleted){this._isPlaying=false}if(!this._isStarted){this._isStarted=true;if(this.hasEventListener(_.START)){var S=egret.Event.create(_,_.START);S.movie=this;S.clipName=this._clipConfig.name;S.name="";S.slotName="";this.dispatchEvent(S)}}this._isReversing=this._currentTime>s&&this._currentPlayTimes===o;this._currentTime=s;var E=this._clipConfig.frame?this._clipConfig.frame.length:0;if(E>0){var M=Math.floor(this._currentTime*this._config.frameRate);var B=this._groupConfig.frame[this._clipConfig.frame[M]];if(this._currentFrameConfig!==B){if(E>1){var C=this._currentFrameConfig;this._currentFrameConfig=B;if(!C){var w=Math.floor(this._currentTime*this._config.frameRate);C=this._groupConfig.frame[this._clipConfig.frame[w]];if(this._isReversing){}else{if(this._currentTime<=C.position||this._currentPlayTimes!==o){C=this._groupConfig.frame[C.prev]}}}if(this._isReversing){while(C!==B){this._onCrossFrame(C);C=this._groupConfig.frame[C.prev]}}else{while(C!==B){C=this._groupConfig.frame[C.next];this._onCrossFrame(C)}}}else{this._currentFrameConfig=B;if(this._currentFrameConfig){this._onCrossFrame(this._currentFrameConfig)}}}}if(this._currentPlayTimes!==o){this._currentPlayTimes=o;if(this.hasEventListener(_.LOOP_COMPLETE)){var I=egret.Event.create(_,_.LOOP_COMPLETE);I.movie=this;I.clipName=this._clipConfig.name;I.name="";I.slotName="";this.dispatchEvent(I);egret.Event.release(I)}if(this._isCompleted&&this.hasEventListener(_.COMPLETE)){var F=egret.Event.create(_,_.COMPLETE);F.movie=this;F.clipName=this._clipConfig.name;F.name="";F.slotName="";this.dispatchEvent(F);egret.Event.release(F)}}}this._isLockDispose=false;if(this._isDelayDispose){this.dispose()}};i.prototype.play=function(t,e){if(t===void 0){t=null}if(e===void 0){e=-1}if(t){var a=null;for(var r=0,i=this._config.clip.length;r<i;++r){var n=this._config.clip[r];if(n.name===t){a=n}}if(a){this._clipConfig=a;this._clipArray=new Int16Array(this._groupConfig.arrayBuffer,this._groupConfig.offset+this._groupConfig.position[0]+this._clipConfig.p,this._clipConfig.s/this._groupConfig.position[2]);if(!this._clipConfig.cacheRectangles){this._clipConfig.cacheRectangles=[]}this._isPlaying=true;this._isStarted=false;this._isCompleted=false;if(e<0||e!==e){this._playTimes=this._clipConfig.playTimes}else{this._playTimes=e}this._time=0;this._currentTime=0;this._currentPlayTimes=0;this._cacheFrameIndex=-1;this._currentFrameConfig=null;this._cacheRectangle=null;this.clipTimeScale=1/this._clipConfig.scale}else{console.warn("No clip in movie.",this._config.name,t)}}else if(this._clipConfig){if(this._isPlaying||this._isCompleted){this.play(this._clipConfig.name,this._playTimes)}else{this._isPlaying=true}}else if(this._config.action){this.play(this._config.action,e)}};i.prototype.stop=function(){this._isPlaying=false};i.prototype.gotoAndPlay=function(t,e,a){if(t===void 0){t=null}if(a===void 0){a=-1}e%=this._clipConfig.duration;if(e<0){e+=this._clipConfig.duration}this.play(t,a);this._time=e;this._currentTime=e};i.prototype.gotoAndStop=function(t,e){if(t===void 0){t=null}e%=this._clipConfig.duration;if(e<0){e+=this._clipConfig.duration}this.play(t,1);this._time=e;this._currentTime=e;this.advanceTime(.001);this.stop()};i.prototype.hasClip=function(t){for(var e=0,a=this._config.clip.length;e<a;++e){var r=this._config.clip[e];if(r.name===t){return true}}return false};Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this._isPlaying&&!this._isCompleted},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"isComplete",{get:function(){return this._isCompleted},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"totalTime",{get:function(){return this._clipConfig?this._clipConfig.duration:0},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"currentPlayTimes",{get:function(){return this._currentPlayTimes},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"playTimes",{get:function(){return this._playTimes},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"groupName",{get:function(){return this._groupConfig.name},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"clipName",{get:function(){return this._clipConfig?this._clipConfig.name:""},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"clipNames",{get:function(){return this._clipNames},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock===t){return}var e=this._clock;if(e){e.remove(this)}this._clock=t;if(this._clock){this._clock.add(this)}},enumerable:true,configurable:true});i.prototype.advanceTimeBySelf=function(e){if(e){this.clock=t.EgretFactory.clock}else{this.clock=null}};Object.defineProperty(i.prototype,"display",{get:function(){return this},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"animation",{get:function(){return this},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"armature",{get:function(){return this},enumerable:true,configurable:true});i.prototype.getAnimation=function(){return this};i.prototype.getArmature=function(){return this};i.prototype.getDisplay=function(){return this};i.prototype.hasAnimation=function(t){return this.hasClip(t)};i.prototype.invalidUpdate=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}t};Object.defineProperty(i.prototype,"lastAnimationName",{get:function(){return this.clipName},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"animationNames",{get:function(){return this.clipNames},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"animationList",{get:function(){return this.clipNames},enumerable:true,configurable:true});return i}(egret.DisplayObjectContainer);t.Movie=p})(dragonBones||(dragonBones={}));

//js/socket.min_8b4cb752.js
var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(o,i){void 0===o&&(o=""),void 0===i&&(i=0);var s=e.call(this)||this;return s._writeMessage="",s._readMessage="",s._connected=!1,s._connecting=!1,s._isReadySend=!1,s._bytesWrite=!1,s._type=n.TYPE_STRING,s._connected=!1,s._writeMessage="",s._readMessage="",s.socket=new t.ISocket,s.socket.addCallBacks(s.onConnect,s.onClose,s.onSocketData,s.onError,s),s}return __extends(n,e),n.prototype.connect=function(t,e){this._connecting||this._connected||(this._connecting=!0,this.socket.connect(t,e))},n.prototype.connectByUrl=function(t){this._connecting||this._connected||(this._connecting=!0,this.socket.connectByUrl(t))},n.prototype.close=function(){this._connected&&this.socket.close()},n.prototype.onConnect=function(){this._connected=!0,this._connecting=!1,this.dispatchEventWith(t.Event.CONNECT)},n.prototype.onClose=function(){this._connected=!1,this.dispatchEventWith(t.Event.CLOSE)},n.prototype.onError=function(){this._connecting&&(this._connecting=!1),this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},n.prototype.onSocketData=function(e){"string"==typeof e?this._readMessage+=e:this._readByte._writeUint8Array(new Uint8Array(e)),t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.SOCKET_DATA)},n.prototype.flush=function(){return this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),void(this._isReadySend=!1)):void t.$warn(3101)},n.prototype.writeUTF=function(e){return this._connected?(this._type==n.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(e)):this._writeMessage+=e,void this.flush()):void t.$warn(3101)},n.prototype.readUTF=function(){var t;return this._type==n.TYPE_BINARY?(this._readByte.position=0,t=this._readByte.readUTF(),this._readByte.clear()):(t=this._readMessage,this._readMessage=""),t},n.prototype.writeBytes=function(e,n,o){return void 0===n&&(n=0),void 0===o&&(o=0),this._connected?this._writeByte?(this._bytesWrite=!0,this._writeByte.writeBytes(e,n,o),void this.flush()):void t.$warn(3102):void t.$warn(3101)},n.prototype.readBytes=function(e,n,o){return void 0===n&&(n=0),void 0===o&&(o=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(e,n,o),void this._readByte.clear()):void t.$warn(3102)},Object.defineProperty(n.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,e!=n.TYPE_BINARY||this._writeByte||(this._readByte=new t.ByteArray,this._writeByte=new t.ByteArray)},enumerable:!0,configurable:!0}),n.TYPE_STRING="webSocketTypeString",n.TYPE_BINARY="webSocketTypeBinary",n}(t.EventDispatcher);t.WebSocket=e,__reflect(e.prototype,"egret.WebSocket")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(){function e(){this.host="",this.port=0,window.WebSocket||t.$error(3100)}return e.prototype.addCallBacks=function(t,e,n,o,i){this.onConnect=t,this.onClose=e,this.onSocketData=n,this.onError=o,this.thisObject=i},e.prototype.connect=function(t,e){this.host=t,this.port=e;var n="ws://"+this.host+":"+this.port;this.socket=new window.WebSocket(n),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype.connectByUrl=function(t){this.socket=new window.WebSocket(t),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},e.prototype.send=function(t){this.socket.send(t)},e.prototype.close=function(){this.socket.close()},e.prototype.disconnect=function(){this.socket.disconnect&&this.socket.disconnect()},e}();e.HTML5WebSocket=n,__reflect(n.prototype,"egret.web.HTML5WebSocket",["egret.ISocket"]),t.ISocket=n}(e=t.web||(t.web={}))}(egret||(egret={}));

//js/experimental.min_31954293.js
var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},egret;!function(e){var t;!function(e){function t(e){return!!e.exifdata}function n(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,a=new ArrayBuffer(r),i=new Uint8Array(a),o=0;r>o;o++)i[o]=n.charCodeAt(o);return a}function r(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){(200==this.status||0===this.status)&&t(this.response)},n.send()}function a(t,a){function s(e){var n=i(e),r=o(e);t.exifdata=n||{},t.iptcdata=r||{},a&&a.call(t)}if(t.src)if(/^data\:/i.test(t.src)){var l=n(t.src,"");s(l)}else if(/^blob\:/i.test(t.src)){var u=new FileReader;u.onload=function(e){s(e.target.result)},r(t.src,function(e){u.readAsArrayBuffer(e)})}else{var d=new XMLHttpRequest;d.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";s(d.response),d=null},d.open("GET",t.src,!0),d.responseType="arraybuffer",d.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var u=new FileReader;u.onload=function(t){e.debug&&console.log("Got file of length "+t.target.result.byteLength),s(t.target.result)},u.readAsArrayBuffer(t)}}function i(t){var n=new DataView(t);if(e.debug&&console.log("Got file of length "+t.byteLength),255!=n.getUint8(0)||216!=n.getUint8(1))return e.debug&&console.log("Not a valid JPEG"),!1;for(var r,a=2,i=t.byteLength;i>a;){if(255!=n.getUint8(a))return e.debug&&console.log("Not a valid marker at offset "+a+", found: "+n.getUint8(a)),!1;if(r=n.getUint8(a+1),e.debug&&console.log(r),225==r)return e.debug&&console.log("Found 0xFFE1 marker"),c(n,a+4);a+=2+n.getUint16(a+2)}}function o(t){var n=new DataView(t);if(e.debug&&console.log("Got file of length "+t.byteLength),255!=n.getUint8(0)||216!=n.getUint8(1))return e.debug&&console.log("Not a valid JPEG"),!1;for(var r=2,a=t.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};a>r;){if(i(n,r)){var o=n.getUint8(r+7);o%2!==0&&(o+=1),0===o&&(o=4);var l=r+8+o,u=n.getUint16(r+6+o);return s(t,l,u)}r++}}function s(e,t,n){for(var r,a,i,o,s,l=new DataView(e),u={},c=t;t+n>c;)28===l.getUint8(c)&&2===l.getUint8(c+1)&&(o=l.getUint8(c+2),o in g&&(i=l.getInt16(c+3),s=i+5,a=g[o],r=d(l,c+5,i),u.hasOwnProperty(a)?u[a]instanceof Array?u[a].push(r):u[a]=[u[a],r]:u[a]=r)),c++;return u}function l(t,n,r,a,i){var o,s,l,d=t.getUint16(r,!i),c={};for(l=0;d>l;l++)o=r+12*l+2,s=a[t.getUint16(o,!i)],!s&&e.debug&&console.log("Unknown tag: "+t.getUint16(o,!i)),c[s]=u(t,o,n,r,i);return c}function u(e,t,n,r,a){var i,o,s,l,u,c,g=e.getUint16(t+2,!a),f=e.getUint32(t+4,!a),h=e.getUint32(t+8,!a)+n;switch(g){case 1:case 7:if(1==f)return e.getUint8(t+8,!a);for(i=f>4?h:t+8,o=[],l=0;f>l;l++)o[l]=e.getUint8(i+l);return o;case 2:return i=f>4?h:t+8,d(e,i,f-1);case 3:if(1==f)return e.getUint16(t+8,!a);for(i=f>2?h:t+8,o=[],l=0;f>l;l++)o[l]=e.getUint16(i+2*l,!a);return o;case 4:if(1==f)return e.getUint32(t+8,!a);for(o=[],l=0;f>l;l++)o[l]=e.getUint32(h+4*l,!a);return o;case 5:if(1==f)return u=e.getUint32(h,!a),c=e.getUint32(h+4,!a),s=new Number(u/c),s.numerator=u,s.denominator=c,s;for(o=[],l=0;f>l;l++)u=e.getUint32(h+8*l,!a),c=e.getUint32(h+4+8*l,!a),o[l]=new Number(u/c),o[l].numerator=u,o[l].denominator=c;return o;case 9:if(1==f)return e.getInt32(t+8,!a);for(o=[],l=0;f>l;l++)o[l]=e.getInt32(h+4*l,!a);return o;case 10:if(1==f)return e.getInt32(h,!a)/e.getInt32(h+4,!a);for(o=[],l=0;f>l;l++)o[l]=e.getInt32(h+8*l,!a)/e.getInt32(h+4+8*l,!a);return o}}function d(e,t,n){for(var r="",a=t;t+n>a;a++)r+=String.fromCharCode(e.getUint8(a));return r}function c(t,n){if("Exif"!=d(t,n,4))return e.debug&&console.log("Not valid EXIF data! "+d(t,n,4)),!1;var r,a,i,o,s,u=n+6;if(18761==t.getUint16(u))r=!1;else{if(19789!=t.getUint16(u))return e.debug&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;r=!0}if(42!=t.getUint16(u+2,!r))return e.debug&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=t.getUint32(u+4,!r);if(8>c)return e.debug&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(u+4,!r)),!1;if(a=l(t,u,u+c,e.TiffTags,r),a.ExifIFDPointer){o=l(t,u,u+a.ExifIFDPointer,e.ExifTags,r);for(i in o){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=e.StringValues[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=e.StringValues.Components[o[i][0]]+e.StringValues.Components[o[i][1]]+e.StringValues.Components[o[i][2]]+e.StringValues.Components[o[i][3]]}a[i]=o[i]}}if(a.GPSInfoIFDPointer){s=l(t,u,u+a.GPSInfoIFDPointer,e.GPSTags,r);for(i in s){switch(i){case"GPSVersionID":s[i]=s[i][0]+"."+s[i][1]+"."+s[i][2]+"."+s[i][3]}a[i]=s[i]}}return a}e.debug=!1,e.ExifTags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},e.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},e.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};var g={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},f=function(){function e(){}return e.getData=function(e,n){return(e instanceof Image||e instanceof HTMLImageElement)&&!e.complete?!1:(t(e)?n&&n.call(e):a(e,n),!0)},e.getTag=function(e,n){return t(e)?e.exifdata[n]:void 0},e.getIptcTag=function(e,n){return t(e)?e.iptcdata[n]:void 0},e.getAllTags=function(e){if(!t(e))return{};var n,r=e.exifdata,a={};for(n in r)r.hasOwnProperty(n)&&(a[n]=r[n]);return a},e.getAllIptcTags=function(e){if(!t(e))return{};var n,r=e.iptcdata,a={};for(n in r)r.hasOwnProperty(n)&&(a[n]=r[n]);return a},e.pretty=function(e){if(!t(e))return"";var n,r=e.exifdata,a="";for(n in r)r.hasOwnProperty(n)&&(a+="object"==typeof r[n]?r[n]instanceof Number?n+" : "+r[n]+" ["+r[n].numerator+"/"+r[n].denominator+"]\r\n":n+" : ["+r[n].length+" values]\r\n":n+" : "+r[n]+"\r\n");return a},e.readFromBinaryFile=function(e){return i(e)},e}();e.EXIF=f,__reflect(f.prototype,"egret.experimental.EXIF")}(t=e.experimental||(e.experimental={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(){return new Promise(function(t,n){var r=document.createElement("input");r.type="file",r.accept="image/*",r.style.display="none",document.body.insertBefore(r,document.body.firstChild),r.addEventListener("change",function(n){var a={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",bmp:"image/bmp"},i=n.target.files[0],o=i.type;o||(o=a[i.name.match(/\.([^\.]+)$/i)[1]]);var s="";s=window.URL?window.URL.createObjectURL(i):window.webkitURL.createObjectURL(i);var l=new XMLHttpRequest;l.open("GET",s,!0),l.responseType="blob",l.onload=function(n){if(200==this.status){var a=this.response,i=null,o=new FileReader;o.onload=function(){i=this.result;var n=e.EXIF.readFromBinaryFile(i),a=-1;n&&(a=n.Orientation);var o=new Image;o.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");switch(e.width=o.width,e.height=o.height,a>4&&(e.width=o.height,e.height=o.width),n.clearRect(0,0,e.width,e.height),a){case 2:n.translate(e.width,0),n.scale(-1,1);break;case 3:n.translate(e.width,e.height),n.rotate(Math.PI);break;case 4:n.translate(0,e.height),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-o.height);break;case 7:n.rotate(.5*Math.PI),n.translate(e.width,-e.height),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-e.height,0);break;default:n.transform(1,0,0,1,0,0)}n.drawImage(o,0,0);var i="png";-1!==a&&(i="jpeg");var s="";s="jpg"===i||"jpeg"===i?e.toDataURL("image/"+i):e.toDataURL("image/"+i),t(s),o.parentNode.removeChild(o),r.parentNode.removeChild(r)},o.src=s,o.style.display="none",document.body.appendChild(o),r.value=""},o.readAsArrayBuffer(a)}},l.send()},!1),r.click()})}e.pickPhoto=t}(t=e.experimental||(e.experimental={}))}(egret||(egret={}));

//js/promise.min_83a6a5d.js
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;G>t;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[ee]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return w(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return ie.error=e,ie}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?w(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===re?S(t,e._result):e._state===oe?j(t,e._result):E(e,void 0,function(e){return w(t,e)},function(e){return j(t,e)})}function g(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===ie?j(t,ie.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function w(e,n){e===n?j(e,v()):t(n)?g(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===ne&&(t._result=e,t._state=re,0!==t._subscribers.length&&J(P,t))}function j(t,e){t._state===ne&&(t._state=oe,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+re]=n,o[i+oe]=r,0===i&&t._state&&J(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function T(){this.error=null}function M(t,e){try{return t(e)}catch(n){return se.error=n,se}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===se?(a=!0,u=s.error,s=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==ne||(i&&c?w(n,s):a?j(n,u):t===re?S(n,s):t===oe&&j(n,s))}function C(t,e){try{e(function(e){w(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return ue++}function k(t){t[ee]=ue++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[ee]||k(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;o>i;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[ee]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if("undefined"!=typeof egret_native&&egret_native.capability&&!egret_native.capability("Promise")&&(n=void 0),n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):te())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),te=void 0;te=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var ee=Math.random().toString(36).substring(16),ne=void 0,re=1,oe=2,ie=new T,se=new T,ue=0;return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ne&&t>n;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==ne)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);g(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ne&&(this._remaining--,t===oe?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(re,e,t)},function(t){return n._settledAt(oe,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,"catch":function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U}),ES6Promise.polyfill();

//js/particle.min_d717ba80.js
var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);i.prototype=e.prototype,t.prototype=new i},particle;!function(t){var e=function(){function t(){this.matrix=new egret.Matrix,this.reset()}return t.prototype.reset=function(){this.x=0,this.y=0,this.scale=1,this.rotation=0,this.alpha=1,this.currentTime=0,this.totalTime=1e3},t.prototype.$getMatrix=function(t,e){var i=this.matrix;if(i.identity(),this.rotation%360)var a=this.rotation,r=egret.NumberUtils.cos(a),s=egret.NumberUtils.sin(a);else r=1,s=0;return i.append(r*this.scale,s*this.scale,-s*this.scale,r*this.scale,this.x,this.y),(t||e)&&(i.tx-=t*i.a+e*i.c,i.ty-=t*i.b+e*i.d),i},t}();t.Particle=e,__reflect(e.prototype,"particle.Particle");var i=1;if(egret.nativeRender)if(egret_native.nrParticleABIVersion){var a=egret_native.nrParticleABIVersion;i>a?(egret.warn("runtime"),egret.nativeRender=!1):a>i&&(egret.warn(""),egret.nativeRender=!1)}else egret.warn(""),egret.nativeRender=!1}(particle||(particle={}));var particle;!function(t){var e=function(e){function i(t,i){var a=e.call(this)||this;return a._pool=[],a.frameTime=0,a.particles=[],a._emitterX=0,a._emitterY=0,a.emissionTime=-1,a.maxParticles=200,a.numParticles=0,a.particleClass=null,a.$particleConfig=null,a.particleMeasureRect=new egret.Rectangle,a.transformForMeasure=new egret.Matrix,a.bitmapNodeList=[],egret.nativeRender?(a.initConfig(i,0,0),a.changeTexture(t),a.$nativeDisplayObject.addCallBack("on"+egret.Event.COMPLETE,function(){a.dispatchEventWith(egret.Event.COMPLETE)},a)):(a.emissionRate=i,a.texture=t,a.$renderNode=new egret.sys.GroupNode,a.$renderNode.cleanBeforeRender=function(){}),a}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(10)},i.prototype.initConfig=function(t,e,i){this.$particleConfig=[t,e,i,0,200],this.emissionRate=t,this._emitterX=e,this._emitterY=i},i.prototype.getParticle=function(){var e;return e=this._pool.length?this._pool.pop():this.particleClass?new this.particleClass:new t.Particle},i.prototype.removeParticle=function(t){var e=this.particles.indexOf(t);return-1!=e?(t.reset(),this.particles.splice(e,1),this._pool.push(t),this.numParticles--,this.bitmapNodeList.length>this.numParticles&&(this.bitmapNodeList.length=this.numParticles,this.$renderNode.drawData.length=this.numParticles),!0):!1},i.prototype.initParticle=function(t){t.x=this.emitterX,t.y=this.emitterY,t.currentTime=0,t.totalTime=1e3},i.prototype.updateRelativeBounds=function(t){t?(null==this.relativeContentBounds&&(this.relativeContentBounds=new egret.Rectangle),this.relativeContentBounds.copyFrom(t),this.relativeContentBounds.x+=this.emitterX,this.relativeContentBounds.y+=this.emitterY):this.relativeContentBounds=null,this.mask=this.relativeContentBounds},Object.defineProperty(i.prototype,"emitterBounds",{get:function(){return this._emitterBounds},set:function(t){this._emitterBounds=t,this.updateRelativeBounds(t),egret.nativeRender&&this.onPropertyChanges()},enumerable:!0,configurable:!0}),i.prototype.onPropertyChanges=function(){this.$nativeDisplayObject.setParticleConfig(this.$particleConfig)},Object.defineProperty(i.prototype,"emitterX",{get:function(){return this._emitterX},set:function(t){this._emitterX=t,this.updateRelativeBounds(this.emitterBounds),egret.nativeRender&&this.onPropertyChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"emitterY",{get:function(){return this._emitterY},set:function(t){this._emitterY=t,this.updateRelativeBounds(this.emitterBounds),egret.nativeRender&&this.onPropertyChanges()},enumerable:!0,configurable:!0}),i.prototype.start=function(t){void 0===t&&(t=-1),0!=this.emissionRate&&(this.emissionTime=t,egret.nativeRender?(this.$particleConfig[3]=t,this.$nativeDisplayObject.setStartToParticle(this.$particleConfig)):(this.timeStamp=egret.getTimer(),egret.startTick(this.update,this)))},i.prototype.stop=function(t){return void 0===t&&(t=!1),egret.nativeRender?void this.$nativeDisplayObject.setStopToParticle(t):(this.emissionTime=0,void(t&&(this.clear(),egret.stopTick(this.update,this))))},i.prototype.update=function(t){var e=t-this.timeStamp;if(this.timeStamp=t,-1==this.emissionTime||this.emissionTime>0){for(this.frameTime+=e;this.frameTime>0;)this.numParticles<this.maxParticles&&this.addOneParticle(),this.frameTime-=this.emissionRate;-1!=this.emissionTime&&(this.emissionTime-=e,this.emissionTime<0&&(this.emissionTime=0))}for(var i,a=0;a<this.numParticles;)i=this.particles[a],i.currentTime<i.totalTime?(this.advanceParticle(i,e),i.currentTime+=e,a++):this.removeParticle(i);return this.$renderDirty=!0,0==this.numParticles&&0==this.emissionTime&&(egret.stopTick(this.update,this),this.dispatchEventWith(egret.Event.COMPLETE)),!1},i.prototype.$measureContentBounds=function(t){if(this.relativeContentBounds)return void t.copyFrom(this.relativeContentBounds);if(this.numParticles>0){for(var e,i=this.texture,a=Math.round(i.$getScaleBitmapWidth()),r=Math.round(i.$getScaleBitmapHeight()),s=egret.Rectangle.create(),n=0;n<this.numParticles;n++){e=this.particles[n],this.transformForMeasure.identity(),this.appendTransform(this.transformForMeasure,e.x,e.y,e.scale,e.scale,e.rotation,0,0,a/2,r/2),this.particleMeasureRect.setEmpty(),this.particleMeasureRect.width=a,this.particleMeasureRect.height=r;var o=Region.create();if(o.updateRegion(this.particleMeasureRect,this.transformForMeasure),0==n)s.setTo(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY);else{var h=Math.min(s.x,o.minX),l=Math.min(s.y,o.minY),c=Math.max(s.right,o.maxX),p=Math.max(s.bottom,o.maxY);s.setTo(h,l,c-h,p-l)}Region.release(o)}this.lastRect=s,t.setTo(s.x,s.y,s.width,s.height),egret.Rectangle.release(s)}else this.lastRect&&(s=this.lastRect,t.setTo(s.x,s.y,s.width,s.height),egret.Rectangle.release(s),this.lastRect=null)},i.prototype.setCurrentParticles=function(t){if(!egret.nativeRender)for(var e=this.numParticles;t>e&&this.numParticles<this.maxParticles;e++)this.addOneParticle()},i.prototype.changeTexture=function(t){this.texture!=t&&(this.texture=t,egret.nativeRender?this.$nativeDisplayObject.setBitmapDataToParticle(t):(this.bitmapNodeList.length=0,this.$renderNode.drawData.length=0))},i.prototype.clear=function(){for(;this.particles.length;)this.removeParticle(this.particles[0]);this.numParticles=0,this.$renderNode.drawData.length=0,this.bitmapNodeList.length=0,this.$renderDirty=!0,this._pool.length=0},i.prototype.addOneParticle=function(){var t=this.getParticle();this.initParticle(t),t.totalTime>0&&(this.particles.push(t),this.numParticles++)},i.prototype.advanceParticle=function(t,e){t.y-=e/6},i.prototype.$updateRenderNode=function(){if(!egret.nativeRender&&this.numParticles>0)for(var t,e=this.texture,i=Math.round(e.$getScaleBitmapWidth()),a=Math.round(e.$getScaleBitmapHeight()),r=e.$offsetX,s=e.$offsetY,n=e.$bitmapX,o=e.$bitmapY,h=e.$bitmapWidth,l=e.$bitmapHeight,c=0;c<this.numParticles;c++){t=this.particles[c];var p;this.bitmapNodeList[c]||(p=new egret.sys.BitmapNode,this.bitmapNodeList[c]=p,this.$renderNode.addNode(this.bitmapNodeList[c]),p.image=e.$bitmapData,p.imageWidth=e.$sourceWidth,p.imageHeight=e.$sourceHeight,p.drawImage(n,o,h,l,r,s,i,a)),p=this.bitmapNodeList[c],p.matrix=t.$getMatrix(i/2,a/2),p.blendMode=t.blendMode,p.alpha=t.alpha}},i.prototype.appendTransform=function(t,e,i,a,r,s,n,o,h,l){if(s%360)var c=s,p=egret.NumberUtils.cos(c),u=egret.NumberUtils.sin(c);else p=1,u=0;return n||o?(t.append(egret.NumberUtils.cos(o),egret.NumberUtils.sin(o),-egret.NumberUtils.sin(n),egret.NumberUtils.cos(n),e,i),t.append(p*a,u*a,-u*r,p*r,0,0)):t.append(p*a,u*a,-u*r,p*r,e,i),(h||l)&&(t.tx-=h*t.a+l*t.c,t.ty-=h*t.b+l*t.d),t},i}(egret.DisplayObject);t.ParticleSystem=e,__reflect(e.prototype,"particle.ParticleSystem")}(particle||(particle={}));var regionPool=[],Region=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0}return t.release=function(t){regionPool.push(t)},t.create=function(){var e=regionPool.pop();return e||(e=new t),e},t.prototype.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},t.prototype.updateRegion=function(t,e){if(0==t.width||0==t.height)return void this.setEmpty();var i,a,r,s,n=e,o=n.a,h=n.b,l=n.c,c=n.d,p=n.tx,u=n.ty,m=t.x,d=t.y,g=m+t.width,f=d+t.height;if(1==o&&0==h&&0==l&&1==c)i=m+p-1,a=d+u-1,r=g+p+1,s=f+u+1;else{var v=o*m+l*d+p,y=h*m+c*d+u,P=o*g+l*d+p,R=h*g+c*d+u,V=o*g+l*f+p,x=h*g+c*f+u,_=o*m+l*f+p,C=h*m+c*f+u,b=0;v>P&&(b=v,v=P,P=b),V>_&&(b=V,V=_,_=b),i=(V>v?v:V)-1,r=(P>_?P:_)+1,y>R&&(b=y,y=R,R=b),x>C&&(b=x,x=C,C=b),a=(x>y?y:x)-1,s=(R>C?R:C)+1}this.minX=i,this.minY=a,this.maxX=r,this.maxY=s,this.width=r-i,this.height=s-a,this.area=this.width*this.height},t}();__reflect(Region.prototype,"Region");var particle;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.reset=function(){t.prototype.reset.call(this),this.startX=0,this.startY=0,this.velocityX=0,this.velocityY=0,this.radialAcceleration=0,this.tangentialAcceleration=0,this.rotationDelta=0,this.scaleDelta=0},e}(t.Particle);t.GravityParticle=e,__reflect(e.prototype,"particle.GravityParticle")}(particle||(particle={}));var particle;!function(t){var e=function(e){function i(i,a){var r=e.call(this,i,200)||this;return r.$init=!1,r.parseConfig(a),r.emissionRate=r.lifespan/r.maxParticles,r.particleClass=t.GravityParticle,r.$init=!0,r}return __extends(i,e),i.prototype.start=function(t){if(void 0===t&&(t=-1),egret.nativeRender){0!=this.emissionRate&&(this.emissionTime=t),this.$particleConfig[2]=t;var i=[],a=0;for(var r in this.$particleConfig)i.push(a++),i.push(this.$particleConfig[r]);this.$nativeDisplayObject.setStartToParticle(i)}else e.prototype.start.call(this,t)},i.prototype.setCurrentParticles=function(t){if(!(t>this.maxParticles)){var e=[];e.push(35),e.push(t),this.$nativeDisplayObject.setParticleConfig(e)}},i.prototype.onPropertyChanges=function(){if(0!=this.$init){var t=[];t.push(0),this.$particleConfig[0]=this._emitterX,t.push(this._emitterX),t.push(1),this.$particleConfig[1]=this._emitterY,t.push(this._emitterY),this.relativeContentBounds&&(t.push(31),this.$particleConfig[31]=this.relativeContentBounds.x,t.push(this.relativeContentBounds.x),t.push(32),this.$particleConfig[32]=this.relativeContentBounds.y,t.push(this.relativeContentBounds.y),t.push(33),this.$particleConfig[33]=this.relativeContentBounds.width,t.push(this.relativeContentBounds.width),t.push(34),this.$particleConfig[34]=this.relativeContentBounds.height,t.push(this.relativeContentBounds.height)),this.$nativeDisplayObject.setParticleConfig(t)}},i.prototype.parseConfig=function(t){function e(t){return"undefined"==typeof t?0:t}if(egret.nativeRender?(this._emitterX=e(t.emitter.x),this._emitterY=e(t.emitter.y)):(this.emitterX=e(t.emitter.x),this.emitterY=e(t.emitter.y)),this.emitterXVariance=e(t.emitterVariance.x),this.emitterYVariance=e(t.emitterVariance.y),this.gravityX=e(t.gravity.x),this.gravityY=e(t.gravity.y),1==t.useEmitterRect){var i=new egret.Rectangle;i.x=e(t.emitterRect.x),i.y=e(t.emitterRect.y),i.width=e(t.emitterRect.width),i.height=e(t.emitterRect.height),this.emitterBounds=i}this.maxParticles=e(t.maxParticles),this.speed=e(t.speed),this.speedVariance=e(t.speedVariance),this.lifespan=Math.max(.01,e(t.lifespan)),this.lifespanVariance=e(t.lifespanVariance),this.emitAngle=e(t.emitAngle),this.emitAngleVariance=e(t.emitAngleVariance),this.startSize=e(t.startSize),this.startSizeVariance=e(t.startSizeVariance),this.endSize=e(t.endSize),this.endSizeVariance=e(t.endSizeVariance),this.startRotation=e(t.startRotation),this.startRotationVariance=e(t.startRotationVariance),this.endRotation=e(t.endRotation),this.endRotationVariance=e(t.endRotationVariance),this.radialAcceleration=e(t.radialAcceleration),this.radialAccelerationVariance=e(t.radialAccelerationVariance),this.tangentialAcceleration=e(t.tangentialAcceleration),this.tangentialAccelerationVariance=e(t.tangentialAccelerationVariance),this.startAlpha=e(t.startAlpha),this.startAlphaVariance=e(t.startAlphaVariance),this.endAlpha=e(t.endAlpha),this.endAlphaVariance=e(t.endAlphaVariance),egret.nativeRender?t.blendMode&&(this.particleBlendMode=t.blendMode):this.particleBlendMode=t.blendMode,this.$particleConfig={0:this.emitterX,1:this.emitterY,2:-1,3:this.maxParticles,4:this.emitterXVariance,5:this.emitterYVariance,6:this.gravityX,7:this.gravityY,8:this.speed,9:this.speedVariance,10:this.lifespan,11:this.lifespanVariance,12:this.emitAngle,13:this.emitAngleVariance,14:this.startSize,15:this.startSizeVariance,16:this.endSize,17:this.endSizeVariance,18:this.startRotation,19:this.startRotationVariance,20:this.endRotation,21:this.endRotationVariance,22:this.radialAcceleration,23:this.radialAccelerationVariance,24:this.tangentialAcceleration,25:this.tangentialAccelerationVariance,26:this.startAlpha,27:this.startAlphaVariance,28:this.endAlpha,29:this.endAlphaVariance,30:this.particleBlendMode,31:t.useEmitterRect?this.relativeContentBounds.x:0,32:t.useEmitterRect?this.relativeContentBounds.y:0,33:t.useEmitterRect?this.relativeContentBounds.width:0,34:t.useEmitterRect?this.relativeContentBounds.height:0,35:0}},i.prototype.initParticle=function(t){var e=t,a=i.getValue(this.lifespan,this.lifespanVariance);if(e.currentTime=0,e.totalTime=a>0?a:0,!(0>=a)){e.x=i.getValue(this.emitterX,this.emitterXVariance),e.y=i.getValue(this.emitterY,this.emitterYVariance),e.startX=this.emitterX,e.startY=this.emitterY;var r=i.getValue(this.emitAngle,this.emitAngleVariance),s=i.getValue(this.speed,this.speedVariance);e.velocityX=s*egret.NumberUtils.cos(r),e.velocityY=s*egret.NumberUtils.sin(r),e.radialAcceleration=i.getValue(this.radialAcceleration,this.radialAccelerationVariance),e.tangentialAcceleration=i.getValue(this.tangentialAcceleration,this.tangentialAccelerationVariance);var n=i.getValue(this.startSize,this.startSizeVariance);.1>n&&(n=.1);var o=i.getValue(this.endSize,this.endSizeVariance);.1>o&&(o=.1);var h=this.texture.textureWidth;e.scale=n/h,e.scaleDelta=(o-n)/a/h;var l=i.getValue(this.startRotation,this.startRotationVariance),c=i.getValue(this.endRotation,this.endRotationVariance);e.rotation=l,e.rotationDelta=(c-l)/a;var p=i.getValue(this.startAlpha,this.startAlphaVariance),u=i.getValue(this.endAlpha,this.endAlphaVariance);e.alpha=p,e.alphaDelta=(u-p)/a,e.blendMode=this.particleBlendMode}},i.getValue=function(t,e){return t+e*(2*Math.random()-1)},i.prototype.advanceParticle=function(t,e){var i=t;e/=1e3;var a=i.totalTime-i.currentTime;e=a>e?e:a,i.currentTime+=e;var r=i.x-i.startX,s=i.y-i.startY,n=Math.sqrt(r*r+s*s);.01>n&&(n=.01);var o=r/n,h=s/n,l=o,c=h;o*=i.radialAcceleration,h*=i.radialAcceleration;var p=l;l=-c*i.tangentialAcceleration,c=p*i.tangentialAcceleration,i.velocityX+=e*(this.gravityX+o+l),i.velocityY+=e*(this.gravityY+h+c),i.x+=i.velocityX*e,i.y+=i.velocityY*e,i.scale+=i.scaleDelta*e*1e3,i.scale<0&&(i.scale=0),i.rotation+=i.rotationDelta*e*1e3,i.alpha+=i.alphaDelta*e*1e3},i}(t.ParticleSystem);t.GravityParticleSystem=e,__reflect(e.prototype,"particle.GravityParticleSystem")}(particle||(particle={}));

//js/encrypt.min_63ae8a12.js
var Base65;!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;Base65={decoder:function(e){var n,r,o,a,i,s=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var d=new ArrayBuffer(s),c=new Uint8Array(d);for(n=0;u>n;n+=4)r=t[e.charCodeAt(n)],o=t[e.charCodeAt(n+1)],a=t[e.charCodeAt(n+2)],i=t[e.charCodeAt(n+3)],c[l++]=r<<2|o>>4,c[l++]=(15&o)<<4|a>>2,c[l++]=(3&a)<<6|63&i;return d},encoder:function(t){var n,r=new Uint8Array(t),o=r.length,a="";for(n=0;o>n;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return o%3===2?a=a.substring(0,a.length-1)+"=":o%3===1&&(a=a.substring(0,a.length-2)+"=="),a},bytes2Str:function(e){if("string"==typeof e)return e;for(var t="",n=e,r=0;r<n.length;r++){var o=n[r].toString(2),a=o.match(/^1+?(?=0)/);if(a&&8==o.length){for(var i=a[0].length,s=n[r].toString(2).slice(7-i),u=1;i>u;u++)s+=n[u+r].toString(2).slice(2);t+=String.fromCharCode(parseInt(s,2)),r+=i-1}else t+=String.fromCharCode(n[r])}return t}}}();var encode_version="sojson.v4",__0x27283=["wrrDi8Kx","FMOmw4XCh8KA","BFfCuhvClDBWLg==","wqDDsARawqw=","KkrChQrCkg==","JsOOw4fDqwI=","F8OmX8KBdDLCiMOFZsO+Dg==","w6PDg0VtTMOacSsZU8Ogwr3DmAxbYQ==","wrDDrMO6wqpaK8O4dMOcZk7Dl8KKwpzCtMO/w6sywrnCrsOCGsORwo4vwoZ7WxnClA==","J8Ooeg==","eyzDjg==","woI/S2LCgm3ClFkAw7YD","bcK+MsKuw6YpPsKSwrNyZGNiwpEGwq52wovDh1zDtMOCT8KWw4nCkcKkworCncK4","wqDDkcOZ","OcOFTg==","w5jDh8OoQyDDmsOKVQLCqB4=","R1jDgQ==","E8Ode8KbTg==","IB5aaHI=","w6rDhMOLwqTCsw==","KMOkw5DDhQs=","w5jCjsO4w6LCmQ==","HlDChhPCjj5JLRw=","dsKvNMKowrl0WMKV","HkHChgzChStwJBfDpg==","w4vDg8Oc","w7szLEzDpg==","wrTDqcOvwpR4","CMK/CjfCs8Oew6c=","w5zDo8KcwqXDnnDCl2vDqwTCigfDhTnDtXw=","RVQJw5TDng==","wprDhMKNWyM=","BsOiw4fDsRY=","wpLDizJcwpI=","QBkwdB4=","bsKpNsKPwrQ=","w7HDglV8U8OSejAgTg==","wrHDkMKpVg4=","w4TChMO5wodt","NsKkQMKATA==","w6zChcOmwoFp","IsK3YMKBdg==","PyZIwpBx","asKJw7hiYw==","wqbDuMKaeCMQag==","GsOUw5/Cp8KRw7JBBiPCgMOoFlcIwoFd","Xk42w5PDvcOFw6oGVg==","LMOpw6TChcKrw4dJOw==","AcOMw6fDviPDpcOCwrp5w5s=","w6zDksKx","wrPCj8OlNsKP","KcOjOsOrYg==","akDDt1LDnsOtDw==","woc0wr7Di8KHw7bDnMOyG8KEw5J7VsOVwpPDiQ==","IEU+a3Y=","XVMnw7zDhQ==","w7zDu8KGC8K4","UcK6w4AVHA==","w43CncOCwqVF","wp7DnsKta3nDi8KbRkTCoA==","MsK8wrEjTcK5PsO1w6URwrnChCs=","bMK0w7YvRcOqJMO+wqIawqbCnXhvYizCk8Okw4zDrijCuArCq8OiKgfCrsOrwog=","dsKmIsK0wrY=","PVYLwqJE","LMO4w6TCmsKgw5JpLR8=","Xl82w4zDtsOQw4oQ","wofCnsKpPwMUcyggCQ==","wobDrxc=","U8K8KsK6wps=","CcOtSDZZ","ViU1w5TCmw==","I303wrVHbsOnw7rCpn/ChmIbwoxIw7g=","FnMYwqNO","bz3Dqxpm","WxjDiSlb","w6kAwpAQwp4=","w5rDmMKmwpfDmQ==","UMKHw6RiSQ==","HcO+f8KZZR/CmQ==","KHzCvS7Cvx5hBiDDjcK+f08dwrkd","eMKtw753RMKI","N8KFJg=="];!function(e,t){var n=function(t){for(;--t;)e.push(e.shift())};n(++t)}(__0x27283,162);var _0x3364=function(e,t){e-=0;var n=__0x27283[e];if(void 0===_0x3364.initialized){!function(){var e="undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob||(e.atob=function(e){for(var n,r,o=String(e).replace(/=+$/,""),a=0,i=0,s="";r=o.charAt(i++);~r&&(n=a%4?64*n+r:r,a++%4)?s+=String.fromCharCode(255&n>>(-2*a&6)):0)r=t.indexOf(r);return s})}();var r=function(e,t){var n,r=[],o=0,a="",i="";e=atob(e);for(var s=0,u=e.length;u>s;s++)i+="%"+("00"+e.charCodeAt(s).toString(16)).slice(-2);e=decodeURIComponent(i);for(var l=0;256>l;l++)r[l]=l;for(l=0;256>l;l++)o=(o+r[l]+t.charCodeAt(l%t.length))%256,n=r[l],r[l]=r[o],r[o]=n;l=0,o=0;for(var d=0;d<e.length;d++)l=(l+1)%256,o=(o+r[l])%256,n=r[l],r[l]=r[o],r[o]=n,a+=String.fromCharCode(e.charCodeAt(d)^r[(r[l]+r[o])%256]);return a};_0x3364.rc4=r,_0x3364.data={},_0x3364.initialized=!0}var o=_0x3364.data[e];return void 0===o?(void 0===_0x3364.once&&(_0x3364.once=!0),n=_0x3364.rc4(n,t),_0x3364.data[e]=n):n=o,n};try{setTimeout(function(){var e=this,t={KjStN:_0x3364("0x0","3cwF"),Svwrp:function(e,t){return e!==t},Gnqpr:_0x3364("0x1","uP#i"),TgRcD:_0x3364("0x2","F@gf")};window[t[_0x3364("0x3","ky&Z")]]&&Global[_0x3364("0x4","CCZK")]&&(t[_0x3364("0x5","wpPT")](t[_0x3364("0x6","CCZK")],t[_0x3364("0x7","MO45")])?Global[_0x3364("0x8","Ue2o")][_0x3364("0x9","iWI(")](EventEnum[_0x3364("0xa","fzK&")],function(){var t={GIZmg:function(e,t){return e==t},UHiwF:function(e,t){return e==t},xFvXH:function(e,t){return e!==t},LKKGE:_0x3364("0xb","!3%%"),gcLhN:_0x3364("0xc","4o^R"),dJTAA:_0x3364("0xd","4AOy"),vsBts:function(e,t,n,r,o){return e(t,n,r,o)},hnMnM:_0x3364("0xe","6asG"),FmGcS:function(e,t){return e==t},aMAtN:function(e,t){return e===t},fDsAu:_0x3364("0xf","fzK&"),Tnstx:_0x3364("0x10","Ue2o"),ZMEMM:_0x3364("0x11","F@gf"),MpTRU:function(e,t,n,r,o){return e(t,n,r,o)},SRRUe:function(e,t){return t>=e},tKRyP:function(e,t,n){return e(t,n)},kcpQh:_0x3364("0x12","BAng"),picFV:function(e,t){return e*t},UzBJc:function(e,t){return e*t},ERpem:function(e,t){return e*t},wFQUe:function(e,t,n){return e(t,n)},CcsfX:function(e,t){return e*t},oFuwl:function(e,t){return e*t}};if(t[_0x3364("0x13","Ue2o")](t[_0x3364("0x14","@D10")],t[_0x3364("0x15",")9NB")]))for(var n=t[_0x3364("0x16","MO45")][_0x3364("0x17","vAvq")]("|"),r=0;;){switch(n[r++]){case"0":var o={b:a};continue;case"1":var a=JSON[_0x3364("0x18","CCZK")]({a:Global[_0x3364("0x19","6asG")]||"ip",b:Global[_0x3364("0x1a","CCZK")],c:Global[_0x3364("0x1b",")9NB")]});continue;case"2":t[_0x3364("0x1c","4AOy")](httpPostSmart_XY,s,function(e){__httpLoggerOn=i,t[_0x3364("0x1d","fzK&")](e,"1")&&Global[_0x3364("0x1e","uP#i")](EventEnum[_0x3364("0x1f","C2t)")])},e,o);continue;case"3":__httpLoggerOn=!1;continue;case"4":var i=__httpLoggerOn;continue;case"5":var s=t[_0x3364("0x20","VnaF")];continue}break}else t[_0x3364("0x21","1Mrj")](t[_0x3364("0x22","MO45")](randomInt_XY,1,100),30)&&(t[_0x3364("0x23","wpPT")](t[_0x3364("0x24","pom!")],t[_0x3364("0x25","6asG")])?egret[_0x3364("0x26","iWI(")](function(){if(t[_0x3364("0x27","1Mrj")](t[_0x3364("0x28","iQie")],t[_0x3364("0x29","#tP$")]))for(var n=t[_0x3364("0x2a","iQie")][_0x3364("0x2b","#tP$")]("|"),r=0;;){switch(n[r++]){case"0":t[_0x3364("0x2c","lRC%")](httpPostSmart_XY,i,function(e){__httpLoggerOn=s,t[_0x3364("0x2d","3cwF")](e,"1")&&Global[_0x3364("0x2e","1Mrj")](EventEnum[_0x3364("0x2f","ky&Z")])},e,o);continue;case"1":var o={b:a};continue;case"2":__httpLoggerOn=!1;continue;case"3":var a=JSON[_0x3364("0x30","VnaF")]({a:Global[_0x3364("0x31","ky&Z")]||"ip",b:Global[_0x3364("0x32","MO45")],c:Global[_0x3364("0x33","C2t)")]});continue;case"4":var i=t[_0x3364("0x34","XU5)")];continue;case"5":var s=__httpLoggerOn;continue}break}else __httpLoggerOn=tmp,t[_0x3364("0x35","b1PL")](str,"1")&&Global[_0x3364("0x36","BAng")](EventEnum[_0x3364("0x37","LW@%")])},e,t[_0x3364("0x38","BIZx")](randomInt_XY,t[_0x3364("0x39","VnaF")](t[_0x3364("0x3a","E3Ol")](5,60),1e3),t[_0x3364("0x3b","]*n]")](t[_0x3364("0x3c","iQie")](10,60),1e3))):egret[_0x3364("0x3d","F@gf")](function(){for(var t={sldjj:_0x3364("0x3e","]*n]"),VvldG:_0x3364("0x3f","]*n]"),AHXIw:function(e,t,n,r,o){return e(t,n,r,o)},pVfBV:function(e,t){return e==t}},n=t[_0x3364("0x40","6asG")][_0x3364("0x41","zjsW")]("|"),r=0;;){switch(n[r++]){case"0":var o=__httpLoggerOn;continue;case"1":__httpLoggerOn=!1;continue;case"2":var a=JSON[_0x3364("0x42","ky&Z")]({a:Global[_0x3364("0x43","VnaF")]||"ip",b:Global[_0x3364("0x44","rZaZ")],c:Global[_0x3364("0x45","wpPT")]});continue;case"3":var i=t[_0x3364("0x46","6asG")];continue;case"4":t[_0x3364("0x47","!3%%")](httpPostSmart_XY,i,function(e){__httpLoggerOn=o,u[_0x3364("0x48","A2Mb")](e,"1")&&Global[_0x3364("0x2e","1Mrj")](EventEnum[_0x3364("0x49","Ixdn")])},e,s);continue;case"5":var s={b:a};continue;case"6":var u={fydbm:function(e,n){return t[_0x3364("0x4a","Ixdn")](e,n)}};continue}break}},e,t[_0x3364("0x4b","x%A2")](randomInt_XY,t[_0x3364("0x4c","x%A2")](t[_0x3364("0x4d","@1k(")](5,60),1e3),t[_0x3364("0x4e","C2t)")](t[_0x3364("0x4f","3cwF")](10,60),1e3))))},this):Global[_0x3364("0x50","Ue2o")](EventEnum[_0x3364("0x51","CCZK")]))},2e3)}catch(_0x8248c7){}encode_version="sojson.v4",function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(global){"use strict";global=global||{};var _Base66=global.Base66,version="2.5.1",buffer;if("undefined"!=typeof module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return 128>t?e:2048>t?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)];return r.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("Base66")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("Base66")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return fromCharCode((n>>>10)+55296)+fromCharCode((1023&n)+56320);case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),o=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return o.length-=[0,0,2,1][n],o.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"Base66")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"Base66")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base66;return global.Base66=_Base66,e};if(global.Base66={VERSION:version,atob:atob,btoa:btoa,fromBase66:decode,toBase66:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base66.extendString=function(){Object.defineProperty(String.prototype,"fromBase66",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase66",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase66URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base66=global.Base66),"undefined"!=typeof module&&module.exports?module.exports.Base66=global.Base66:"function"==typeof define&&define.amd&&define([],function(){return global.Base66}),{Base66:global.Base66}});var CRC32;!function(e){"undefined"==typeof DO_NOT_EXPORT_CRC?"object"==typeof exports?e(exports):"function"==typeof define&&define.amd?define(function(){var t={};return e(t),t}):e(CRC32={}):e(CRC32={})}(function(e){function t(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=n,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}function n(e,t){for(var n=-1^t,r=e.length-1,o=0;r>o;)n=n>>>8^i[255&(n^e.charCodeAt(o++))],n=n>>>8^i[255&(n^e.charCodeAt(o++))];return o===r&&(n=n>>>8^i[255&(n^e.charCodeAt(o))]),-1^n}function r(e,t){if(e.length>1e4)return o(e,t);for(var n=-1^t,r=e.length-3,a=0;r>a;)n=n>>>8^i[255&(n^e[a++])],n=n>>>8^i[255&(n^e[a++])],n=n>>>8^i[255&(n^e[a++])],n=n>>>8^i[255&(n^e[a++])];for(;r+3>a;)n=n>>>8^i[255&(n^e[a++])];return-1^n}function o(e,t){for(var n=-1^t,r=e.length-7,o=0;r>o;)n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])],n=n>>>8^i[255&(n^e[o++])];for(;r+7>o;)n=n>>>8^i[255&(n^e[o++])];return-1^n}function a(e,t){for(var n,r,o=-1^t,a=0,s=e.length;s>a;)n=e.charCodeAt(a++),128>n?o=o>>>8^i[255&(o^n)]:2048>n?(o=o>>>8^i[255&(o^(192|n>>6&31))],o=o>>>8^i[255&(o^(128|63&n))]):n>=55296&&57344>n?(n=(1023&n)+64,r=1023&e.charCodeAt(a++),o=o>>>8^i[255&(o^(240|n>>8&7))],o=o>>>8^i[255&(o^(128|n>>2&63))],o=o>>>8^i[255&(o^(128|r>>6&15|(3&n)<<4))],o=o>>>8^i[255&(o^(128|63&r))]):(o=o>>>8^i[255&(o^(224|n>>12&15))],o=o>>>8^i[255&(o^(128|n>>6&63))],o=o>>>8^i[255&(o^(128|63&n))]);return-1^o}e.version="1.2.0";var i=t();e.table=i,e.bstr=n,e.buf=r,e.str=a}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pako=e()}}(function(){return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=u.assign({level:v,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==p)throw new Error(d[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var o;if(o="string"==typeof t.dictionary?l.string2buf(t.dictionary):"[object ArrayBuffer]"===f.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=s.deflateSetDictionary(this.strm,o),n!==p)throw new Error(d[n]);this._dict_set=!0}}function o(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||d[n.err];return n.result}function a(e,t){return t=t||{},t.raw=!0,o(e,t)}function i(e,t){return t=t||{},t.gzip=!0,o(e,t)}var s=e("./zlib/deflate"),u=e("./utils/common"),l=e("./utils/strings"),d=e("./zlib/messages"),c=e("./zlib/zstream"),f=Object.prototype.toString,h=0,_=4,p=0,g=1,m=2,v=-1,w=0,b=8;r.prototype.push=function(e,t){var n,r,o=this.strm,a=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?_:h,"string"==typeof e?o.input=l.string2buf(e):"[object ArrayBuffer]"===f.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new u.Buf8(a),o.next_out=0,o.avail_out=a),n=s.deflate(o,r),n!==g&&n!==p)return this.onEnd(n),this.ended=!0,!1;(0===o.avail_out||0===o.avail_in&&(r===_||r===m))&&("string"===this.options.to?this.onData(l.buf2binstring(u.shrinkBuf(o.output,o.next_out))):this.onData(u.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&n!==g);return r===_?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p):r===m?(this.onEnd(p),o.avail_out=0,!0):!0},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=r,n.deflate=o,n.deflateRaw=a,n.gzip=i},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(d[n]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function o(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||d[n.err];return n.result}function a(e,t){return t=t||{},t.raw=!0,o(e,t)}var i=e("./zlib/inflate"),s=e("./utils/common"),u=e("./utils/strings"),l=e("./zlib/constants"),d=e("./zlib/messages"),c=e("./zlib/zstream"),f=e("./zlib/gzheader"),h=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,o,a,d,c,f=this.strm,_=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?f.input=u.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(_),f.next_out=0,f.avail_out=_),n=i.inflate(f,l.Z_NO_FLUSH),n===l.Z_NEED_DICT&&p&&(c="string"==typeof p?u.string2buf(p):"[object ArrayBuffer]"===h.call(p)?new Uint8Array(p):p,n=i.inflateSetDictionary(this.strm,c)),n===l.Z_BUF_ERROR&&g===!0&&(n=l.Z_OK,g=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===l.Z_STREAM_END||0===f.avail_in&&(r===l.Z_FINISH||r===l.Z_SYNC_FLUSH))&&("string"===this.options.to?(o=u.utf8border(f.output,f.next_out),a=f.next_out-o,d=u.buf2string(f.output,o),f.next_out=a,f.avail_out=_-a,a&&s.arraySet(f.output,f.output,o,a,0),this.onData(d)):this.onData(s.shrinkBuf(f.output,f.next_out))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):r===l.Z_SYNC_FLUSH?(this.onEnd(l.Z_OK),f.avail_out=0,!0):!0},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=r,n.inflate=o,n.inflateRaw=a,n.ungzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)r(n,o)&&(e[o]=n[o])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),o);for(var a=0;r>a;a++)e[o+a]=t[n+a]},flattenChunks:function(e){var t,n,r,o,a,i;for(r=0,t=0,n=e.length;n>t;t++)r+=e[t].length;for(i=new Uint8Array(r),o=0,t=0,n=e.length;n>t;t++)a=e[t],i.set(a,o),o+=a.length;return i}},i={arraySet:function(e,t,n,r,o){for(var a=0;r>a;a++)e[o+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(o)},{}],4:[function(e,t,n){"use strict";function r(e,t){if(65537>t&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;t>r;r++)n+=String.fromCharCode(e[r]);return n}var o=e("./common"),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(s){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){i=!1}for(var u=new o.Buf8(256),l=0;256>l;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,n.string2buf=function(e){var t,n,r,a,i,s=e.length,u=0;for(a=0;s>a;a++)n=e.charCodeAt(a),55296===(64512&n)&&s>a+1&&(r=e.charCodeAt(a+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),u+=128>n?1:2048>n?2:65536>n?3:4;for(t=new o.Buf8(u),i=0,a=0;u>i;a++)n=e.charCodeAt(a),55296===(64512&n)&&s>a+1&&(r=e.charCodeAt(a+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),128>n?t[i++]=n:2048>n?(t[i++]=192|n>>>6,t[i++]=128|63&n):65536>n?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,r=t.length;r>n;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,a,i,s=t||e.length,l=new Array(2*s);for(o=0,n=0;s>n;)if(a=e[n++],128>a)l[o++]=a;else if(i=u[a],i>4)l[o++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&s>n;)a=a<<6|63&e[n++],i--;i>1?l[o++]=65533:65536>a?l[o++]=a:(a-=65536,l[o++]=55296|a>>10&1023,l[o++]=56320|1023&a)}return r(l,o)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+u[e[n]]>t?n:t}},{"./common":3}],5:[function(e,t,n){"use strict";function r(e,t,n,r){for(var o=65535&e|0,a=e>>>16&65535|0,i=0;0!==n;){i=n>2e3?2e3:n,n-=i;do o=o+t[r++]|0,a=a+o|0;while(--i);o%=65521,a%=65521}return o|a<<16|0}t.exports=r},{}],6:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t,n){"use strict";function r(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function o(e,t,n,r){var o=a,i=r+n;e^=-1;for(var s=r;i>s;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var a=r();t.exports=o},{}],8:[function(e,t,n){"use strict";function r(e,t){return e.msg=P[t],t}function o(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){D._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,i(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function d(e,t,n,r){var o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,O.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=I(e.adler,t,o,n):2===e.state.wrap&&(e.adler=M(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function c(e,t){var n,r,o=e.max_chain_length,a=e.strstart,i=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-ct?e.strstart-(e.w_size-ct):0,l=e.window,d=e.w_mask,c=e.prev,f=e.strstart+dt,h=l[a+i-1],_=l[a+i];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,l[n+i]===_&&l[n+i-1]===h&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do;while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&f>a);if(r=dt-(f-a),a=f-dt,r>i){if(e.match_start=t,i=r,r>=s)break;h=l[a+i-1],_=l[a+i]}}while((t=c[t&d])>u&&0!==--o);return i<=e.lookahead?i:e.lookahead}function f(e){var t,n,r,o,a,i=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-ct)){O.arraySet(e.window,e.window,i,i,0),e.match_start-=i,e.strstart-=i,e.block_start-=i,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=i?r-i:0;while(--n);n=i,t=n;do r=e.prev[--t],e.prev[t]=r>=i?r-i:0;while(--n);o+=i}if(0===e.strm.avail_in)break;if(n=d(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=lt)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+lt-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<lt)););}while(e.lookahead<ct&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===L)return bt;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return bt;if(e.strstart-e.block_start>=e.w_size-ct&&(s(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===N?(s(e,!0),0===e.strm.avail_out?xt:At):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?bt:bt}function _(e,t){for(var n,r;;){if(e.lookahead<ct){if(f(e),e.lookahead<ct&&t===L)return bt;if(0===e.lookahead)break}if(n=0,e.lookahead>=lt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ct&&(e.match_length=c(e,n)),e.match_length>=lt)if(r=D._tr_tally(e,e.strstart-e.match_start,e.match_length-lt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=lt){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return bt}return e.insert=e.strstart<lt-1?e.strstart:lt-1,t===N?(s(e,!0),0===e.strm.avail_out?xt:At):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?bt:yt}function p(e,t){for(var n,r,o;;){if(e.lookahead<ct){if(f(e),e.lookahead<ct&&t===L)return bt;if(0===e.lookahead)break}if(n=0,e.lookahead>=lt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=lt-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ct&&(e.match_length=c(e,n),e.match_length<=5&&(e.strategy===Z||e.match_length===lt&&e.strstart-e.match_start>4096)&&(e.match_length=lt-1)),e.prev_length>=lt&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-lt,r=D._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-lt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=lt-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return bt}else if(e.match_available){if(r=D._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return bt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=D._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<lt-1?e.strstart:lt-1,t===N?(s(e,!0),0===e.strm.avail_out?xt:At):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?bt:yt}function g(e,t){for(var n,r,o,a,i=e.window;;){if(e.lookahead<=dt){if(f(e),e.lookahead<=dt&&t===L)return bt;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=lt&&e.strstart>0&&(o=e.strstart-1,r=i[o],r===i[++o]&&r===i[++o]&&r===i[++o])){a=e.strstart+dt;do;while(r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&a>o);e.match_length=dt-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=lt?(n=D._tr_tally(e,1,e.match_length-lt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===N?(s(e,!0),0===e.strm.avail_out?xt:At):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?bt:yt}function m(e,t){for(var n;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===L)return bt;break}if(e.match_length=0,n=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===N?(s(e,!0),0===e.strm.avail_out?xt:At):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?bt:yt}function v(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function w(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=E[e.level].max_lazy,e.good_match=E[e.level].good_length,e.nice_match=E[e.level].nice_length,e.max_chain_length=E[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=lt-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*st),this.dyn_dtree=new O.Buf16(2*(2*at+1)),this.bl_tree=new O.Buf16(2*(2*it+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(ut+1),this.heap=new O.Buf16(2*ot+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*ot+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0
}function y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Q,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ht:vt,e.adler=2===t.wrap?0:1,t.last_flush=L,D._tr_init(t),U):r(e,H)}function x(e){var t=y(e);return t===U&&w(e.state),t}function A(e,t){return e&&e.state?2!==e.state.wrap?H:(e.state.gzhead=t,U):H}function T(e,t,n,o,a,i){if(!e)return H;var s=1;if(t===j&&(t=6),0>o?(s=0,o=-o):o>15&&(s=2,o-=16),1>a||a>$||n!==J||8>o||o>15||0>t||t>9||0>i||i>q)return r(e,H);8===o&&(o=9);var u=new b;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=o,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+lt-1)/lt),u.window=new O.Buf8(2*u.w_size),u.head=new O.Buf16(u.hash_size),u.prev=new O.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new O.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=i,u.method=n,x(e)}function k(e,t){return T(e,t,J,et,tt,Y)}function S(e,t){var n,s,d,c;if(!e||!e.state||t>G||0>t)return e?r(e,H):H;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===wt&&t!==N)return r(e,0===e.avail_out?K:H);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===ht)if(2===s.wrap)e.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=M(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=_t):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),u(s,Tt),s.status=vt);else{var f=J+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,f|=h<<6,0!==s.strstart&&(f|=ft),f+=31-f%31,s.status=vt,l(s,f),0!==s.strstart&&(l(s,e.adler>>>16),l(s,65535&e.adler)),e.adler=1}if(s.status===_t)if(s.gzhead.extra){for(d=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>d&&(e.adler=M(e.adler,s.pending_buf,s.pending-d,d)),i(e),d=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>d&&(e.adler=M(e.adler,s.pending_buf,s.pending-d,d)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=pt)}else s.status=pt;if(s.status===pt)if(s.gzhead.name){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=M(e.adler,s.pending_buf,s.pending-d,d)),i(e),d=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>d&&(e.adler=M(e.adler,s.pending_buf,s.pending-d,d)),0===c&&(s.gzindex=0,s.status=gt)}else s.status=gt;if(s.status===gt)if(s.gzhead.comment){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=M(e.adler,s.pending_buf,s.pending-d,d)),i(e),d=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>d&&(e.adler=M(e.adler,s.pending_buf,s.pending-d,d)),0===c&&(s.status=mt)}else s.status=mt;if(s.status===mt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&i(e),s.pending+2<=s.pending_buf_size&&(u(s,255&e.adler),u(s,e.adler>>8&255),e.adler=0,s.status=vt)):s.status=vt),0!==s.pending){if(i(e),0===e.avail_out)return s.last_flush=-1,U}else if(0===e.avail_in&&o(t)<=o(n)&&t!==N)return r(e,K);if(s.status===wt&&0!==e.avail_in)return r(e,K);if(0!==e.avail_in||0!==s.lookahead||t!==L&&s.status!==wt){var _=s.strategy===X?m(s,t):s.strategy===W?g(s,t):E[s.level].func(s,t);if((_===xt||_===At)&&(s.status=wt),_===bt||_===xt)return 0===e.avail_out&&(s.last_flush=-1),U;if(_===yt&&(t===F?D._tr_align(s):t!==G&&(D._tr_stored_block(s,0,0,!1),t===R&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),i(e),0===e.avail_out))return s.last_flush=-1,U}return t!==N?U:s.wrap<=0?z:(2===s.wrap?(u(s,255&e.adler),u(s,e.adler>>8&255),u(s,e.adler>>16&255),u(s,e.adler>>24&255),u(s,255&e.total_in),u(s,e.total_in>>8&255),u(s,e.total_in>>16&255),u(s,e.total_in>>24&255)):(l(s,e.adler>>>16),l(s,65535&e.adler)),i(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?U:z)}function C(e){var t;return e&&e.state?(t=e.state.status,t!==ht&&t!==_t&&t!==pt&&t!==gt&&t!==mt&&t!==vt&&t!==wt?r(e,H):(e.state=null,t===vt?r(e,V):U)):H}function B(e,t){var n,r,o,i,s,u,l,d,c=t.length;if(!e||!e.state)return H;if(n=e.state,i=n.wrap,2===i||1===i&&n.status!==ht||n.lookahead)return H;for(1===i&&(e.adler=I(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===i&&(a(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new O.Buf8(n.w_size),O.arraySet(d,t,c-n.w_size,n.w_size,0),t=d,c=n.w_size),s=e.avail_in,u=e.next_in,l=e.input,e.avail_in=c,e.next_in=0,e.input=t,f(n);n.lookahead>=lt;){r=n.strstart,o=n.lookahead-(lt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+lt-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--o);n.strstart=r,n.lookahead=lt-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=lt-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=s,n.wrap=i,U}var E,O=e("../utils/common"),D=e("./trees"),I=e("./adler32"),M=e("./crc32"),P=e("./messages"),L=0,F=1,R=3,N=4,G=5,U=0,z=1,H=-2,V=-3,K=-5,j=-1,Z=1,X=2,W=3,q=4,Y=0,Q=2,J=8,$=9,et=15,tt=8,nt=29,rt=256,ot=rt+1+nt,at=30,it=19,st=2*ot+1,ut=15,lt=3,dt=258,ct=dt+lt+1,ft=32,ht=42,_t=69,pt=73,gt=91,mt=103,vt=113,wt=666,bt=1,yt=2,xt=3,At=4,Tt=3;E=[new v(0,0,0,0,h),new v(4,4,8,4,_),new v(4,5,16,8,_),new v(4,6,32,32,_),new v(4,4,16,16,p),new v(8,16,32,32,p),new v(8,16,128,128,p),new v(8,32,128,256,p),new v(32,128,258,1024,p),new v(32,258,258,4096,p)],n.deflateInit=k,n.deflateInit2=T,n.deflateReset=x,n.deflateResetKeep=y,n.deflateSetHeader=A,n.deflate=S,n.deflateEnd=C,n.deflateSetDictionary=B,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],10:[function(e,t,n){"use strict";var r=30,o=12;t.exports=function(e,t){var n,a,i,s,u,l,d,c,f,h,_,p,g,m,v,w,b,y,x,A,T,k,S,C,B;n=e.state,a=e.next_in,C=e.input,i=a+(e.avail_in-5),s=e.next_out,B=e.output,u=s-(t-e.avail_out),l=s+(e.avail_out-257),d=n.dmax,c=n.wsize,f=n.whave,h=n.wnext,_=n.window,p=n.hold,g=n.bits,m=n.lencode,v=n.distcode,w=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{15>g&&(p+=C[a++]<<g,g+=8,p+=C[a++]<<g,g+=8),y=m[p&w];t:for(;;){if(x=y>>>24,p>>>=x,g-=x,x=y>>>16&255,0===x)B[s++]=65535&y;else{if(!(16&x)){if(0===(64&x)){y=m[(65535&y)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=o;break e}e.msg="invalid literal/length code",n.mode=r;break e}A=65535&y,x&=15,x&&(x>g&&(p+=C[a++]<<g,g+=8),A+=p&(1<<x)-1,p>>>=x,g-=x),15>g&&(p+=C[a++]<<g,g+=8,p+=C[a++]<<g,g+=8),y=v[p&b];n:for(;;){if(x=y>>>24,p>>>=x,g-=x,x=y>>>16&255,!(16&x)){if(0===(64&x)){y=v[(65535&y)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=r;break e}if(T=65535&y,x&=15,x>g&&(p+=C[a++]<<g,g+=8,x>g&&(p+=C[a++]<<g,g+=8)),T+=p&(1<<x)-1,T>d){e.msg="invalid distance too far back",n.mode=r;break e}if(p>>>=x,g-=x,x=s-u,T>x){if(x=T-x,x>f&&n.sane){e.msg="invalid distance too far back",n.mode=r;break e}if(k=0,S=_,0===h){if(k+=c-x,A>x){A-=x;do B[s++]=_[k++];while(--x);k=s-T,S=B}}else if(x>h){if(k+=c+h-x,x-=h,A>x){A-=x;do B[s++]=_[k++];while(--x);if(k=0,A>h){x=h,A-=x;do B[s++]=_[k++];while(--x);k=s-T,S=B}}}else if(k+=h-x,A>x){A-=x;do B[s++]=_[k++];while(--x);k=s-T,S=B}for(;A>2;)B[s++]=S[k++],B[s++]=S[k++],B[s++]=S[k++],A-=3;A&&(B[s++]=S[k++],A>1&&(B[s++]=S[k++]))}else{k=s-T;do B[s++]=B[k++],B[s++]=B[k++],B[s++]=B[k++],A-=3;while(A>2);A&&(B[s++]=B[k++],A>1&&(B[s++]=B[k++]))}break}}break}}while(i>a&&l>s);A=g>>3,a-=A,g-=A<<3,p&=(1<<g)-1,e.next_in=a,e.next_out=s,e.avail_in=i>a?5+(i-a):5-(a-i),e.avail_out=l>s?257+(l-s):257-(s-l),n.hold=p,n.bits=g}},{}],11:[function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=R,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(pt),t.distcode=t.distdyn=new v.Buf32(gt),t.sane=1,t.back=-1,E):I}function i(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):I}function s(e,t){var n,r;return e&&e.state?(r=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?I:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,i(e))):I}function u(e,t){var n,r;return e?(r=new o,e.state=r,r.window=null,n=s(e,t),n!==E&&(e.state=null),n):I}function l(e){return u(e,vt)}function d(e){if(wt){var t;for(g=new v.Buf32(512),m=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(x(T,e.lens,0,288,g,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;x(k,e.lens,0,32,m,0,e.work,{bits:5}),wt=!1}e.lencode=g,e.lenbits=9,e.distcode=m,e.distbits=5}function c(e,t,n,r){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new v.Buf8(a.wsize)),r>=a.wsize?(v.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>r&&(o=r),v.arraySet(a.window,t,n-r,o,a.wnext),r-=o,r?(v.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}function f(e,t){var n,o,a,i,s,u,l,f,h,_,p,g,m,pt,gt,mt,vt,wt,bt,yt,xt,At,Tt,kt,St=0,Ct=new v.Buf8(4),Bt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;n=e.state,n.mode===W&&(n.mode=q),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,o=e.input,u=e.avail_in,f=n.hold,h=n.bits,_=u,p=l,At=E;e:for(;;)switch(n.mode){case R:if(0===n.wrap){n.mode=q;break}for(;16>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(2&n.wrap&&35615===f){n.check=0,Ct[0]=255&f,Ct[1]=f>>>8&255,n.check=b(n.check,Ct,2,0),f=0,h=0,n.mode=N;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=ft;break}if((15&f)!==F){e.msg="unknown compression method",n.mode=ft;break}if(f>>>=4,h-=4,xt=(15&f)+8,0===n.wbits)n.wbits=xt;else if(xt>n.wbits){e.msg="invalid window size",n.mode=ft;break}n.dmax=1<<xt,e.adler=n.check=1,n.mode=512&f?Z:W,f=0,h=0;break;case N:for(;16>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(n.flags=f,(255&n.flags)!==F){e.msg="unknown compression method",n.mode=ft;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=ft;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,n.check=b(n.check,Ct,2,0)),f=0,h=0,n.mode=G;case G:for(;32>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}n.head&&(n.head.time=f),512&n.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,Ct[2]=f>>>16&255,Ct[3]=f>>>24&255,n.check=b(n.check,Ct,4,0)),f=0,h=0,n.mode=U;case U:for(;16>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,n.check=b(n.check,Ct,2,0)),f=0,h=0,n.mode=z;case z:if(1024&n.flags){for(;16>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,n.check=b(n.check,Ct,2,0)),f=0,h=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&(g=n.length,g>u&&(g=u),g&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v.arraySet(n.head.extra,o,i,g,xt)),512&n.flags&&(n.check=b(n.check,o,g,i)),u-=g,i+=g,n.length-=g),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===u)break e;g=0;do xt=o[i+g++],n.head&&xt&&n.length<65536&&(n.head.name+=String.fromCharCode(xt));while(xt&&u>g);if(512&n.flags&&(n.check=b(n.check,o,g,i)),u-=g,i+=g,xt)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=K;case K:if(4096&n.flags){if(0===u)break e;g=0;do xt=o[i+g++],n.head&&xt&&n.length<65536&&(n.head.comment+=String.fromCharCode(xt));while(xt&&u>g);if(512&n.flags&&(n.check=b(n.check,o,g,i)),u-=g,i+=g,xt)break e}else n.head&&(n.head.comment=null);n.mode=j;case j:if(512&n.flags){for(;16>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=ft;break}f=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=W;break;case Z:for(;32>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}e.adler=n.check=r(f),f=0,h=0,n.mode=X;case X:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=f,n.bits=h,D;e.adler=n.check=1,n.mode=W;case W:if(t===C||t===B)break e;case q:if(n.last){f>>>=7&h,h-=7&h,n.mode=lt;break}for(;3>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}switch(n.last=1&f,f>>>=1,h-=1,3&f){case 0:n.mode=Y;break;case 1:if(d(n),n.mode=nt,t===B){f>>>=2,h-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=ft}f>>>=2,h-=2;break;case Y:for(f>>>=7&h,h-=7&h;32>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if((65535&f)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ft;break}if(n.length=65535&f,f=0,h=0,n.mode=Q,t===B)break e;case Q:n.mode=J;case J:if(g=n.length){if(g>u&&(g=u),g>l&&(g=l),0===g)break e;v.arraySet(a,o,i,g,s),u-=g,i+=g,l-=g,s+=g,n.length-=g;break}n.mode=W;break;case $:for(;14>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(n.nlen=(31&f)+257,f>>>=5,h-=5,n.ndist=(31&f)+1,f>>>=5,h-=5,n.ncode=(15&f)+4,f>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ft;break}n.have=0,n.mode=et;case et:for(;n.have<n.ncode;){for(;3>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}n.lens[Bt[n.have++]]=7&f,f>>>=3,h-=3}for(;n.have<19;)n.lens[Bt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Tt={bits:n.lenbits},At=x(A,n.lens,0,19,n.lencode,0,n.work,Tt),n.lenbits=Tt.bits,At){e.msg="invalid code lengths set",n.mode=ft;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.nlen+n.ndist;){for(;St=n.lencode[f&(1<<n.lenbits)-1],gt=St>>>24,mt=St>>>16&255,vt=65535&St,!(h>=gt);){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(16>vt)f>>>=gt,h-=gt,n.lens[n.have++]=vt;else{if(16===vt){for(kt=gt+2;kt>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(f>>>=gt,h-=gt,0===n.have){e.msg="invalid bit length repeat",n.mode=ft;break}xt=n.lens[n.have-1],g=3+(3&f),f>>>=2,h-=2}else if(17===vt){for(kt=gt+3;kt>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}f>>>=gt,h-=gt,xt=0,g=3+(7&f),f>>>=3,h-=3}else{for(kt=gt+7;kt>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}f>>>=gt,h-=gt,xt=0,g=11+(127&f),f>>>=7,h-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ft;break}for(;g--;)n.lens[n.have++]=xt}}if(n.mode===ft)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=ft;break}if(n.lenbits=9,Tt={bits:n.lenbits},At=x(T,n.lens,0,n.nlen,n.lencode,0,n.work,Tt),n.lenbits=Tt.bits,At){e.msg="invalid literal/lengths set",n.mode=ft;break}if(n.distbits=6,n.distcode=n.distdyn,Tt={bits:n.distbits},At=x(k,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Tt),n.distbits=Tt.bits,At){e.msg="invalid distances set",n.mode=ft;break}if(n.mode=nt,t===B)break e;case nt:n.mode=rt;case rt:if(u>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=f,n.bits=h,y(e,p),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,o=e.input,u=e.avail_in,f=n.hold,h=n.bits,n.mode===W&&(n.back=-1);break}for(n.back=0;St=n.lencode[f&(1<<n.lenbits)-1],gt=St>>>24,mt=St>>>16&255,vt=65535&St,!(h>=gt);){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(mt&&0===(240&mt)){for(wt=gt,bt=mt,yt=vt;St=n.lencode[yt+((f&(1<<wt+bt)-1)>>wt)],gt=St>>>24,mt=St>>>16&255,vt=65535&St,!(h>=wt+gt);){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}f>>>=wt,h-=wt,n.back+=wt}if(f>>>=gt,h-=gt,n.back+=gt,n.length=vt,0===mt){n.mode=ut;break}if(32&mt){n.back=-1,n.mode=W;break}if(64&mt){e.msg="invalid literal/length code",n.mode=ft;break}n.extra=15&mt,n.mode=ot;case ot:if(n.extra){for(kt=n.extra;kt>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=at;case at:for(;St=n.distcode[f&(1<<n.distbits)-1],gt=St>>>24,mt=St>>>16&255,vt=65535&St,!(h>=gt);){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(0===(240&mt)){for(wt=gt,bt=mt,yt=vt;St=n.distcode[yt+((f&(1<<wt+bt)-1)>>wt)],gt=St>>>24,mt=St>>>16&255,vt=65535&St,!(h>=wt+gt);){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}f>>>=wt,h-=wt,n.back+=wt}if(f>>>=gt,h-=gt,n.back+=gt,64&mt){e.msg="invalid distance code",n.mode=ft;break}n.offset=vt,n.extra=15&mt,n.mode=it;case it:if(n.extra){for(kt=n.extra;kt>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ft;break}n.mode=st;case st:if(0===l)break e;if(g=p-l,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ft;break}g>n.wnext?(g-=n.wnext,m=n.wsize-g):m=n.wnext-g,g>n.length&&(g=n.length),pt=n.window}else pt=a,m=s-n.offset,g=n.length;g>l&&(g=l),l-=g,n.length-=g;do a[s++]=pt[m++];while(--g);0===n.length&&(n.mode=rt);break;case ut:if(0===l)break e;a[s++]=n.length,l--,n.mode=rt;break;case lt:if(n.wrap){for(;32>h;){if(0===u)break e;u--,f|=o[i++]<<h,h+=8}if(p-=l,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?b(n.check,a,p,s-p):w(n.check,a,p,s-p)),p=l,(n.flags?f:r(f))!==n.check){e.msg="incorrect data check",n.mode=ft;break}f=0,h=0}n.mode=dt;case dt:if(n.wrap&&n.flags){for(;32>h;){if(0===u)break e;u--,f+=o[i++]<<h,h+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=ft;break}f=0,h=0}n.mode=ct;case ct:At=O;break e;case ft:At=M;break e;case ht:return P;case _t:default:return I}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=f,n.bits=h,(n.wsize||p!==e.avail_out&&n.mode<ft&&(n.mode<lt||t!==S))&&c(e,e.output,e.next_out,p-e.avail_out)?(n.mode=ht,P):(_-=e.avail_in,p-=e.avail_out,e.total_in+=_,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?b(n.check,a,p,e.next_out-p):w(n.check,a,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===W?128:0)+(n.mode===nt||n.mode===Q?256:0),(0===_&&0===p||t===S)&&At===E&&(At=L),At)}function h(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,E}function _(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?I:(n.head=t,t.done=!1,E)):I}function p(e,t){var n,r,o,a=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==X?I:n.mode===X&&(r=1,r=w(r,t,a,0),r!==n.check)?M:(o=c(e,t,a,a))?(n.mode=ht,P):(n.havedict=1,E)):I}var g,m,v=e("../utils/common"),w=e("./adler32"),b=e("./crc32"),y=e("./inffast"),x=e("./inftrees"),A=0,T=1,k=2,S=4,C=5,B=6,E=0,O=1,D=2,I=-2,M=-3,P=-4,L=-5,F=8,R=1,N=2,G=3,U=4,z=5,H=6,V=7,K=8,j=9,Z=10,X=11,W=12,q=13,Y=14,Q=15,J=16,$=17,et=18,tt=19,nt=20,rt=21,ot=22,at=23,it=24,st=25,ut=26,lt=27,dt=28,ct=29,ft=30,ht=31,_t=32,pt=852,gt=592,mt=15,vt=mt,wt=!0;n.inflateReset=i,n.inflateReset2=s,n.inflateResetKeep=a,n.inflateInit=l,n.inflateInit2=u,n.inflate=f,n.inflateEnd=h,n.inflateGetHeader=_,n.inflateSetDictionary=p,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t,n){"use strict";var r=e("../utils/common"),o=15,a=852,i=592,s=0,u=1,l=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,_,p,g,m,v){var w,b,y,x,A,T,k,S,C,B=v.bits,E=0,O=0,D=0,I=0,M=0,P=0,L=0,F=0,R=0,N=0,G=null,U=0,z=new r.Buf16(o+1),H=new r.Buf16(o+1),V=null,K=0;for(E=0;o>=E;E++)z[E]=0;for(O=0;_>O;O++)z[t[n+O]]++;for(M=B,I=o;I>=1&&0===z[I];I--);if(M>I&&(M=I),0===I)return p[g++]=20971520,p[g++]=20971520,v.bits=1,0;for(D=1;I>D&&0===z[D];D++);for(D>M&&(M=D),F=1,E=1;o>=E;E++)if(F<<=1,F-=z[E],0>F)return-1;if(F>0&&(e===s||1!==I))return-1;for(H[1]=0,E=1;o>E;E++)H[E+1]=H[E]+z[E];for(O=0;_>O;O++)0!==t[n+O]&&(m[H[t[n+O]]++]=O);if(e===s?(G=V=m,T=19):e===u?(G=d,U-=257,V=c,K-=257,T=256):(G=f,V=h,T=-1),N=0,O=0,E=D,A=g,P=M,L=0,y=-1,R=1<<M,x=R-1,e===u&&R>a||e===l&&R>i)return 1;for(;;){k=E-L,m[O]<T?(S=0,C=m[O]):m[O]>T?(S=V[K+m[O]],C=G[U+m[O]]):(S=96,C=0),w=1<<E-L,b=1<<P,D=b;do b-=w,p[A+(N>>L)+b]=k<<24|S<<16|C|0;while(0!==b);for(w=1<<E-1;N&w;)w>>=1;if(0!==w?(N&=w-1,N+=w):N=0,O++,0===--z[E]){if(E===I)break;E=t[n+m[O]]}if(E>M&&(N&x)!==y){for(0===L&&(L=M),A+=D,P=E-L,F=1<<P;I>P+L&&(F-=z[P+L],!(0>=F));)P++,F<<=1;if(R+=1<<P,e===u&&R>a||e===l&&R>i)return 1;y=N&x,p[y]=M<<24|P<<16|A-g|0}}return 0!==N&&(p[A+N]=E-L<<24|64<<16|0),v.bits=M,0}},{"../utils/common":3}],13:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function i(e){return 256>e?ut[e]:ut[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,n){e.bi_valid>q-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>q-e.bi_valid,e.bi_valid+=n-q):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){u(e,n[2*t],n[2*t+1])}function d(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function c(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function f(e,t){var n,r,o,a,i,s,u=t.dyn_tree,l=t.max_code,d=t.stat_desc.static_tree,c=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,_=t.stat_desc.max_length,p=0;for(a=0;W>=a;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;X>n;n++)r=e.heap[n],a=u[2*u[2*r+1]+1]+1,a>_&&(a=_,p++),u[2*r+1]=a,r>l||(e.bl_count[a]++,i=0,r>=h&&(i=f[r-h]),s=u[2*r],e.opt_len+=s*(a+i),c&&(e.static_len+=s*(d[2*r+1]+i)));if(0!==p){do{for(a=_-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[_]--,p-=2}while(p>0);for(a=_;0!==a;a--)for(r=e.bl_count[a];0!==r;)o=e.heap[--n],o>l||(u[2*o+1]!==a&&(e.opt_len+=(a-u[2*o+1])*u[2*o],u[2*o+1]=a),r--)}}function h(e,t,n){var r,o,a=new Array(W+1),i=0;for(r=1;W>=r;r++)a[r]=i=i+n[r-1]<<1;for(o=0;t>=o;o++){var s=e[2*o+1];0!==s&&(e[2*o]=d(a[s]++,s))}}function _(){var e,t,n,r,a,i=new Array(W+1);for(n=0,r=0;H-1>r;r++)for(dt[r]=n,e=0;e<1<<tt[r];e++)lt[n++]=r;for(lt[n-1]=r,a=0,r=0;16>r;r++)for(ct[r]=a,e=0;e<1<<nt[r];e++)ut[a++]=r;for(a>>=7;j>r;r++)for(ct[r]=a<<7,e=0;e<1<<nt[r]-7;e++)ut[256+a++]=r;for(t=0;W>=t;t++)i[t]=0;for(e=0;143>=e;)it[2*e+1]=8,e++,i[8]++;for(;255>=e;)it[2*e+1]=9,e++,i[9]++;for(;279>=e;)it[2*e+1]=7,e++,i[7]++;for(;287>=e;)it[2*e+1]=8,e++,i[8]++;for(h(it,K+1,i),e=0;j>e;e++)st[2*e+1]=5,st[2*e]=d(e,5);ft=new o(it,tt,V+1,K,W),ht=new o(st,nt,0,j,W),_t=new o(new Array(0),rt,0,Z,Y)}function p(e){var t;for(t=0;K>t;t++)e.dyn_ltree[2*t]=0;for(t=0;j>t;t++)e.dyn_dtree[2*t]=0;for(t=0;Z>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Q]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,n,r){g(e),r&&(s(e,n),s(e,~n)),I.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function v(e,t,n,r){var o=2*t,a=2*n;return e[o]<e[a]||e[o]===e[a]&&r[t]<=r[n]}function w(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&v(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!v(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function b(e,t,n){var r,o,a,s,d=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],o=e.pending_buf[e.l_buf+d],d++,0===r?l(e,o,t):(a=lt[o],l(e,a+V+1,t),s=tt[a],0!==s&&(o-=dt[a],u(e,o,s)),r--,a=i(r),l(e,a,n),s=nt[a],0!==s&&(r-=ct[a],u(e,r,s)));while(d<e.last_lit);l(e,Q,t)}function y(e,t){var n,r,o,a=t.dyn_tree,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=X,n=0;u>n;n++)0!==a[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=2>l?++l:0,a[2*o]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=i[2*o+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)w(e,a,n);o=u;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],w(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*o]=a[2*n]+a[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=o,e.heap[1]=o++,w(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],f(e,t),h(a,l,e.bl_count)}function x(e,t,n){var r,o,a=-1,i=t[1],s=0,u=7,l=4;for(0===i&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;n>=r;r++)o=i,i=t[2*(r+1)+1],++s<u&&o===i||(l>s?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[2*J]++):10>=s?e.bl_tree[2*$]++:e.bl_tree[2*et]++,s=0,a=o,0===i?(u=138,l=3):o===i?(u=6,l=3):(u=7,l=4))}function A(e,t,n){var r,o,a=-1,i=t[1],s=0,d=7,c=4;for(0===i&&(d=138,c=3),r=0;n>=r;r++)if(o=i,i=t[2*(r+1)+1],!(++s<d&&o===i)){if(c>s){do l(e,o,e.bl_tree);while(0!==--s)}else 0!==o?(o!==a&&(l(e,o,e.bl_tree),s--),l(e,J,e.bl_tree),u(e,s-3,2)):10>=s?(l(e,$,e.bl_tree),u(e,s-3,3)):(l(e,et,e.bl_tree),u(e,s-11,7));s=0,a=o,0===i?(d=138,c=3):o===i?(d=6,c=3):(d=7,c=4)}}function T(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),y(e,e.bl_desc),t=Z-1;t>=3&&0===e.bl_tree[2*ot[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function k(e,t,n,r){var o;for(u(e,t-257,5),u(e,n-1,5),u(e,r-4,4),o=0;r>o;o++)u(e,e.bl_tree[2*ot[o]+1],3);A(e,e.dyn_ltree,t-1),A(e,e.dyn_dtree,n-1)}function S(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return P;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return L;for(t=32;V>t;t++)if(0!==e.dyn_ltree[2*t])return L;return P}function C(e){pt||(_(),pt=!0),e.l_desc=new a(e.dyn_ltree,ft),e.d_desc=new a(e.dyn_dtree,ht),e.bl_desc=new a(e.bl_tree,_t),e.bi_buf=0,e.bi_valid=0,p(e)}function B(e,t,n,r){u(e,(R<<1)+(r?1:0),3),m(e,t,n,!0)}function E(e){u(e,N<<1,3),l(e,Q,it),c(e)}function O(e,t,n,r){var o,a,i=0;e.level>0?(e.strm.data_type===F&&(e.strm.data_type=S(e)),y(e,e.l_desc),y(e,e.d_desc),i=T(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,o>=a&&(o=a)):o=a=n+5,o>=n+4&&-1!==t?B(e,t,n,r):e.strategy===M||a===o?(u(e,(N<<1)+(r?1:0),3),b(e,it,st)):(u(e,(G<<1)+(r?1:0),3),k(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),b(e,e.dyn_ltree,e.dyn_dtree)),p(e),r&&g(e)}function D(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(lt[n]+V+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1}var I=e("../utils/common"),M=4,P=0,L=1,F=2,R=0,N=1,G=2,U=3,z=258,H=29,V=256,K=V+1+H,j=30,Z=19,X=2*K+1,W=15,q=16,Y=7,Q=256,J=16,$=17,et=18,tt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ot=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],at=512,it=new Array(2*(K+2));r(it);var st=new Array(2*j);r(st);var ut=new Array(at);r(ut);var lt=new Array(z-U+1);r(lt);var dt=new Array(H);r(dt);var ct=new Array(j);r(ct);var ft,ht,_t,pt=!1;n._tr_init=C,n._tr_stored_block=B,n._tr_flush_block=O,n._tr_tally=D,n._tr_align=E},{"../utils/common":3}],15:[function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],"/":[function(e,t,n){"use strict";var r=e("./lib/utils/common").assign,o=e("./lib/deflate"),a=e("./lib/inflate"),i=e("./lib/zlib/constants"),s={};r(s,o,a,i),t.exports=s},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||l(),"undefined"!=typeof e&&e>=0&&1>=e){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var o=n._howls[r]._getSoundIds(),a=0;a<o.length;a++){var i=n._howls[r]._soundById(o[a]);i&&i._node&&(i._node.volume=i._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||l(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var o=n._howls[r]._getSoundIds(),a=0;a<o.length;a++){var i=n._howls[r]._soundById(o[a]);i&&i._node&&(i._node.muted=e?!0:i._muted)}return n},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&"undefined"!=typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var n=new Audio;"undefined"==typeof n.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0;try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch(r){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(r){return e}if(!n||"function"!=typeof n.canPlayType)return e;var o=n.canPlayType("audio/mpeg;").replace(/^no$/,""),a=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=a&&parseInt(a[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!o&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!n.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e
},_unlockAudio:function(){var e=this||t,n=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(e._navigator&&e._navigator.userAgent);if(!e._audioUnlocked&&e.ctx&&n){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(t){for(var n=0;n<e.html5PoolSize;n++){var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var a=e._howls[n]._getSoundIds(),i=0;i<a.length;i++){var s=e._howls[n]._soundById(a[i]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),"undefined"==typeof u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=(new Audio).play();return n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)&&n["catch"](function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!=typeof e.ctx.suspend&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var r=0;r<e._howls[n]._sounds.length;r++)if(!e._howls[n]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!=typeof e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,n=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};n.prototype={init:function(e){var n=this;return t.ctx||l(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"==typeof e.preload?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhrWithCredentials=e.xhrWithCredentials||!1,n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,"undefined"!=typeof t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n.load(),n},load:function(){var e=this,n=null;if(t.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var i,s;if(e._format&&e._format[o])i=e._format[o];else if(s=e._src[o],"string"!=typeof s){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=e._src[o];break}return n?(e._src=n,e._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new r(e),e._webAudio&&a(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,n){var r=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if("undefined"==typeof e&&(e="__default",!r._playLock)){for(var a=0,i=0;i<r._sounds.length;i++)r._sounds[i]._paused&&!r._sounds[i]._ended&&(a++,o=r._sounds[i]._id);1===a?e=null:o=null}}var s=o?r._soundById(o):r._inactiveSound();if(!s)return null;if(o&&!e&&(e=s._sprite||"__default"),"loaded"!==r._state){s._sprite=e,s._ended=!1;var u=s._id;return r._queue.push({event:"play",action:function(){r.play(u)}}),u}if(o&&!s._paused)return n||r._loadQueue("play"),s._id;r._webAudio&&t._autoResume();var l=Math.max(0,s._seek>0?s._seek:r._sprite[e][0]/1e3),d=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-l),c=1e3*d/Math.abs(s._rate),f=r._sprite[e][0]/1e3,h=(r._sprite[e][0]+r._sprite[e][1])/1e3,_=!(!s._loop&&!r._sprite[e][2]);s._sprite=e,s._ended=!1;var p=function(){s._paused=!1,s._seek=l,s._start=f,s._stop=h,s._loop=_};if(l>=h)return void r._ended(s);var g=s._node;if(r._webAudio){var m=function(){r._playLock=!1,p(),r._refreshBuffer(s);var e=s._muted||r._muted?0:s._volume;g.gain.setValueAtTime(e,t.ctx.currentTime),s._playStart=t.ctx.currentTime,"undefined"==typeof g.bufferSource.start?s._loop?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,l,d):s._loop?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,d),c!==1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),c)),n||setTimeout(function(){r._emit("play",s._id),r._loadQueue()},0)};"running"===t.state?m():(r._playLock=!0,r.once("resume",m),r._clearTimer(s._id))}else{var v=function(){g.currentTime=l,g.muted=s._muted||r._muted||t._muted||g.muted,g.volume=s._volume*t.volume(),g.playbackRate=s._rate;try{var o=g.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(r._playLock=!0,p(),o.then(function(){r._playLock=!1,g._unlocked=!0,n||(r._emit("play",s._id),r._loadQueue())})["catch"](function(){r._playLock=!1,r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):n||(r._playLock=!1,p(),r._emit("play",s._id),r._loadQueue()),g.playbackRate=s._rate,g.paused)return void r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),c):(r._endTimers[s._id]=function(){r._ended(s),g.removeEventListener("ended",r._endTimers[s._id],!1)},g.addEventListener("ended",r._endTimers[s._id],!1))}catch(a){r._emit("playerror",s._id,a)}},w=window&&window.ejecta||!g.readyState&&t._navigator.isCocoonJS;if(g.readyState>=3||w)v();else{r._playLock=!0;var b=function(){v(),g.removeEventListener(t._canPlayEvent,b,!1)};g.addEventListener(t._canPlayEvent,b,!1),r._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;"undefined"==typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var a=n._soundById(r[o]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(r[o]),a._node&&(n._webAudio?a._node.bufferSource&&("undefined"==typeof a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())),t||n._emit("stop",a._id))}return n},mute:function(e,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,n)}}),r;if("undefined"==typeof n){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var i=r._soundById(o[a]);i&&(i._muted=e,i._interval&&r._stopFade(i._id),r._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,t.ctx.currentTime):i._node&&(i._node.muted=t._muted?!0:e),r._emit("mute",i._id))}return r},volume:function(){var e,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&"undefined"==typeof o[1]){var a=r._getSoundIds(),i=a.indexOf(o[0]);i>=0?n=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),n=parseInt(o[1],10));var s;if(!("undefined"!=typeof e&&e>=0&&1>=e))return s=n?r._soundById(n):r._sounds[0],s?s._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;"undefined"==typeof n&&(r._volume=e),n=r._getSoundIds(n);for(var u=0;u<n.length;u++)s=r._soundById(n[u]),s&&(s._volume=e,o[2]||r._stopFade(n[u]),r._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(e,t.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=e*t.volume()),r._emit("volume",s._id));return r},fade:function(e,n,r,o){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,n,r,o)}}),a;e=parseFloat(e),n=parseFloat(n),r=parseFloat(r),a.volume(e,o);for(var i=a._getSoundIds(o),s=0;s<i.length;s++){var u=a._soundById(i[s]);if(u){if(o||a._stopFade(i[s]),a._webAudio&&!u._muted){var l=t.ctx.currentTime,d=l+r/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(n,d)}a._startFadeInterval(u,e,n,r,i[s],"undefined"==typeof o)}}return a},_startFadeInterval:function(e,t,n,r,o,a){var i=this,s=t,u=n-t,l=Math.abs(u/.01),d=Math.max(4,l>0?r/l:r),c=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var o=(Date.now()-c)/r;c=Date.now(),s+=u*o,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,i._webAudio?e._volume=s:i.volume(s,e._id,!0),a&&(i._volume=s),(t>n&&n>=s||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(n,e._id),i._emit("fade",e._id))},d)},_stopFade:function(e){var n=this,r=n._soundById(e);return r&&r._interval&&(n._webAudio&&r._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(r._interval),r._interval=null,n.volume(r._fadeTo,e),r._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return n=r._soundById(parseInt(o[0],10)),n?n._loop:!1;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var a=r._getSoundIds(t),i=0;i<a.length;i++)n=r._soundById(a[i]),n&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,n,r=this,o=arguments;if(0===o.length)n=r._sounds[0]._id;else if(1===o.length){var a=r._getSoundIds(),i=a.indexOf(o[0]);i>=0?n=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),n=parseInt(o[1],10));var s;if("number"!=typeof e)return s=r._soundById(n),s?s._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;"undefined"==typeof n&&(r._rate=e),n=r._getSoundIds(n);for(var u=0;u<n.length;u++)if(s=r._soundById(n[u])){r.playing(n[u])&&(s._rateSeek=r.seek(n[u]),s._playStart=r._webAudio?t.ctx.currentTime:s._playStart),s._rate=e,r._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):s._node&&(s._node.playbackRate=e);var l=r.seek(n[u]),d=(r._sprite[s._sprite][0]+r._sprite[s._sprite][1])/1e3-l,c=1e3*d/Math.abs(s._rate);(r._endTimers[n[u]]||!s._paused)&&(r._clearTimer(n[u]),r._endTimers[n[u]]=setTimeout(r._ended.bind(r,s),c)),r._emit("rate",s._id)}return r},seek:function(){var e,n,r=this,o=arguments;if(0===o.length)n=r._sounds[0]._id;else if(1===o.length){var a=r._getSoundIds(),i=a.indexOf(o[0]);i>=0?n=parseInt(o[0],10):r._sounds.length&&(n=r._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),n=parseInt(o[1],10));if("undefined"==typeof n)return r;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"seek",action:function(){r.seek.apply(r,o)}}),r;var s=r._soundById(n);if(s){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var u=r.playing(n)?t.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var d=r.playing(n);d&&r.pause(n,!0),s._seek=e,s._ended=!1,r._clearTimer(n),r._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var c=function(){r._emit("seek",n),d&&r.play(n,!0)};if(d&&!r._webAudio){var f=function(){r._playLock?setTimeout(f,0):c()};setTimeout(f,0)}else c()}return r},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return n?!n._paused:!1}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,r=0;r<n.length;r++){if(n[r]._paused||e.stop(n[r]._id),!e._webAudio){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(n[r]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(t._canPlayEvent,n[r]._loadFn,!1),t._releaseHtml5Audio(n[r]._node)}delete n[r]._node,e._clearTimer(n[r]._id)}var i=t._howls.indexOf(e);i>=0&&t._howls.splice(i,1);var s=!0;for(r=0;r<t._howls.length;r++)if(t._howls[r]._src===e._src||e._src.indexOf(t._howls[r]._src)>=0){s=!1;break}return o&&s&&delete o[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var o=this,a=o["_on"+e];return"function"==typeof t&&a.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),o},off:function(e,t,n){var r=this,o=r["_on"+e],a=0;if("number"==typeof t&&(n=t,t=null),t||n)for(a=0;a<o.length;a++){var i=n===o[a].id;if(t===o[a].fn&&i||!t&&i){o.splice(a,1);break}}else if(e)r["_on"+e]=[];else{var s=Object.keys(r);for(a=0;a<s.length;a++)0===s[a].indexOf("_on")&&Array.isArray(r[s[a]])&&(r[s[a]]=[])}return r},once:function(e,t,n){var r=this;return r.on(e,t,n,1),r},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],a=o.length-1;a>=0;a--)o[a].id&&o[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[a].fn),0),o[a].once&&r.off(e,o[a].fn,o[a].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var n=this,r=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var o=!(!e._loop&&!n._sprite[r][2]);if(n._emit("end",e._id),!n._webAudio&&o&&n.stop(e._id,!0).play(e._id),n._webAudio&&o){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),a)}return n._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),t._autoSuspend()),n._webAudio||o||n.stop(e._id,!0),n},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new r(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(t>=n)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var n=[],r=0;r<t._sounds.length;r++)n.push(t._sounds[r]._id);return n}return[e]},_refreshBuffer:function(e){var n=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=o[n._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),n},_cleanBuffer:function(e){var n=this,r=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=t._scratchBuffer}catch(o){}return e.bufferSource=null,n}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,r=t._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node="undefined"==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(r,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._node.src=n._src,e._node.preload="auto",e._node.volume=r*t.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)}};var o={},a=function(e){var t=e._src;if(o[t])return e._duration=o[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);s(r.buffer,e)}else{var l=new XMLHttpRequest;l.open("GET",t,!0),l.withCredentials=e._xhrWithCredentials,l.responseType="arraybuffer",l.onload=function(){var t=(l.status+"")[0];return"0"!==t&&"2"!==t&&"3"!==t?void e._emit("loaderror",null,"Failed loading audio file with status: "+l.status+"."):void s(l.response,e)},l.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},i(l)}},i=function(e){try{e.send()}catch(t){e.onerror()}},s=function(e,n){var r=function(){n._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&n._sounds.length>0?(o[n._src]=e,u(n,e)):r()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(a)["catch"](r):t.ctx.decodeAudioData(e,a,r)},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var n=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=r?parseInt(r[1],10):null;if(n&&o&&9>o){var a=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!a||t._navigator&&!t._navigator.standalone&&!a)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain="undefined"==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:1,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=n),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=r)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],"undefined"!=typeof r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,a){var i=this;if(!i.ctx||!i.ctx.listener)return i;var s=i._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,o="number"!=typeof o?s[4]:o,a="number"!=typeof a?s[5]:a,"number"!=typeof e?s:(i._orientation=[e,t,n,r,o,a],"undefined"!=typeof i.ctx.listener.forwardX?(i.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),i.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):i.ctx.listener.setOrientation(e,t,n,r,o,a),i)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!=typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var a=r._getSoundIds(n),i=0;i<a.length;i++){var s=r._soundById(a[i]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,o),"spatial"===o?"undefined"!=typeof s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,o){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(t,n,r,o)}}),a;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,"undefined"==typeof o){if("number"!=typeof t)return a._pos;a._pos=[t,n,r]}for(var i=a._getSoundIds(o),s=0;s<i.length;s++){var u=a._soundById(i[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&((!u._panner||u._panner.pan)&&e(u,"spatial"),"undefined"!=typeof u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),a._emit("pos",u._id)}}return a},Howl.prototype.orientation=function(t,n,r,o){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(t,n,r,o)}}),a;if(n="number"!=typeof n?a._orientation[1]:n,r="number"!=typeof r?a._orientation[2]:r,"undefined"==typeof o){if("number"!=typeof t)return a._orientation;a._orientation=[t,n,r]}for(var i=a._getSoundIds(o),s=0;s<i.length;s++){var u=a._soundById(i[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=a._pos||[0,0,-.5]),e(u,"spatial")),"undefined"!=typeof u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),a._emit("orientation",u._id)}}return a},Howl.prototype.pannerAttr=function(){var t,n,r,o=this,a=arguments;if(!o._webAudio)return o;if(0===a.length)return o._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return r=o._soundById(parseInt(a[0],10)),r?r._pannerAttr:o._pannerAttr;t=a[0],"undefined"==typeof n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:"undefined"!=typeof t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:"undefined"!=typeof t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:"undefined"!=typeof t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:"undefined"!=typeof t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:"undefined"!=typeof t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:"undefined"!=typeof t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:"undefined"!=typeof t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:"undefined"!=typeof t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===a.length&&(t=a[0],n=parseInt(a[1],10));for(var i=o._getSoundIds(n),s=0;s<i.length;s++)if(r=o._soundById(i[s])){var u=r._pannerAttr;u={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:u.maxDistance,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:u.refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,"undefined"!=typeof e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),"undefined"!=typeof e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}(),function(e,t,n){"use strict";"undefined"!=typeof window&&"function"==typeof define&&define.amd?define(n):"undefined"!=typeof module&&module.exports?module.exports=n():t.exports?t.exports=n():t[e]=n()
}("Fingerprint2",this,function(){"use strict";var e=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},t=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(e,t){return t%=64,32===t?[e[1],e[0]]:32>t?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},r=function(e,t){return t%=64,0===t?e:32>t?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},o=function(e,t){return[e[0]^t[0],e[1]^t[1]]},a=function(e){return e=o(e,[0,e[0]>>>1]),e=t(e,[4283543511,3981806797]),e=o(e,[0,e[0]>>>1]),e=t(e,[3301882366,444984403]),e=o(e,[0,e[0]>>>1])},i=function(i,s){i=i||"",s=s||0;for(var u=i.length%16,l=i.length-u,d=[0,s],c=[0,s],f=[0,0],h=[0,0],_=[2277735313,289559509],p=[1291169091,658871167],g=0;l>g;g+=16)f=[255&i.charCodeAt(g+4)|(255&i.charCodeAt(g+5))<<8|(255&i.charCodeAt(g+6))<<16|(255&i.charCodeAt(g+7))<<24,255&i.charCodeAt(g)|(255&i.charCodeAt(g+1))<<8|(255&i.charCodeAt(g+2))<<16|(255&i.charCodeAt(g+3))<<24],h=[255&i.charCodeAt(g+12)|(255&i.charCodeAt(g+13))<<8|(255&i.charCodeAt(g+14))<<16|(255&i.charCodeAt(g+15))<<24,255&i.charCodeAt(g+8)|(255&i.charCodeAt(g+9))<<8|(255&i.charCodeAt(g+10))<<16|(255&i.charCodeAt(g+11))<<24],f=t(f,_),f=n(f,31),f=t(f,p),d=o(d,f),d=n(d,27),d=e(d,c),d=e(t(d,[0,5]),[0,1390208809]),h=t(h,p),h=n(h,33),h=t(h,_),c=o(c,h),c=n(c,31),c=e(c,d),c=e(t(c,[0,5]),[0,944331445]);switch(f=[0,0],h=[0,0],u){case 15:h=o(h,r([0,i.charCodeAt(g+14)],48));case 14:h=o(h,r([0,i.charCodeAt(g+13)],40));case 13:h=o(h,r([0,i.charCodeAt(g+12)],32));case 12:h=o(h,r([0,i.charCodeAt(g+11)],24));case 11:h=o(h,r([0,i.charCodeAt(g+10)],16));case 10:h=o(h,r([0,i.charCodeAt(g+9)],8));case 9:h=o(h,[0,i.charCodeAt(g+8)]),h=t(h,p),h=n(h,33),h=t(h,_),c=o(c,h);case 8:f=o(f,r([0,i.charCodeAt(g+7)],56));case 7:f=o(f,r([0,i.charCodeAt(g+6)],48));case 6:f=o(f,r([0,i.charCodeAt(g+5)],40));case 5:f=o(f,r([0,i.charCodeAt(g+4)],32));case 4:f=o(f,r([0,i.charCodeAt(g+3)],24));case 3:f=o(f,r([0,i.charCodeAt(g+2)],16));case 2:f=o(f,r([0,i.charCodeAt(g+1)],8));case 1:f=o(f,[0,i.charCodeAt(g)]),f=t(f,_),f=n(f,31),f=t(f,p),d=o(d,f)}return d=o(d,[0,i.length]),c=o(c,[0,i.length]),d=e(d,c),c=e(c,d),d=a(d),c=a(c),d=e(d,c),c=e(c,d),("00000000"+(d[0]>>>0).toString(16)).slice(-8)+("00000000"+(d[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},s={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},u=function(e,t){if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t);else if(e.length===+e.length)for(var n=0,r=e.length;r>n;n++)t(e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t(e[o],o,e)},l=function(e,t){var n=[];return null==e?n:Array.prototype.map&&e.map===Array.prototype.map?e.map(t):(u(e,function(e,r,o){n.push(t(e,r,o))}),n)},d=function(e,t){if(null==t)return e;var n,r;for(r in t)n=t[r],null==n||Object.prototype.hasOwnProperty.call(e,r)||(e[r]=n);return e},c=function(e,t){return f()?void navigator.mediaDevices.enumerateDevices().then(function(t){e(t.map(function(e){return"id="+e.deviceId+";gid="+e.groupId+";"+e.kind+";"+e.label}))})["catch"](function(t){e(t)}):e(t.NOT_AVAILABLE)},f=function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices},h=function(e,t){var n=t.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return e(t.EXCLUDED);var r=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==r)return e(t.NOT_AVAILABLE);var o=new r(1,44100,44100),a=o.createOscillator();a.type="triangle",a.frequency.setValueAtTime(1e4,o.currentTime);var i=o.createDynamicsCompressor();u([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(e){void 0!==i[e[0]]&&"function"==typeof i[e[0]].setValueAtTime&&i[e[0]].setValueAtTime(e[1],o.currentTime)}),a.connect(i),i.connect(o.destination),a.start(0),o.startRendering();var s=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),o.oncomplete=function(){},o=null,e("audioTimeout")},n.timeout);o.oncomplete=function(t){var n;try{clearTimeout(s),n=t.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(e,t){return e+Math.abs(t)},0).toString(),a.disconnect(),i.disconnect()}catch(r){return void e(r)}e(n)}},_=function(e){e(navigator.userAgent)},p=function(e,t){e(null==navigator.webdriver?t.NOT_AVAILABLE:navigator.webdriver)},g=function(e,t){e(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||t.NOT_AVAILABLE)},m=function(e,t){e(window.screen.colorDepth||t.NOT_AVAILABLE)},v=function(e,t){e(navigator.deviceMemory||t.NOT_AVAILABLE)},w=function(e,t){e(window.devicePixelRatio||t.NOT_AVAILABLE)},b=function(e,t){e(y(t))},y=function(e){var t=[window.screen.width,window.screen.height];return e.screen.detectScreenOrientation&&t.sort().reverse(),t},x=function(e,t){e(A(t))},A=function(e){if(window.screen.availWidth&&window.screen.availHeight){var t=[window.screen.availHeight,window.screen.availWidth];return e.screen.detectScreenOrientation&&t.sort().reverse(),t}return e.NOT_AVAILABLE},T=function(e){e((new Date).getTimezoneOffset())},k=function(e,t){return window.Intl&&window.Intl.DateTimeFormat?void e((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):void e(t.NOT_AVAILABLE)},S=function(e,t){e(Y(t))},C=function(e,t){e(Q(t))},B=function(e,t){e(J(t))},E=function(e){e(!(!document.body||!document.body.addBehavior))},O=function(e){e(!!window.openDatabase)},D=function(e,t){e(et(t))},I=function(e,t){e(tt(t))},M=function(e,t){e(nt(t))},P=function(e,t){return ft()?void e(ot(t)):void e(t.NOT_AVAILABLE)},L=function(e,t){return ht()?void e(at()):void e(t.NOT_AVAILABLE)},F=function(e){return ht()?void e(it()):void e()},R=function(e){e(st())},N=function(e){e(ut())},G=function(e){e(lt())},U=function(e){e(dt())},z=function(e){e(ct())},H=function(e,t){return pt()?gt()?t.fonts.swfPath?void vt(function(t){e(t)},t):e("missing options.fonts.swfPath"):e("flash not installed"):e("swf object not loaded")},V=function(e,t){var n=["monospace","sans-serif","serif"],r=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];if(t.fonts.extendedJsFonts){var o=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];r=r.concat(o)}r=r.concat(t.fonts.userDefinedFonts),r=r.filter(function(e,t){return r.indexOf(e)===t});var a="mmmmmmmmmmlli",i="72px",s=document.getElementsByTagName("body")[0],u=document.createElement("div"),l=document.createElement("div"),d={},c={},f=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=i,e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML=a,e},h=function(e,t){var n=f();return n.style.fontFamily="'"+e+"',"+t,n},_=function(){for(var e=[],t=0,r=n.length;r>t;t++){var o=f();o.style.fontFamily=n[t],u.appendChild(o),e.push(o)}return e},p=function(){for(var e={},t=0,o=r.length;o>t;t++){for(var a=[],i=0,s=n.length;s>i;i++){var u=h(r[t],n[i]);l.appendChild(u),a.push(u)}e[r[t]]=a}return e},g=function(e){for(var t=!1,r=0;r<n.length;r++)if(t=e[r].offsetWidth!==d[n[r]]||e[r].offsetHeight!==c[n[r]])return t;return t},m=_();s.appendChild(u);for(var v=0,w=n.length;w>v;v++)d[n[v]]=m[v].offsetWidth,c[n[v]]=m[v].offsetHeight;var b=p();s.appendChild(l);for(var y=[],x=0,A=r.length;A>x;x++)g(b[r[x]])&&y.push(r[x]);s.removeChild(l),s.removeChild(u),e(y)},K=function(e,t){e(_t()?t.plugins.excludeIE?t.EXCLUDED:Z(t):j(t))},j=function(e){if(null==navigator.plugins)return e.NOT_AVAILABLE;for(var t=[],n=0,r=navigator.plugins.length;r>n;n++)navigator.plugins[n]&&t.push(navigator.plugins[n]);return X(e)&&(t=t.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),l(t,function(e){var t=l(e,function(e){return[e.type,e.suffixes]});return[e.name,e.description,t]})},Z=function(e){var t=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var n=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];t=l(n,function(t){try{return new window.ActiveXObject(t),t}catch(n){return e.ERROR}})}else t.push(e.NOT_AVAILABLE);return navigator.plugins&&(t=t.concat(j(e))),t},X=function(e){for(var t=!1,n=0,r=e.plugins.sortPluginsFor.length;r>n;n++){var o=e.plugins.sortPluginsFor[n];if(navigator.userAgent.match(o)){t=!0;break}}return t},W=function(e){e(rt())},q=function(e,t){e($(t))},Y=function(e){try{return!!window.sessionStorage}catch(t){return e.ERROR}},Q=function(e){try{return!!window.localStorage}catch(t){return e.ERROR}},J=function(e){try{return!!window.indexedDB}catch(t){return e.ERROR}},$=function(e){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:e.NOT_AVAILABLE},et=function(e){return navigator.cpuClass||e.NOT_AVAILABLE},tt=function(e){return navigator.platform?navigator.platform:e.NOT_AVAILABLE},nt=function(e){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:e.NOT_AVAILABLE},rt=function(){var e,t=0;"undefined"!=typeof navigator.maxTouchPoints?t=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(n){e=!1}var r="ontouchstart"in window;return[t,e,r]},ot=function(e){var t=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var r=n.getContext("2d");return r.rect(0,0,10,10),r.rect(2,2,6,6),t.push("canvas winding:"+(r.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),r.textBaseline="alphabetic",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",e.dontUseFakeFontInCanvas?r.font="11pt Arial":r.font="11pt no-real-font-123",r.fillText("Cwm fjordbank glyphs vext quiz, ",2,15),r.fillStyle="rgba(102, 204, 0, 0.2)",r.font="18pt Arial",r.fillText("Cwm fjordbank glyphs vext quiz, ",4,45),r.globalCompositeOperation="multiply",r.fillStyle="rgb(255,0,255)",r.beginPath(),r.arc(50,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(0,255,255)",r.beginPath(),r.arc(100,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,255,0)",r.beginPath(),r.arc(75,100,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,0,255)",r.arc(75,75,75,0,2*Math.PI,!0),r.arc(75,75,25,0,2*Math.PI,!0),r.fill("evenodd"),n.toDataURL&&t.push("canvas fp:"+n.toDataURL()),t},at=function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"},n=function(e){var t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");if(t){var n=e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null};if(e=wt(),!e)return null;var r=[],o="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",a="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);var s=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),i.itemSize=3,i.numItems=3;var l=e.createProgram(),d=e.createShader(e.VERTEX_SHADER);e.shaderSource(d,o),e.compileShader(d);var c=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(c,a),e.compileShader(c),e.attachShader(l,d),e.attachShader(l,c),e.linkProgram(l),e.useProgram(l),l.vertexPosAttrib=e.getAttribLocation(l,"attrVertex"),l.offsetUniform=e.getUniformLocation(l,"uniformOffset"),e.enableVertexAttribArray(l.vertexPosArray),e.vertexAttribPointer(l.vertexPosAttrib,i.itemSize,e.FLOAT,!1,0,0),e.uniform2f(l.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,i.numItems);try{r.push(e.canvas.toDataURL())}catch(f){}r.push("extensions:"+(e.getSupportedExtensions()||[]).join(";")),r.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),r.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),r.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),r.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),r.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),r.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),r.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),r.push("webgl max anisotropy:"+n(e)),r.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),r.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),r.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),r.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),r.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),r.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),r.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),r.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),r.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),r.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),r.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),r.push("webgl red bits:"+e.getParameter(e.RED_BITS)),r.push("webgl renderer:"+e.getParameter(e.RENDERER)),r.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),r.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),r.push("webgl vendor:"+e.getParameter(e.VENDOR)),r.push("webgl version:"+e.getParameter(e.VERSION));try{var h=e.getExtension("WEBGL_debug_renderer_info");h&&(r.push("webgl unmasked vendor:"+e.getParameter(h.UNMASKED_VENDOR_WEBGL)),r.push("webgl unmasked renderer:"+e.getParameter(h.UNMASKED_RENDERER_WEBGL)))}catch(f){}return e.getShaderPrecisionFormat?(u(["FLOAT","INT"],function(t){u(["VERTEX","FRAGMENT"],function(n){u(["HIGH","MEDIUM","LOW"],function(o){u(["precision","rangeMin","rangeMax"],function(a){var i=e.getShaderPrecisionFormat(e[n+"_SHADER"],e[o+"_"+t])[a];"precision"!==a&&(a="precision "+a);var s=["webgl ",n.toLowerCase()," shader ",o.toLowerCase()," ",t.toLowerCase()," ",a,":",i].join("");r.push(s)})})})}),r):r},it=function(){try{var e=wt(),t=e.getExtension("WEBGL_debug_renderer_info");return e.getParameter(t.UNMASKED_VENDOR_WEBGL)+"~"+e.getParameter(t.UNMASKED_RENDERER_WEBGL)}catch(n){return null}},st=function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(n){t=!1}return t},ut=function(){if("undefined"!=typeof navigator.languages)try{var e=navigator.languages[0].substr(0,2);if(e!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},lt=function(){return window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight},dt=function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.oscpu,r=navigator.platform.toLowerCase();e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0||t.indexOf("cros")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other";var o="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;if(o&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if("undefined"!=typeof n){if(n=n.toLowerCase(),n.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(n.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(n.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===e))return!0}if(r.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if((r.indexOf("linux")>=0||r.indexOf("android")>=0||r.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e)return!0;if((r.indexOf("mac")>=0||r.indexOf("ipad")>=0||r.indexOf("ipod")>=0||r.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e)return!0;var a=r.indexOf("win")<0&&r.indexOf("linux")<0&&r.indexOf("mac")<0&&r.indexOf("iphone")<0&&r.indexOf("ipad")<0;return a!==("Other"===e)?!0:"undefined"==typeof navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e},ct=function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other",("Chrome"===e||"Safari"===e||"Opera"===e)&&"20030107"!==n)return!0;var r=eval.toString().length;if(37===r&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===r&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===r&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;var o;try{throw"a"}catch(a){try{a.toSource(),o=!0}catch(i){o=!1}}return o&&"Firefox"!==e&&"Other"!==e},ft=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},ht=function(){if(!ft())return!1;var e=wt();return!!window.WebGLRenderingContext&&!!e},_t=function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},pt=function(){return"undefined"!=typeof window.swfobject},gt=function(){return window.swfobject.hasFlashPlayerVersion("9.0.0")},mt=function(e){var t=document.createElement("div");t.setAttribute("id",e.fonts.swfContainerId),document.body.appendChild(t)},vt=function(e,t){var n="___fp_swf_loaded";window[n]=function(t){e(t)};var r=t.fonts.swfContainerId;mt();var o={onReady:n},a={allowScriptAccess:"always",menu:"false"};window.swfobject.embedSWF(t.fonts.swfPath,r,"1","1","9.0.0",!1,o,a,{})},wt=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(n){}return t||(t=null),t},bt=[{key:"userAgent",getData:_},{key:"webdriver",getData:p},{key:"language",getData:g},{key:"colorDepth",getData:m},{key:"deviceMemory",getData:v},{key:"pixelRatio",getData:w},{key:"hardwareConcurrency",getData:q},{key:"screenResolution",getData:b},{key:"availableScreenResolution",getData:x},{key:"timezoneOffset",getData:T},{key:"timezone",getData:k},{key:"sessionStorage",getData:S},{key:"localStorage",getData:C},{key:"indexedDb",getData:B},{key:"addBehavior",getData:E},{key:"openDatabase",getData:O},{key:"cpuClass",getData:D},{key:"platform",getData:I},{key:"doNotTrack",getData:M},{key:"plugins",getData:K},{key:"canvas",getData:P},{key:"webgl",getData:L},{key:"webglVendorAndRenderer",getData:F},{key:"adBlock",getData:R},{key:"hasLiedLanguages",getData:N},{key:"hasLiedResolution",getData:G},{key:"hasLiedOs",getData:U},{key:"hasLiedBrowser",getData:z},{key:"touchSupport",getData:W},{key:"fonts",getData:V,pauseBefore:!0},{key:"fontsFlash",getData:H,pauseBefore:!0},{key:"audio",getData:h},{key:"enumerateDevices",getData:c}],yt=function(e){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return yt.get=function(e,t){t?e||(e={}):(t=e,e={}),d(e,s),e.components=e.extraComponents.concat(bt);var n={data:[],addPreprocessedComponent:function(t,r){"function"==typeof e.preprocessor&&(r=e.preprocessor(t,r)),n.data.push({key:t,value:r})}},r=-1,o=function(a){if(r+=1,r>=e.components.length)return void t(n.data);var i=e.components[r];if(e.excludes[i.key])return void o(!1);if(!a&&i.pauseBefore)return r-=1,void setTimeout(function(){o(!0)},1);try{i.getData(function(e){n.addPreprocessedComponent(i.key,e),o(!1)},e)}catch(s){n.addPreprocessedComponent(i.key,String(s)),o(!1)}};o(!1)},yt.getPromise=function(e){return new Promise(function(t,n){yt.get(e,t)})},yt.getV18=function(e,t){return null==t&&(t=e,e={}),yt.get(e,function(n){for(var r=[],o=0;o<n.length;o++){var a=n[o];if(a.value===(e.NOT_AVAILABLE||"not available"))r.push({key:a.key,value:"unknown"});else if("plugins"===a.key)r.push({key:"plugins",value:l(a.value,function(e){var t=l(e[2],function(e){return e.join?e.join("~"):e}).join(",");return[e[0],e[1],t].join("::")})});else if(-1!==["canvas","webgl"].indexOf(a.key))r.push({key:a.key,value:a.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(a.key)){if(!a.value)continue;r.push({key:a.key,value:1})}else a.value?r.push(a.value.join?{key:a.key,value:a.value.join(";")}:a):r.push({key:a.key,value:a.value})}var s=i(l(r,function(e){return e.value}).join("~~~"),31);t(s,r)})},yt.x64hash128=i,yt.VERSION="2.0.6",yt}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function t(e,n,r){function o(i,s){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[i]={exports:{}};e[i][0].call(d.exports,function(t){var n=e[i][1][t];return o(n||t)},d,d.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){function r(e,t){for(;e&&e.nodeType!==o;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var o=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}t.exports=r},{}],2:[function(e,t,n){function r(e,t,n,r,a){var i=o.apply(this,arguments);return e.addEventListener(n,i,a),{destroy:function(){e.removeEventListener(n,i,a)}}}function o(e,t,n,r){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&r.call(e,n)}}var a=e("./closest");t.exports=r},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return o(e,t,n);if(s.nodeList(e))return a(e,t,n);if(s.string(e))return i(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)
}}}function a(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function i(e,t,n){return u(document.body,e,t,n)}var s=e("./is"),u=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}t.exports=r},{}],6:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;o>r;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var a=0,i=r.length;i>a;a++)r[a].fn!==t&&r[a].fn._!==t&&o.push(r[a]);return o.length?n[e]=o:delete n[e],this}},t.exports=r},{}],7:[function(t,n,r){!function(o,a){if("function"==typeof e&&e.amd)e(["module","select"],a);else if(void 0!==r)a(n,t("select"));else{var i={exports:{}};a(i,o.select),o.clipboardAction=i.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(t),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},{select:5}],8:[function(t,n,r){!function(o,a){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],a);else if(void 0!==r)a(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var i={exports:{}};a(i,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=i.exports}}(this,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n="data-clipboard-"+e;return t.hasAttribute(n)?t.getAttribute(n):void 0}var l=o(t),d=o(n),c=o(r),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(e){function t(e,n){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return s(t,e),h(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,c["default"])(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l["default"]({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);return t?document.querySelector(t):void 0}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(d["default"]);e.exports=_})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,o=new ArrayBuffer(r),a=new Uint8Array(o),i=0;r>i;i++)a[i]=n.charCodeAt(i);return o}function r(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){(200==this.status||0===this.status)&&t(this.response)},n.send()}function o(e,n){function o(t){var r=a(t),o=i(t);e.exifdata=r||{},e.iptcdata=o||{},n&&n.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var s=t(e.src);o(s)}else if(/^blob\:/i.test(e.src)){var u=new FileReader;u.onload=function(e){o(e.target.result)},r(e.src,function(e){u.readAsArrayBuffer(e)})}else{var l=new XMLHttpRequest;l.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";o(l.response),l=null},l.open("GET",e.src,!0),l.responseType="arraybuffer",l.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var u=new FileReader;u.onload=function(e){f&&console.log("Got file of length "+e.target.result.byteLength),o(e.target.result)},u.readAsArrayBuffer(e)}}function a(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n,r=2,o=e.byteLength;o>r;){if(255!=t.getUint8(r))return f&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),f&&console.log(n),225==n)return f&&console.log("Found 0xFFE1 marker"),c(t,r+4,t.getUint16(r+2)-2);r+=2+t.getUint16(r+2)}}function i(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n=2,r=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};r>n;){if(o(t,n)){var a=t.getUint8(n+7);a%2!==0&&(a+=1),0===a&&(a=4);var i=n+8+a,u=t.getUint16(n+6+a);return s(e,i,u)}n++}}function s(e,t,n){for(var r,o,a,i,s,u=new DataView(e),l={},c=t;t+n>c;)28===u.getUint8(c)&&2===u.getUint8(c+1)&&(i=u.getUint8(c+2),i in w&&(a=u.getInt16(c+3),s=a+5,o=w[i],r=d(u,c+5,a),l.hasOwnProperty(o)?l[o]instanceof Array?l[o].push(r):l[o]=[l[o],r]:l[o]=r)),c++;return l}function u(e,t,n,r,o){var a,i,s,u=e.getUint16(n,!o),d={};for(s=0;u>s;s++)a=n+12*s+2,i=r[e.getUint16(a,!o)],!i&&f&&console.log("Unknown tag: "+e.getUint16(a,!o)),d[i]=l(e,a,t,n,o);return d}function l(e,t,n,r,o){var a,i,s,u,l,c,f=e.getUint16(t+2,!o),h=e.getUint32(t+4,!o),_=e.getUint32(t+8,!o)+n;switch(f){case 1:case 7:if(1==h)return e.getUint8(t+8,!o);for(a=h>4?_:t+8,i=[],u=0;h>u;u++)i[u]=e.getUint8(a+u);return i;case 2:return a=h>4?_:t+8,d(e,a,h-1);case 3:if(1==h)return e.getUint16(t+8,!o);for(a=h>2?_:t+8,i=[],u=0;h>u;u++)i[u]=e.getUint16(a+2*u,!o);return i;case 4:if(1==h)return e.getUint32(t+8,!o);for(i=[],u=0;h>u;u++)i[u]=e.getUint32(_+4*u,!o);return i;case 5:if(1==h)return l=e.getUint32(_,!o),c=e.getUint32(_+4,!o),s=new Number(l/c),s.numerator=l,s.denominator=c,s;for(i=[],u=0;h>u;u++)l=e.getUint32(_+8*u,!o),c=e.getUint32(_+4+8*u,!o),i[u]=new Number(l/c),i[u].numerator=l,i[u].denominator=c;return i;case 9:if(1==h)return e.getInt32(t+8,!o);for(i=[],u=0;h>u;u++)i[u]=e.getInt32(_+4*u,!o);return i;case 10:if(1==h)return e.getInt32(_,!o)/e.getInt32(_+4,!o);for(i=[],u=0;h>u;u++)i[u]=e.getInt32(_+8*u,!o)/e.getInt32(_+4+8*u,!o);return i}}function d(e,t,r){var o="";for(n=t;n<t+r;n++)o+=String.fromCharCode(e.getUint8(n));return o}function c(e,t){if("Exif"!=d(e,t,4))return f&&console.log("Not valid EXIF data! "+d(e,t,4)),!1;var n,r,o,a,i,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return f&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return f&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(8>l)return f&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if(r=u(e,s,s+l,g,n),r.ExifIFDPointer){a=u(e,s,s+r.ExifIFDPointer,p,n);for(o in a){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[o]=v[o][a[o]];break;case"ExifVersion":case"FlashpixVersion":a[o]=String.fromCharCode(a[o][0],a[o][1],a[o][2],a[o][3]);break;case"ComponentsConfiguration":a[o]=v.Components[a[o][0]]+v.Components[a[o][1]]+v.Components[a[o][2]]+v.Components[a[o][3]]}r[o]=a[o]}}if(r.GPSInfoIFDPointer){i=u(e,s,s+r.GPSInfoIFDPointer,m,n);for(o in i){switch(o){case"GPSVersionID":i[o]=i[o][0]+"."+i[o][1]+"."+i[o][2]+"."+i[o][3]}r[o]=i[o]}}return r}var f=!1,h=this,_=function(e){return e instanceof _?e:this instanceof _?void(this.EXIFwrapped=e):new _(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports.EXIF=_):h.EXIF=_;var p=_.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g=_.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},m=_.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},v=_.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},w={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};_.getData=function(t,n){return(t instanceof Image||t instanceof HTMLImageElement)&&!t.complete?!1:(e(t)?n&&n.call(t):o(t,n),!0)},_.getTag=function(t,n){return e(t)?t.exifdata[n]:void 0},_.getAllTags=function(t){if(!e(t))return{};var n,r=t.exifdata,o={};for(n in r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o},_.pretty=function(t){if(!e(t))return"";var n,r=t.exifdata,o="";for(n in r)r.hasOwnProperty(n)&&(o+="object"==typeof r[n]?r[n]instanceof Number?n+" : "+r[n]+" ["+r[n].numerator+"/"+r[n].denominator+"]\r\n":n+" : ["+r[n].length+" values]\r\n":n+" : "+r[n]+"\r\n");return o},_.readFromBinaryFile=function(e){return a(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return _})}.call(this);

//js/XYTools.min_fc525fc5.js
function profile(){var t="";for(var e in BaseComponent.profileLog)0!=BaseComponent.profileLog[e]&&(t=e+":"+BaseComponent.profileLog[e]+"\n");trace(t)}function i18n(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)return t;var i=I18N.getInstance("lib");return i.toString.apply(i,arguments)}function i18nEUI(t,e,n){void 0===n&&(n=[]);for(var i in e){var r=e[i];if(stringEndWith_XY(i,"_i18n")||-1!=n.indexOf(r))if(egret.is(r,"keyboard.PlaceholdLabel")){var o=r;o.text=I18N.getInstance(t).toString(o.text),o.setPlaceHoldText(o.text)}else r.a_label?r.a_label=I18N.getInstance(t).toString(r.a_label):egret.is(r,"egret.TextField")&&(r.text=I18N.getInstance(t).toString(r.text))}}function __XYExternalInterface__CALL(t,e){void 0===e&&(e=""),trace("apph5:"+t+", "+e);var n=XYExternalInterface.callBackDic[t];null!=n?n(e):trace(t+" ,!")}function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.splice(0,0,Global.isInGame?"[]":"[]"),console.log.apply(console,t)}function warn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.splice(0,0,Global.isInGame?"[]":"[]"),console.warn.apply(console,t)}function error(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.splice(0,0,Global.isInGame?"[]":"[]"),console.error.apply(console,t)}function maskNick_XY(t,e,n,i){if(void 0===e&&(e=0/0),void 0===n&&(n=!1),void 0===i&&(i=!1),!Global.isFrom3rd||Global.uid==e)return t;if(n)return t;var r=Math.max(0,t.length-4);return t.length<=4&&(r=Math.floor(t.length/2)),copyChar_XY("*",r)+t.substr(r)}function copyGameShareText_XY(t,e,n,i){void 0===i&&(i=!1);var r=ShareTools.canShowShareBtn();if(r&&!i)return void ShareMenu.getInstance().show(t,e,n);var o=ShareTools.buildShareData(t,e,n),a=(o.info,o.url,o.all);copyTextToClipboard_XY(a,function(){Toast.show(i18n(""))},function(){Toast.show(i18n(""))})}function openWindow_XY(t){__helpLink||(__helpLink=document.createElement("a"),document.body.appendChild(__helpLink),__helpLink.style.zIndex="-999",__helpLink.style.position="absolute",__helpLink.style.top=__helpLink.style.left="0px"),__helpLink.href=t,__helpLink.target="_blank",__helpLink.click()}function copyTextToClipboard_XY(t,e,n){return Global.isNative&&Global.platform?void Global.platform.copyText(t,e,n):void copyTextToClipboard_XY_For_platform(t,e,n)}function copyTextToClipboard_XY_For_platform(t,e,n){if(!__clipboard){var i=document.createElement("div");i.style.zIndex="-999",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.cursor="pointer",i.id="clipboardHelper",i.className="clipboardHelper",document.body.appendChild(i),__clipboard=new Clipboard(".clipboardHelper",{text:function(){return __copyTextSource}}),__clipboard.on("success",function(t){__copyCompleteCall&&__copyCompleteCall(),__copyCompleteCall=null,__copyFailedcall=null}),__clipboard.on("error",function(t){__copyFailedcall&&__copyFailedcall(),__copyCompleteCall=null,__copyFailedcall=null})}__copyTextSource=t,__copyCompleteCall=e,__copyFailedcall=n,document.getElementById("clipboardHelper").click()}function showHttpErrorMsg(t,e){void 0===e&&(e=""),""==e&&(e=i18n(""));var n;t&&(n=format_XY2(i18n(t.m),t.a)),null==n&&(n=e),n+="",Toast.show(n)}function smartFlipLayout_XY(){egret.Capabilities.isMobile?(window.initOrient&&window.initOrient(),Global.stage.orientation=egret.OrientationMode.PORTRAIT,addResizeHandler_XY(__resizeLayoutHandler,this),__resizeLayoutHandler()):(Global.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,Global.stage.orientation=egret.OrientationMode.AUTO)}function __resizeLayoutHandler(){var t=document.documentElement.clientWidth||document.body.clientWidth,e=document.documentElement.clientHeight||document.body.clientHeight;e/t*__designConfig.designW;e/t<__designConfig.minH/__designConfig.designW?Global.stage.scaleMode=egret.StageScaleMode.SHOW_ALL:Global.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH}function setScollerBarAlwaysShow_XY(t,e){t.verticalScrollBar&&(t.verticalScrollBar.autoVisibility=e?!1:!0,t.verticalScrollBar.visible=e),t.horizontalScrollBar&&(t.horizontalScrollBar.autoVisibility=e?!1:!0,t.horizontalScrollBar.visible=e)}function clearDragonDb_XY(t){t&&(t.animation.stop(),dragonBones.WorldClock.clock.remove(t),remove_XY(t.display))}function strEndWith_XY(t,e){return null==e?!1:t.substring(t.length-e.length)==e?!0:!1}function strStartWith_XY(t,e){return null==e?!1:t.substr(0,e.length)==e?!0:!1}function setImageUrl(t,e){t.visible=!1,RES.getResByUrl(e,function(e,n){t.source=e,t.visible=!0},this,RES.ResourceItem.TYPE_IMAGE)}function tween_XY_hand(t,e,n){isNaN(e)&&(t.__bornX||(t.__bornX=t.x,t.__bornY=t.y),e=t.__bornX,n=t.__bornY),t.x=e,t.y=n,egret.Tween.get(t,{loop:!0}).to({x:e+15,y:n+25},500).to({x:e,y:n},300)}function tween_XY_up(t,e,n){isNaN(e)&&(t.__bornX||(t.__bornX=t.x,t.__bornY=t.y),e=t.__bornX,n=t.__bornY),t.x=e,t.y=n,egret.Tween.get(t,{loop:!0}).to({y:n-25},1e3).to({y:n},600)}function tween_XY_alphaShow(t,e){void 0===e&&(e=300),t.alpha=0,Tween$.get(t).to({alpha:1},e)}function tween_XY_alphaHide(t,e){void 0===e&&(e=!1),t.alpha=1,Tween$.get(t).to({alpha:0},300).call(function(t,e){e&&(t.alpha=1,remove_XY(t))},this,[t,e])}function toAvatarSource_XY(t){if(!t||""==t)return"tAvatar0_png";var e=t+"";return"/"==e.substr(0,1)?Global.avatarURI+e:"tAvatar"+t+"_png"}function maskPhoneText_XY(t){var e=t.substr(0,3),n=t.substr(9,2);return e+"******"+n}function callPhone_XY(t){var e=$("telCallHelper");e.href="tel:"+t,e.click()}function sendEmail_XY(t){var e=$("telCallHelper");e.href="mailto:"+t,e.click()}function smartTextFieldH(t,e){t.width=750,t.text=e+"",t.width=t.textWidth}function smartTextFieldV(t,e){t.height=750,t.text=e+"",t.height=t.textHeight}function setAtoBRight(t,e,n){void 0===n&&(n=0),t.x=e.x-e.anchorOffsetX+e.width+n}function setAtoBBottom(t,e,n){void 0===n&&(n=0),t.y=e.y-e.anchorOffsetY+e.height+n}function tween_XY_maskShow(t,e,n,i,r){if(void 0===n&&(n=700),void 0===i&&(i=null),void 0===r&&(r=null),__helpMaskRect=__helpMaskRect||new egret.Shape,t.parent&&!t.mask){Tween$.removeTweens(__helpMaskRect),__helpMaskRect.graphics.clear(),__helpMaskRect.graphics.beginFill(16711680),__helpMaskRect.graphics.drawRect(0,0,t.width,t.height),__helpMaskRect.graphics.endFill(),__helpMaskRect.anchorOffsetX=t.anchorOffsetX,__helpMaskRect.anchorOffsetY=t.anchorOffsetY,__helpMaskRect.x=t.x,__helpMaskRect.y=t.y,t.parent.addChild(__helpMaskRect),t.mask=__helpMaskRect;var o=t.x,a=t.y,s=t.x,l=t.y;switch(e){case 0:a+=t.height;break;case 1:a-=t.height;break;case 2:o+=t.width;break;default:o-=t.width}__helpMaskRect.x=o,__helpMaskRect.y=a,Tween$.get(__helpMaskRect).to({x:s,y:l},n).call(function(){remove_XY(__helpMaskRect),t.mask=null,i&&i.apply(r)},this)}}function playEnterText_XY(t,e,n,i,r){void 0===n&&(n=40),void 0===i&&(i=null),void 0===r&&(r=null);var o=0;t.text="";var a=egret.setInterval(function(){o++,t.text=e.substr(0,o),o>=e.length&&(egret.clearInterval(a),i&&i.apply(r))},this,n)}function exec(t,e){if(!t)return t;if(window.execScript&&!e)window.execScript(t);else{var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.text=t,document.body.appendChild(n),document.body.removeChild(n)}return t}function copyPropertie_XY(t,e){for(var n in e)t[n]=e[n]}function loadJs_XY(t){var e=document.createElement("script");e.src=t,document.body.appendChild(e)}function loadCss_XY(t){var e=document.createElement("link");return e.href=t,e.rel="stylesheet",e.type="text/css",e.charset="utf-8",e.id="css_"+randomInt_XY(99999,9999999),document.body.appendChild(e),e}function newBitmap_XY(t){return new egret.Bitmap(t?RES.getRes(t):null)}function newImage_XY(t){return new eui.Image(t?RES.getRes(t):null)}function downloadFile_XY(t,e){var n=function(t){for(var e=t.split(";base64,"),n=e[0].split(":")[1],i=window.atob(e[1]),r=i.length,o=new Uint8Array(r),a=0;r>a;++a)o[a]=i.charCodeAt(a);return new Blob([o],{type:n})},i=document.createElement("a"),r=n(t),o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!0),i.download=e,i.href=URL.createObjectURL(r),i.click()}function getEgretInputBottomPercent_XY(){var t=document.getElementById("StageDelegateDiv"),e=t.getElementsByTagName("div")[0],n=t.style.transform+"";n=n.replace("matrix(","").replace(")","");var i=parseFloat(e.style.top)+parseFloat(e.style.height),r=parseFloat(n.split(" ")[0]);return isNaN(r)&&(r=1),i*=r,isNaN(i)?.5:(document.body.clientHeight-i)/document.body.clientHeight}function placeholder_XY(t,e,n,i){t.__rsColor=i,t.__defaultText=n,t.textColor=e,t.text=n,t.__onceFunction=function(t){var e=t.currentTarget;clearPlaceHold_XY(e)},t.addEventListener(egret.Event.FOCUS_IN,t.__onceFunction,t),bindTapEvent_XY(t,t.__onceFunction,t)}function clearPlaceHold_XY(t){t.text="",t.textColor=t.__rsColor,t.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.__onceFunction,t),t.removeEventListener(egret.Event.FOCUS_IN,t.__onceFunction,t),t.__onceFunction=null}function getPlaceHoldTextfiledValue_XY(t){var e=t.text;return e==t.__defaultText?"":e.trim()}function verifyPhone_XY(t){return/^1[1|2|3|4|5|6|7|8|9]\d{9}$/.test(t)}function verifyEmail_XY(t){var e=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return e.test(t)}function verifyIdCard_XY(t){var e=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return e.test(t)}function verifyOnlyChinese_XY(t){var e=/^[(\u4e00-\u9fa5)]+$/;return e.test(t)}function verifyOnlyCharOrNumber_XY(t){for(var e=0;e<t.length;e++){var n=t.charAt(e);if(!(n>="0"&&"9">=n||n>="a"&&"z">=n||n>="A"&&"Z">=n))return!1}return!0}function verifyOnlyNumber_XY(t){for(var e=0;e<t.length;e++){var n=t.charAt(e);if(!(n>="0"&&"9">=n))return!1}return!0}function verifyOnlyCharOrNumberOrCH_XY(t){for(var e=0;e<t.length;e++){var n=t.charAt(e);if(!(n>="0"&&"9">=n||n>="a"&&"z">=n||n>="A"&&"Z">=n||"_"==n||verifyOnlyChinese_XY(n)))return!1}return!0}function createUniqueArray_XY(t){if(!t||t.length<=0)return[];for(var e=[t[0]],n=1;n<t.length;n++)-1==e.indexOf(t[n])&&e.push(t[n]);return e}function coin2Str_XY(t,e){return t.toLocaleString()}function substrNick_XY(t,e){if(void 0===e&&(e=5),Global.gameId!=GameIdEnum.HALL)return t;if(t.length<=e)return t;for(var n="",i=2*e-1,r=0,o=0,a=t.length;a>o;o++){var s=t.charAt(o);if(verifyOnlyChinese_XY(s)?(r+=2,n+=s):(r++,n+=s),r>=i)return n}return n}function validateAngle_XY(t){return(t%360+360)%360}function updateHtmlTitle(t){document.title=t;var e=document.createElement("iframe");e.src="resource/empty.html",e.onload=function(){setTimeout(function(){e.onload=null,document.body.removeChild(e)},0)},document.body.appendChild(e)}function copyChar_XY(t,e){for(var n="",i=0;e>i;i++)n+=t;return n}function formatTime_XY(t){var e=Math.min(59,int_XY(t/60)),n=e+"";10>e&&(n="0"+n),t%=60;var i=t+"";return 10>t&&(i="0"+i),n+":"+i}function randomInt_XY(t,e){return Math.floor(t+(e-t+1)*Math.random())}function randomFromArray_XY(t){return t[randomInt_XY(0,t.length-1)]}function shuffleArray_XY(t){for(var e=[];t.length>0;){var n=randomInt_XY(0,t.length-1);e.push(t[n]),t.splice(n,1)}return e}function randomUniqueFromArray_XY(t,e){e=verifyRange_XY(e,0,t.length);for(var n=[],i=1e3;e>0&&i>0;){var r=randomFromArray_XY(t);-1==n.indexOf(r)&&(n.push(r),e--),i--}return n}function trim_XY(t){var e=new RegExp(" ","g");return t=t.replace(e,"")}function remove_XY(t){null!=t&&null!=t.parent&&t.parent.removeChild(t)}function disableRightMouse_XY(){document.body&&(document.body.oncontextmenu=function(){return!1})}function formatBankCode_XY(t){return t.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")}function format_XY(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)return t;for(var i=0;i<e.length;++i)t=t.replace(__formatRegs[i],e[i]);return t}function format_XY2(t,e){if(void 0===e&&(e=null),!t)return t;if(e)for(var n=0;n<e.length;++n)t=t.replace(__formatRegs[n],e[n]);return t}function formatDate_XY(t,e){return void 0===e&&(e="Y-MM-dd hh:mm:ss"),__helpDate.setTime(t),__helpDate.format(e)}function skipUrlParam_XY(t){var e=t.indexOf("?");return-1==e?t:t.substr(0,e)}function centerAnchor_XY(t,e){e?(t.anchorOffsetX=e[0]/2,t.anchorOffsetY=e[1]/2):(__rect_XY.setEmpty(),t.anchorOffsetX=0,t.anchorOffsetY=0,t.getBounds(__rect_XY),t.anchorOffsetX=t.width/2+__rect_XY.x,t.anchorOffsetY=t.height/2+__rect_XY.y),t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY}function setAnchor_XY(t,e){t.anchorOffsetX=e[0],t.anchorOffsetY=e[1],t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY}function int_XY(t){if(null==t)return 0;var e=parseInt(t+"");return isNaN(e)?0:e}function verifyRange_XY(t,e,n){return Math.max(Math.min(t,n),e)}function getColorByPercent_XY(t){var e=5.1,n=0,i=0,r=0;50>t&&(n=e*t,i=255),t>=50&&(i=255-(t-50)*e,n=255),n=Math.floor(n),i=Math.floor(i),r=Math.floor(r);var o=0;return o+=n<<16,o+=i<<8,o+=r}function updateScrollerThumb_XY(t,e){void 0===e&&(e=!1),egret.setTimeout(function(){e?t.horizontalScrollBar&&(t.horizontalScrollBar.thumb.width=verifyRange_XY(t.width/t.viewport.contentWidth,.03,.7)*t.width):t.verticalScrollBar&&(t.verticalScrollBar.thumb.height=verifyRange_XY(t.height/t.viewport.contentHeight,.03,.7)*t.height)},this,100)}function setScollerScrollVByRender_XY(t,e){t.viewport.once(egret.Event.RENDER,function(){t.viewport.scrollV=Math.max(0,Math.min(e,t.viewport.contentHeight-t.height))},this)}function setScollerScrollGHByRender_XY(t,e){t.viewport.once(egret.Event.RENDER,function(){t.viewport.scrollH=Math.max(0,Math.min(e,t.viewport.contentWidth-t.width))},this)}function getCurrentDeviceOrient_XY(){return 180===window.orientation||0===window.orientation?1:0}function setHtmlText(t,e){t.textFlow=__htmlTextParser.parser(e)}function setDomByRect_XY(t,e,n){void 0===n&&(n=!1);var i=document.getElementById(t);if(i){var r=(egret.Capabilities.boundingClientWidth,egret.Capabilities.boundingClientHeight);i.style.width=e.width+"px",i.style.height=e.height+"px",n?(i.style.left=r-e.y+"px",i.style.top=e.x+"px",i.style.transform="rotate(90deg)",i.style.webkitTransform="rotate(90deg)",i.style.transformOrigin="0px 0px",i.style.webkitTransformOrigin="0px 0px"):(i.style.left=e.x+"px",i.style.top=e.y+"px",i.style.transform="",i.style.webkitTransform="",i.style.transformOrigin="",i.style.webkitTransformOrigin="")}}function widthScaleHeight_XY(){var t=egret.Capabilities.boundingClientWidth,e=egret.Capabilities.boundingClientHeight,n=Global.stage.stageWidth,i=Global.stage.stageHeight;return t/n/(e/i)}function keepScale_XY(t){if(Global.stage.scaleMode==egret.StageScaleMode.EXACT_FIT){t.scaleX=t.scaleY=1;var e=widthScaleHeight_XY();e>=1?t.scaleX=1/e:t.scaleY=e}}function stringEndWith_XY(t,e){return t?e?t.substr(t.length-e.length)==e:!0:!1}function egretToDomRect_XY(t,e,n){if(!t.parent)return null;var i=n?n:new egret.Rectangle,r=egret.Capabilities.boundingClientWidth,o=egret.Capabilities.boundingClientHeight,a=e.stageWidth,s=e.stageHeight;if(t.parent.localToGlobal(t.x-t.anchorOffsetX,t.y-t.anchorOffsetY,__point_XY),e.scaleMode==egret.StageScaleMode.SHOW_ALL){var l=Math.min(r/a,o/s);i.x=__point_XY.x*l+(r-a*l)/2,i.y=__point_XY.y*l+(o-s*l)/2,i.width=t.width*l,i.height=t.height*l}else if(e.scaleMode==egret.StageScaleMode.EXACT_FIT){l=r/a;var h=o/s;i.x=__point_XY.x*l,i.y=__point_XY.y*h,i.width=t.width*l,i.height=t.height*h}else{if(e.scaleMode!=egret.StageScaleMode.FIXED_WIDTH)return trace("Error! "),null;l=r/a,i.x=__point_XY.x*l,i.y=__point_XY.y*l,i.width=t.width*l,i.height=t.height*l}return i}function urlParamToJson_XY(t){"#"==t.charAt(0)&&(t=t.replace("#","")),t=decodeURIComponent(t);for(var e={},n=t.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("=");if(r>0){var o=n[i].substring(0,r),a=n[i].substr(r+1);e[o]=a}}return e}function jsonToUrlParam(t){var e="";for(var n in t)void 0!=t[n]&&0/0!=t[n]&&(e+=n+"="+t[n]+"&");return e.length>0&&(e=e.substr(0,e.length-1)),e}function bindTapEvent_XY(t,e,n,i,r,o,a){void 0===o&&(o=!1),void 0===a&&(a=!0),null==n&&(n=t),o?(t.___handler=e,t.___thiObj=n):t.addEventListener(egret.TouchEvent.TOUCH_TAP,e,n),r&&(t.___switchSources=r),t!=Global.stage&&void 0==t.__oldScaleX&&(t.__oldScaleX=t.scaleX,t.__oldScaleY=t.scaleY),t.__useEffect=i,t.__useSound=a,i||a?(t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,__onEffectBeginTouchHandler,null),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,__onEffectEndTouchHandler,null),t.addEventListener(egret.TouchEvent.TOUCH_END,__onEffectEndTouchHandler,null),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,__onEffectEndTouchHandler,null)):o&&t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,__onEffectBeginTouchHandler,null)}function clearTapEvent_XY(t,e,n){t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,n),t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,__onEffectBeginTouchHandler,null),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,__onEffectEndTouchHandler,null),t.removeEventListener(egret.TouchEvent.TOUCH_END,__onEffectEndTouchHandler,null),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,__onEffectEndTouchHandler,null),t.___switchSources=null,t.___handler=null,t.___thiObj=null,t.__oldScaleX=null,t.__oldScaleY=null}function __onEffectBeginTouchHandler(t){var e=t.currentTarget;if(e.__useSound&&""!=__tapSound&&SoundManager.playEffect(__tapSound),e.___handler&&e.___handler.apply(e.___thiObj,[t]),e.__useEffect)if(e.___switchSources)e.source=e.___switchSources[1];else{var n=e.__targetScaleX||e.__oldScaleX+(e.__oldScaleX>0?.15:-.15),i=e.__targetScaleY||e.__oldScaleY+(e.__oldScaleY>0?.15:-.15);e.scaleX=n||1.15,e.scaleY=i||1.15}}function __onEffectEndTouchHandler(t){var e=t.currentTarget;e.__useEffect&&(e.___switchSources?e.source=e.___switchSources[0]:(e.scaleX=e.__oldScaleX||1,e.scaleY=e.__oldScaleY||1))}function checkDirection_XY(){return document.documentElement.clientHeight>=document.documentElement.clientWidth?"portrait":"landscape"}function bindTapEventOnce_XY(t,e,n){null==n&&(n=t),t.once(egret.TouchEvent.TOUCH_TAP,e,n)}function bindEuiCreateOkEventOnce_XY(t,e,n){null==n&&(n=t),t.once(eui.UIEvent.CREATION_COMPLETE,e,n)}function bindMoveSwipeEvent_XY(t,e,n){null==n&&(n=t),__moveSwipeDic.push([t,e,n]),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,__onBeginTouchHandler,null),t.addEventListener(egret.TouchEvent.TOUCH_END,__onEndTouchHandler,null)}function __onBeginTouchHandler(t){__moveStartLocation.setTo(t.stageX,t.stageY)}function __onEndTouchHandler(t){var e=t.stageX-__moveStartLocation.x,n=t.stageY-__moveStartLocation.y,i=0;if(!(Math.max(Math.abs(e),Math.abs(n))<20)){i=Math.abs(e)>Math.abs(n)?e>0?3:2:n>0?1:0;for(var r=0;r<__moveSwipeDic.length;r++){var o=__moveSwipeDic[r];if(t.currentTarget==o[0]){var a=o[1];a.apply(o[2],[i])}}}}function groupLoadExecute(t,e,n){return trace(t+", "+RES.isGroupLoaded(t)),RES.isGroupLoaded(t)?void e.apply(n):void(n["___"+t]||(Global.eventCenter.once(t,e,n),RES.loadGroup(t),n["___"+t]=!0))}function waitGroupAndExecute(t,e,n){return RES.isGroupLoaded(t)?void e.apply(n):void Global.eventCenter.once(t,e,n)}function http_XY(t,e,n,i,r,o){var a=Http.make();a.start(t,e,n,i,r,o)}function httpPostSmart_XY(t,e,n,i){var r;i&&(r=new egret.URLVariables,r.variables=i),http_XY(t,e,n,egret.URLRequestMethod.POST,egret.URLLoaderDataFormat.TEXT,r)}function httpPost_XY(t,e,n,i){http_XY(t,e,n,egret.URLRequestMethod.POST,egret.URLLoaderDataFormat.TEXT,i)}function addResizeHandler_XY(t,e){ResizeCall.addCall(t,e)}function parseJsonSafe_XY(t){var e;try{e=JSON.parse(t)}catch(n){}return e}function stopEffectSound_XY(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),e&&(t="resource/media/"+t+"?v="+Global.sourceVer);var i=__soundIdMap[t];if(i){var r=document.getElementById(i);try{r.pause()}catch(o){}if(n)try{r.remove()}catch(o){}}}function stopAllEffectSound_XY(){for(var t in __soundIdMap){var e=document.getElementById(__soundIdMap[t]);try{e.pause()}catch(n){}try{e.remove()}catch(n){}}__soundIdMap={}}function readyEffectSound_XY(t,e){void 0===e&&(e=!0),e&&(t="resource/media/"+t+"?v="+Global.sourceVer);var n,i=__soundIdMap[t];i||(n=document.createElement("audio"),i="effectSound_"+__soundIdCounter,n.id=i,n.className="music",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex="-999",__soundIdCounter++,document.body.appendChild(n),n.src=t,n.preload="preload",__soundIdMap[t]=i)}function playEffectSound_XY(t,e,n,i,r){void 0===n&&(n=!0),void 0===i&&(i=1),void 0===r&&(r=!1),n&&(t="resource/media/"+t+"?v="+Global.sourceVer);var o,a=__soundIdMap[t];a?o=document.getElementById(a):(o=document.createElement("audio"),a="effectSound_"+__soundIdCounter,o.id=a,o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.zIndex="-999",__soundIdCounter++,document.body.appendChild(o),o.src=t,o.preload="preload",o.autoplay=!0,__soundIdMap[t]=a);try{o.currentTime=0,o.loop=e,o.volume=i,0>=i?o.muted=!0:o.muted=!1}catch(s){}try{(r||!egret.Capabilities.isMobile)&&o.play()}catch(s){}}function startTrackShake_XY(t,e){__shakeInfo||(__shakeInfo={mshake:4e3,mlast_update:egret.getTimer(),mcounts:[],mx:0,my:0,mz:0,mlast_x:0,mlast_y:0,mlast_z:0,calls:[],objs:[]},window.addEventListener("devicemotion",__deviceMotionHandler)),__shakeInfo.calls.push(t),__shakeInfo.objs.push(e),__shakeInfo.mcounts.push(0)}function __deviceMotionHandler(t){var e=t.accelerationIncludingGravity,n=egret.getTimer(),i=n-__shakeInfo.mlast_update;if(i>50){__shakeInfo.mlast_update=n,__shakeInfo.mx=e.x,__shakeInfo.my=e.y,__shakeInfo.mz=e.z;var r=Math.abs(__shakeInfo.mx+__shakeInfo.my+__shakeInfo.mz-__shakeInfo.mlast_x-__shakeInfo.mlast_y-__shakeInfo.mlast_z)/i*1e4;if(r>__shakeInfo.mshake)for(var o=0;o<__shakeInfo.calls.length;o++)__shakeInfo.mcounts[o]++,__shakeInfo.calls[o].apply(__shakeInfo.objs[o],[__shakeInfo.mcounts[o]]);__shakeInfo.mlast_x=__shakeInfo.mx,__shakeInfo.mlast_y=__shakeInfo.my,__shakeInfo.mlast_z=__shakeInfo.mz}}function stopTrackShake_XY(){window.removeEventListener("devicemotion",__deviceMotionHandler),__shakeInfo=null}function removeTrackShake_XY(t,e){if(__shakeInfo){var n=__shakeInfo.calls.indexOf(t);__shakeInfo.calls.splice(n,1),__shakeInfo.objs.splice(n,1),__shakeInfo.mcounts.splice(n,1)}}function textCount(t){for(var e=0,n=/^[\u4E00-\u9FA5\uF900-\uFA2D]+$/,i=0;i<t.length;i++){var r=t.charAt(i);e+=n.test(r)?2:1}return e}function enterFullScreen_XY(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}function exitFullScreen_XY(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()}function numberToText_XY(t){return __change.init(t),__change.pri_ary()}function testCpuCost_XY(t){var e=egret.getTimer();t(),trace("cost: "+(egret.getTimer()-e)+"ms")}function bindMouseWheel_XY(t,e){for(var n=-1,i=0;i<__wheelEvent.length;i++){var r=__wheelEvent[i];if(r.call==t&&r.obj==e){n=i;break}}-1!=n&&__wheelEvent.splice(n,1),__wheelEvent.push({call:t,obj:e})}function removeMouseWheel_XY(t,e){for(var n=-1,i=0;i<__wheelEvent.length;i++){var r=__wheelEvent[i];if(r.call==t&&r.obj==e){n=i;break}}-1!=n&&__wheelEvent.splice(n,1)}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},BaseComponent=function(t){function e(n,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0);var o=t.call(this)||this;if(o.autoAdapter=i,o.autoScaleBg=r,o.skinName=n,o.defaultWidth=o.width,o.defaultHeight=o.height,o.adapterSize(),o.addEventListener(egret.Event.ADDED_TO_STAGE,o.onAdded,o),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.onRemoved,o),Global.useProfile){var a=egret.getQualifiedClassName(o);trace("new ui:"+a),e.profileLog[a]||(e.profileLog[a]=0),e.profileLog[a]++}return o}return __extends(e,t),e.prototype.showEffect1=function(){tween_XY_alphaShow(this)},e.prototype.showEffect2=function(){var t=this.uiGrp,e=this.bg;t&&(t.scaleX=t.scaleY=0,Tween$.get(t).to({scaleX:1,scaleY:1},300,Ease$.backOut)),e&&tween_XY_alphaShow(e)},e.prototype.onAdded=function(){this.onResize(),ResizeCall.addCall(this.onResize,this)},e.prototype.onRemoved=function(){ResizeCall.del(this.onResize,this)},e.prototype.onResize=function(){this.adapterSize()},e.prototype.adapterSize=function(){if(this.autoAdapter&&(Global.stage.scaleMode==egret.StageScaleMode.FIXED_WIDTH?(this.width=Global.stage.stageWidth,this.height=int_XY(this.defaultHeight*Global.stage.stageHeight/e.DESIGN_H)):(this.width=int_XY(this.defaultWidth*Global.stage.stageWidth/e.DESIGN_W),this.height=Global.stage.stageHeight),this.autoScaleBg&&this.bg)){var t=this.bg;t.left=t.right=t.top=t.bottom=0/0,t.verticalCenter=0,t.horizontalCenter=0;var n=(Global.stage.stageWidth,Global.stage.stageHeight,Math.max(this.width/e.DESIGN_W,this.height/e.DESIGN_H));t.width=e.DESIGN_W*n,t.height=e.DESIGN_H*n}},e.prototype.dispose=function(){if(ResizeCall.del(this.onResize,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),Global.useProfile){var t=egret.getQualifiedClassName(this);trace("dispose ui:"+t),e.profileLog[t]||(e.profileLog[t]=0),e.profileLog[t]--}},e.DESIGN_W=1334,e.DESIGN_H=750,e.profileLog={},e}(eui.Component);__reflect(BaseComponent.prototype,"BaseComponent");var ModuleType=function(){function t(){}return t.MODULE_LOBBY="Lobby",t.MODULE_WEB="Web",t.MODULE_ADMIN="Admin",t.MODULE_MAHJONG="Mahjong",t.MODULE_POKER="Poker",t.MODULE_ARCADE="Arcade",t.MODULE_HUNDRED="Hundred",t}();__reflect(ModuleType.prototype,"ModuleType");var DefaultPlatform=function(){function t(){}return t.prototype.exitApp=function(){var t=!1;try{t=window&&window.parent!=window&&window.parent.Global}catch(e){}CloseWarning.disable(),t?window.parent.location.href=window.parent.location.href:window.location.href=window.location.href,window.top.location.href=window.top.location.href},t.prototype.getShareedParamFromHall=function(){return DevelopMain.isInModule?window.parent.__getSharedParam__():null},t.prototype.showGame=function(){bridge_iframe.Hall.getInstance().showGame()},t.prototype.unloadGame=function(){bridge_iframe.Hall.getInstance().unloadGame()},t.prototype.init=function(){},t.prototype.startLoadGame=function(t){},t.prototype.setPhoneStatusBar=function(t){},t.prototype.share=function(t){},t.prototype.imVoice=function(t){},t.prototype.closePreloading=function(){},t.prototype.localStorageSetItem=function(t,e){return!0},t.prototype.localStorageRemoveItem=function(t){},t.prototype.localStorageGetItem=function(t){return null},t.prototype.localStorageClear=function(){},t.prototype.sendMsgToGame=function(t,e){bridge_iframe.Hall.getInstance().sendMsgToGame(t,e)},t.prototype.sendMsgToHall=function(t,e){DevelopMain.isInModule&&window.parent.Global.onEvent(t,e)},t.prototype.getUdid=function(t){var e=Global.localStorageGetItem("udid");e?t(e):Fingerprint2.getV18({},function(e,n){Global.localStorageSetItem("udid",e),t(e)})},t.prototype.getAppInfo=function(){return""},t.prototype.openWindow=function(t){window.open(t)},t.prototype.getPhonePower=function(){return 100},t.prototype.downloadGamePackage=function(t){},t.prototype.layoutWithKeyboard=function(t){},t.prototype.savePic=function(t){egret.Capabilities.isMobile?Toast.show(i18n("")):downloadFile_XY(t,i18n("-{0}.png",Global.loginDto.nickname))},t.prototype.takePhoto=function(){},t.prototype.copyText=function(t,e,n){copyTextToClipboard_XY_For_platform(t,e,n)},t.prototype.copyAndOpenWeixin=function(t){copyTextToClipboard_XY_For_platform(t,function(){Toast.show(i18n("!"))},function(){})},t.prototype.copyAndOpenQQ=function(t){if(egret.Capabilities.isMobile)openWindow_XY("mqqwpa://im/chat?chat_type=wpa&uin="+t+"&version=1&src_type=web&web_src=oicqzone.com");else{copyTextToClipboard_XY_For_platform(t,function(){},function(){})}},t.prototype.copyAndOpenWhatsApp=function(t){copyTextToClipboard_XY_For_platform(t,function(){},function(){}),openWindow_XY("https://wa.me/"+t)},t.prototype.setLoginSuccessUrl=function(t){},t}();__reflect(DefaultPlatform.prototype,"DefaultPlatform",["IPlatform"]);var UserDTO=function(){function t(){}return t}();__reflect(UserDTO.prototype,"UserDTO");var mahjong;!function(t){var e=function(){function e(){}return e.init=function(){this.idArr=[t.XLCH_WinType.MAHJONG_XLCH_HU_PING,t.XLCH_WinType.MAHJONG_XLCH_HU_DUI_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_QING_YI_SE,t.XLCH_WinType.MAHJONG_XLCH_HU_DAI_YAO_JIU,t.XLCH_WinType.MAHJONG_XLCH_HU_QI_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_DA_QING_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_JIANG_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_LONG_QI_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_QING_QI_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_QING_YAO_JIU,t.XLCH_WinType.MAHJONG_XLCH_HU_QING_LONG_QI_DUI,t.XLCH_WinType.MAHJONG_XLCH_HU_DI_HU,t.XLCH_WinType.MAHJONG_XLCH_HU_TIAN_HU,t.XLCH_WinType.MAHJONG_XLCH_GUA_FENG,t.XLCH_WinType.MAHJONG_XLCH_ADD_KONG,t.XLCH_WinType.MAHJONG_XLCH_XIA_YU,t.XLCH_WinType.MAHJONG_XLCH_HU_HAI_DI_LAO_YUE,t.XLCH_WinType.MAHJONG_XLCH_HU_GANG_SHANG_HUA,t.XLCH_WinType.MAHJONG_XLCH_ZI_MO,t.XLCH_WinType.MAHJONG_XLCH_HU_GANG_SHANG_PAO,t.XLCH_WinType.MAHJONG_XLCH_HU_QIANG_GANG,t.XLCH_WinType.MAHJONG_XLCH_ONE_GEN,t.XLCH_WinType.MAHJONG_XLCH_TWO_GEN,t.XLCH_WinType.MAHJONG_XLCH_THREE_GEN,t.XLCH_WinType.MAHJONG_XLCH_JIN_GOU_GOU,t.XLCH_WinType.MAHJONG_XLCH_GANG,t.XLCH_WinType.MAHJONG_XLCH_CHA_DA_JIAO,t.XLCH_WinType.MAHJONG_XLCH_CHA_HUA_ZHU,t.XLCH_WinType.MAHJONG_XLCH_DRAW_BACK],this.helpCard0=new t.Card(0,0),this.helpCard1=new t.Card(0,0),this.helpCard2=new t.Card(0,0),this.helpCard3=new t.Card(0,0),this.helpCard4=new t.Card(0,0),this.helpCard5=new t.Card(0,0),this.helpCard6=new t.Card(0,0),this.helpCard7=new t.Card(0,0),this.helpCard8=new t.Card(0,0),this.helpCard9=new t.Card(0,0),this.helpCard10=new t.Card(0,0),this.helpCard11=new t.Card(0,0),this.helpCard12=new t.Card(0,0),this.helpCard13=new t.Card(0,0),this.helpCard14=new t.Card(0,0),this.huIdArr=[i.MAHJONG_XLCH_HU_PING,i.MAHJONG_XLCH_HU_DUI_DUI,i.MAHJONG_XLCH_HU_QING_YI_SE,i.MAHJONG_XLCH_HU_DAI_YAO_JIU,i.MAHJONG_XLCH_HU_QI_DUI,i.MAHJONG_XLCH_HU_DA_QING_DUI,i.MAHJONG_XLCH_HU_JIANG_DUI,i.MAHJONG_XLCH_HU_LONG_QI_DUI,i.MAHJONG_XLCH_HU_QING_QI_DUI,i.MAHJONG_XLCH_HU_QING_YAO_JIU,i.MAHJONG_XLCH_HU_QING_LONG_QI_DUI,i.MAHJONG_XLCH_HU_DI_HU,i.MAHJONG_XLCH_HU_TIAN_HU],this.findDic=[[i.MAHJONG_XLCH_HU_QING_LONG_QI_DUI,this.is_qing_long_qi_dui],[i.MAHJONG_XLCH_HU_LONG_QI_DUI,this.is_long_qi_dui],[i.MAHJONG_XLCH_HU_QING_QI_DUI,this.is_qing_qi_dui],[i.MAHJONG_XLCH_HU_QING_YAO_JIU,this.is_qing_yao_jiu],[i.MAHJONG_XLCH_HU_DA_QING_DUI,this.is_da_qing_dui],[i.MAHJONG_XLCH_HU_JIANG_DUI,this.is_jiang_dui],[i.MAHJONG_XLCH_HU_QING_YI_SE,this.is_qing_yi_se],[i.MAHJONG_XLCH_HU_DAI_YAO_JIU,this.is_dai_yao_jiu],[i.MAHJONG_XLCH_HU_QI_DUI,this.is_qi_dui],[i.MAHJONG_XLCH_HU_DUI_DUI,this.is_dui_dui]];for(var e=0,n=this.findDic.length;n>e;e++){var r=this.findDic[e],o=r[1];r[1]=o.bind(this)}},e.getHuFanShu=function(t){var e=this.idArr.indexOf(t);return-1!=e?this.fanshuArr[e]:0},e.getWinTypeAndFactors=function(e,i,r){i=t.MahjongTool.sortHandleCard(i);var o=[];o=i.concat(),o.push(r),o=t.MahjongTool.sortHandleCard(o);for(var a=o.concat(),s=o.concat(),l=0,h=e.length;h>l;l++){var u=e[l];s=s.concat(u.models),u.type==t.Meld.TRIPLET&&(a=a.concat(u.models))}a=t.MahjongTool.sortHandleCard(a),s=t.MahjongTool.sortHandleCard(s);var c=new n;c.handIsPure=t.MahjongTool.isPure(o),c.is7Dui=this.is7Dui(o),c.isPure7Dui=this.isPure7Dui(o),c.isPengPengHu=this.isPengPengHu(o,e,c.isPure7Dui),c.allIsPure=t.MahjongTool.isPure(s),c.allWithPeng=a,c.allWithPengGang=s,c.allWithNothingDic=this.cardToArrDic(o),c.anGangCount=0,c.mingGangCount=0;for(var l=0,h=e.length;h>l;l++){var p=e[l];p.type==t.Meld.CONCEALED?c.anGangCount++:p.type==t.Meld.EXPOSED&&c.mingGangCount++}for(var d=[],g=[],f=0,l=0,h=this.findDic.length;h>l;l++){var _=this.findDic[l];
if(_){var m=_[0],y=_[1];if(-1==g.indexOf(m)&&y&&y(o,e,i,r,c)){d.push(m),f+=this.getHuFanShu(m);break}}}if(0==f){var v=2;f=Math.pow(2,v)}else f=Math.pow(2,f+1);return{winTyps:d,factor:f}},e.cardToArrDic=function(e){for(var n=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],i=0,r=e.length;r>i;i++){var o=e[i];o.type==t.Type.CHARACTER?(n[0][0]++,n[0][o.point+1]++):o.type==t.Type.DOT?(n[1][0]++,n[1][o.point+1]++):o.type==t.Type.BAMBOO?(n[2][0]++,n[2][o.point+1]++):o.type==t.Type.ZI&&(n[3][0]++,n[3][o.point+1]++)}return n},e.is7Dui=function(t){if(14!=t.length)return!1;for(var e=0,n=t.length;n>e;e++){var i=t[e];if(!this.isSame(i,t[e+1]))return!1;e++}return!0},e.isPure7Dui=function(t){if(14!=t.length)return!1;for(var e=0,n=t.length;n>e;e++){var i=t[e];if(this.isSame(i,t[e+2])||this.isSame(i,t[e+3]))return!1;if(!this.isSame(i,t[e+1]))return!1;e++}return!0},e.isPengPengHu=function(e,n,i){if(i)return!1;for(var r=0,o=n.length;o>r;r++){var a=n[r];if(a.type==t.Meld.SEQUENCE)return!1}for(var s,r=0,o=e.length;o>r;r++){var l=e[r];if(this.isSame(l,e[r+2]))r+=2;else{if(!this.isSame(l,e[r+1]))return!1;if(!this._is_jiang(e,l,i))return!1;if(s)return!1;s=!0,r++}}return s},e.isSame=function(t,e){return t&&e?t.type==e.type&&t.point==e.point:!1},e._is_jiang=function(e,n,i){if(i)return!1;var r=e.concat();return this.helpCard0.reNew(t.Type.BAMBOO,2),this.helpCard1.reNew(t.Type.BAMBOO,2),r.push(this.helpCard0),r.push(this.helpCard1),this.canWinWhenDeleteCards(r,[n,n])},e.canWinWhenDeleteCards=function(e,n,i){void 0===i&&(i=!0);for(var r=e.concat(),o=0,a=n.length;a>o;o++){var s=n[o],l=this.getIndexOf(r,s);if(-1==l)return!1;r.splice(l,1)}t.MahjongTool.allow_7dui=i;var h=t.MahjongTool.canWin(r);return t.MahjongTool.allow_7dui=!0,h},e.getIndexOf=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(this.isSame(r,e))return n}return-1},e.is_qing_long_qi_dui=function(t,e,n,i,r){return r.allIsPure&&r.is7Dui&&!r.isPure7Dui},e.is_long_qi_dui=function(t,e,n,i,r){return r.is7Dui&&!r.isPure7Dui},e.is_qing_qi_dui=function(t,e,n,i,r){return r.allIsPure&&r.is7Dui},e.is_qing_yao_jiu=function(t,e,n,i,r){return r.allIsPure&&this.is_dai_yao_jiu(t,e,n,i,r)},e.is_da_qing_dui=function(t,e,n,i,r){return r.allIsPure&&r.isPengPengHu},e.is_jiang_dui=function(t,e,n,i,r){for(var o=0;o<r.allWithPengGang.length;o++)if(2!=r.allWithPengGang[o].point&&5!=r.allWithPengGang[o].point&&8!=r.allWithPengGang[o].point)return!1;return r.isPengPengHu},e.is_qing_yi_se=function(t,e,n,i,r){return r.allIsPure},e.is_dai_yao_jiu=function(t,e,n,i,r){for(var o=0;3>o;o++){var a=r.allWithPengGang[o];if(a[4]>0||a[5]>0||a[6]>0)return!1}for(var o=0;3>o;o++){var s=r.allWithNothingDic[o];if(s[2]!=s[3]||s[7]!=s[8])return!1}for(var o=0,l=e.length;l>o;o++){var h=e[o];if(!this._cardsHas1_9(h.models))return!1}for(var o=0;3>o;o++){var u=r.allWithNothingDic[o][1]-r.allWithNothingDic[o][2],c=r.allWithNothingDic[o][9]-r.allWithNothingDic[o][7];if(0>u||0>c)return!1}var p=r.allWithNothingDic[0][0],d=r.allWithNothingDic[1][0],g=r.allWithNothingDic[2][0];return p%3==0&&d%3==0&&g%3==2?!0:d%3==0&&g%3==0&&p%3==2?!0:p%3==0&&g%3==0&&d%3==2?!0:!1},e._cardsHas1_9=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(this._is_1_9(i))return!0}return!1},e._is_1_9=function(t){return 0==t.point||8==t.point},e.is_qi_dui=function(t,e,n,i){return i.is7Dui},e.is_dui_dui=function(t,e,n,i){return i.isPengPengHu},e.huIdArr=[],e.findDic=[],e.idArr=[],e.fanshuArr=[1,2,3,3,3,4,4,5,5,5,6,6,6,1,1,1,1,1,1,1,1,1,2,3,1,1],e}();t.XLCHTool=e,__reflect(e.prototype,"mahjong.XLCHTool");var n=function(){function t(){this.anGangCount=0,this.mingGangCount=0}return t}();t.XLCH_Config=n,__reflect(n.prototype,"mahjong.XLCH_Config");var i=function(){function t(){}return t.MAHJONG_XLCH_HU_PING=100001,t.MAHJONG_XLCH_HU_DUI_DUI=100002,t.MAHJONG_XLCH_HU_QING_YI_SE=100003,t.MAHJONG_XLCH_HU_DAI_YAO_JIU=100004,t.MAHJONG_XLCH_HU_QI_DUI=100005,t.MAHJONG_XLCH_HU_DA_QING_DUI=100006,t.MAHJONG_XLCH_HU_JIANG_DUI=100007,t.MAHJONG_XLCH_HU_LONG_QI_DUI=100008,t.MAHJONG_XLCH_HU_QING_QI_DUI=100009,t.MAHJONG_XLCH_HU_QING_YAO_JIU=100010,t.MAHJONG_XLCH_HU_QING_LONG_QI_DUI=100011,t.MAHJONG_XLCH_HU_DI_HU=100012,t.MAHJONG_XLCH_HU_TIAN_HU=100013,t.MAHJONG_XLCH_GUA_FENG=200001,t.MAHJONG_XLCH_ADD_KONG=200002,t.MAHJONG_XLCH_XIA_YU=200003,t.MAHJONG_XLCH_HU_HAI_DI_LAO_YUE=300001,t.MAHJONG_XLCH_HU_GANG_SHANG_HUA=300002,t.MAHJONG_XLCH_ZI_MO=300003,t.MAHJONG_XLCH_HU_GANG_SHANG_PAO=300004,t.MAHJONG_XLCH_HU_QIANG_GANG=300005,t.MAHJONG_XLCH_ONE_GEN=300006,t.MAHJONG_XLCH_TWO_GEN=300007,t.MAHJONG_XLCH_THREE_GEN=300008,t.MAHJONG_XLCH_JIN_GOU_GOU=300009,t.MAHJONG_XLCH_GANG=300010,t.MAHJONG_XLCH_HU_YI_PAO_DUO_XIANG=100014,t.MAHJONG_XLCH_CHA_DA_JIAO=400001,t.MAHJONG_XLCH_CHA_HUA_ZHU=400002,t.MAHJONG_XLCH_DRAW_BACK=400003,t}();t.XLCH_WinType=i,__reflect(i.prototype,"mahjong.XLCH_WinType")}(mahjong||(mahjong={}));var card;!function(t){var e=function(){function e(e,n){this.type=e,this.point=n,this.id=card.Card.counter++,this.cardID=n>=t.Point.BlackJoker?n:13*this.type+n}return e.init=function(){t.helpCard0=t.helpCard0||new e(0,0),t.helpCard1=t.helpCard1||new e(0,0),t.helpCard2=t.helpCard2||new e(0,0),t.helpCard3=t.helpCard3||new e(0,0)},e.getCardId=function(e){return this.init(),t.helpCard0.reNew(e.type,e.point),t.helpCard0.cardID},e.buildCardId=function(t){t&&(t.cardID=this.getCardId(t))},e.createFromCardID=function(t){var n=new e(0,0);return n.buildByCardID(t),n},e.createFronCardIds=function(t){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n];e[n]=this.createFromCardID(r)}return e},e.createFromStrs=function(t){for(var e=t.split(","),n=[],i=0,r=e.length;r>i;i++){var o=e[i];n[i]=this.createFromStr(o)}return n},e.createFromStr=function(n){var i=new RegExp(" ","g");n=n.replace(i,"");var r="",o=-1;if(-1!=n.indexOf(""))r="",o=t.Type.SPADE;else if(-1!=n.indexOf(""))r="",o=t.Type.HEART;else if(-1!=n.indexOf(""))r="",o=t.Type.CLUB;else if(-1!=n.indexOf(""))r="",o=t.Type.DIAMOND;else{if(""==n)return new e(t.Type.JOKER,t.Point.BlackJoker);if(""==n)return new e(t.Type.JOKER,t.Point.RedJoker)}if(-1==o)return null;n=n.replace(r,"");var a=int_XY(n);return"J"==n?a=t.Point.J:"Q"==n?a=t.Point.Q:"K"==n?a=t.Point.K:"A"==n&&(a=t.Point.A),new e(o,a)},e.prototype.reNew=function(e,n){return this.type=e,this.point=n,this.id=card.Card.counter++,this.cardID=n>=t.Point.BlackJoker?n:13*this.type+n,this},e.prototype.buildByCardID=function(e){return this.cardID=e,this.type=parseInt(""+e/13),this.point=e>=t.Point.BlackJoker?e:e%13,this},e.prototype.clone=function(){return new card.Card(this.type,this.point)},e.prototype.toString=function(){if(this.point==t.Point.BlackJoker)return"";if(this.point==t.Point.RedJoker)return"";var e="",n="";switch(this.type){case card.Type.SPADE:e="";break;case card.Type.HEART:e="";break;case card.Type.CLUB:e="";break;case card.Type.DIAMOND:e="";break;default:e="?"}return n=this.point==t.Point.J?"J":this.point==t.Point.Q?"Q":this.point==t.Point.K?"K":this.point==t.Point.A?"A":this.point+"",e+n},e.counter=0,e}();t.Card=e,__reflect(e.prototype,"card.Card")}(card||(card={}));var card;!function(t){var e=function(){function e(){}return e.init=function(){null==this._findMap&&(this._findMap=[[n.STRAIGHT_FLUSH,this.isStraightFlush.bind(this),0],[n.FOUR_OF_A_KIND,this.isFourOfAKind.bind(this),1],[n.FULL_HOUSE,this.isFullHouse.bind(this),1],[n.FLUSH,this.isFlush.bind(this),0],[n.STRAIGHT,this.isStraight.bind(this),1]])},e.compare=function(t,e){return t.type==e.type&&t.point==e.point},e.copyArray=function(t){return t.slice()},e.sort=function(t){return t.sort(function(t,e){if(t.point==e.point)return t.type<e.type?-1:t.type>e.type?1:0;if(2==t.point||2==e.point){if(2==t.point)return 1;if(2==e.point)return-1}return t.point<e.point?-1:t.point>e.point?1:void 0}),t},e.sort1=function(t,e){return t.type<e.type?-1:t.type==e.type?t.point<e.point?1:t.point==e.point?0:-1:1},e.sort2=function(t,e){return t.point<e.point?1:t.point==e.point?t.type<e.type?-1:t.type==e.type?0:1:-1},e.sort3=function(t,e){return e>t?-1:t>e?1:0},e.getPokerGroup=function(t){if(this.init(),null==t||0==t.length)return null;if(5!=t.length)return this.getResultWhenLess5(t);var e=this.copyArray(t);e=e.sort(this.sort1);var n=this.copyArray(t);n=n.sort(this.sort2);for(var i=[e,n],o=0;o<this._findMap.length;o++){var a=this._findMap[o],s=a[0],l=a[1],h=i[a[2]],u=l(h);if(null!=u)return new r(u[0],s,u[1])}return null},e.getResultWhenLess5=function(t){var e=this.copyArray(t),i=0;return 1==e.length?(i=e[0].point,new r(e,n.ONE_CARD,[i,e[0].type])):2==e.length&&(i=e[0].point,e[0].point==e[1].point)?new r(e,n.ONE_PAIR,[i,Math.max(e[0].type,e[1].type)]):3==e.length&&(i=e[0].point,e[0].point==e[1].point&&e[2].point==e[1].point)?new r(e,n.THREE_OF_A_KIND,[i]):null},e.isStraightFlush=function(t){return this._isFlush(t,0)?this.isStraight(t):void 0},e._isStraightFlush=function(t,e,n){if(void 0===n&&(n=5),!this._isStraight(t,e,n))return!1;for(var i=t[e].type,r=e+1;e+n>r;r++)if(i!=t[r].type)return!1;return!0},e._isStraight=function(e,n,i){void 0===i&&(i=5);for(var r=n;n+i-1>r;r++){if(e[r].point==t.Point.B2&&e[n+i-1]&&e[n+i-1].point==t.Point.J)return!1;if(null==e[r+1]||e[r].point-1!=e[r+1].point)return!1}return!0},e._hasAWithColor=function(e,n){for(var i=0;i<e.length;i++)if(e[i].type==n&&e[i].point==t.Point.A)return i;return-1},e.isFourOfAKind=function(t){for(var e=0;e<=t.length-4;e++)if(this.hasSame(t,e,4)){var n=t.splice(e,4);return n.push(t[0]),[n,[n[0].point,n[4].point]]}return null},e.hasSame=function(t,e,n){return t[e].point==t[e+n-1].point},e.isFullHouse=function(t){for(var e=0;e<=t.length-3;e++)if(this.hasSame(t,e,3))for(var n=this.copyArray(t),i=n.splice(e,3),r=0;r<=n.length-2;r++)if(this.hasSame(n,r,2)){i=i.concat(n.splice(r,2));var o=i[0].point;return[i,[o,i[3].point]]}return null},e.isFlush=function(t){for(var e=0;e<=t.length-5;e++)if(this._isFlush(t,e)){var n=t.splice(e,5);return[n,[n[0].point,n[0].type]]}return null},e._isFlush=function(t,e){for(var n=t[e].type,i=e+1;e+5>i;i++)if(n!=t[i].type)return!1;return!0},e.isStraight=function(t){var e=this.skipSame(t);if(e.length<5)return null;for(var n=0;n<=e.length-3;n++)if(this._isStraight(e,n,3)&&5==e[n].point){var i=this._hasA(e);if(-1!=i){var r=this._hasB2(e);if(-1!=r)return o=e.splice(n,3),o.push(e[r]),o.push(e[i]),[o,[e[r].point,e[r].type,e[i].point]]}}for(var n=0;n<=e.length-4;n++)if(this._isStraight(e,n,4)&&6==e[n].point){var r=this._hasB2(e);if(-1!=r)return o=e.splice(n,4),o.push(e[r]),[o,[e[r].point,[e[r].type,o[0].point]]]}for(var n=0;n<=e.length-4;n++)if(this._isStraight(e,n,5)){var o=e.splice(n,5);return[o,[o[0].point,o[0].type]]}return null},e.skipSame=function(t){for(var e=[],n=[],i=0;i<t.length;i++){var r=t[i];-1==e.indexOf(r.point)&&(e.push(r.point),n.push(r))}return n},e._hasA=function(e){for(var n=0;n<e.length;n++)if(e[n].point==t.Point.A)return n;return-1},e._hasB2=function(t){for(var e=0;e<t.length;e++)if(15==t[e].point)return e;return-1},e.isThreeOfAKind=function(t){for(var e=0;e<=t.length-3;e++)if(this.hasSame(t,e,3)){var n=this.copyArray(t),i=n.splice(e,3);return i=i.concat(n.splice(0,2)),[i,[i[0].point,i[3].point,i[4].point]]}return null},e.isTwoPairs=function(t){for(var e=0;e<=t.length-2;e++)if(this.hasSame(t,e,2))for(var n=this.copyArray(t),i=n.splice(e,2),r=0;r<=n.length-2;r++)if(this.hasSame(n,r,2))return i=i.concat(n.splice(r,2)),i.push(n.splice(0,1)[0]),[i,[i[0].point,i[2].point,i[4].point]];return null},e.isOnePair=function(t){for(var e=0;e<=t.length-2;e++)if(this.hasSame(t,e,2)){var n=this.copyArray(t),i=n.splice(e,2);return i=i.concat(n.splice(0,3)),[i,[i[0].point,i[2].point,i[3].point,i[4].point]]}return null},e.getTypeCards=function(t,e){var i=t.concat(),r=t.concat(),o=i.sort(this.sort2),a=r.sort(this.sort1);switch(e){case n.ONE_PAIR:return this.getPairs(o,e);case n.THREE_OF_A_KIND:return this.getThreeCards(o,e);case n.STRAIGHT:return this.getStraight(o,e);case n.FLUSH:return this.getFlush(a,e);case n.FULL_HOUSE:return this.getFullHouse(o,e);case n.FOUR_OF_A_KIND:return this.getFourKind(o,e);case n.STRAIGHT_FLUSH:return this.getStraightFlush(o,e)}return null},e.getBigTypeCards=function(t,e){var i=t.type,o=null,a=[],s=-1,l=-1,h=-1,u=-1;if(i==n.ONE_CARD){s=t.pokers[0].point,l=t.pokers[0].type;for(var c=0;c<e.length;c++)h=e[c].point,u=e[c].type,h>s?(o=new r([e[c]],i,[h]),a.push(o)):h==s&&u>l&&(o=new r([e[c]],i,[h]),a.push(o))}else if(i==n.ONE_PAIR){s=t.pokers[0].point,l=t.pokers[0].type>t.pokers[1].type?t.pokers[0].type:t.pokers[1].type;var p=this.getTypeCards(e,i);if(p&&p.cards&&p.cards.length>0)for(var d=0;d<p.cards.length;d++){var g=p.cards[d];h=g[0].point,u=g[0].type>g[1].type?g[0].type:g[1].type,h>s?(g=this.getAllCardsFromHand(h,e),o=new r(g,i,[h]),a.push(o)):h==s&&u>l&&(o=new r(g,i,[h]),a.push(o))}}else if(i==n.THREE_OF_A_KIND){s=t.pokers[0].point,l=t.pokers[0].type;var p=this.getTypeCards(e,i);if(p&&p.cards&&p.cards.length>0)for(var d=0;d<p.cards.length;d++){var g=p.cards[d];h=g[0].point,u=g[0].type,h>s?(o=new r(g,i,[h]),a.push(o)):h==s&&u>l&&(o=new r(g,i,[h]),a.push(o))}}else for(var c=i;c<=n.STRAIGHT_FLUSH;c++){var p=this.getTypeCards(e,c);if(p&&p.cards&&p.cards.length>0)for(var d=0;d<p.cards.length;d++){var g=p.cards[d],f=this.getPokerGroup(g),_=f.compare(t);f&&1==_&&a.push(f)}}return a},e.getAllCardsFromHand=function(t,e){for(var n=[],i=0;i<e.length;i++)e[i].point==t&&n.push(e[i]);return n},e.getPairs=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1];if(r&&o&&r.point==o.point){if(this.findTargetPoint(n,r))continue;n.push([r,o]),i++}}var a={types:e,cards:n};return a},e.getThreeCards=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],a=t[i+2];if(r&&a&&r.point==a.point){if(this.findTargetPoint(n,r))continue;n.push([r,o,a]),i+=2}}var s={types:e,cards:n};return s},e.findShunzi=function(t,e){if(t[e]){var n=[],i=t[e].point;if(5>i)return null;n.push(t[e]);for(var r=0;4>r;r++){var o=this.findPoint(t,i-1);if(o||i-1!=1||(o=this.findPoint(t,14)),!o)return null;if(n.push(o),i--,5==n.length)return n}return null}},e.findTargetPoint=function(t,e){for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++)if(i[r].point==e.point)return!0;return!1},e.findPoint=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.point==e)return i}return null},e.getStraight=function(t,e){var n=[],i=[],r=this.skipSame(t);if(r.length<5)return null;for(var o=0;o<=r.length-3;o++)if(this._isStraight(r,o,3)&&5==r[o].point){var a=this._hasA(r);if(-1!=a){var s=this._hasB2(r);-1!=s&&(i=r.slice(o,o+3),i.push(r[s]),i.push(r[a]),n.push(i))}}r=this.skipSame(t);for(var o=0;o<=r.length-4;o++)if(this._isStraight(r,o,4)&&6==r[o].point){var s=this._hasB2(r);-1!=s&&(i=r.slice(o,o+4),i.push(r[s]),n.push(i))}r=this.skipSame(t);for(var o=0;o<=r.length-4;o++)if(this._isStraight(r,o,5)){var i=r.slice(o,o+5);n.push(i)}var l={types:e,cards:n};return l},e.getFlush=function(e,n){for(var i=[],r=[],o=[],a=[],s=[],l=0;l<e.length;l++){var h=e[l];switch(h.type){case t.Type.SPADE:i.push(h);break;case t.Type.HEART:r.push(h);break;case t.Type.CLUB:o.push(h);break;case t.Type.DIAMOND:a.push(h)}}var u=this.findNInArr(i,5);if(u){for(var l=u.length-1;l>=0;l--)(u[l][0].point==u[l][1].point+1&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1||u[l][0].point==t.Point.A&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1&&2==u[l][4].point)&&(trace(" "+u[l]),u.splice(l,1));s=s.concat(u)}var c=this.findNInArr(r,5);if(c){for(var l=c.length-1;l>=0;l--)(c[l][0].point==c[l][1].point+1&&c[l][1].point==c[l][2].point+1&&c[l][2].point==c[l][3].point+1&&c[l][3].point==c[l][4].point+1||c[l][0].point==t.Point.A&&c[l][1].point==c[l][2].point+1&&c[l][2].point==c[l][3].point+1&&c[l][3].point==c[l][4].point+1&&2==c[l][4].point)&&(trace(" "+c[l]),c.splice(l,1));s=s.concat(c)}var p=this.findNInArr(o,5);if(p){for(var l=p.length-1;l>=0;l--)(p[l][0].point==p[l][1].point+1&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1||p[l][0].point==t.Point.A&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1&&2==p[l][4].point)&&(trace(" "+p[l]),p.splice(l,1));s=s.concat(p)}var d=this.findNInArr(a,5);if(d){for(var l=d.length-1;l>=0;l--)(d[l][0].point==d[l][1].point+1&&d[l][1].point==d[l][2].point+1&&d[l][2].point==d[l][3].point+1&&d[l][3].point==d[l][4].point+1||d[l][0].point==t.Point.A&&d[l][1].point==d[l][2].point+1&&d[l][2].point==d[l][3].point+1&&d[l][3].point==d[l][4].point+1&&2==d[l][4].point)&&(trace(" "+d[l]),d.splice(l,1));s=s.concat(d)}var g={types:n,cards:s};return g},e.findNInArr=function(t,e){if(!t||t.length<e)return null;for(var n=[],i=0;i<=t.length-e;i++){n[i]=[];for(var r=0;e>r;r++)n[i].push(t[i+r])}return n},e.findNInArr2=function(e,n){if(!e||e.length<n)return null;for(var i=[],r=0;r<=e.length-n;r++){i[r]=[];for(var o=0;n>o;o++)i[r].push(e[r+o])}for(var a=[],r=0;r<e.length;r++)(e[r].point==t.Point.A||5==e[r].point||4==e[r].point||3==e[r].point||2==e[r].point)&&a.push(e[r]);return 5==a.length&&i.push(a),i},e.getFullHouse=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],a=t[i+2];if(r&&a&&r.point==a.point){if(this.findTargetPoint(n,r))continue;n.push([r,o,a]),i+=2}}for(var s=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1];if(r&&o&&r.point==o.point){if(this.findTargetPoint(s,r))continue;s.push([r,o]),i++}}var l=[],h={types:e,cards:l};if(n.length<=0||s.length<=0)return h;for(var i=0;i<n.length;i++)for(var u=0;u<s.length;u++)s[u][0].point!=n[i][0].point&&l.push([n[i][0],n[i][1],n[i][2],s[u][0],s[u][1]]);return h},e.getFourKind=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],a=t[i+2],s=t[i+3];r&&s&&r.point==s.point&&(n.push([r,o,a,s]),i+=3)}var l=[],h={types:e,cards:l};if(n.length<=0)return h;for(var u=-1,i=0;i<n.length;i++)for(var c=(n[i][0].point,0);c<t.length;c++)if(t[c].point!=n[i][0].point){if(-1==u)u=t[c].point;else{if(t[c].point==u)continue;u=t[c].point}l.push([n[i][0],n[i][1],n[i][2],n[i][3],t[c]])}return h},e.getStraightFlush=function(e,n){for(var i=[],r=[],o=[],a=[],s=[],l=0;l<e.length;l++){var h=e[l];switch(h.type){case t.Type.SPADE:i.push(h);break;case t.Type.HEART:r.push(h);break;case t.Type.CLUB:o.push(h);break;case t.Type.DIAMOND:a.push(h)}}var u=this.findNInArr2(i,5);if(u){for(var c=[],l=u.length-1;l>=0;l--)(u[l][0].point==u[l][1].point+1&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1||u[l][0].point==t.Point.A&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1&&2==u[l][4].point)&&c.push([u[l][0],u[l][1],u[l][2],u[l][3],u[l][4]]);s=s.concat(c)}var p=this.findNInArr2(r,5);if(p){for(var d=[],l=p.length-1;l>=0;l--)(p[l][0].point==p[l][1].point+1&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1||p[l][0].point==t.Point.A&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1&&2==p[l][4].point)&&d.push([p[l][0],p[l][1],p[l][2],p[l][3],p[l][4]]);s=s.concat(d)}var g=this.findNInArr2(o,5);if(g){for(var f=[],l=g.length-1;l>=0;l--)(g[l][0].point==g[l][1].point+1&&g[l][1].point==g[l][2].point+1&&g[l][2].point==g[l][3].point+1&&g[l][3].point==g[l][4].point+1||g[l][0].point==t.Point.A&&g[l][1].point==g[l][2].point+1&&g[l][2].point==g[l][3].point+1&&g[l][3].point==g[l][4].point+1&&2==g[l][4].point)&&f.push([g[l][0],g[l][1],g[l][2],g[l][3],g[l][4]]);s=s.concat(f)}var _=this.findNInArr2(a,5);if(_){for(var m=[],l=_.length-1;l>=0;l--)(_[l][0].point==_[l][1].point+1&&_[l][1].point==_[l][2].point+1&&_[l][2].point==_[l][3].point+1&&_[l][3].point==_[l][4].point+1||_[l][0].point==t.Point.A&&_[l][1].point==_[l][2].point+1&&_[l][2].point==_[l][3].point+1&&_[l][3].point==_[l][4].point+1&&2==_[l][4].point)&&m.push([_[l][0],_[l][1],_[l][2],_[l][3],_[l][4]]);s=s.concat(m)}var y={types:n,cards:s};return y},e._findMap=null,e}();t.CDDTool=e,__reflect(e.prototype,"card.CDDTool");var n=function(){function t(){}return t.toString=function(t){return this._mapv[t]},t.STRAIGHT_FLUSH=7,t.FOUR_OF_A_KIND=6,t.FULL_HOUSE=5,t.FLUSH=4,t.STRAIGHT=3,t.THREE_OF_A_KIND=2,t.ONE_PAIR=1,t.ONE_CARD=0,t.CDD_PASS=-1,t._mapv=["","","","","","","",""],t}();t.CDDPokerGroupType=n,__reflect(n.prototype,"card.CDDPokerGroupType");var i=function(){function t(){}return t}();t.CDDTypeCardsCombines=i,__reflect(i.prototype,"card.CDDTypeCardsCombines");var r=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=-1),void 0===n&&(n=null),this.pokers=t,this.type=e,this.values=n}return t.prototype.compare=function(t){if(!t||this.pokers.length!=t.pokers.length)return-2;if(this.type<t.type)return-1;if(this.type>t.type)return 1;for(var e=0;e<this.values.length;e++){if(this.values[e]<t.values[e])return-1;if(this.values[e]>t.values[e])return 1}return 0},t}();t.CDDTexasPokerGroupDTO=r,__reflect(r.prototype,"card.CDDTexasPokerGroupDTO")}(card||(card={}));var card;!function(t){var e=function(){function t(){}return t.toString=function(t){return this.cfg[t]||""},t.cfg=["","1","2","3","4","5","6","7","8","9","10","11","12","13","14"],t.DDZ_PASS=0,t.SINGLE=1,t.TWIN=2,t.TRIPLE=3,t.TRIPLE_WITH_SINGLE=4,t.TRIPLE_WITH_TWIN=5,t.STRAIGHT_SINGLE=6,t.STRAIGHT_TWIN=7,t.PLANE_PURE=8,t.PLANE_WITH_SINGLE=9,t.PLANE_WITH_TWIN=10,t.FOUR_WITH_SINGLE=11,t.FOUR_WITH_TWIN=12,t.FOUR_BOMB=13,t.KING_BOMB=14,t}();t.DDZGroupType=e,__reflect(e.prototype,"card.DDZGroupType");var n=function(){function n(){}return n.sort=function(e){return e.sort(function(e,n){if(e.point==n.point)return e.type<n.type?1:e.type>n.type?-1:0;if((2==e.point||2==n.point)&&e.type!=t.Type.JOKER&&n.type!=t.Type.JOKER){if(2==e.point)return-1;if(2==n.point)return 1}return e.point<n.point?1:e.point>n.point?-1:void 0}),e},n.sortByGroup=function(e){var n=[],i=[],r=[],o=[];e.sort(function(e,n){if(e.point==n.point)return e.type<n.type?1:e.type>n.type?-1:0;if((2==e.point||2==n.point)&&e.type!=t.Type.JOKER&&n.type!=t.Type.JOKER){if(2==e.point)return 1;if(2==n.point)return-1}return e.point<n.point?1:e.point>n.point?-1:void 0});for(var a=0,s=e.length;s>a;)this.isNextFourSame(e,a)?(n.push([e[a],e[a+1],e[a+2],e[a+3]]),a+=4):this.isNextThreeSame(e,a)?(i.push([e[a],e[a+1],e[a+2]]),a+=3):this.isNextTwoSame(e,a)?(r.push([e[a],e[a+1]]),a+=2):(o.push([e[a]]),a++);for(var l=[],h=[n,i,r,o],a=0,s=h.length;s>a;a++)for(var u=0,c=h[a].length;c>u;u++){var p=h[a][u];l=l.concat.apply(l,p)}return l},n.compare=function(t,e){return t.type==e.type&&t.point==e.point},n.compareByTmpData=function(t,e){return t.type==e.type&&t.tmpData==e.tmpData},n.getCardsType=function(t,r){void 0===r&&(r=!0);var o=[];r?(o=t.concat(),this.computeRealPoint(o),o=this.sort(o)):o=t;for(var a in this.typeDic)if(n[a]){var s=n[a](o);if(s)return!n.allowFourSameInType&&this.typeDic[a]!=e.FOUR_BOMB&&this.typeDic[a]!=e.FOUR_WITH_SINGLE&&this.typeDic[a]!=e.FOUR_WITH_TWIN&&this.hasFourSameIn(o)?null:new i(this.typeDic[a],s,o.length)}return null},n.getCardsTypes=function(t,e){void 0===e&&(e=!0);var r=[],o=[];e?(r=t.concat(),this.computeRealPoint(r),r=this.sort(r)):r=t;for(var a in this.typeDic)if(n[a]){var s=n[a](r);s&&o.push(new i(this.typeDic[a],s,r.length))}return o},n.isABigThenB=function(t,r,o){void 0===o&&(o=-1),t=t.concat(),r=r.concat(),this.computeRealPoint(t),this.computeRealPoint(r),t=this.sort(t),r=this.sort(r);var a,s=this.getCardsType(t,!1);if(!s)return null;if(s.type==e.KING_BOMB)return s;if(s.type!=e.FOUR_BOMB&&t.length!=r.length)return null;if(-1!=o){for(var l in this.typeDic)if(this.typeDic[l]==o){var h=n[l](r);h?a=new i(o,h,r.length):warn(":",r)}}else a=this.getCardsType(r,!1);if(!a)return warn("222:",r),s;if(s.isBigThen(a))return s;for(var u=this.getCardsTypes(t),c=0,p=u.length;p>c;c++){var d=u[c];if(d.isBigThen(a))return d}return null},n.findBiggerCards=function(r,o,a){if(void 0===a&&(a=-1),!r)return null;r=r.concat(),o=o.concat(),this.computeRealPoint(r),this.computeRealPoint(o),o=n.sort(o),r=n.sort(r);var s;if(-1!=a){for(var l in this.typeDic)if(this.typeDic[l]==a&&n[l]){var h=n[l](o);h?s=new i(a,h,o.length):warn("2222:",o)}}else s=this.getCardsType(o,!1);if(!s||s.type==e.KING_BOMB)return null;var u=[],c=r.length>=2&&r[0].tmpData==t.Point.RedJoker&&r[1].tmpData==t.Point.BlackJoker;c&&(u=[r[0],r[1]],r.shift(),r.shift());var p=this.getHashData(r),d=[];if(s.type!=e.KING_BOMB&&s.type!=e.FOUR_BOMB)for(var g=p.pointsArr.length-1;g>=0;g--)4==p.countArr[g]&&d.push([r[p.startIndexArr[g]],r[p.startIndexArr[g]+1],r[p.startIndexArr[g]+2],r[p.startIndexArr[g]+3]]);for(var l in this.findDic)if(this.findDic[l]==s.type&&n[l]){var f=n[l](r,o,p,s,c);f=f||[];for(var _=[],g=0,m=f.length;m>g;g++)_.push(s.type);if(s.type!=e.KING_BOMB&&s.type!=e.FOUR_BOMB)for(var g=0,m=d.length;m>g;g++){var y=d[g];f.push(y),_.push(e.FOUR_BOMB)}return c&&s.type!=e.KING_BOMB&&(f.push(u),_.push(e.KING_BOMB)),f.length<=0?null:{cards:f,types:_}}return null},n.findSingle=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length-1;s>=0;s--){var l=n.pointsArr[s];if(l>o&&4!=n.countArr[s]){for(var h=s;h>=0;h--)a.push([t[n.startIndexArr[h]+n.countArr[h]-1]]);return a}}return null},n.findDouble=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length-1;s>=0;s--){var l=n.pointsArr[s];l>o&&(2==n.countArr[s]||3==n.countArr[s])&&a.push([t[n.startIndexArr[s]],t[n.startIndexArr[s]+1]])}return a.length>0?a:void 0},n.findOnlyThree=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length-1;s>=0;s--){var l=n.pointsArr[s];l>o&&3==n.countArr[s]&&a.push([t[n.startIndexArr[s]],t[n.startIndexArr[s]+1],t[n.startIndexArr[s]+2]])}return a.length>0?a:void 0},n.findThreeAndOne=function(t,e,n,i,r){var o=this.findOnlyThree(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachSingle(t,n,h,1);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findThreeAndTwo=function(t,e,n,i,r){var o=this.findOnlyThree(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachTwin(t,n,h,2);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findStraight=function(e,n,i,r,o){for(var a=r.weight[0],s=n.length,l=[],h=a+1;h<=t.Point.A;h++){for(var u=[],c=0;s>c&&!(h+c>t.Point.A);c++){var p=this.findPointInArr(e,h+c);if(!p)break;u.push(p)}u.length==s&&(u=u.reverse(),l.push(u))}return l.length>0?l:void 0},n.findDoubleStraight=function(e,n,i,r,o){for(var a=r.weight[0],s=n.length/2,l=[],h=a+1;h<=t.Point.A;h++){for(var u=[],c=0;s>c&&!(h+c>t.Point.A);c++){var p=this.findPoint2InArr(e,h+c);if(!p)break;u.push(p[0],p[1])}u.length/2==s&&(u=u.reverse(),l.push(u))}return l.length>0?l:void 0},n.findTripleStraight=function(e,n,i,r,o){for(var a=r.weight[0],s=0,l=0,h=n.length;h>l;l++)this.isNextThreeSame(n,l)&&(s++,l+=2);for(var u=[],l=a+1;l<=t.Point.A;l++){for(var c=[],p=0;s>p&&l+p<=t.Point.A;p++){var d=this.findPoint3InArr(e,l+p);if(!d)break;c.push(d[0],d[1],d[2])}c.length/3==s&&(c=c.reverse(),u.push(c))}return u.length>0?u:void 0},n.findAttachSingle=function(t,e,n,i){void 0===i&&(i=1);for(var r=[],o=e.pointsArr.length-1;o>=0&&r.length<i;o--)1==e.countArr[o]&&r.length<i&&r.push(t[e.startIndexArr[o]]);for(var o=e.pointsArr.length-1;o>=0&&r.length<i;o--)2==e.countArr[o]&&(r.length<i&&r.push(t[e.startIndexArr[o]]),r.length<i&&r.push(t[e.startIndexArr[o]+1]));for(var o=e.pointsArr.length-1;o>=0&&r.length<i;o--)if(3==e.countArr[o]){var a=t[e.startIndexArr[o]],s=t[e.startIndexArr[o]+1],l=t[e.startIndexArr[o]+2];r.length<i&&!this.findPointInArr(n,a.tmpData)&&r.push(a),r.length<i&&!this.findPointInArr(n,s.tmpData)&&r.push(s),r.length<i&&!this.findPointInArr(n,l.tmpData)&&r.push(l)}return r.length==i?r:null},n.findAttachTwin=function(t,e,n,i){void 0===i&&(i=2);for(var r=[],o=e.pointsArr.length-1;o>=0&&r.length<i;o--)2==e.countArr[o]&&r.length<i&&r.push(t[e.startIndexArr[o]],t[e.startIndexArr[o]+1]);for(var o=e.pointsArr.length-1;o>=0&&r.length<i;o--)if(3==e.countArr[o]){var a=t[e.startIndexArr[o]+1],s=t[e.startIndexArr[o]+2];r.length<i&&!this.findPointInArr(n,a.tmpData)&&r.push(a,s)}return r.length==i?r:null},n.findPlaneWithSingle=function(t,e,n,i,r){var o=this.findTripleStraight(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachSingle(t,n,h,o[0].length/3);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findPlaneWithTwin=function(t,e,n,i,r){var o=this.findTripleStraight(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachTwin(t,n,h,o[0].length/3*2);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findBoom=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length;s>=0;s--)n.pointsArr[s]>o&&4==n.countArr[s]&&a.push([t[n.startIndexArr[s]],t[n.startIndexArr[s]+1],t[n.startIndexArr[s]+2],t[n.startIndexArr[s]+3]]);return a.length>0?a:void 0},n.findFourWithSingle=function(t,e,n,i,r){var o=this.findBoom(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachSingle(t,n,h,2);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findFourWithTwin=function(t,e,n,i,r){var o=this.findBoom(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachTwin(t,n,h,4);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findCardInArr=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(this.compareByTmpData(r,e))return n}return-1},n.hasFourSameIn=function(t){for(var e=0,n=t.length;n>e;e++)if(this.isNextFourSame(t,e))return!0;return!1},n.findPointInArr=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=99999);for(var r=n,o=Math.min(t.length,n+i);o>r;r++){var a=t[r];if(a.tmpData==e)return a}return null},n.findPoint2InArr=function(t,e){for(var n=0,i=t.length;i-1>n;n++){var r=t[n];if(t[n+1]&&r.tmpData==e&&t[n+1].tmpData==e)return[r,t[n+1]]}return null},n.findPoint3InArr=function(t,e){for(var n=0,i=t.length;i-2>n;n++){var r=t[n];if(t[n+2]&&r.tmpData==e&&t[n+1].tmpData==e&&t[n+2].tmpData==e)return[r,t[n+1],t[n+2]]}return null},n.findPoint4InArr=function(t,e){for(var n=0,i=t.length;i-3>n;n++){var r=t[n];if(t[n+3]&&r.tmpData==e&&t[n+1].tmpData==e&&t[n+2].tmpData==e&&t[n+3].tmpData==e)return[r,t[n+1]]}return null},n.isCardInArr2=function(t,e){for(var n=0,i=t.length;i>n;n++)for(var r=t[n],o=0,a=r.length;a>o;o++){var s=r[o];if(this.compareByTmpData(s,e))return!0}return!1},n.computeRealPoint=function(e){for(var n=0,i=e.length;i>n;n++){var r=e[n];r.tmpData=2==r.point?t.Point.A+1:r.point}},n.getHashData=function(t){for(var e=new r,n=t.length,i=0,o=0;n>o;o++){var a=t[o];0>=i||a.tmpData!=e.pointsArr[i-1]?(e.pointsArr.push(a.tmpData),e.countArr.push(1),e.startIndexArr.push(o),i++):e.countArr[i-1]++}return e},n.isSingle=function(t){return 1==t.length?[t[0].tmpData]:null},n.isDouble=function(t){return 2==t.length&&t[0].tmpData==t[1].tmpData?[t[0].tmpData]:null},n.isStraight=function(e){var n=e.length;if(5>n||n>12)return null;var i=e[0];if(i.type==t.Type.JOKER||i.tmpData==t.Point.B2)return null;for(var r=0;n-1>r;r++){var o=e[r];if(o.tmpData-1!=e[r+1].tmpData)return null}return[e[e.length-1].tmpData]},n.isDoubleStraight=function(e){var n=e.length;if(6>n||n%2!=0)return null;var i=e[0];if(i.type==t.Type.JOKER||i.tmpData==t.Point.B2)return null;for(var r=0;n>r;r+=2){if(e[r].tmpData!=e[r+1].tmpData)return null;if(n-2>r&&e[r].tmpData-1!=e[r+2].tmpData)return null}return[e[e.length-1].tmpData]},n.isOnlyThree=function(t){return 3==t.length&&t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData?[t[0].tmpData]:null},n.isThreeAndOne=function(t){return 4!=t.length?null:t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData!=t[3].tmpData?[t[0].tmpData]:t[0].tmpData!=t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData?[t[1].tmpData]:null},n.isThreeAndTwo=function(t){return 5!=t.length?null:t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[3].tmpData==t[4].tmpData&&t[2].tmpData!=t[3].tmpData?[t[0].tmpData]:t[0].tmpData==t[1].tmpData&&t[2].tmpData==t[3].tmpData&&t[3].tmpData==t[4].tmpData&&t[1].tmpData!=t[2].tmpData?[t[2].tmpData]:null
},n.isBoom=function(t){return 4==t.length&&t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData?[t[0].tmpData]:null},n.isJokerBoom=function(e){return 2==e.length&&e[0].tmpData==t.Point.RedJoker&&e[1].tmpData==t.Point.BlackJoker?[t.Point.RedJoker]:null},n.isTripleStraight=function(e){var n=e.length;if(6>n||n%3!=0)return null;var i=e[0];if(i.type==t.Type.JOKER||i.tmpData==t.Point.B2)return null;for(var r=0;n>r;r+=3){if(e[r].tmpData!=e[r+1].tmpData||e[r].tmpData!=e[r+2].tmpData)return null;if(n-3>r&&e[r].tmpData-1!=e[r+3].tmpData)return null}return[e[e.length-1].tmpData]},n.isPlaneWithSingle=function(e){var n=e.length;if(8>n||n%4!=0)return null;for(var i=[],r=[],o=0;n>o;o){var a=e[o].tmpData;this.isNextThreeSame(e,o)?a==t.Point.B2||a>=t.Point.BlackJoker?(i.push(a,a,a),o+=3):(r.push(a),o+=3):(i.push(a),o++)}for(var s=n/4,o=0,n=r.length;n>o;o++)if(this.isNextNStraight(r,o,s))return[r[o+s-1]];return null},n.isNextNStraight=function(t,e,n){for(var i=0,r=t.length-n;r>=i;i++){for(var o=t[i],a=!0,s=0;n>s;s++)if(t[i+s+1]&&o-s-1!=t[i+s+1]){a=!1;break}if(a)return!0}return!1},n.isNextTwoSame=function(t,e){return e+1<t.length&&t[e].point==t[e+1].point},n.isNextThreeSame=function(t,e){return e+2<t.length&&t[e].point==t[e+1].point&&t[e].point==t[e+2].point},n.isNextFourSame=function(t,e){return e+3<t.length&&t[e].point==t[e+1].point&&t[e].point==t[e+2].point&&t[e].point==t[e+3].point},n.isPlaneWithTwin=function(e){var n=e.length;if(10>n||n%5!=0)return null;for(var i=[],r=[],o=0;n>o;o){var a=e[o].tmpData;if(this.isNextFourSame(e,o))i.push(a,a),o+=4;else if(this.isNextThreeSame(e,o)){if(a==t.Point.B2||a>=t.Point.BlackJoker)return;r.push(a),o+=3}else{if(!this.isNextTwoSame(e,o))return;i.push(a),o+=2}}for(var s=n/5,o=0,n=r.length;n>o;o++)if(this.isNextNStraight(r,o,s))return[r[o]];return null},n.isFourWithSingle=function(t){var e=t.length;return 6!=e?null:this.isNextFourSame(t,0)?[t[0].tmpData]:this.isNextFourSame(t,1)?[t[1].tmpData]:this.isNextFourSame(t,2)?[t[2].tmpData]:void 0},n.isFourWithTwin=function(t){var e=t.length;return 8!=e?null:this.isNextTwoSame(t,0)&&this.isNextTwoSame(t,2)&&this.isNextFourSame(t,4)&&!this.isNextTwoSame(t,1)?[t[4].tmpData]:this.isNextTwoSame(t,0)&&this.isNextFourSame(t,2)&&this.isNextTwoSame(t,6)?[t[2].tmpData]:this.isNextFourSame(t,0)&&this.isNextTwoSame(t,4)&&this.isNextTwoSame(t,6)&&!this.isNextTwoSame(t,5)?[t[0].tmpData]:null},n.allowFourSameInType=!0,n.typeDic={isSingle:e.SINGLE,isDouble:e.TWIN,isOnlyThree:e.TRIPLE,isThreeAndOne:e.TRIPLE_WITH_SINGLE,isThreeAndTwo:e.TRIPLE_WITH_TWIN,isStraight:e.STRAIGHT_SINGLE,isDoubleStraight:e.STRAIGHT_TWIN,isTripleStraight:e.PLANE_PURE,isPlaneWithSingle:e.PLANE_WITH_SINGLE,isPlaneWithTwin:e.PLANE_WITH_TWIN,isFourWithSingle:e.FOUR_WITH_SINGLE,isFourWithTwin:e.FOUR_WITH_TWIN,isBoom:e.FOUR_BOMB,isJokerBoom:e.KING_BOMB},n.findDic={findSingle:e.SINGLE,findDouble:e.TWIN,findOnlyThree:e.TRIPLE,findThreeAndOne:e.TRIPLE_WITH_SINGLE,findThreeAndTwo:e.TRIPLE_WITH_TWIN,findStraight:e.STRAIGHT_SINGLE,findDoubleStraight:e.STRAIGHT_TWIN,findTripleStraight:e.PLANE_PURE,findPlaneWithSingle:e.PLANE_WITH_SINGLE,findPlaneWithTwin:e.PLANE_WITH_TWIN,findFourWithSingle:e.FOUR_WITH_SINGLE,findFourWithTwin:e.FOUR_WITH_TWIN,findBoom:e.FOUR_BOMB},n}();t.DDZTool=n,__reflect(n.prototype,"card.DDZTool");var i=function(){function n(t,e,n){this.type=t,this.weight=e,this.cardCount=n}return n.prototype.isBigThen=function(n){if(!n)return!0;if(this.type==e.KING_BOMB)return!0;if(this.type==e.FOUR_BOMB&&n.type!=e.FOUR_BOMB&&n.type!=e.KING_BOMB)return!0;if(this.type==n.type&&this.cardCount==n.cardCount)for(var i=0,r=this.weight.length;r>i;i++){var o=this.weight[i],a=n.weight[i];if(2==o&&(o=t.Point.A+1),2==a&&(a=t.Point.A+1),o>a)return!0;if(a>o)return!1;break}return!1},n}();t.DDZTypeData=i,__reflect(i.prototype,"card.DDZTypeData");var r=function(){function t(){this.pointsArr=[],this.startIndexArr=[],this.countArr=[]}return t}();t.DDZHashData=r,__reflect(r.prototype,"card.DDZHashData")}(card||(card={}));var card;!function(t){var e=function(){function e(){}return e.init=function(){null==this._findMap&&(this._findMap=[[n.ROYAL_FLUSH,this.isRoyalFlush.bind(this),0],[n.STRAIGHT_FLUSH,this.isStraightFlush.bind(this),0],[n.FOUR_OF_A_KIND,this.isFourOfAKind.bind(this),1],[n.FULL_HOUSE,this.isFullHouse.bind(this),1],[n.FLUSH,this.isFlush.bind(this),0],[n.STRAIGHT,this.isStraight.bind(this),1],[n.THREE_OF_A_KIND,this.isThreeOfAKind.bind(this),1],[n.TWO_PAIRS,this.isTwoPairs.bind(this),1],[n.ONE_PAIR,this.isOnePair.bind(this),1]])},e.copyArray=function(t){return t.slice()},e.sort1=function(t,e){return t.type<e.type?-1:t.type==e.type?t.point<e.point?1:t.point==e.point?0:-1:1},e.sort2=function(t,e){return t.point<e.point?1:t.point==e.point?t.type<e.type?-1:t.type==e.type?0:1:-1},e.getPokerGroup=function(t){if(this.init(),null==t||t.length<5)return null;var e=this.copyArray(t);e=e.sort(this.sort1);var r=this.copyArray(t);r=r.sort(this.sort2);for(var o=[e,r],a=0;a<this._findMap.length;a++){var s=this._findMap[a],l=s[0],h=s[1],u=o[s[2]],c=h(u);if(null!=c)return new i(c[0],l,c[1])}var p=r.splice(0,5);return new i(p,n.HIGH_CARD,[p[0].point,p[1].point,p[2].point,p[3].point,p[4].point])},e.isRoyalFlush=function(t){for(var e=0;e<=t.length-5;e++)if(this._isRoyalFlush(t,e)){var n=t.splice(e,5);return[n,[0]]}return null},e._isRoyalFlush=function(e,n){if(e[n].point!=t.Point.A||10!=e[n+4].point)return!1;for(var i=e[n].type,r=n+1;n+5>r;r++)if(i!=e[r].type)return!1;return!0},e.isStraightFlush=function(t){for(var e=0;e<=t.length-4;e++){if(this._isStraightFlush(t,e,5)){var n=t.splice(e,5);return[n,[n[0].point]]}if(this._isStraightFlush(t,e,4)&&5==t[e].point){var i=this._hasAWithColor(t,t[e].type);if(-1!=i)return n=t.splice(e,4),n.push(t[i]),[n,[n[0].point]]}}return null},e._isStraightFlush=function(t,e,n){if(void 0===n&&(n=5),!this._isStraight(t,e,n))return!1;for(var i=t[e].type,r=e+1;e+n>r;r++)if(i!=t[r].type)return!1;return!0},e._isStraight=function(t,e,n){void 0===n&&(n=5);for(var i=e;e+n-1>i;i++)if(null==t[i+1]||t[i].point-1!=t[i+1].point)return!1;return!0},e._hasAWithColor=function(e,n){for(var i=0;i<e.length;i++)if(e[i].type==n&&e[i].point==t.Point.A)return i;return-1},e.isFourOfAKind=function(t){for(var e=0;e<=t.length-4;e++)if(this.hasSame(t,e,4)){var n=t.splice(e,4);return n.push(t[0]),[n,[n[0].point,n[4].point]]}return null},e.hasSame=function(t,e,n){return t[e].point==t[e+n-1].point},e.isFullHouse=function(t){for(var e=0;e<=t.length-3;e++)if(this.hasSame(t,e,3))for(var n=this.copyArray(t),i=n.splice(e,3),r=0;r<=n.length-2;r++)if(this.hasSame(n,r,2))return i=i.concat(n.splice(r,2)),[i,[i[0].point,i[3].point]];return null},e.isFlush=function(t){for(var e=0;e<=t.length-5;e++)if(this._isFlush(t,e)){var n=t.splice(e,5);return[n,[n[0].point,n[1].point,n[2].point,n[3].point,n[4].point]]}return null},e._isFlush=function(t,e){for(var n=t[e].type,i=e+1;e+5>i;i++)if(n!=t[i].type)return!1;return!0},e.isStraight=function(t){var e=this.skipSame(t);if(e.length<5)return null;for(var n=0;n<=e.length-4;n++){if(this._isStraight(e,n,5)){var i=e.splice(n,5);return[i,[i[0].point]]}if(this._isStraight(e,n,4)&&5==e[n].point){var r=this._hasA(e);if(-1!=r)return i=e.splice(n,4),i.push(e[r]),[i,[i[0].point]]}}return null},e.skipSame=function(t){for(var e=[],n=[],i=0;i<t.length;i++){var r=t[i];-1==e.indexOf(r.point)&&(e.push(r.point),n.push(r))}return n},e._hasA=function(e){for(var n=0;n<e.length;n++)if(e[n].point==t.Point.A)return n;return-1},e.isThreeOfAKind=function(t){for(var e=0;e<=t.length-3;e++)if(this.hasSame(t,e,3)){var n=this.copyArray(t),i=n.splice(e,3);return i=i.concat(n.splice(0,2)),[i,[i[0].point,i[3].point,i[4].point]]}return null},e.isTwoPairs=function(t){for(var e=0;e<=t.length-2;e++)if(this.hasSame(t,e,2))for(var n=this.copyArray(t),i=n.splice(e,2),r=0;r<=n.length-2;r++)if(this.hasSame(n,r,2))return i=i.concat(n.splice(r,2)),i.push(n.splice(0,1)[0]),[i,[i[0].point,i[2].point,i[4].point]];return null},e.isOnePair=function(t){for(var e=0;e<=t.length-2;e++)if(this.hasSame(t,e,2)){var n=this.copyArray(t),i=n.splice(e,2);return i=i.concat(n.splice(0,3)),[i,[i[0].point,i[2].point,i[3].point,i[4].point]]}return null},e._findMap=null,e}();t.DZPKTool=e,__reflect(e.prototype,"card.DZPKTool");var n=function(){function t(){}return t.toString=function(t){return this._mapv[t]},t.ROYAL_FLUSH=9,t.STRAIGHT_FLUSH=8,t.FOUR_OF_A_KIND=7,t.FULL_HOUSE=6,t.FLUSH=5,t.STRAIGHT=4,t.THREE_OF_A_KIND=3,t.TWO_PAIRS=2,t.ONE_PAIR=1,t.HIGH_CARD=0,t._mapv=["","","","","","","","","",""],t}();t.DZPKPokerGroupType=n,__reflect(n.prototype,"card.DZPKPokerGroupType");var i=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=-1),void 0===n&&(n=null),this.pokers=t,this.type=e,this.values=n}return t.prototype.toString=function(){return" "+n.toString(this.type)+" - "+this.pokers+" - :"+this.values},t.prototype.compare=function(t){if(this.type<t.type)return-1;if(this.type>t.type)return 1;for(var e=0;e<this.values.length;e++){if(this.values[e]<t.values[e])return-1;if(this.values[e]>t.values[e])return 1}return 0},t}();t.TexasPokerGroupDTO=i,__reflect(i.prototype,"card.TexasPokerGroupDTO")}(card||(card={}));var card;!function(t){var e=function(){function e(){}return e.sort=function(e){return e.sort(function(e,n){return e.point==n.point?e.type<n.type?-1:e.type>n.type?1:0:e.point==t.Point.A?-1:n.point==t.Point.A?1:e.point<n.point?-1:e.point>n.point?1:void 0}),e},e.getReusltType=function(t){t=this.sort(t);var e;if(this.isShunJin(t))e=n.p10_group_straight_flush;else if(this.isZhaDan(t))e=n.p10_group_four_of_a_kind;else if(this.isHulu(t))e=n.p10_group_full_house;else if(this.isWuXiao(t))e=n.p10_group_small_five;else if(this.isTongHua(t))e=n.p10_group_flush;else if(this.isWuHua(t))e=n.p10_group_jqk;else{if(!this.isShunzi(t))return this.isNiu(t);e=n.p10_group_straight}return{type:e,sortedCards:t.reverse()}},e.isNiu=function(t){for(var e=0,i=mahjong.RandomAll.GetCombination(t,3),r=0,o=i.length;o>r;r++){var a=i[r];if((this.getP10Point(a[0])+this.getP10Point(a[1])+this.getP10Point(a[2]))%10==0){e=0;for(var s=[],l=0,h=t.length;h>l;l++){var u=t[l];this.complare(u,a[0])||this.complare(u,a[1])||this.complare(u,a[2])||(e+=this.getP10Point(u),s.push(u))}return e>10&&(e-=10),a=this.sort(a).reverse(),s=this.sort(s).reverse(),{type:e,sortedCards:[a[0],a[1],a[2],s[0],s[1]]}}}return{type:n.p10_group_high_card,sortedCards:t.reverse()}},e.getP10Point=function(e){return e.point==t.Point.A?1:e.point>=10?10:e.point},e.complare=function(t,e){return t.type==e.type&&t.point==e.point},e.isShunzi=function(e){return e[0].point==t.Point.A&&2==e[1].point&&3==e[2].point&&4==e[3].point&&5==e[4].point||e[0].point+1==e[1].point&&e[1].point+1==e[2].point&&e[2].point+1==e[3].point&&e[3].point+1==e[4].point},e.isTongHua=function(t){return t[0].type==t[1].type&&t[1].type==t[2].type&&t[2].type==t[3].type&&t[3].type==t[4].type},e.isWuHua=function(e){for(var n=0,i=e.length;i>n;n++){var r=e[n];if(!(t.Point.J<=r.point&&r.point<=t.Point.K))return!1}return!0},e.isWuXiao=function(t){for(var e=0,n=0,i=t.length;i>n;n++){var r=t[n];e+=this.getP10Point(r)}return 10>=e},e.isHulu=function(t){return t[0].point==t[2].point&&t[3].point==t[4].point||t[0].point==t[1].point&&t[2].point==t[4].point},e.isZhaDan=function(t){return t[0].point==t[3].point||t[1].point==t[4].point},e.isShunJin=function(t){return this.isShunzi(t)&&this.isTongHua(t)},e}();t.P10Tool=e,__reflect(e.prototype,"card.P10Tool");var n=function(){function t(){}return t.p10_group_straight_flush=19,t.p10_group_four_of_a_kind=18,t.p10_group_full_house=17,t.p10_group_small_five=16,t.p10_group_flush=15,t.p10_group_jqk=14,t.p10_group_straight=13,t.p10_group_niu_n=10,t.p10_group_high_card=0,t}();t.P10Type=n,__reflect(n.prototype,"card.P10Type")}(card||(card={}));var card;!function(t){var e=function(){function e(){}return e.sort=function(t){return t.sort(function(t,e){return t.point<e.point?-1:t.point>e.point?1:t.type<e.type?-1:t.type>e.type?1:0}),t},e.sortByType=function(e){var i=this.getReusltType(e);if(e=this.sort(e),i==n.DUI_ZI)return e[0].point==e[1].point?e:[e[1],e[2],e[0]];if(i==n.SHUN_ZI||i==n.TONG_HUA_SHUN){var r=this.hasPointInArr(t.Point.A,e);if(2==r){var o=e.pop();e.unshift(o)}return e}return e},e.hasPointInArr=function(t,e){for(var n=0,i=e.length;i>n;n++){var r=e[n];if(r.point==t)return n}return-1},e.getReusltType=function(t){if(!t||3!=t.length)return-1;t=this.sort(t);var e;return e=this.isBaozi(t)?n.BAO_ZI:this.isTongHuaShun(t)?n.TONG_HUA_SHUN:this.isTongHua(t)?n.TONG_HUA:this.isShunZi(t)?n.SHUN_ZI:this.isDuizi(t)?n.DUI_ZI:n.DAN_PAI},e.isBaozi=function(t){return t[0].point==t[1].point&&t[0].point==t[2].point},e.isTongHuaShun=function(t){return this.isTongHua(t)&&this.isShunZi(t)},e.isTongHua=function(t){return t[0].type==t[1].type&&t[0].type==t[2].type},e.isShunZi=function(e){return e[0].point+1==e[1].point&&e[1].point+1==e[2].point||2==e[0].point&&3==e[1].point&&e[2].point==t.Point.A},e.isDuizi=function(t){return t[0].point==t[1].point||t[1].point==t[2].point},e}();t.P3Tool=e,__reflect(e.prototype,"card.P3Tool");var n=function(){function t(){}return t.BAO_ZI=9,t.TONG_HUA_SHUN=8,t.TONG_HUA=5,t.SHUN_ZI=4,t.DUI_ZI=1,t.DAN_PAI=0,t}();t.P3Type=n,__reflect(n.prototype,"card.P3Type")}(card||(card={}));var card;!function(t){var e=function(){function t(){}return t.toString=function(t){return this.cfg[t]||""},t.cfg=["","1","2","3","4","5","6","7","8","9"],t.PDK_PASS=0,t.SINGLE=1,t.TWIN=2,t.PDK_TYPE_THREE_WITH_TWO=3,t.PDK_TYPE_SINGLE_STRAIGHT=4,t.PDK_TYPE_PAIRS_STRAIGHT=5,t.PDK_TYPE_THREE_STRAIGHT=6,t.PDK_TYPE_PLANE_WITH_PAIRS=7,t.PDK_TYPE_FOUR_WITH_THREE=8,t.PDK_TYPE_BOMB=9,t}();t.PDKGroupType=e,__reflect(e.prototype,"card.PDKGroupType");var n=function(){function n(){}return n.sort=function(e){return e.sort(function(e,n){if(e.point==n.point)return e.type<n.type?1:e.type>n.type?-1:0;if((2==e.point||2==n.point)&&e.type!=t.Type.JOKER&&n.type!=t.Type.JOKER){if(2==e.point)return-1;if(2==n.point)return 1}return e.point<n.point?1:e.point>n.point?-1:void 0}),e},n.sortByGroup=function(e){var n=[],i=[],r=[],o=[];e.sort(function(e,n){if(e.point==n.point)return e.type<n.type?1:e.type>n.type?-1:0;if((2==e.point||2==n.point)&&e.type!=t.Type.JOKER&&n.type!=t.Type.JOKER){if(2==e.point)return 1;if(2==n.point)return-1}return e.point<n.point?1:e.point>n.point?-1:void 0});for(var a=0,s=e.length;s>a;)this.isNextFourSame(e,a)?(n.push([e[a],e[a+1],e[a+2],e[a+3]]),a+=4):this.isNextThreeSame(e,a)?(i.push([e[a],e[a+1],e[a+2]]),a+=3):this.isNextTwoSame(e,a)?(r.push([e[a],e[a+1]]),a+=2):(o.push([e[a]]),a++);for(var l=[],h=[n,i,r,o],a=0,s=h.length;s>a;a++)for(var u=0,c=h[a].length;c>u;u++){var p=h[a][u];l=l.concat.apply(l,p)}return l},n.compare=function(t,e){return t.type==e.type&&t.point==e.point},n.compareByTmpData=function(t,e){return t.type==e.type&&t.tmpData==e.tmpData},n.getCardsType=function(t,r){void 0===r&&(r=!0);var o=[];r?(o=t.concat(),this.computeRealPoint(o),o=this.sort(o)):o=t;for(var a in this.typeDic)if(n[a]){var s=n[a](o);if(s)return!n.allowFourSameInType&&this.typeDic[a]!=e.PDK_TYPE_BOMB&&this.typeDic[a]!=e.PDK_TYPE_FOUR_WITH_THREE&&this.hasFourSameIn(o)?null:new i(this.typeDic[a],s,o.length)}return null},n.getCardsTypes=function(t,e){void 0===e&&(e=!0);var r=[],o=[];e?(r=t.concat(),this.computeRealPoint(r),r=this.sort(r)):r=t;for(var a in this.typeDic)if(n[a]){var s=n[a](r);s&&o.push(new i(this.typeDic[a],s,r.length))}return o},n.isABigThenB=function(t,r,o){void 0===o&&(o=-1),t=t.concat(),r=r.concat(),this.computeRealPoint(t),this.computeRealPoint(r),t=this.sort(t),r=this.sort(r);var a,s=this.getCardsType(t,!1);if(!s)return null;if(s.type!=e.PDK_TYPE_BOMB&&t.length!=r.length)return null;if(-1!=o){for(var l in this.typeDic)if(this.typeDic[l]==o){var h=n[l](r);h?a=new i(o,h,r.length):warn(":",r)}}else a=this.getCardsType(r,!1);if(!a)return warn("222:",r),s;if(s.isBigThen(a))return s;for(var u=this.getCardsTypes(t),c=0,p=u.length;p>c;c++){var d=u[c];if(d.isBigThen(a))return d}return null},n.findBiggerCards=function(t,r,o){if(void 0===o&&(o=-1),!t)return null;t=t.concat(),r=r.concat(),this.computeRealPoint(t),this.computeRealPoint(r),r=n.sort(r),t=n.sort(t);var a;if(-1!=o){for(var s in this.typeDic)if(this.typeDic[s]==o&&n[s]){var l=n[s](r);l?a=new i(o,l,r.length):warn("2222:",r)}}else a=this.getCardsType(r,!1);if(!a)return null;var h=[],u=!1;u&&(h=[t[0],t[1]],t.shift(),t.shift());var c=this.getHashData(t),p=[];if(a.type!=e.PDK_TYPE_BOMB)for(var d=c.pointsArr.length-1;d>=0;d--)4==c.countArr[d]&&p.push([t[c.startIndexArr[d]],t[c.startIndexArr[d]+1],t[c.startIndexArr[d]+2],t[c.startIndexArr[d]+3]]);for(var s in this.findDic)if(this.findDic[s]==a.type&&n[s]){var g=n[s](t,r,c,a,u);g=g||[];for(var f=[],d=0,_=g.length;_>d;d++)f.push(a.type);if(a.type!=e.PDK_TYPE_BOMB)for(var d=0,_=p.length;_>d;d++){var m=p[d];g.push(m),f.push(e.PDK_TYPE_BOMB)}return g.length<=0?null:{cards:g,types:f}}return null},n.findSingle=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length-1;s>=0;s--){var l=n.pointsArr[s];if(l>o&&4!=n.countArr[s]){for(var h=s;h>=0;h--)a.push([t[n.startIndexArr[h]+n.countArr[h]-1]]);return a}}return null},n.findDouble=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length-1;s>=0;s--){var l=n.pointsArr[s];l>o&&(2==n.countArr[s]||3==n.countArr[s])&&a.push([t[n.startIndexArr[s]],t[n.startIndexArr[s]+1]])}return a.length>0?a:void 0},n.findOnlyThree=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length-1;s>=0;s--){var l=n.pointsArr[s];l>o&&3==n.countArr[s]&&a.push([t[n.startIndexArr[s]],t[n.startIndexArr[s]+1],t[n.startIndexArr[s]+2]])}return a.length>0?a:void 0},n.findThreeAndTwo=function(t,e,n,i,r){var o=this.findOnlyThree(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachSingle(t,n,h,2);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findStraight=function(e,n,i,r,o){for(var a=r.weight[0],s=n.length,l=[],h=a+1;h<=t.Point.A;h++){for(var u=[],c=0;s>c&&!(h+c>t.Point.A);c++){var p=this.findPointInArr(e,h+c);if(!p)break;u.push(p)}u.length==s&&(u=u.reverse(),l.push(u))}return l.length>0?l:void 0},n.findDoubleStraight=function(e,n,i,r,o){for(var a=r.weight[0],s=n.length/2,l=[],h=a+1;h<=t.Point.A;h++){for(var u=[],c=0;s>c&&!(h+c>t.Point.A);c++){var p=this.findPoint2InArr(e,h+c);if(!p)break;u.push(p[0],p[1])}u.length/2==s&&(u=u.reverse(),l.push(u))}return l.length>0?l:void 0},n.findAttachSingle=function(t,e,n,i){void 0===i&&(i=1);for(var r=[],o=e.pointsArr.length-1;o>=0&&r.length<i;o--)1==e.countArr[o]&&r.length<i&&r.push(t[e.startIndexArr[o]]);for(var o=e.pointsArr.length-1;o>=0&&r.length<i;o--)2==e.countArr[o]&&(r.length<i&&r.push(t[e.startIndexArr[o]]),r.length<i&&r.push(t[e.startIndexArr[o]+1]));for(var o=e.pointsArr.length-1;o>=0&&r.length<i;o--)if(3==e.countArr[o]){var a=t[e.startIndexArr[o]],s=t[e.startIndexArr[o]+1],l=t[e.startIndexArr[o]+2];r.length<i&&!this.findPointInArr(n,a.tmpData)&&r.push(a),r.length<i&&!this.findPointInArr(n,s.tmpData)&&r.push(s),r.length<i&&!this.findPointInArr(n,l.tmpData)&&r.push(l)}return r.length==i?r:null},n.findTripleStraight=function(e,n,i,r,o){for(var a=r.weight[0],s=0,l=0,h=n.length;h>l;l++)this.isNextThreeSame(n,l)&&(s++,l+=2);for(var u=[],l=a+1;l<=t.Point.A;l++){for(var c=[],p=0;s>p&&l+p<=t.Point.A;p++){var d=this.findPoint3InArr(e,l+p);if(!d)break;c.push(d[0],d[1],d[2])}c.length/3==s&&(c=c.reverse(),u.push(c))}return u.length>0?u:void 0},n.findPlaneWithTwin=function(t,e,n,i,r){var o=this.findTripleStraight(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachSingle(t,n,h,o[0].length/3*2);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findBoom=function(t,e,n,i,r){for(var o=i.weight[0],a=[],s=n.pointsArr.length;s>=0;s--)n.pointsArr[s]>o&&4==n.countArr[s]&&a.push([t[n.startIndexArr[s]],t[n.startIndexArr[s]+1],t[n.startIndexArr[s]+2],t[n.startIndexArr[s]+3]]);return a.length>0?a:void 0},n.findFourWithThree=function(t,e,n,i,r){var o=this.findBoom(t,e,n,i,r);if(o&&!(o.length<1)){for(var a=[],s=0,l=o.length;l>s;s++){var h=o[s],u=this.findAttachSingle(t,n,h,3);u&&u.length>0&&a.push(h.concat(u))}return a.length>0?a:void 0}},n.findCardInArr=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(this.compareByTmpData(r,e))return n}return-1},n.hasFourSameIn=function(t){for(var e=0,n=t.length;n>e;e++)if(this.isNextFourSame(t,e))return!0;return!1},n.findPointInArr=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=99999);for(var r=n,o=Math.min(t.length,n+i);o>r;r++){var a=t[r];if(a.tmpData==e)return a}return null},n.findPoint2InArr=function(t,e){for(var n=0,i=t.length;i-1>n;n++){var r=t[n];if(t[n+1]&&r.tmpData==e&&t[n+1].tmpData==e)return[r,t[n+1]]}return null},n.findPoint3InArr=function(t,e){for(var n=0,i=t.length;i-2>n;n++){var r=t[n];if(t[n+2]&&r.tmpData==e&&t[n+1].tmpData==e&&t[n+2].tmpData==e)return[r,t[n+1],t[n+2]]}return null},n.findPoint4InArr=function(t,e){for(var n=0,i=t.length;i-3>n;n++){var r=t[n];if(t[n+3]&&r.tmpData==e&&t[n+1].tmpData==e&&t[n+2].tmpData==e&&t[n+3].tmpData==e)return[r,t[n+1]]}return null},n.isCardInArr2=function(t,e){for(var n=0,i=t.length;i>n;n++)for(var r=t[n],o=0,a=r.length;a>o;o++){var s=r[o];if(this.compareByTmpData(s,e))return!0}return!1},n.computeRealPoint=function(e){for(var n=0,i=e.length;i>n;n++){var r=e[n];r.tmpData=2==r.point?t.Point.A+1:r.point}},n.getHashData=function(t){for(var e=new r,n=t.length,i=0,o=0;n>o;o++){var a=t[o];0>=i||a.tmpData!=e.pointsArr[i-1]?(e.pointsArr.push(a.tmpData),e.countArr.push(1),e.startIndexArr.push(o),i++):e.countArr[i-1]++}return e},n.isSingle=function(t){return 1==t.length?[t[0].tmpData]:null},n.isDouble=function(t){return 2==t.length&&t[0].tmpData==t[1].tmpData?[t[0].tmpData]:null},n.isStraight=function(e){var n=e.length;if(5>n||n>12)return null;var i=e[0];if(i.type==t.Type.JOKER||i.tmpData==t.Point.B2)return null;for(var r=0;n-1>r;r++){var o=e[r];if(o.tmpData-1!=e[r+1].tmpData)return null}return[e[e.length-1].tmpData]},n.isDoubleStraight=function(e){var n=e.length;if(4>n||n%2!=0)return null;var i=e[0];if(i.type==t.Type.JOKER||i.tmpData==t.Point.B2)return null;for(var r=0;n>r;r+=2){if(e[r].tmpData!=e[r+1].tmpData)return null;if(n-2>r&&e[r].tmpData-1!=e[r+2].tmpData)return null}return[e[e.length-1].tmpData]},n.isThreeAndTwo=function(t){return 5!=t.length?null:t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData!=t[3].tmpData&&t[2].tmpData!=t[4].tmpData?[t[0].tmpData]:t[2].tmpData==t[3].tmpData&&t[3].tmpData==t[4].tmpData&&t[0].tmpData!=t[2].tmpData&&t[1].tmpData!=t[2].tmpData?[t[2].tmpData]:t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData&&t[1].tmpData!=t[0].tmpData&&t[1].tmpData!=t[4].tmpData?[t[2].tmpData]:t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData&&t[3].tmpData!=t[4].tmpData?[t[0].tmpData]:t[0].tmpData!=t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData&&t[3].tmpData==t[4].tmpData?[t[1].tmpData]:null},n.isBoom=function(t){return 4==t.length&&t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData?[t[0].tmpData]:null},n.isNextNStraight=function(t,e,n){for(var i=0,r=t.length-n;r>=i;i++){for(var o=t[i],a=!0,s=0;n>s;s++)if(t[i+s+1]&&o-s-1!=t[i+s+1]){a=!1;break}if(a)return!0}return!1},n.isNextTwoSame=function(t,e){return e+1<t.length&&t[e].point==t[e+1].point},n.isNextThreeSame=function(t,e){return e+2<t.length&&t[e].point==t[e+1].point&&t[e].point==t[e+2].point},n.isNextFourSame=function(t,e){return e+3<t.length&&t[e].point==t[e+1].point&&t[e].point==t[e+2].point&&t[e].point==t[e+3].point},n.isTripleStraight=function(e){var n=e.length;if(6>n||n%3!=0)return null;var i=e[0];if(i.type==t.Type.JOKER||i.tmpData==t.Point.B2)return null;for(var r=0;n>r;r+=3){if(e[r].tmpData!=e[r+1].tmpData||e[r].tmpData!=e[r+2].tmpData)return null;if(n-3>r&&e[r].tmpData-1!=e[r+3].tmpData)return null}return[e[e.length-1].tmpData]},n.isPlaneWithTwin=function(e){var n=e.length;if(10>n||n%5!=0)return null;for(var i=[],r=[],o=0;n>o;o){var a=e[o].tmpData;this.isNextThreeSame(e,o)?a==t.Point.B2||a>=t.Point.BlackJoker?(i.push(a,a,a),o+=3):(r.push(a),o+=3):(i.push(a),o++)}for(var s=n/5,o=0,n=r.length;n>o;o++)if(this.isNextNStraight(r,o,s))return[r[o]];return null},n.isOnlyThree=function(t){return 3==t.length&&void 0!=t[0].tmpData&&t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData?[t[0].tmpData]:3==t.length&&void 0!=t[0].point&&t[0].point==t[1].point&&t[1].point==t[2].point?[t[0].point]:null},n.isThreeAndOne=function(t){return 4!=t.length?null:void 0!=t[0].tmpData&&t[0].tmpData==t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData!=t[3].tmpData?[t[0].tmpData]:void 0!=t[0].point&&t[0].point==t[1].point&&t[1].point==t[2].point&&t[2].point!=t[3].point?[t[0].point]:t[0].tmpData!=t[1].tmpData&&void 0!=t[1].tmpData&&t[1].tmpData==t[2].tmpData&&t[2].tmpData==t[3].tmpData?[t[1].tmpData]:t[0].point!=t[1].point&&void 0!=t[1].point&&t[1].point==t[2].point&&t[2].point==t[3].point?[t[1].point]:null},n.isFourWithThree=function(t){var e=t.length;return 7!=e?null:this.isNextFourSame(t,0)?[t[0].tmpData]:this.isNextFourSame(t,1)?[t[1].tmpData]:this.isNextFourSame(t,2)?[t[2].tmpData]:this.isNextFourSame(t,3)?[t[2].tmpData]:void 0},n.allowFourSameInType=!0,n.typeDic={isSingle:e.SINGLE,isDouble:e.TWIN,isThreeAndTwo:e.PDK_TYPE_THREE_WITH_TWO,isStraight:e.PDK_TYPE_SINGLE_STRAIGHT,isDoubleStraight:e.PDK_TYPE_PAIRS_STRAIGHT,isTripleStraight:e.PDK_TYPE_THREE_STRAIGHT,isPlaneWithTwin:e.PDK_TYPE_PLANE_WITH_PAIRS,isFourWithThree:e.PDK_TYPE_FOUR_WITH_THREE,isBoom:e.PDK_TYPE_BOMB},n.findDic={findSingle:e.SINGLE,findDouble:e.TWIN,findThreeAndTwo:e.PDK_TYPE_THREE_WITH_TWO,findStraight:e.PDK_TYPE_SINGLE_STRAIGHT,findDoubleStraight:e.PDK_TYPE_PAIRS_STRAIGHT,findTripleStraight:e.PDK_TYPE_THREE_STRAIGHT,findPlaneWithTwin:e.PDK_TYPE_PLANE_WITH_PAIRS,findFourWithThree:e.PDK_TYPE_FOUR_WITH_THREE,findBoom:e.PDK_TYPE_BOMB},n}();t.PDKTool=n,__reflect(n.prototype,"card.PDKTool");var i=function(){function n(t,e,n){this.type=t,this.weight=e,this.cardCount=n}return n.prototype.isBigThen=function(n){if(!n)return!0;if(this.type==e.PDK_TYPE_BOMB&&n.type!=e.PDK_TYPE_BOMB)return!0;if(this.type==n.type&&this.cardCount==n.cardCount)for(var i=0,r=this.weight.length;r>i;i++){var o=this.weight[i],a=n.weight[i];if(2==o&&(o=t.Point.A+1),2==a&&(a=t.Point.A+1),o>a)return!0;if(a>o)return!1;break}return!1},n}();t.PDKTypeData=i,__reflect(i.prototype,"card.PDKTypeData");var r=function(){function t(){this.pointsArr=[],this.startIndexArr=[],this.countArr=[]}return t}();t.PDKHashData=r,__reflect(r.prototype,"card.PDKHashData")}(card||(card={}));var card;!function(t){var e;!function(t){t[t.J=11]="J",t[t.Q=12]="Q",t[t.K=13]="K",t[t.A=14]="A",t[t.B2=15]="B2",t[t.BlackJoker=55]="BlackJoker",t[t.RedJoker=56]="RedJoker"}(e=t.Point||(t.Point={}))}(card||(card={}));var card;!function(t){var e=function(){function t(){}return t.init=function(){null==t._findMap&&(t._findMap=[[n.BAO_JIU,t.isBaoJiu],[n.ZHA_DAN,t.isZhaDan],[n.SAN_GONG,t.isSanGong]])},t.copyArray=function(t){return t.slice()},t.sort=function(t){return t.sort(function(t,e){return t.point>e.point?-1:t.point<e.point?1:t.type>e.type?-1:t.type<e.type?1:0}),t},t.getPokerGroup=function(e){if(t.init(),null==e||3!=e.length)return null;var n=t.copyArray(e);n=t.sort(n);for(var r=0;r<t._findMap.length;r++){var o=t._findMap[r],a=o[0],s=o[1],l=n,h=s(l);if(null!=h)return new i(h[0],a,h[1])}return t.getDianShuResult(n)},t.isBaoJiu=function(e){var n=t.hasSame(e,0,3);return n&&3==e[0].point?[e,[t.getWeight(e[0])]]:null},t.isZhaDan=function(e){var n=t.hasSame(e,0,3);return n?[e,[t.getWeight(e[0])]]:null},t.isSanGong=function(e){var n=e[2].point>=card.Point.J;return n?[e,[t.getWeight(e[0]),t.getWeight(e[1]),t.getWeight(e[2])]]:null},t.getDianShuResult=function(e){for(var n=0,r=0,o=0;o<e.length;o++){var a=e[o].point;10>a&&(n+=a),a>10&&r++}n%=10;var s=new i(e,n,[r,t.getWeight(e[0]),t.getWeight(e[1]),t.getWeight(e[2])]);return s},t.hasSame=function(t,e,n){return t[e].point==t[e+n-1].point},t.getWeight=function(t){return 10*t.point+t.type},t._findMap=null,t}();t.SGTool=e,__reflect(e.prototype,"card.SGTool");var n=function(){function t(){}return t.toString=function(e){var n="";switch(e){case t.BAO_JIU:n="";break;case t.ZHA_DAN:n="";break;case t.SAN_GONG:n="";break;default:n=numberToText_XY(e)+""}return n},t.BAO_JIU=13,t.ZHA_DAN=12,t.SAN_GONG=11,t}();t.SGType=n,__reflect(n.prototype,"card.SGType");var i=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=-1),void 0===n&&(n=null),this.pokers=t,this.type=e,this.values=n}return t.prototype.toString=function(){return" "+n.toString(this.type)+" - "+this.pokers+" - :"+this.values},t.prototype.compare=function(t){if(this.type<t.type)return-1;if(this.type>t.type)return 1;for(var e=0;e<this.values.length;e++){if(this.values[e]<t.values[e])return-1;if(this.values[e]>t.values[e])return 1}return 0},t}();t.SGGroupDTO=i,__reflect(i.prototype,"card.SGGroupDTO")}(card||(card={}));var card;!function(t){var e=function(){function e(){}return e.init=function(){null==this._findMap&&(this._findMap=[[i.STRAIGHT_FLUSH,this.isStraightFlush.bind(this),0],[i.FOUR_OF_A_KIND,this.isFourOfAKind.bind(this),1],[i.FULL_HOUSE,this.isFullHouse.bind(this),1],[i.FLUSH,this.isFlush.bind(this),0],[i.STRAIGHT,this.isStraight.bind(this),1],[i.THREE_OF_A_KIND,this.isThreeOfAKind.bind(this),1],[i.TWO_PAIRS,this.isTwoPairs.bind(this),1],[i.ONE_PAIR,this.isOnePair.bind(this),1]])},e.copyArray=function(t){return t.slice()},e.sort1=function(t,e){return t.type<e.type?-1:t.type==e.type?t.point<e.point?1:t.point==e.point?0:-1:1},e.sort2=function(t,e){return t.point<e.point?1:t.point==e.point?t.type<e.type?-1:t.type==e.type?0:1:-1},e.sort3=function(t,e){return e>t?-1:t>e?1:0},e.getPokerGroup=function(e){if(this.init(),null==e||e.length<5)return null;var n=this.copyArray(e);n=n.sort(this.sort1);var r=this.copyArray(e);r=r.sort(this.sort2);for(var o=[n,r],a=0;a<this._findMap.length;a++){var s=this._findMap[a],l=s[0],h=s[1],u=o[s[2]],c=h(u);if(null!=c)return new t.TexasPokerGroupDTO(c[0],l,c[1])}var p=r.splice(0,5);return new t.TexasPokerGroupDTO(p,i.URON,[p[0].point,p[1].point,p[2].point,p[3].point,p[4].point])},e.isStraightFlush=function(t){for(var e=0;e<=t.length-4;e++){if(this._isStraightFlush(t,e,5)){var n=t.splice(e,5);return[n,[n[0].point]]}if(this._isStraightFlush(t,e,4)&&5==t[e].point){var i=this._hasAWithColor(t,t[e].type);if(-1!=i)return n=t.splice(e,4),n.push(t[i]),[n,[n[0].point]]}}return null},e._isStraightFlush=function(t,e,n){if(void 0===n&&(n=5),!this._isStraight(t,e,n))return!1;for(var i=t[e].type,r=e+1;e+n>r;r++)if(i!=t[r].type)return!1;return!0},e._isStraight=function(t,e,n){void 0===n&&(n=5);for(var i=e;e+n-1>i;i++)if(null==t[i+1]||t[i].point-1!=t[i+1].point)return!1;return!0},e._hasAWithColor=function(e,n){for(var i=0;i<e.length;i++)if(e[i].type==n&&e[i].point==t.Point.A)return i;return-1},e.isFourOfAKind=function(t){for(var e=0;e<=t.length-4;e++)if(this.hasSame(t,e,4)){var n=t.splice(e,4);return n.push(t[0]),[n,[n[0].point,n[4].point]]}return null},e.hasSame=function(t,e,n){return t[e].point==t[e+n-1].point},e.isFullHouse=function(t){for(var e=0;e<=t.length-3;e++)if(this.hasSame(t,e,3))for(var n=this.copyArray(t),i=n.splice(e,3),r=0;r<=n.length-2;r++)if(this.hasSame(n,r,2))return i=i.concat(n.splice(r,2)),[i,[i[0].point,i[3].point]];return null},e.isFlush=function(t){for(var e=0;e<=t.length-5;e++)if(this._isFlush(t,e)){var n=t.splice(e,5);return[n,[n[0].point,n[1].point,n[2].point,n[3].point,n[4].point]]}return null},e._isFlush=function(t,e){for(var n=t[e].type,i=e+1;e+5>i;i++)if(n!=t[i].type)return!1;return!0},e.isStraight=function(t){var e=this.skipSame(t);if(e.length<5)return null;for(var n=0;n<=e.length-4;n++){if(this._isStraight(e,n,5)){var i=e.splice(n,5);return[i,[i[0].point]]}if(this._isStraight(e,n,4)&&5==e[n].point){var r=this._hasA(e);if(-1!=r)return i=e.splice(n,4),i.push(e[r]),[i,[i[0].point]]
}}return null},e.skipSame=function(t){for(var e=[],n=[],i=0;i<t.length;i++){var r=t[i];-1==e.indexOf(r.point)&&(e.push(r.point),n.push(r))}return n},e._hasA=function(e){for(var n=0;n<e.length;n++)if(e[n].point==t.Point.A)return n;return-1},e.isThreeOfAKind=function(t){for(var e=0;e<=t.length-3;e++)if(this.hasSame(t,e,3)){var n=this.copyArray(t),i=n.splice(e,3);return i=i.concat(n.splice(0,2)),[i,[i[0].point,i[3].point,i[4].point]]}return null},e.isTwoPairs=function(t){for(var e=0;e<=t.length-2;e++)if(this.hasSame(t,e,2))for(var n=this.copyArray(t),i=n.splice(e,2),r=0;r<=n.length-2;r++)if(this.hasSame(n,r,2))return i=i.concat(n.splice(r,2)),i.push(n.splice(0,1)[0]),[i,[i[0].point,i[2].point,i[4].point]];return null},e.isOnePair=function(t){for(var e=0;e<=t.length-2;e++)if(this.hasSame(t,e,2)){var n=this.copyArray(t),i=n.splice(e,2);return i=i.concat(n.splice(0,3)),[i,[i[0].point,i[2].point,i[3].point,i[4].point]]}return null},e.caculateTypeCombineData=function(t){var e=[],n=this.sortCardListType(t);if(null==n)return void trace("");for(var i=0;i<n.length;i++){var r=n[i];if(null!=r.value)for(var o=0;o<r.value.length;o++){var a=r.value[o];this.find_z_cards(r,a,t,e)}}var s=[];return s=this.filterAddCardsCombine(e,t),this.startAddCards(s),e=this.filterErrorData(e)},e.find_z_cards=function(e,n,i,r){var a=this.filterTargetCards(n,i),s=this.sortCardListType(a);if(null==s){var l=new o;l.w_card=n,l.w_type=e.type;var h=[];h.push(a[0]),h=h.concat(a.slice(a.length-2,a.length)),l.t_card=h,l.t_type=t.SSSPokerGroupType.URON;var u=[];u=t.SSSTool.filterTargetCards(h,a),l.z_card=u,l.z_type=t.SSSPokerGroupType.URON,l.remainCards=a,r.push(l)}else for(var c=0;c<s.length;c++){var p=s[c];if(null!=p.value)for(var d=0;d<p.value.length;d++)if(!(e.type<p.type)){var g=p.value[d];this.find_t_cards(e,n,p,g,i,r)}}},e.find_t_cards=function(e,n,i,r,a,s){var l=n.concat(r);l=this.filterTargetCards(l,a);var h=this.sortCardListType(l);if(null==h){var u=new o;u.w_card=n,u.w_type=e.type,u.z_card=r,u.z_type=i.type,u.t_card=[],u.t_type=t.SSSPokerGroupType.URON,u.remainCards=l,s.push(u)}else for(var c=0;c<h.length;c++){var p=h[c];if(null!=p.value)for(var d=0;d<p.value.length;d++)if(!(i.type<p.type)){var g=p.value[d],u=new o;u.w_card=n,u.w_type=e.type,u.z_card=r,u.z_type=i.type,u.t_card=g,u.t_type=p.type,s.push(u)}}},e.filterAddCardsCombine=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];if(r.remainCards&&r.remainCards.length>0);else{var o=r.w_card.concat(r.z_card).concat(r.t_card);r.remainCards=this.filterTargetCards(o,e)}(5!=r.w_card.length||5!=r.z_card.length||3!=r.t_card.length)&&n.push(r)}return n},e.startAddCards=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.w_card.length<5)for(var r=i.w_card.slice(0,i.w_card.length),o=5-i.w_card.length,a=i.remainCards.length-o,s=a;s>=0;s--){var l=i.remainCards.slice(s,s+o),h=this.getPokerGroup(r.concat(l));if(h.type==i.w_type){l=i.remainCards.splice(s,o),i.w_card=i.w_card.concat(l);break}}if(i.z_card.length<5&&i.z_type!=t.SSSPokerGroupType.URON)for(var u=i.z_card.slice(0,i.z_card.length),o=5-i.z_card.length,a=i.remainCards.length-o,s=a;s>=0;s--){var l=i.remainCards.slice(s,s+o),h=this.getPokerGroup(u.concat(l));if(h.type==i.z_type){l=i.remainCards.splice(s,o),i.z_card=i.z_card.concat(l);break}}if(3!=i.t_card.length){for(var c=i.remainCards.length,p=i.t_card.slice(0,i.t_card.length),d=0;c>d;d++){var g=i.remainCards.shift();-1==i.t_card.indexOf(g)&&i.t_card.push(g)}var f=-1;3==i.t_card.length&&(f=i.t_card[0].point==i.t_card[1].point&&i.t_card[1].point==i.t_card[2].point?t.SSSPokerGroupType.THREE_OF_A_KIND:i.t_card[0].point==i.t_card[1].point||i.t_card[0].point==i.t_card[2].point||i.t_card[1].point==i.t_card[2].point?t.SSSPokerGroupType.ONE_PAIR:t.SSSPokerGroupType.URON,f!=i.t_type&&(i.t_card=p)),i.remainCards=[]}}},e.filterErrorData=function(t){var e=t.length;if(!(0>=e)){for(var n=e-1;n>=0;n--)if(t[n].w_type<t[n].z_type||t[n].z_type<t[n].t_type)t.splice(n,1);else{if(5==t[n].w_card.length&&5==t[n].z_card.length&&3==t[n].t_card.length)continue;t.splice(n,1)}return t}},e.sortCardListType=function(t){for(var e=[i.STRAIGHT_FLUSH,i.FOUR_OF_A_KIND,i.FULL_HOUSE,i.FLUSH,i.STRAIGHT,i.THREE_OF_A_KIND,i.TWO_PAIRS,i.ONE_PAIR],n=e.length,o=[],a=!1,s=0;n>s;s++){var l=e.shift(),h=this.getTypeCards(t,l),u=new r;u.type=l,h.cards.length>0?(u.value=h.cards,a=!0):u.value=null,o.push(u)}if(a){var c=[];if(o.length<4){for(var p=0,d=0;d<o.length&&!(p>=4);d++)if(null!=o[d].value){for(var g=0;g<o[d].value.length;g++)p++;c.push(o[d])}}else for(var f=null,d=0;d<o.length;d++)if(f=o[d],null!=f.value){if(c.length>=4)break;f.value.length>1&&(f.value=[this.filterSameTypeCards(f.value,f.type)]),c.push(f)}return c}return null},e.filterTargetCards=function(t,e){for(var n=[],i=e.length-1;i>=0;i--)-1==t.indexOf(e[i])&&n.push(e[i]);return n},e.getTypeCards=function(t,e){var n=t.concat(),r=t.concat(),o=n.sort(this.sort2),a=r.sort(this.sort1);switch(e){case i.ONE_PAIR:return this.getPairs(o,e);case i.TWO_PAIRS:return this.getTwoPairs(o,e);case i.THREE_OF_A_KIND:return this.getThreeCards(o,e);case i.STRAIGHT:return this.getStraight(o,e);case i.FLUSH:return this.getFlush(a,e);case i.FULL_HOUSE:return this.getFullHouse(o,e);case i.FOUR_OF_A_KIND:return this.getFourKind(o,e);case i.STRAIGHT_FLUSH:return this.getStraightFlush(o,e)}return null},e.getPairs=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1];if(r&&o&&r.point==o.point){if(this.findTargetPoint(n,r))continue;n.push([r,o]),i++}}var a={types:e,cards:n};return a},e.getTwoPairs=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1];if(r&&o&&r.point==o.point){if(this.findTargetPoint(n,r))continue;n.push([r,o]),i++}}for(var a=[],i=0;i<n.length;i++)for(var s=i+1;s<n.length;s++)a.push([n[i][0],n[i][1],n[s][0],n[s][1]]);var l={types:e,cards:a};return l},e.getThreeCards=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],a=t[i+2];if(r&&a&&r.point==a.point){if(this.findTargetPoint(n,r))continue;n.push([r,o,a]),i+=2}}var s={types:e,cards:n};return s},e.findShunzi=function(t,e){if(t[e]){var n=[],i=t[e].point;if(5>i)return null;n.push(t[e]);for(var r=0;4>r;r++){var o=this.findPoint(t,i-1);if(o||i-1!=1||(o=this.findPoint(t,14)),!o)return null;if(n.push(o),i--,5==n.length)return n}return null}},e.findTargetPoint=function(t,e){for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++)if(i[r].point==e.point)return!0;return!1},e.findPoint=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.point==e)return i}return null},e.getStraight=function(t,e){for(var n=[],i=[],r=0;r<t.length;r++){var o=t[r];if(-1==i.indexOf(o.point)){var a=this.findShunzi(t,r);i.push(o.point),a&&(a[0].type==a[1].type&&a[1].type==a[2].type&&a[2].type==a[3].type&&a[3].type==a[4].type?trace(" "):n.push(a))}}var s={types:e,cards:n};return s},e.getFlush=function(e,n){for(var i=[],r=[],o=[],a=[],s=[],l=0;l<e.length;l++){var h=e[l];switch(h.type){case t.Type.SPADE:i.push(h);break;case t.Type.HEART:r.push(h);break;case t.Type.CLUB:o.push(h);break;case t.Type.DIAMOND:a.push(h)}}var u=this.findNInArr(i,5);if(u){for(var l=u.length-1;l>=0;l--)(u[l][0].point==u[l][1].point+1&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1||u[l][0].point==t.Point.A&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1&&2==u[l][4].point)&&(trace(" "+u[l]),u.splice(l,1));s=s.concat(u)}var c=this.findNInArr(r,5);if(c){for(var l=c.length-1;l>=0;l--)(c[l][0].point==c[l][1].point+1&&c[l][1].point==c[l][2].point+1&&c[l][2].point==c[l][3].point+1&&c[l][3].point==c[l][4].point+1||c[l][0].point==t.Point.A&&c[l][1].point==c[l][2].point+1&&c[l][2].point==c[l][3].point+1&&c[l][3].point==c[l][4].point+1&&2==c[l][4].point)&&(trace(" "+c[l]),c.splice(l,1));s=s.concat(c)}var p=this.findNInArr(o,5);if(p){for(var l=p.length-1;l>=0;l--)(p[l][0].point==p[l][1].point+1&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1||p[l][0].point==t.Point.A&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1&&2==p[l][4].point)&&(trace(" "+p[l]),p.splice(l,1));s=s.concat(p)}var d=this.findNInArr(a,5);if(d){for(var l=d.length-1;l>=0;l--)(d[l][0].point==d[l][1].point+1&&d[l][1].point==d[l][2].point+1&&d[l][2].point==d[l][3].point+1&&d[l][3].point==d[l][4].point+1||d[l][0].point==t.Point.A&&d[l][1].point==d[l][2].point+1&&d[l][2].point==d[l][3].point+1&&d[l][3].point==d[l][4].point+1&&2==d[l][4].point)&&(trace(" "+d[l]),d.splice(l,1));s=s.concat(d)}var g={types:n,cards:s};return g},e.findNInArr=function(t,e){if(!t||t.length<e)return null;for(var n=[],i=0;i<=t.length-e;i++){n[i]=[];for(var r=0;e>r;r++)n[i].push(t[i+r])}return n},e.findNInArr2=function(e,n){if(!e||e.length<n)return null;for(var i=[],r=0;r<=e.length-n;r++){i[r]=[];for(var o=0;n>o;o++)i[r].push(e[r+o])}for(var a=[],r=0;r<e.length;r++)(e[r].point==t.Point.A||5==e[r].point||4==e[r].point||3==e[r].point||2==e[r].point)&&a.push(e[r]);return 5==a.length&&i.push(a),i},e.getFullHouse=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],a=t[i+2];if(r&&a&&r.point==a.point){if(this.findTargetPoint(n,r))continue;n.push([r,o,a]),i+=2}}for(var s=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1];if(r&&o&&r.point==o.point){if(this.findTargetPoint(s,r))continue;s.push([r,o]),i++}}var l=[],h={types:e,cards:l};if(n.length<=0||s.length<=0)return h;for(var i=0;i<n.length;i++)for(var u=0;u<s.length;u++)s[u][0].point!=n[i][0].point&&l.push([n[i][0],n[i][1],n[i][2],s[u][0],s[u][1]]);return h},e.getFourKind=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],a=t[i+2],s=t[i+3];r&&s&&r.point==s.point&&(n.push([r,o,a,s]),i+=3)}var l=[],h={types:e,cards:l};if(n.length<=0)return h;for(var u=-1,i=0;i<n.length;i++)for(var c=(n[i][0].point,0);c<t.length;c++)if(t[c].point!=n[i][0].point){if(-1==u)u=t[c].point;else{if(t[c].point==u)continue;u=t[c].point}l.push([n[i][0],n[i][1],n[i][2],n[i][3],t[c]])}return h},e.getStraightFlush=function(e,n){for(var i=[],r=[],o=[],a=[],s=[],l=0;l<e.length;l++){var h=e[l];switch(h.type){case t.Type.SPADE:i.push(h);break;case t.Type.HEART:r.push(h);break;case t.Type.CLUB:o.push(h);break;case t.Type.DIAMOND:a.push(h)}}var u=this.findNInArr2(i,5);if(u){for(var c=[],l=u.length-1;l>=0;l--)(u[l][0].point==u[l][1].point+1&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1||u[l][0].point==t.Point.A&&u[l][1].point==u[l][2].point+1&&u[l][2].point==u[l][3].point+1&&u[l][3].point==u[l][4].point+1&&2==u[l][4].point)&&c.push([u[l][0],u[l][1],u[l][2],u[l][3],u[l][4]]);s=s.concat(c)}var p=this.findNInArr2(r,5);if(p){for(var d=[],l=p.length-1;l>=0;l--)(p[l][0].point==p[l][1].point+1&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1||p[l][0].point==t.Point.A&&p[l][1].point==p[l][2].point+1&&p[l][2].point==p[l][3].point+1&&p[l][3].point==p[l][4].point+1&&2==p[l][4].point)&&d.push([p[l][0],p[l][1],p[l][2],p[l][3],p[l][4]]);s=s.concat(d)}var g=this.findNInArr2(o,5);if(g){for(var f=[],l=g.length-1;l>=0;l--)(g[l][0].point==g[l][1].point+1&&g[l][1].point==g[l][2].point+1&&g[l][2].point==g[l][3].point+1&&g[l][3].point==g[l][4].point+1||g[l][0].point==t.Point.A&&g[l][1].point==g[l][2].point+1&&g[l][2].point==g[l][3].point+1&&g[l][3].point==g[l][4].point+1&&2==g[l][4].point)&&f.push([g[l][0],g[l][1],g[l][2],g[l][3],g[l][4]]);s=s.concat(f)}var _=this.findNInArr2(a,5);if(_){for(var m=[],l=_.length-1;l>=0;l--)(_[l][0].point==_[l][1].point+1&&_[l][1].point==_[l][2].point+1&&_[l][2].point==_[l][3].point+1&&_[l][3].point==_[l][4].point+1||_[l][0].point==t.Point.A&&_[l][1].point==_[l][2].point+1&&_[l][2].point==_[l][3].point+1&&_[l][3].point==_[l][4].point+1&&2==_[l][4].point)&&m.push([_[l][0],_[l][1],_[l][2],_[l][3],_[l][4]]);s=s.concat(m)}var y={types:n,cards:s};return y},e.filterSameTypeCards=function(t,e){var n;switch(e){case i.STRAIGHT_FLUSH:t=t.sort(this.sortStraight_Flush),n=t[0];break;case i.FOUR_OF_A_KIND:t=t.sort(this.sortTypePoint),n=t[0];break;case i.FULL_HOUSE:t=t.sort(this.sortTypePoint),n=t[0];break;case i.FLUSH:t=t.sort(this.sortTypePoint2),n=t[0];break;case i.STRAIGHT:t=t.sort(this.sortStraight_Flush),n=t[0];break;case i.THREE_OF_A_KIND:t=t.sort(this.sortTypePoint),n=t[0];break;case i.TWO_PAIRS:t=t.sort(this.sortTypePoint3),n=t[0];break;case i.ONE_PAIR:t=t.sort(this.sortTypePoint),n=t[0]}return n},e.sortTypePoint3=function(t,e){var n=t[0].point,i=e[0].point;return n>i?-1:n==i?t[2].point>=e[2].point?-1:t[2].point==e[2].point?0:1:1},e.sortTypePoint2=function(t,e){var n=t[0].point,i=e[0].point;return n>i?-1:n==i?t[1].point>=e[1].point?-1:t[1].point==e[1].point?0:1:1},e.sortTypePoint=function(t,e){var n=t[0].point,i=e[0].point;return n>i?-1:n==i?-1:1},e.sortStraight_Flush=function(t,e){var n=t[0].point,i=t[4].point,r=e[0].point,o=e[4].point;return n>r?-1:n==r?i>o?-1:i==o?0:1:1},e.compareCommonCards=function(t,e){t=t.sort(this.sort2),e=e.sort(this.sort2);for(var n=0;n<t.length;n++){if(t[n].point>e[n].point)return!0;if(t[n].point<e[n].point)return!1}return!1},e.get_t_cardtype=function(e){if(null==e||0==e.length||e.length<3)return-1;var n=0;return n=e[0].point==e[1].point&&e[1].point==e[2].point?t.SSSPokerGroupType.THREE_OF_A_KIND:e[0].point==e[1].point||e[0].point==e[2].point||e[1].point==e[2].point?t.SSSPokerGroupType.ONE_PAIR:t.SSSPokerGroupType.URON},e.get_z_cardtype=function(e){if(null==e||0==e.length||e.length<5)return-1;var n=-1,i=t.SSSTool.getPokerGroup(e);return null!=i&&(n=i.type),n},e.checkPourWater=function(t,e,n,i){var r=this.get_t_cardtype(e),o=this.get_z_cardtype(n),a=this.get_z_cardtype(i),s=!1,l=!1;switch(t){case 0:-1!=r&&-1!=o&&(s=this.compareType(r,e,o,n)),-1!=r&&-1!=a&&(l=this.compareType(r,e,a,i));break;case 1:-1!=r&&-1!=o&&(s=this.compareType(r,e,o,n)),-1!=o&&-1!=a&&(l=this.compareType(o,n,a,i));break;case 2:-1!=r&&-1!=a&&(s=this.compareType(r,e,a,i)),-1!=o&&-1!=a&&(l=this.compareType(o,n,a,i))}return s||l},e.compareType=function(e,n,i,r){var o=n.slice(0,n.length),a=r.slice(0,r.length);if(e>i)return!0;if(e==i){o=o.sort(this.sort2),a=a.sort(this.sort2);var s=[],l=[],h=[],u=[];if(e==t.SSSPokerGroupType.URON)return this.compareCommonCards(o,a);switch(s=this.getTypeCards(o,e).cards[0],l=this.getTypeCards(a,i).cards[0],e){case t.SSSPokerGroupType.ONE_PAIR:if(s[0].point>l[0].point)return!0;if(s[0].point==l[0].point)return h=this.filterTargetCards(s,o),u=this.filterTargetCards(l,a),this.compareCommonCards(h,u);case t.SSSPokerGroupType.TWO_PAIRS:if(s[0].point>l[0].point)return!0;if(s[0].point==l[0].point&&s[2].point>l[2].point)return!0;if(s[0].point==l[0].point&&s[2].point==l[2].point)return h=this.filterTargetCards(s,o),u=this.filterTargetCards(l,a),this.compareCommonCards(h,u);case t.SSSPokerGroupType.THREE_OF_A_KIND:return s[0].point>l[0].point?!0:!1;case t.SSSPokerGroupType.STRAIGHT:var c=s[0],p=s[4],d=l[0],g=l[4],f=0,_=0;return f=5==c.point&&p.point==t.Point.A?13.5:c.point,_=5==d.point&&g.point==t.Point.A?13.5:d.point,f>_?!0:!1;case t.SSSPokerGroupType.FLUSH:return s=s.sort(this.sort2),l=l.sort(this.sort2),this.compareCommonCards(s,l);case t.SSSPokerGroupType.FULL_HOUSE:var c=s[0],d=l[0];return c.point>d.point?!0:!1;case t.SSSPokerGroupType.FOUR_OF_A_KIND:var c=s[0],d=l[0];return c.point>d.point?!0:!1;case t.SSSPokerGroupType.STRAIGHT_FLUSH:var c=s[0],p=s[4],d=l[0],g=l[4],f=0,_=0;return f=5==c.point&&p.point==t.Point.A?13.5:c.point,_=5==d.point&&g.point==t.Point.A?13.5:d.point,f>_?!0:!1}}return!1},e._findMap=null,e}();t.SSSTool=e,__reflect(e.prototype,"card.SSSTool");var n=function(){function t(){}return t.getScore=function(t){return this._mapScore[t-100]},t.ZZQL=112,t.YTL=111,t.SEHZ=110,t.STHS=109,t.SFTX=108,t.QD=107,t.QX=106,t.CYS=105,t.STST=104,t.WDST=103,t.LDB=102,t.SSZ=101,t.STH=100,t._mapScore=[3,4,4,5,6,10,10,10,20,20,24,36,108],t}();t.SSSSpecialCardType=n,__reflect(n.prototype,"card.SSSSpecialCardType");var i=function(){function t(){}return t.STRAIGHT_FLUSH=8,t.FOUR_OF_A_KIND=7,t.FULL_HOUSE=6,t.FLUSH=5,t.STRAIGHT=4,t.THREE_OF_A_KIND=3,t.TWO_PAIRS=2,t.ONE_PAIR=1,t.URON=0,t}();t.SSSPokerGroupType=i,__reflect(i.prototype,"card.SSSPokerGroupType");var r=function(){function t(){}return t}();t.SSSTypeCardsCombines=r,__reflect(r.prototype,"card.SSSTypeCardsCombines");var o=function(){function t(){}return t.prototype.getPower=function(){return this.t_type+this.w_type+this.z_type},t}();t.CombineCards=o,__reflect(o.prototype,"card.CombineCards");var a=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=-1),void 0===n&&(n=null),this.pokers=t,this.type=e,this.values=n}return t.prototype.compare=function(t){if(this.type<t.type)return-1;if(this.type>t.type)return 1;for(var e=0;e<this.values.length;e++){if(this.values[e]<t.values[e])return-1;if(this.values[e]>t.values[e])return 1}return 0},t}();t.SSSTexasPokerGroupDTO=a,__reflect(a.prototype,"card.SSSTexasPokerGroupDTO")}(card||(card={}));var card;!function(t){var e;!function(t){t[t.JOKER=4]="JOKER",t[t.SPADE=3]="SPADE",t[t.HEART=2]="HEART",t[t.CLUB=1]="CLUB",t[t.DIAMOND=0]="DIAMOND"}(e=t.Type||(t.Type={}))}(card||(card={}));var ActionSheet=function(t){function e(){var e=t.call(this)||this,n='<e:Skin xmlns:e="http://ns.egret.com/eui">\n				<e:Rect id="bg" left="0" right="0" top="0" bottom="0" fillAlpha="0.6"/>\n                <e:Scroller id="scl" height="700" width="442" verticalCenter="0" horizontalCenter="0">\n				<e:Skin>\n					<e:VScrollBar id="verticalScrollBar" width="11" height="100%" right="-20">\n						<e:Skin>\n							<e:Rect height="100%" width="6" fillAlpha="0.2" fillColor="0x333333" ellipseWidth="15" ellipseHeight="15" />\n							<e:Rect id="thumb" height="150" width="6" fillAlpha="0.5" fillColor="0x333333" ellipseWidth="15" ellipseHeight="15" />\n						</e:Skin>\n					</e:VScrollBar>\n				</e:Skin>\n				<e:List id="lst">\n					<e:itemRendererSkinName>\n						<e:Skin states="up,down" height="70">\n							<e:Rect width="100%" height="68" x="1" fillColor="0xf1f1f1" fillColor.down="0x04b2f1" />\n							<e:Label size="28" fontFamily="" text="{data}" textAlign="center" width="442" textColor="0x555555" textColor.down="0xffffff" verticalCenter="0"/>\n						</e:Skin>\n					</e:itemRendererSkinName>\n				</e:List>\n			</e:Scroller>\n            </e:Skin>';return e.skinName=n,e.width=Global.stage.stageWidth,e.height=Global.stage.stageHeight,e.lst.dataProvider=new eui.ArrayCollection([]),e.scl.scrollPolicyH=eui.ScrollPolicy.OFF,e.scl.verticalScrollBar.autoVisibility=!1,e.lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,e.onChange,e),bindTapEvent_XY(e.bg,e.onHide,e),e}return __extends(e,t),e.getInstance=function(){return e.ins||(e.ins=new e),e.ins},e.prototype.onChange=function(t){this.mCall&&this.mCall.apply(this.mObj,[this.lst.selectedItem]),this.close()},e.prototype.onHide=function(){this.mCancelCall&&this.mCancelCall.apply(this.mObj),this.close()},e.prototype.showList=function(t,e,n,i,r){var o=this;Global.stage.addChild(this),tween_XY_alphaShow(this),this.width=Global.stage.stageWidth,this.height=Global.stage.stageHeight,this.mCall=n,this.mObj=i,this.mCancelCall=r,this.lst.dataProvider.source=t,this.lst.selectedItem=e;var a=70*t.length;a>700&&(a=700),this.scl.height=a,this.scl.y=(700-a)/2+215;var s,l=64*t.length-a;0>=l?(s=0,this.scl.verticalScrollBar.visible=!1):(s=Math.min(Math.max(0,70*(t.indexOf(e)-5)),l),this.scl.verticalScrollBar.visible=!0),egret.setTimeout(function(t){o.lst.scrollV=t},this,100,[s]),this.scl.validateDisplayList()},e.prototype.close=function(){remove_XY(this),this.mCall=null,this.mObj=null},e}(eui.Component);__reflect(ActionSheet.prototype,"ActionSheet");var ActionSheetFck=function(t){function e(){var e=t.call(this)||this;return e.skinName='<?xml version="1.0" encoding="utf-8"?>\n            <e:Skin class="ActionSheetFckSkin" width="750" height="1206" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n                <e:Rect id="bgMask" fillAlpha="0.7" top="0" bottom="0" left="0" right="0"/>\n                <e:Group id="contentGrp" x="0" width="750" y="0" height="400">\n                    <e:Rect fillColor="0xffffff" left="0" right="0" top="0" bottom="0"/>\n                    <e:Label id="titleTf" text="" y="0" height="100" textColor="0x333333" verticalAlign="middle" right="0" left="30"/>\n                    \n                    <e:List id=\'lst\' top="100" />\n                    <e:Label id="closeTf" text="" height="100" verticalAlign="middle" textColor="0x5863f3" textAlign="center" left="0" right="0" bottom="0"/>\n                    <e:Rect height="1" fillColor="0xCCCCCC" left="0" right="0" top="100"/>\n                    <e:Rect height="1" fillColor="0xCCCCCC" left="0" right="0" bottom="100"/>\n                    <e:Image id="arrowImg" source="12_png" x="30" y="123" width="32" height="22" anchorOffsetY="11"/>\n                </e:Group>\n            </e:Skin>',e.width=Global.stage.stageWidth,e.height=Global.stage.stageHeight,bindTapEvent_XY(e.bgMask,e.onClose,e),bindTapEvent_XY(e.closeTf,e.onClose,e),e.dataSource=e.lst.dataProvider=new eui.ArrayCollection([]),e.lst.useVirtualLayout=!1,e.lst.allowMultipleSelection=!1,e.lst.itemRenderer=FckSheetItem,e.lst.addEventListener(egret.Event.CHANGE,e.onChange,e),e}return __extends(e,t),e.getInstance=function(){return e.ins||(e.ins=new e),e.ins},e.prototype.onChange=function(){this.selectedIndex=this.lst.selectedIndex,this.updateSelectedIndex(),this.onSave()},e.prototype.onClose=function(){this.hideFun(!0)},e.prototype.hideFun=function(t){var e=this;ResizeCall.del(this.onResize,this),tween_XY_alphaHide(this.bgMask),Tween$.removeTweens(this.contentGrp),Tween$.get(this.contentGrp).to({y:Global.stage.stageHeight},200,Ease$.sineOut).call(function(){remove_XY(e),t&&e.mCancelCall&&e.mCancelCall.apply(e.mObj)},this)},e.prototype.onSave=function(){if(this.mCall){var t=this.dataSource.source[this.selectedIndex],e=t.label1||t.label0||"";this.mCall.apply(this.mObj,[e,this.selectedIndex])}this.hideFun(!1)},e.prototype.showListWithMode1=function(t,e,n,i,r,o){void 0===o&&(o=-1),this.mCall=n,this.mObj=i,this.mCancelCall=r,this.selectedIndex=0;for(var a=[],s=0;s<t.length;s++){var l=t[s],h=l.split("  ");a.push({label0:h[0],label1:h[1]||""}),(h[0]==e||h[1]==e)&&(this.selectedIndex=s)}this.dataSource.source=a,this.dataSource.refresh(),this.contentGrp.height=100*a.length+200,this.updateSelectedIndex(),this.showView()},e.prototype.updateSelectedIndex=function(){this.arrowImg.y=100+100*this.selectedIndex+50},e.prototype.showView=function(){Global.stage.addChild(this),this.contentGrp.y=Global.stage.stageHeight,tween_XY_alphaShow(this.bgMask),Tween$.removeTweens(this.contentGrp),Tween$.get(this.contentGrp).to({y:Global.stage.stageHeight-this.contentGrp.height},200,Ease$.sineOut),ResizeCall.addCall(this.onResize,this)},e.prototype.onResize=function(){this.width=Global.stage.stageWidth,this.height=Global.stage.stageHeight,Tween$.removeTweens(this.contentGrp),this.contentGrp.y=Global.stage.stageHeight-this.contentGrp.height},e}(eui.Component);__reflect(ActionSheetFck.prototype,"ActionSheetFck");var FckSheetItem=function(t){function e(){var e=t.call(this)||this;return e.skinName='\n            <?xml version="1.0" encoding="utf-8"?>\n        <e:Skin class="FckSheetItemSkin" width="750" height="100" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n            <e:Rect top="0" bottom="0" left="0" right="0" fillColor="0xffffff"/>\n            <e:Rect width="32" height="32" x="30" fillColor="0xcccccc" strokeWeight="2" fillAlpha="0" strokeAlpha="1" strokeColor="0xcccccc" ellipseWidth="10" verticalCenter="0"/>\n            <e:Label id="tf0" text="" x="80" textColor="0x333333" verticalCenter="0"/>\n            <e:Label text="" id="tf1" verticalCenter="0" right="30" textColor="0xfd5959"/>\n        </e:Skin>',e}return __extends(e,t),e.prototype.dataChanged=function(){this.tf0.text=this.data.label0||"",this.tf1.text=this.data.label1||""},e}(eui.ItemRenderer);__reflect(FckSheetItem.prototype,"FckSheetItem");var ActionSheetIOS=function(t){function e(){var e=t.call(this)||this;return e.sheetItems=[],e.width=Global.stage.stageWidth,e.height=Global.stage.stageHeight,e.bg=new eui.Rect,e.bg.fillAlpha=.7,e.bg.fillColor=3355443,e.bg.top=e.bg.bottom=e.bg.left=e.bg.right=0,e.addChild(e.bg),e.grp=new eui.Group,e.addChild(e.grp),e.grp.left=e.grp.right=0,e.btnBg=new eui.Rect,e.btnBg.fillColor=16119285,e.btnBg.left=e.btnBg.right=e.btnBg.bottom=e.btnBg.top=0,e.grp.addChild(e.btnBg),e.cancelItem=new SheetItem,e.cancelItem.setText(i18n("")),e.cancelItem.bottom=0,e.grp.addChild(e.cancelItem),bindTapEvent_XY(e.bg,e.onHide,e),bindTapEvent_XY(e.cancelItem,e.onHide,e),e}return __extends(e,t),e.getInstance=function(){return e.ins||(e.ins=new e),e.ins},e.prototype.onChange=function(t){for(var e=this,n=0,i=0;i<this.sheetItems.length;i++){var r=this.sheetItems[i];if(r==t.currentTarget){n=i;break}}this.close(function(){e.mCall&&e.mCall.apply(e.mObj,[n])})},e.prototype.onHide=function(){var t=this;this.close(function(){t.mCancelCall&&t.mCancelCall.apply(t.mObj)})},e.prototype.showList=function(t,e,n,i,r){Global.stage.addChild(this),tween_XY_alphaShow(this.bg),this.mCall=e,this.mObj=n,this.mCancelCall=i;for(var o=0;o<this.sheetItems.length;o++){var a=this.sheetItems[o];remove_XY(a),a.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChange,this)}var s=120+102*t.length;this.grp.height=s;for(var l=0;l<t.length;l++){var a=t[l],h=this.sheetItems[l]||new SheetItem;this.sheetItems[l]=h,h.setText(a),h.bottom=120+102*(t.length-l-1),this.grp.addChild(h),h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChange,this)}Tween$.removeTweens(this.grp),this.grp.y=Global.stage.stageHeight,Tween$.get(this.grp).to({y:Global.stage.stageHeight-this.grp.height},200,Ease$.sineOut).call(function(){r&&r()})},e.prototype.close=function(t){var e=this;tween_XY_alphaHide(this.bg),Tween$.removeTweens(this.grp),this.grp.y=Global.stage.stageHeight-this.grp.height,Tween$.get(this.grp).to({y:Global.stage.stageHeight},200,Ease$.sineOut).call(function(){remove_XY(e),t(),e.mCall=null,e.mObj=null},this)},e}(eui.Component);__reflect(ActionSheetIOS.prototype,"ActionSheetIOS");var SheetItem=function(t){function e(){var e=t.call(this)||this;return e.bg=new eui.Rect,e.bg.fillColor=16777215,e.bg.top=e.bg.bottom=e.bg.left=e.bg.right=0,e.addChild(e.bg),e.tf=new eui.Label,e.tf.textAlign="center",e.tf.verticalAlign="middle",e.tf.size=30,e.tf.textColor=3355443,e.tf.top=e.tf.bottom=e.tf.left=e.tf.right=0,e.addChild(e.tf),e.left=e.right=0,e.height=100,e}return __extends(e,t),e.prototype.setText=function(t){setHtmlText(this.tf,t)},e}(eui.Component);__reflect(SheetItem.prototype,"SheetItem");var ActionSheetNative=function(t){function e(){var e=t.call(this)||this;return e.skinName='<?xml version="1.0" encoding="utf-8"?>\n            <e:Skin class="ActionSheetNativeSkin" width="750" height="1206" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n                <e:Rect id="bgMask" fillAlpha="0.7" top="0" bottom="0" left="0" right="0"/>\n                <e:Group id="contentGrp" height="486" left="0" right="0">\n                    <e:Rect id="contentBg" height="400" left="0" right="0" fillColor="0xffffff" bottom="0"/>\n                    <e:Rect id="topBg" height="86" left="0" right="0" top="0" fillColor="0xeeeeee"/>\n                    <e:Label id="cancelBtn" text="" textColor="0x2c77c8" fontFamily="Microsoft YaHei" height="86" verticalAlign="middle" textAlign="center" anchorOffsetX="0" top="0" width="176" left="0"/>\n                    <e:Label id="saveBtn" text="" textColor="0x2C77C8" fontFamily="Microsoft YaHei" height="86" top="0" verticalAlign="middle" textAlign="center" anchorOffsetX="0" width="176" right="0"/>\n                    <e:Rect touchEnabled="false" id="choosedMask" height="80" strokeColor="0xcccccc" fillAlpha="0" strokeWeight="1" y="246" left="-1" right="-1" touchChildren="false"/>\n                </e:Group>\n            </e:Skin>',e.width=Global.stage.stageWidth,e.height=Global.stage.stageHeight,e.cancelBtn.text=i18n(""),e.saveBtn.text=i18n(""),bindTapEvent_XY(e.bgMask,e.onClose,e),bindTapEvent_XY(e.cancelBtn,e.onClose,e),bindTapEvent_XY(e.saveBtn,e.onSave,e),e}return __extends(e,t),e.getInstance=function(){return e.ins||(e.ins=new e),e.ins},e.prototype.onClose=function(){this.hideFun(!0)},e.prototype.hideFun=function(t){var e=this;tween_XY_alphaHide(this.bgMask),Tween$.removeTweens(this.contentGrp),Tween$.get(this.contentGrp).to({y:Global.stage.stageHeight},200,Ease$.sineOut).call(function(){remove_XY(e),e.mSelector0&&(e.mSelector0.clear(),remove_XY(e.mSelector0)),e.mSelector1&&(e.mSelector1.clear(),remove_XY(e.mSelector1)),t&&e.mCancelCall&&e.mCancelCall.apply(e.mObj)},this)},e.prototype.onSave=function(){1==this.showMode?this.mCall&&this.mCall.apply(this.mObj,[this.mSelector0.getSelectedItemData()]):2==this.showMode&&this.mCall&&this.mCall.apply(this.mObj,[this.mSelector0.getSelectedItemData(),this.mSelector1.getSelectedItemData()]),this.hideFun(!1)},e.prototype.showListWithMode1=function(t,e,n,i,r){this.showMode=1,this.mCall=n,this.mObj=i,this.mCancelCall=r,this.mSelector0||(this.mSelector0=new SheetSelector,this.mSelector0.addEventListener(egret.Event.CHANGE,this.onData1Change,this),this.mSelector0.addEventListener("startScroll",this.onStartScroll,this),this.mSelector0.addEventListener("endScroll",this.onEndScroll,this)),this.contentGrp.addChildAt(this.mSelector0,1),this.mSelector0.width=Global.stage.stageWidth,this.mSelector0.y=90,this.mSelector0.setDataSource(t),this.mSelector0.setSelectedItemData(e),this.showView()},e.prototype.showListWithMode2=function(t,e,n,i,r,o,a,s){this.showMode=2,this.mCall=o,this.mObj=a,this.mCancelCall=s,this.mSource1SelectedChange=r,this.mSelector0||(this.mSelector0=new SheetSelector,this.mSelector0.addEventListener(egret.Event.CHANGE,this.onData1Change,this),this.mSelector0.addEventListener("startScroll",this.onStartScroll,this),this.mSelector0.addEventListener("endScroll",this.onEndScroll,this)),this.contentGrp.addChildAt(this.mSelector0,1),this.mSelector0.width=Global.stage.stageWidth/2,this.mSelector0.y=90,this.mSelector0.setDataSource(t),this.mSelector0.setSelectedItemData(e),this.mSelector1||(this.mSelector1=new SheetSelector,this.mSelector1.addEventListener("startScroll",this.onStartScroll,this),this.mSelector1.addEventListener("endScroll",this.onEndScroll,this)),this.contentGrp.addChildAt(this.mSelector1,1),this.mSelector1.width=Global.stage.stageWidth/2,this.mSelector1.x=Global.stage.stageWidth/2,this.mSelector1.y=90,this.mSelector1.setDataSource(n),this.mSelector1.setSelectedItemData(i),this.showView()},e.prototype.onStartScroll=function(t){t.currentTarget==this.mSelector0?this.sheetScrolling1=!0:this.sheetScrolling2=!0,this.scrollStateUpdate()},e.prototype.onEndScroll=function(t){t.currentTarget==this.mSelector0?this.sheetScrolling1=!1:this.sheetScrolling2=!1,this.scrollStateUpdate()},e.prototype.scrollStateUpdate=function(){var t=this.sheetScrolling1||this.sheetScrolling2;this.saveBtn.textColor=t?10000536:2914248,this.saveBtn.touchEnabled=!t},e.prototype.onData1Change=function(t){if(2==this.showMode&&this.mSource1SelectedChange){if(null==this.mSelector0.getSelectedItemData())return;var e=this.mSource1SelectedChange.apply(this.mObj,[this.mSelector0.getSelectedItemData()]);this.mSelector1.setDataSource(e.source2),this.mSelector1.setSelectedItemData(e.currentValue2)}},e.prototype.showView=function(){Global.stage.addChild(this),this.contentGrp.y=Global.stage.stageHeight,tween_XY_alphaShow(this.bgMask),Tween$.removeTweens(this.contentGrp),Tween$.get(this.contentGrp).to({y:Global.stage.stageHeight-486},200,Ease$.sineOut)},e}(eui.Component);__reflect(ActionSheetNative.prototype,"ActionSheetNative");var SheetSelector=function(t){function e(){var e=t.call(this)||this;e.proxyArr=[],e.touchStartY=0,e.skinName='\n            <?xml version="1.0" encoding="utf-8"?>\n            <e:Skin class="SelectorSkin" width="400" height="400" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n                <e:Rect left="0" right="0" top="0" bottom="0" fillAlpha="0"/>\n            </e:Skin>\n        ';
var n=new eui.sys.TouchScroll(e.onTouching,e.onTouchComplete,e),i=e,r=n.throwTo.bind(n),o=function(t,e){if(0>=t||t>=i.dataHeight)r(t,e);else{var n=int_XY(t/80),o=t%80;o>=40&&n++,t=80*n,r(t,e)}};return n.throwTo=o.bind(n),e.tfPool=[],e.mTouchScroll=n,e.scrollV=0,e.renderTf(),e.touchMoved=!1,e.touchCancle=!1,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onBeginTouch,e),e}return __extends(e,t),e.prototype.setDataSource=function(t){this.dispatchEventWith("endScroll"),this.mTouchScroll.stop();for(var e=0;e<this.proxyArr.length;e++){var n=this.proxyArr[e];n.renderItem&&(remove_XY(n.renderItem),this.collectRenderItem(n.renderItem)),SheetSelectorProxy.collect(n)}this.datas=t,this.dataHeight=80*this.datas.length-80,this.lastStartIndex=this.datas.length,this.lastEndIndex=0,this.proxyArr=[];for(var i=0;i<this.datas.length;i++)this.proxyArr[i]=SheetSelectorProxy.make(),this.proxyArr[i].data=this.datas[i];this.dataLen=this.datas.length,this.setSelectedItemIndex(0)},e.prototype.getSelectedItemData=function(){var t=this.scrollV,e=int_XY(t/80),n=t%80;n>=40&&e++;var i=this.proxyArr[e];return i?i.data:null},e.prototype.setSelectedItemData=function(t){var e=this.datas.indexOf(t);-1==e&&(e=0),this.setSelectedItemIndex(e)},e.prototype.setSelectedItemIndex=function(t){this.scrollV=80*t,this.renderTf()},e.prototype.clear=function(){this.onRemoveListeners(),this.mTouchScroll.stop(),this.datas=[];for(var t=0;t<this.proxyArr.length;t++){var e=this.proxyArr[t];e.renderItem&&(remove_XY(e.renderItem),this.collectRenderItem(e.renderItem)),SheetSelectorProxy.collect(e)}this.proxyArr=[]},e.prototype.onTouching=function(t){this.scrollV=t,this.renderTf()},e.prototype.onTouchComplete=function(){this.dispatchEventWith(egret.Event.CHANGE,!1,this.getSelectedItemData()),this.dispatchEventWith("endScroll")},e.prototype.onBeginTouch=function(t){Tween$.removeTweens(this),this.touchStartY=t.stageY,this.mTouchScroll.stop(),this.mTouchScroll.start(t.stageY),this.onRemoveListeners(),Global.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),Global.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,!0),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this),this.dispatchEventWith("startScroll")},e.prototype.onTouchMove=function(t){this.mTouchScroll.update(t.stageY,this.dataHeight,this.scrollV)},e.prototype.onTouchCancel=function(t){this.touchMoved||this.onRemoveListeners()},e.prototype.onRemoveListeners=function(){Global.stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),Global.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),Global.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,!0),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},e.prototype.onTouchEnd=function(t){this.touchMoved=!1,this.onRemoveListeners(),this.mTouchScroll.isStarted()&&this.mTouchScroll.finish(this.scrollV,this.dataHeight)},e.prototype.renderTf=function(){for(var t=this,e=-t.scrollV+160,n=Math.max(int_XY(-e/80)-1,0),i=Math.min(n+7,t.dataLen),r=Math.min(n,t.lastStartIndex),o=Math.max(i,t.lastEndIndex),a=r;o>a;a++){var s=t.proxyArr[a];if(s){if(!s.renderItem){var l=t.makeRenderItem();s.setRenderItem(l),t.addChild(l)}s.updateY(e+80*a),(s.y<=-80||s.y>=400)&&(remove_XY(s.renderItem),t.collectRenderItem(s.renderItem),s.renderItem=null)}}this.lastStartIndex=n,this.lastEndIndex=i},e.prototype.makeRenderItem=function(){var t;return t=this.tfPool.length<=0?this.itemRenderFun():this.tfPool.shift(),t.width=this.width,t.anchorOffsetX=this.width/2,t.x=this.width/2,t},e.prototype.collectRenderItem=function(t){this.tfPool.push(t)},e.prototype.itemRenderFun=function(){var t=new eui.Label;return t.fontFamily="Microsoft YaHei",t.height=80,t.width=this.width,t.verticalAlign="middle",t.textAlign="center",t.textColor=10000536,t.touchEnabled=!1,centerAnchor_XY(t),t},e}(eui.Component);__reflect(SheetSelector.prototype,"SheetSelector");var SheetSelectorProxy=function(){function t(){}return t.make=function(){var e;return e=t.pool.length>0?t.pool.shift():new t},t.collect=function(e){e.clear(),t.pool.push(e)},t.prototype.setRenderItem=function(t){this.renderItem=t,this.renderItem.text=this.data},t.prototype.updateY=function(t){this.renderItem.scaleX=this.renderItem.scaleY=(160-Math.abs(t-160))/160*.2+.8,t+=40,this.y=t,this.renderItem.y=t,this.renderItem.textColor=t>160&&240>t?3045066:10000536},t.prototype.clear=function(){this.data=null,this.renderItem=null,this.y=0},t.pool=[],t}();__reflect(SheetSelectorProxy.prototype,"SheetSelectorProxy");var Chat_EmojiRender=function(t){function e(){var e=t.call(this)||this;return e.skinName=ChatSkinConfig.Chat_EmojiRenderSkin,bindTapEvent_XY(e,e.clickFunc,e),e}return __extends(e,t),e.prototype.clickFunc=function(){var t=new ChatDTO;t.uid=Global.uid,t.type=1,t.chat=this.itemIndex+"",ChatManager.sendChat(t)},e.prototype.dataChanged=function(){this.face.source="Game_face_model_"+(this.itemIndex+1)+"_png"},e}(eui.ItemRenderer);__reflect(Chat_EmojiRender.prototype,"Chat_EmojiRender");var Chat_Info=function(t){function e(e){var n=t.call(this)||this;return n.skinName=ChatSkinConfig["Chat_Info"+e+"Skin"],n.type=e,n.bornRight=n.info.right,n.ctrl=new MovieclipController(n.imageModel,10,[]),n.ctrl.addEventListener(egret.Event.COMPLETE,function(){n.onHide()},!0),n}return __extends(e,t),e.prototype.setData=function(t){if(t){if(this.ctrl.stop(),this.emoGrp.visible=1==t.type,this.txtGrp.visible=1!=t.type,egret.clearTimeout(this.timer),1==t.type){var e=int_XY(t.chat);this.ctrl.updateResLoop(ChatManager.emojiMcConfigCache[e]),this.ctrl.gotoAndStop(0),this.ctrl.play()}else{if(t.chat&&t.chat.length>3)this.info.text=t.chat;else{var n=int_XY(t.chat);this.info.text=ChatManager.chatTextConfig[n]||""}this.timer=egret.setTimeout(this.onHide,this,3e3),tween_XY_alphaShow(this.txtGrp)}egret.callLater(this.layout,this),this.layout()}},e.prototype.onHide=function(){egret.clearTimeout(this.timer),remove_XY(this),this.ctrl.stop()},e.prototype.layout=function(){switch(this.txtGrp.width=this.info.textWidth+16+14,this.txtGrp.height=this.info.textHeight+33+15,this.x=this.y=0,this.info.right=this.bornRight,this.type){case 1:this.anchorOffsetX=this.txtGrp.x,this.anchorOffsetY=this.txtGrp.y+this.txtGrp.height,this.parent&&(this.y=this.parent.height);break;case 2:this.anchorOffsetX=this.txtGrp.x+this.txtGrp.width,this.anchorOffsetY=this.txtGrp.y+this.txtGrp.height,this.parent&&(this.x=this.parent.width,this.y=this.parent.height),this.info.right=this.bornRight-(this.info.width-this.info.textWidth);break;case 3:this.anchorOffsetX=this.txtGrp.x+this.txtGrp.width,this.anchorOffsetY=this.txtGrp.y,this.right=0,this.parent&&(this.x=this.parent.width),this.info.right=this.bornRight-(this.info.width-this.info.textWidth);break;default:this.anchorOffsetX=this.txtGrp.x,this.anchorOffsetY=this.txtGrp.y}},e}(eui.Component);__reflect(Chat_Info.prototype,"Chat_Info");var Chat_TextRender=function(t){function e(){var e=t.call(this)||this;return e.skinName=ChatSkinConfig.Chat_TextRenderSkin,bindTapEvent_XY(e,e.clickFunc,e),e}return __extends(e,t),e.prototype.clickFunc=function(){var t=new ChatDTO;t.uid=Global.uid,t.type=2,t.chat=this.itemIndex+"",ChatManager.sendChat(t)},e.prototype.dataChanged=function(){this.info.text=this.data},e}(eui.ItemRenderer);__reflect(Chat_TextRender.prototype,"Chat_TextRender");var ChatDTO=function(){function t(){}return t}();__reflect(ChatDTO.prototype,"ChatDTO");var ChatManager=function(){function t(){}return t.setup=function(t,e,n,i,r,o,a,s){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===o&&(o=31),void 0===a&&(a=520),void 0===s&&(s=0),null==r&&(r=egret.getDefinitionByName(Global.gameId+".sendSocketMessage")),this.chatTextConfig=t,this.chatMsgShowContainers=e,this.chatTypes=n,this.useVoice=i,this.wsSendFun=r,this.sendChatCmd=o;for(var l=0;l<this.chatTypes.length;l++)this.chatTypes[l]<0&&(this.chatTypes[l]=0),this.chatTypes[l]>3&&(this.chatTypes[l]=3);for(var l=0;l<this.chatMsgShowContainers.length;l++)this.chatMsgShowContainers[l]&&(this.chatMsgShowContainers[l].touchEnabled=!1,this.chatMsgShowContainers[l].touchChildren=!1);for(var l=0;l<this.emojiMcConfig.length;l++){for(var h=MovieclipController.makeResLoop("expression"+(l+1)+"_{0}_png",1,this.emojiMcConfig[l]),u=[],c=33;u.length<10&&c>0;)u=u.concat(h),c--;this.emojiMcConfigCache[l]=u}},t.showPanel=function(){this.chatPanel||(this.chatPanel=new ChatPanel),Global.stage.addChild(this.chatPanel),this.chatPanel.init()},t.showChatAt=function(t,e,n){if(void 0===n&&(n=!1),0>t&&(t=0),t>=this.chatMsgShowContainers.length&&(t=this.chatMsgShowContainers.length-1),this.chatMsgs[t]||(this.chatMsgs[t]=new Chat_Info(this.chatTypes[t])),this.useVoice&&2==e.type&&e.chat.length<=3){var i=int_XY(e.chat)+1,r=n?"man":"women",o="chat_"+r+i+"_mp3";SoundManager.playEffect(o)}var a=this.chatMsgs[t],s=this.chatMsgShowContainers[t];s.addChild(a),a.setData(e)},t.hidePanel=function(){this.chatPanel&&(Tween$.removeTweens(this.chatPanel),remove_XY(this.chatPanel))},t.sendChat=function(t){this.wsSendFun(this.sendChatCmd,t),this.hidePanel()},t.emojiMcConfig=[2,8,10,2,2,11,13,9,3,4,12,4,4,14,5,4,3,4,2,2,2,10,5,10,4,8,3],t.emojiMcConfigCache=[],t.chatTextConfig=[],t.chatMsgs=[],t}();__reflect(ChatManager.prototype,"ChatManager");var ChatPanel=function(t){function e(){var e=t.call(this,ChatSkinConfig.Chat_PanelSkin)||this;e.isEmojiTab=!1,e.initEvents(),e.list0.itemRenderer=Chat_EmojiRender;var n=new eui.TileLayout;n.horizontalGap=8,n.verticalGap=10,n.requestedColumnCount=3,e.list0.layout=n,e.list1.itemRenderer=Chat_TextRender;var i=new eui.TileLayout;return i.verticalGap=10,e.list1.layout=i,e.scl0.setSliderBarAlwaysShow(!0),updateScrollerThumb_XY(e.scl0),e.scl1.setSliderBarAlwaysShow(!0),updateScrollerThumb_XY(e.scl1),e}return __extends(e,t),e.prototype.init=function(){this.scl0.stopAnimation(),this.scl1.stopAnimation(),this.grp.x=Global.stage.stageWidth,Tween$.removeTweens(this.grp),Tween$.get(this.grp).to({x:Global.stage.stageWidth-this.grp.width},300,Ease$.sineOut),this.updateTab()},e.prototype.initEvents=function(){bindTapEvent_XY(this.bg,this.onClose,this),bindTapEvent_XY(this.image0,this.onTab,this),bindTapEvent_XY(this.image1,this.onTab,this)},e.prototype.onClose=function(){var t=this;Tween$.removeTweens(this.grp),Tween$.get(this.grp).to({x:Global.stage.stageWidth},300,Ease$.sineOut).call(function(){remove_XY(t)})},e.prototype.hide=function(){this.onClose()},e.prototype.onTab=function(t){this.isEmojiTab=t.currentTarget==this.image0,this.updateTab()},e.prototype.updateTab=function(){this.image0.source=this.isEmojiTab?"chat_emoticons_01_png":"chat_emoticons_02_png",this.image1.source=this.isEmojiTab?"chat_voice_02_png":"chat_voice_01_png",remove_XY(this.scl0),remove_XY(this.scl1),this.isEmojiTab?(this.emojiDataArr||(this.emojiDataArr=new eui.ArrayCollection(ChatManager.emojiMcConfig),this.list0.dataProvider=this.emojiDataArr),this.grp.addChild(this.scl0),this.scl0.stopAnimation(),this.scl0.scrolltoTop(),updateScrollerThumb_XY(this.scl0)):(this.textDataArr||(this.textDataArr=new eui.ArrayCollection(ChatManager.chatTextConfig),this.list1.dataProvider=this.textDataArr),this.grp.addChild(this.scl1),this.scl1.stopAnimation(),this.scl1.scrolltoTop(),updateScrollerThumb_XY(this.scl1))},e}(BaseComponent);__reflect(ChatPanel.prototype,"ChatPanel");var ChatSkinConfig=function(){function t(){}return t.Chat_EmojiRenderSkin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_EmojiRenderSkin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="100" height="100">\n			<e:Image x="0" y="0" source="chat_emoticons_bg_borard_png" scale9Grid="9,9,55,55" width="100" height="100" touchEnabled="true"/>\n			<e:Image id="face" touchEnabled="false" source="Game_face_model_1_png" x="0" y="0"/>\n		</e:Skin>',t.Chat_Info0Skin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_Info0Skin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n			<e:Group id="emoGrp" x="0" y="0" anchorOffsetX="0">\n				<e:Image id="imageModel" x="0" y="0" scaleX="1" scaleY="1" source="expression1_1_png"/>\n			</e:Group>\n			<e:Group id="txtGrp" x="9" y="38" width="330" height="70">\n				<e:Image id="bg" source="chat_talk_board_png" anchorOffsetX="0" scaleY="-1" left="0" right="0" top="0" bottom="0" scale9Grid="34,10,40,53"/>\n				<e:Label id="info" text="" size="20" anchorOffsetY="0" multiline="true" wordWrap="true" anchorOffsetX="0" lineSpacing="5"  verticalAlign="middle" textAlign="left" width="300" y="33" x="16"/>\n			</e:Group>\n		</e:Skin>',t.Chat_Info1Skin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_Info1Skin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n			<e:Group id="emoGrp" x="0" y="0" anchorOffsetX="0">\n				<e:Image id="imageModel" x="0" y="0" scaleX="1" scaleY="1" source="expression1_1_png"/>\n			</e:Group>\n			<e:Group id="txtGrp" x="9" height="70" width="330" y="72">\n				<e:Image id="bg0" source="chat_talk_board_png" anchorOffsetX="0" left="0" right="0" top="0" bottom="0" scale9Grid="34,10,40,53"/>\n				<e:Label id="info" text="" size="20" anchorOffsetY="0" multiline="true" wordWrap="true" anchorOffsetX="0" lineSpacing="5"  verticalAlign="middle" textAlign="left" x="16" y="15" width="300"/>\n			</e:Group>\n		</e:Skin>',t.Chat_Info2Skin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_Info2Skin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n			<e:Group id="emoGrp" y="0" anchorOffsetX="0" right="0">\n				<e:Image id="imageModel" x="0" y="0" scaleX="1" scaleY="1" source="expression1_1_png"/>\n			</e:Group>\n			<e:Group id="txtGrp" x="9" y="59" height="70" width="330">\n				<e:Image id="bg" source="chat_talk_board_png" anchorOffsetX="0" scaleX="-1" scale9Grid="34,12,40,51" left="0" right="0" top="0" bottom="0"/>\n				<e:Label id="info" text="" size="20" anchorOffsetY="0" multiline="true" wordWrap="true" anchorOffsetX="0" lineSpacing="5"  verticalAlign="middle" textAlign="left" y="15" right="16" width="300"/>\n			</e:Group>\n		</e:Skin>',t.Chat_Info3Skin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_Info3Skin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n			<e:Group id="emoGrp" y="0" anchorOffsetX="0" right="0">\n				<e:Image id="imageModel" x="0" y="0" scaleX="1" scaleY="1" source="expression1_1_png"/>\n			</e:Group>\n			<e:Group id="txtGrp" x="9" y="38" height="70" width="330">\n				<e:Image id="bg" source="chat_talk_board_png" anchorOffsetX="0" scaleX="-1" left="0" right="0" scaleY="-1" top="0" bottom="0" scale9Grid="34,12,40,51"/>\n				<e:Label id="info" text="" size="20" anchorOffsetY="0" multiline="true" wordWrap="true" anchorOffsetX="0" lineSpacing="5"  verticalAlign="middle" textAlign="left" y="33" right="16" width="300"/>\n			</e:Group>\n		</e:Skin>',t.Chat_PanelSkin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_PanelSkin" width="1334" height="750" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" xmlns:ns1="*">\n			<e:Rect id="bg" left="1" right="-1" top="0" bottom="0" fillAlpha="0"/>\n			<e:Group id="grp" verticalCenter="0" width="380" x="954" height="520">\n				<e:Image source="chat_emoticons_bg_png" scale9Grid="65,99,210,352" anchorOffsetX="0" left="0" right="0" top="0" bottom="0"/>\n				<e:Image id="image0" x="56.64" y="17" source="chat_emoticons_01_png"/>\n				<e:Image x="224.29" y="17" id="image1" source="chat_voice_01_png"/>\n				<ns1:XYScroller id="scl0" width="334" x="37.52" anchorOffsetX="0" anchorOffsetY="0" top="72" bottom="38" scrollPolicyH="off">\n					<e:Skin>\n						<e:VScrollBar id="verticalScrollBar" height="100%" right="0" visible="true" autoVisibility="false">\n							<e:Skin>\n								<e:Rect height="100%" width="10" fillAlpha="0.2" fillColor="0xffffff" ellipseWidth="15" ellipseHeight="15" />\n								<e:Rect id="thumb" height="50%" width="10" fillAlpha="0.5" fillColor="0xffffff" ellipseWidth="15" ellipseHeight="15" />\n							</e:Skin>\n						</e:VScrollBar>\n					</e:Skin>\n					<e:List id="list0"/>\n				</ns1:XYScroller>\n				<ns1:XYScroller width="334" x="37.52" anchorOffsetX="0" anchorOffsetY="0" id="scl1" top="72" bottom="38" scrollPolicyH="off">\n					<e:Skin>\n						<e:VScrollBar id="verticalScrollBar" height="100%" right="0" visible="true" autoVisibility="false">\n							<e:Skin>\n								<e:Rect height="100%" width="10" fillAlpha="0.2" fillColor="0xffffff" ellipseWidth="15" ellipseHeight="15" />\n								<e:Rect id="thumb" height="50%" width="10" fillAlpha="0.5" fillColor="0xffffff" ellipseWidth="15" ellipseHeight="15" />\n							</e:Skin>\n						</e:VScrollBar>\n					</e:Skin>\n					<e:List id="list1"/>\n				</ns1:XYScroller>\n			</e:Group>\n		</e:Skin>',t.Chat_TextRenderSkin='\n		<?xml version="1.0" encoding="utf-8"?>\n		<e:Skin class="Chat_TextRenderSkin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="316" height="55">\n			<e:Image source="chat_voice_bg_borard_png" touchEnabled="true" scale9Grid="34,17,205,22" width="316" height="55" x="0" y="0"/>\n			<e:Label id="info" text="" size="22" anchorOffsetX="0" width="310" anchorOffsetY="0" touchEnabled="false" multiline="false" lineSpacing="5" wordWrap="false" textAlign="left" height="22" x="6" y="17"/>\n		</e:Skin>',t}();__reflect(ChatSkinConfig.prototype,"ChatSkinConfig");var CloseWarning=function(){function t(){}return t.enable=function(){Global.isNative||(window.onbeforeunload=t.onbeforeunloadHandler)},t.disable=function(){window.onbeforeunload=null},t.onbeforeunloadHandler=function(t){return t=t||window.event,t&&(t.returnValue=""),""},t}();__reflect(CloseWarning.prototype,"CloseWarning");var DevelopMain=function(t){function e(){var n=t.call(this)||this;n.runAtModule=!0,n.sendSnapshotWhenResume=!1,n.defaultGetSnapshotProtocol=1e3,e.self=n,RES.processor.map("font",XYFontAnalyzer),egret.ImageLoader.crossOrigin="*",Global.isNative=-1!=navigator.userAgent.indexOf("app/qp"),Global.isInGame=!0,trace("isNative:"+Global.isNative),Global.isNative&&(egret.ExternalInterface=XYExternalInterface),n.once(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.gameId="",n.config=new BasicConfig;var i=egret.getOption("code")||Math.random()+"";return i=decodeURIComponent(i),n.initPlatform(),Global.platform.init(),Global.platform.getAppInfo(),n.config.account=i,Global.eventCenter.addEventListener(EventEnum.EXIT_GAME_G_to_P,n.onExit,n),Global.eventCenter.addEventListener(Global.E_MODULE_ALL_LOAD_OK,n.onAllResourceLoaded,n),Global.eventCenter.addEventListener("mqtt_disconnect",n.onDisconnect,n),n}return __extends(e,t),e.callWhenFastJoinCompleted=function(t){this.fastJoinCompletedCall=null,this.self&&this.self.config.area>0?t():this.fastJoinCompletedCall=t},e.prototype.onAllResourceLoaded=function(t){this.allResouceGroupName=t.data;var e=XYFontAnalyzer.waitFonts;if(e.length>0){XYFontAnalyzer.parsedFont=XYFontAnalyzer.parsedFont||{};for(var n=0,i=e.length;i>n;n++){var r=e[n];r=r.substr(0,r.length-"_fnt".length);var o=RES.getRes(r+"_fnt"),a=RES.getRes(r+"_png");if(null==a){var s=o.file||"";s=s.replace(".png","_png"),a=RES.getRes(s)}var l=new egret.BitmapFont(a,o);XYFontAnalyzer.parsedFont[e[n]]=l}trace(""+e.length+""),XYFontAnalyzer.waitFonts=[]}if(this.config.needSendFastJoin&&!this.config.replayMode){if(Global.onEvent(EventEnum.LOAD_COMPLETE_AND_TRY_JOIN_GAME_G_to_P),bridge_iframe.sendMsgToHall(EventEnum.LOAD_COMPLETE_AND_TRY_JOIN_GAME_G_to_P),trace(",fastjoin"),this.config.needSendJoin){var h=new JoinDTO(this.config.moduleType,this.config.serverId,{data:this.config.preJoinParams},this.config.joinUISeat);SocketManager.getInstance().sendMessage(ModuleType.MODULE_LOBBY+TopicType.HD_Join,this.config.type,this.config.area,0,h)}else{var u=new JoinDTO(this.config.moduleType,"",{data:this.config.preJoinParams});SocketManager.getInstance().sendMessage(ModuleType.MODULE_LOBBY+TopicType.FAST_JOIN,this.config.type,0,0,u)}1==this.config.antiCheat&&(this.sendAllResourceLoadCompleteEventToGame(),SimpleLoading.showMatch(i18n("..."),!0,this.cancelMatch,this))}else this.sendAllResourceLoadCompleteEventToGame()},e.prototype.cancelMatch=function(){SocketManager.getInstance().sendMessage(ModuleType.MODULE_LOBBY+TopicType.HD_Cancel,this.config.type,0,0)},e.prototype.sendAllResourceLoadCompleteEventToGame=function(){return this.allResouceGroupName&&""!=this.allResouceGroupName?(trace("fastjoin "),Global.eventCenter.dispatchEventWith(this.allResouceGroupName),void(this.allResouceGroupName="")):void warn("sendAllResourceLoadCompleteEventToGame !!!!")},e.prototype.onDisconnect=function(t){var e=this,n=t.data[0];if(WSConnectErrorCode.isWSConnectErrorCode(n)){SocketManager.getInstance().disconnect();var i=WSConnectErrorCode.toString(n),r=function(){SimpleLoading.hide(),Toast.show(i18n("{0} 3",i)),egret.setTimeout(function(){Global.platform.exitApp()},e,3e3)};try{SimpleLoading.hide();var o=window[Global.gameId].alert;null!=o?3==o.length?window[Global.gameId].alert(i,i18n(""),function(){Global.platform.exitApp()}):2==o.length?window[Global.gameId].alert(i,function(){Global.platform.exitApp()}):r():r()}catch(a){r()}}warn("ws"+t.data[1])},e.prototype.initPlatform=function(){Global.isNative?Global.platform=new NativePlatform:Global.platform=new H5Platform},e.prototype.loadAndInitReplay=function(t,e){var n=this;if(t||(t="resource/assets/"+this.gameId+"/replay.json"),"1"==egret.getOption("hidePoke")&&(this.config.replayHidePoke=!0),egret.getOption("getReplayUrl")&&egret.getOption("token")){var i=egret.getOption("uid"),r=(egret.getOption("replayId"),decodeURIComponent(egret.getOption("getReplayUrl"))),o=decodeURIComponent(egret.getOption("token"));Global.avatarURI=decodeURIComponent(egret.getOption("avatarPrefix")),__httpHeaderMap.push(["Authorization",o]),t=r}http_XY(t,function(t){var r=parseJsonSafe_XY(t);if(r){if(n.config.replayData=r,!n.config.loginDto){n.config.loginDto=new LoginDTO_S;var o=r[0],a=o.info||o.players;if(a){Global.uid=a[0].uid;for(var s=0,l=a.length;l>s;s++){var h=a[s];(h.name==n.config.code||h.name==n.config.account||h.uid==i&&i)&&(Global.uid=h.uid)}n.config.loginDto.id=Global.uid}else warn("replay")}e()}else{var u=i18n("{0}",1004);Toast.show(u),Global.platform.sendMsgToHall(EventEnum.RES_LOAD_FAILED,u)}},this,egret.HttpMethod.GET,egret.URLLoaderDataFormat.TEXT)},e.prototype.loadConfigFromHall=function(){var t=this,n=!1;try{n=window&&window.parent!=window&&window.parent.Global}catch(i){}if(n=n||Global.isNative,e.isInModule=n,n){this.runAtModule=!0;var r=Global.platform.getShareedParamFromHall();Global.uid=r.config.loginDto.id,Global.sourceVer=r.config.sourceVer,Global.isFrom3rd=r.config.isFrom3rd,Global.shareURL=r.config.shareURL,Global.loginDto=r.config.loginDto,Global.avatarURI=r.config.loginDto.avatarPrefix,Global.isFrom3rd&&r.config.loginDto.permissionConf&&(Global.shareURL=r.config.loginDto.permissionConf.shareUrl),Global.updateServerTime(r.config.serverTime),this.config=r.config,Global.i18nType=this.config.i18nType,I18N.initLib(this.config.i18nType),"1"==egret.getOption("replay")&&(this.config.replayMode=!0),__httpHeaderMap.push(["Authorization",this.config.loginDto.token]),this.config.replayMode?this.loadAndInitReplay(this.config.replayURL,this.init.bind(this)):this.init()}else{I18N.initLib(this.config.i18nType),Global.i18nType=this.config.i18nType,"1"==egret.getOption("replay")&&(this.config.replayMode=!0),this.runAtModule=!1,Global.sourceVer="v"+Math.random();var o={account:this.config.account,password:"123"};this.config.replayMode?this.loadAndInitReplay(this.config.replayURL,this.init.bind(this)):httpPostSmart_XY(this.config.httpURI+HttpProtocol.LOGIN,function(e){var n=parseJsonSafe_XY(e);if(n&&n.s>0){var i=n.d;Global.uid=i.id,t.config.loginDto=i,__httpHeaderMap.push(["Authorization",i.token]),httpPostSmart_XY(t.config.httpURI+HttpProtocol.GET_MY_INFO,function(e){var n=parseJsonSafe_XY(e);if(n&&n.s>0){var r=n.d;copyPropertie_XY(t.config.loginDto,r),t.config.area=i.area,t.config.needSendFastJoin=null==t.config.area||t.config.area<=0,Global.loginDto=i,t.init()}else SimpleLoading.hide(),showHttpErrorMsg(n)},t)}else showHttpErrorMsg(n)},this,o)}},e.prototype.onAddToStage=function(t){Global.gameId=this.gameId,Global.stage=this.stage,Toast.init(this.stage),Filters.init(),Global.initRESEvent(),RES.setMaxLoadingThread(1),this.loadConfigFromHall(),new DebugTrigger(Global.stage)},e.prototype.init=function(){var t=this,n=this.config.httpURI;n+="/"!=n.charAt(n.length-1)?"/"+HttpProtocol.web_log_report:HttpProtocol.web_log_report,BadJSReporter.init(this.config.gameId,n),egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){Global.isNative&&egret.ticker.pause(),Global.runAtBackGround=!0,Global.onEvent(EventEnum.RUN_MODE_CHANGE_P_to_G)},egret.lifecycle.onResume=function(){Global.isNative&&egret.ticker.resume(),Global.runAtBackGround=!1,Global.onEvent(EventEnum.RUN_MODE_CHANGE_P_to_G),!t.config.replayMode&&t.sendSnapshotWhenResume&&e.dataInited&&SocketManager.getInstance().mqtt&&SocketManager.getInstance().mqtt.isConnected()&&(t.eventMasker||(t.eventMasker=new egret.Sprite,t.eventMasker.graphics.beginFill(0,1),t.eventMasker.touchEnabled=!0,t.eventMasker.graphics.drawRect(0,0,16,16),t.eventMasker.graphics.endFill()),t.eventMasker.alpha=0,Global.stage.addChild(t.eventMasker),t.eventMasker.scaleX=Global.stage.stageWidth/16,t.eventMasker.scaleY=Global.stage.stageHeight/16,egret.setTimeout(function(){SocketManager.getInstance().sendMessage(t.config.moduleType+TopicType.HD_LOGIC,t.config.type,t.config.area,t.defaultGetSnapshotProtocol),remove_XY(t.eventMasker)},t,50))},trace("version:"+Global.sourceVer);var i="resource/default.res.json";Global.i18nType!=I18NType.zh_cn&&I18N.IsNowModuleSupport(Global.i18nType)&&(i="resource/"+Global.i18nType.replace("-","_")+".res.json"),Global.isNative||(i+="?v="+ +Math.random()),RES.loadConfig(i,"resource/"),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,function(){var e="resource/default.thm.json",n=new eui.Theme(e,t.stage);n.once(egret.Event.COMPLETE,function(){t.connectSocket()},t)},this)},e.prototype.connectSocket=function(){this.config.replayMode?(this.config.socketProxy=new SocketProxy(null),this.config.socketProxy.isReplayMode=!0,this.launch()):this.config.socketProxy?this.launch():(this.config.socketProxy=new SocketProxy(SocketManager.getInstance()),SocketManager.getInstance().once(SocketManager.E_CONNECTED_COMPLETE,this.connectSucess,this),SocketManager.getInstance().socketConnectErrorCall=this.connectFailed.bind(this),SocketManager.getInstance().startSocket(this.config.host,this.config.port,this.config.account,this.config.loginDto.token,this.config.useSSL,10))},e.prototype.connectSucess=function(){var t=this;trace("ws");var n=(this.config.moduleType+TopicType.HD_LOGIC,TopicType.ERROR);SocketManager.getInstance().socketConnectErrorCall=null;var i=new SimpleHandler(function(n,i){switch(n){case TopicType.FAST_JOIN:case TopicType.HD_Join:case TopicType.HD_Create:if(i.s>0){var r=i.d.area;t.config.area=r,1==t.config.antiCheat?SimpleLoading.hideMatch():t.sendAllResourceLoadCompleteEventToGame(),n==TopicType.FAST_JOIN&&e.fastJoinCompletedCall&&(e.fastJoinCompletedCall(),e.fastJoinCompletedCall=null)}else Toast.show(i18n("HD_FastJoin: {0}",i18n(i.m,i.a))),Global.onEvent(EventEnum.TRY_JOIN_GAME_FAILED_G_to_P,i18n(i.m,i.a)),bridge_iframe.sendMsgToHall(EventEnum.TRY_JOIN_GAME_FAILED_G_to_P,i18n(i.m,i.a)),t.onExit();break;case TopicType.HD_SWITCHTABLE:if(i.s>0){var r=i.d.area;Global.onEvent(EventEnum.SWITCH_TABLE_P_to_G,[r])}else Toast.show(i18n(": {0}",i18n(i.m,i.a))),egret.setTimeout(function(){Global.onEvent(EventEnum.EXIT_GAME_G_to_P),bridge_iframe.sendMsgToHall(EventEnum.EXIT_GAME_G_to_P)},t,1e3);break;case TopicType.HD_Cancel:i.s>0?(Global.onEvent(EventEnum.EXIT_GAME_G_to_P),bridge_iframe.sendMsgToHall(EventEnum.EXIT_GAME_G_to_P),SimpleLoading.hideMatch()):Toast.show(i18n(i.m,i.a))}}),r=new SimpleHandler(function(t,e){switch(t){case ServerErrorCode.ERROR_STATE_DUPLICATE_LOGIN:var n=i18n("!");Global.isGameInitCompleted?Global.onEvent(EventEnum.ACCOUNT_BEEN_KICKED,[1,n]):bridge_iframe.sendMsgToHall(EventEnum.RES_LOAD_FAILED,n);break;case ServerErrorCode.ERROR_STATE_GAME_MODULE_NOT_READY:var n=i18n("");Global.isGameInitCompleted?Global.onEvent(EventEnum.SERVER_ERROR_MESSAGE,[n]):bridge_iframe.sendMsgToHall(EventEnum.RES_LOAD_FAILED,n);break;case ServerErrorCode.ERROR_DISCONNECTED_TOAST:SocketManager.getInstance().disconnect(),SimpleLoading.hide(),error(":",e);var n=i18n("!");Global.isGameInitCompleted?Global.onEvent(EventEnum.ACCOUNT_BEEN_KICKED,[2,i18n(e+"")||n]):bridge_iframe.sendMsgToHall(EventEnum.RES_LOAD_FAILED,i18n(e+"")||n);break;case ServerErrorCode.ERROR_KICK_ASS_TOAST:SocketManager.getInstance().disconnect(),SimpleLoading.hide(),error(":",e);var n=i18n("!");Global.isGameInitCompleted?Global.onEvent(EventEnum.ACCOUNT_BEEN_KICKED,[3,i18n(e+"")||n]):bridge_iframe.sendMsgToHall(EventEnum.RES_LOAD_FAILED,i18n(e+"")||n);break;default:error(":",e);var n=i18n("!");Global.isGameInitCompleted?Global.onEvent(EventEnum.SERVER_ERROR_MESSAGE,[i18n(e+"")||n]):bridge_iframe.sendMsgToHall(EventEnum.RES_LOAD_FAILED,i18n(e+"")||n)}}),o=new SimpleHandler(function(t,e){switch(t){case CommonProtocol.SERVER_TIME:Global.updateServerTime(e),Global.phoneSignal=Math.min(egret.getTimer()-Global.pingSendTimeMs,999),Global.eventCenter.dispatchEventWith(EventEnum.PHONE_SIGNAL_CHANGED);break;case CommonProtocol.HORSE_RACE_LAMP:MarqueeNotice.getInstace().addNotice(NoticeDTO.toString(e))}return!0});SocketManager.getInstance().addHandler(n,r),SocketManager.getInstance().addHandler(ModuleType.MODULE_LOBBY,i),SocketManager.getInstance().addHandler(TopicType.COMMON_TOPIC,o),this.launch()},e.prototype.connectFailed=function(){Global.isGameInitCompleted||bridge_iframe.sendMsgToHall(EventEnum.RES_LOAD_FAILED,i18n("!"))},e.prototype.launch=function(){var t=egret.getDefinitionByName(this.gameId+".GameLauncher");if(!t)return void warn(""+this.gameId+"namespaceGameLauncherIGameLauncher");var e=new t,n=e;this.addChild(n),e.setup(this.config),this.launcher=e,SoundManager.init(),Global.isNative||new InputKeyBoardAutoUp,SignalStatus.getInstace().enable()},e.prototype.onExit=function(){trace("ws"),SocketManager.getInstance().disconnect(),trace("[]:EventEnum.EXIT_GAME_G_to_P,,")},e.isInModule=!1,e.dataInited=!1,e}(egret.DisplayObjectContainer);__reflect(DevelopMain.prototype,"DevelopMain");var SimpleHandler=function(){function t(t){this.cb=t}return t.prototype.handle=function(t,e,n){return 1==this.cb.length?this.cb(e):2==this.cb.length?this.cb(t,e):this.cb(),!0},t}();__reflect(SimpleHandler.prototype,"SimpleHandler",["ISocketDataHandler"]);var MVersionCtrl=function(){function t(){}return t.prototype.init=function(){return Promise.resolve()},t.prototype.getVirtualUrl=function(t){return-1!=t.indexOf("?")?t:t=t+"?v="+Global.sourceVer},t}();__reflect(MVersionCtrl.prototype,"MVersionCtrl",["RES.IVersionController"]);var XYAppleToggleButtonController=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.tweenObj={a:0},o.eventTog=e,o.sliderCtrl=new XYSliderController(n,i,r),n.touchEnabled=!1,i.touchEnabled=!1,r.touchEnabled=!1,bindTapEvent_XY(o.eventTog,o.onTap,o,!1,null,!0),o.setSelected(!1,!1),o}return __extends(e,t),e.prototype.onTap=function(){this.setSelected(!this.selected,!0),this.dispatchEventWith(egret.Event.CHANGE)
},e.prototype.setSelected=function(t,e){var n=this;void 0===e&&(e=!0);var i=0;e&&this.selected!=t?(t?(this.tweenObj.a=0,i=100):(this.tweenObj.a=100,i=0),Tween$.removeTweens(this.tweenObj),Tween$.get(this.tweenObj,{onChange:function(){n.sliderCtrl.setValue(n.tweenObj.a)},onChangeObj:this}).to({a:i},300)):(Tween$.removeTweens(this.tweenObj),this.sliderCtrl.setValue(t?100:0)),this.selected=t,this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.getSelected=function(){return this.selected},e.prototype.dispose=function(){this.eventTog&&clearTapEvent_XY(this.eventTog,this.onTap,this),this.eventTog=null,this.sliderCtrl&&this.sliderCtrl.dispose(),this.sliderCtrl=null},e}(egret.EventDispatcher);__reflect(XYAppleToggleButtonController.prototype,"XYAppleToggleButtonController");var XYCheckBoxController=function(t){function e(e,n,i){var r=t.call(this)||this;return r.init(e,n,i),r.setSelected([]),r}return __extends(e,t),e.prototype.init=function(t,n,i){this.dispose(),this.radioImgs=t,this.eventShapes=n,this.uiSources=i||e.uiSources;for(var r=0,o=n.length;o>r;r++){var a=n[r];bindTapEvent_XY(a,this.onTap,this,!1,null,!0)}},e.prototype.onTap=function(t){for(var e=0,n=0,i=this.eventShapes.length;i>n;n++){var r=this.eventShapes[n];if(t.currentTarget==r){e=n;break}}var o=this.selectedIndexs.indexOf(e);-1!=o?this.selectedIndexs.splice(o,1):this.selectedIndexs.push(e),this.setSelected(this.selectedIndexs),this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.setSelected=function(t){this.selectedIndexs=t;for(var e=0,n=this.eventShapes.length;n>e;e++){var i=(this.eventShapes[e],this.radioImgs[e]);i.source=-1!=t.indexOf(e)?this.uiSources[0]:this.uiSources[1]}},e.prototype.getSelectedIndexs=function(){return this.selectedIndexs},e.prototype.dispose=function(){if(this.eventShapes)for(var t=0,e=this.eventShapes.length;e>t;t++){var n=this.eventShapes[t];clearTapEvent_XY(n,this.onTap,this)}this.radioImgs=null,this.eventShapes=null,this.selectedIndexs=null},e}(egret.EventDispatcher);__reflect(XYCheckBoxController.prototype,"XYCheckBoxController");var XYRadioButtonController=function(t){function e(e,n,i,r){void 0===i&&(i=0);var o=t.call(this)||this;return o.selectedIndex=0,o.init(e,n,i,r),o}return __extends(e,t),e.prototype.init=function(t,n,i,r){void 0===i&&(i=0),this.dispose(),this.radioImgs=t,this.eventShapes=n,this.uiSources=r||e.uiSources;for(var o=0,a=n.length;a>o;o++){var s=n[o];bindTapEvent_XY(s,this.onTap,this,!1,null,!0)}this.setSelected(i)},e.prototype.onTap=function(t){for(var e=0,n=0,i=this.eventShapes.length;i>n;n++){var r=this.eventShapes[n];if(t.currentTarget==r){e=n;break}}this.setSelected(e),this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.setSelected=function(t){this.selectedIndex=t;for(var e=0,n=this.eventShapes.length;n>e;e++){var i=(this.eventShapes[e],this.radioImgs[e]);i.source=t==e?this.uiSources[0]:this.uiSources[1]}},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.dispose=function(){if(this.eventShapes)for(var t=0,e=this.eventShapes.length;e>t;t++){var n=this.eventShapes[t];clearTapEvent_XY(n,this.onTap,this)}this.radioImgs=null,this.eventShapes=null},e}(egret.EventDispatcher);__reflect(XYRadioButtonController.prototype,"XYRadioButtonController");var XYScroller=function(t){function e(){var e=t.call(this)||this;return e.isH=!1,e.alwaysShowBar=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdded,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoved,e),e}return __extends(e,t),e.prototype.setSliderBarAlwaysShow=function(t){this.alwaysShowBar=t,setScollerBarAlwaysShow_XY(this,t)},e.prototype.scrolltoTop=function(){this.stopAnimation(),this.viewport.scrollV=0},e.prototype.scrolltoLeft=function(){this.stopAnimation(),this.viewport.scrollH=0},e.prototype.scrolltoBottom=function(){this.stopAnimation(),this.viewport.scrollV=Math.max(0,this.viewport.contentHeight-this.height)},e.prototype.scrolltoRight=function(){this.stopAnimation(),this.viewport.scrollH=Math.max(0,this.viewport.contentWidth-this.width)},e.prototype.onAdded=function(){bindMouseWheel_XY(this.onMouseWheel,this)},e.prototype.onRemoved=function(){removeMouseWheel_XY(this.onMouseWheel,this)},e.prototype.onMouseWheel=function(t){this.isH?this.wheelH(t):this.wheelV(t)},e.prototype.wheelH=function(t){var e=this;if(this.stopAnimation(),!(this.viewport.contentWidth<this.width)){var n=this.viewport.scrollH+t,i=verifyRange_XY(n,0,this.viewport.contentWidth-this.width);this.viewport.scrollH=i,setScollerBarAlwaysShow_XY(this,!0),Tween$.removeTweens(this.viewport),this.viewport.updateRender?Tween$.get(this.viewport,{onChange:this.viewport.updateRender,onChangeObj:this.viewport}).to({scrollH:i},300).call(function(){e.horizontalScrollBar&&(e.horizontalScrollBar.autoVisibility=e.alwaysShowBar?!1:!0,e.horizontalScrollBar.visible=e.alwaysShowBar)},this):Tween$.get(this.viewport).to({scrollH:i},300).call(function(){e.horizontalScrollBar&&(e.horizontalScrollBar.autoVisibility=e.alwaysShowBar?!1:!0,e.horizontalScrollBar.visible=e.alwaysShowBar)},this)}},e.prototype.wheelV=function(t){var e=this;if(!(this.viewport.contentHeight<this.height)){this.stopAnimation();var n=this.viewport.scrollV+t,i=verifyRange_XY(n,0,this.viewport.contentHeight-this.height);this.viewport.scrollV=i,setScollerBarAlwaysShow_XY(this,!0),Tween$.removeTweens(this.viewport),this.viewport.updateRender?Tween$.get(this.viewport,{onChange:this.viewport.updateRender,onChangeObj:this.viewport}).to({scrollV:i},300).call(function(){e.verticalScrollBar&&(e.verticalScrollBar.autoVisibility=e.alwaysShowBar?!1:!0,e.verticalScrollBar.visible=e.alwaysShowBar)},this):Tween$.get(this.viewport).to({scrollV:i},300).call(function(){e.verticalScrollBar&&(e.verticalScrollBar.autoVisibility=e.alwaysShowBar?!1:!0,e.verticalScrollBar.visible=e.alwaysShowBar)},this)}},e}(eui.Scroller);__reflect(XYScroller.prototype,"XYScroller");var XYSliderController=function(t){function e(e,n,i){var r=t.call(this)||this;return n.mask=r.maskRect,r.init(e,n,i),r.setValue(0),r}return __extends(e,t),e.prototype.init=function(t,e,n){this.dispose(),this.sliderBg=t,this.sliderBar=e,this.sliderBtn=n,this.maskRect=new egret.Rectangle,this.maskRect.setTo(0,0,e.width,e.height),centerAnchor_XY(n),e.touchEnabled=!1,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBg,this),n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBtn,this)},e.prototype.onTouchBtn=function(t){this.sliderBtn.scaleX=1.2,this.sliderBtn.scaleY=1.2,Global.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),Global.stage.once(egret.TouchEvent.TOUCH_END,this.onEnd,this)},e.prototype.onMove=function(t){var e=t.stageX;this.sliderBtn.parent&&(this.sliderBtn.parent.globalToLocal(e,0,__point_XY),this.setValue((__point_XY.x-this.sliderBg.x)/this.sliderBg.width*100),this.dispatchEventWith(egret.Event.CHANGE))},e.prototype.onEnd=function(t){this.sliderBtn.scaleX=1,this.sliderBtn.scaleY=1,Global.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this)},e.prototype.onTouchBg=function(t){var e=t.localX;t.localY;this.setValue(e/this.sliderBg.width*100),this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.setValue=function(t){t=verifyRange_XY(t,0,100),t=int_XY(t),this.value=t,this.sliderBtn.x=this.sliderBg.x+this.sliderBg.width*t/100,this.sliderBtn.x=verifyRange_XY(this.sliderBtn.x,this.sliderBg.x+this.sliderBtn.anchorOffsetX,this.sliderBg.x+this.sliderBg.width-this.sliderBtn.anchorOffsetX),this.maskRect.width=this.sliderBg.width*t/100,this.sliderBar.mask=this.maskRect},e.prototype.getValue=function(){return this.value},e.prototype.dispose=function(){Global.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.sliderBar&&(this.sliderBar.mask=null),this.sliderBg&&this.sliderBg.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBg,this),this.sliderBtn&&this.sliderBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBtn,this),this.sliderBg=null,this.sliderBar=null,this.sliderBtn=null,this.maskRect=null},e}(egret.EventDispatcher);__reflect(XYSliderController.prototype,"XYSliderController");var XYTabController=function(t){function e(e,n){var i=t.call(this)||this;return i.init(e,n),i.setSelected(0),i}return __extends(e,t),e.prototype.init=function(t,e){this.tabImgs=t,this.tabSources=e;for(var n=0,i=t.length;i>n;n++){var r=t[n];r.__index__=n,bindTapEvent_XY(r,this.onSelect,this)}},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelected=function(t){for(var e=0,n=this.tabImgs.length;n>e;e++){var i=this.tabImgs[e],r=this.tabSources[e];e==t?i.source=r[1]:i.source=r[0]}this.selectItem=this.tabImgs[t],this.selectedIndex=t},e.prototype.onSelect=function(t){var e=t.currentTarget.__index__;this.setSelected(e),this.dispatchEventWith(egret.Event.CHANGE,!1,e)},e.prototype.dispose=function(){for(var t=0,e=this.tabImgs.length;e>t;t++){var n=this.tabImgs[t];clearTapEvent_XY(n,this.onSelect,this)}this.tabImgs=[],this.tabSources=[],this.selectItem=null},e}(egret.EventDispatcher);__reflect(XYTabController.prototype,"XYTabController");var XYToggleButtonController=function(t){function e(e,n,i,r,o){var a=t.call(this)||this;return a.init(e,n,i,r,o),a.setSelected(!1,!1),a}return __extends(e,t),e.prototype.init=function(t,e,n,i,r){this.dispose(),this.eventTog=t,this.bg=e,this.onImg=n,this.offImg=i,this.togBtn=r,bindTapEvent_XY(this.eventTog,this.onTap,this,!1,null,!0)},e.prototype.onTap=function(){this.setSelected(!this.selected),this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.setSelected=function(t,e){void 0===e&&(e=!0),this.selected=t,Tween$.removeTweens(this.togBtn),Tween$.removeTweens(this.onImg),Tween$.removeTweens(this.offImg);var n=e?100:1,i=t?this.bg.x+this.bg.width-20:this.bg.x+20;Tween$.get(this.togBtn).to({x:i},2*n),Tween$.get(this.onImg).to({alpha:t?1:0},n),Tween$.get(this.offImg).to({alpha:t?0:1},n)},e.prototype.getSelected=function(){return this.selected},e.prototype.dispose=function(){this.eventTog&&clearTapEvent_XY(this.eventTog,this.onTap,this),this.eventTog=null,this.bg=null,this.onImg=null,this.offImg=null,this.togBtn=null},e}(egret.EventDispatcher);__reflect(XYToggleButtonController.prototype,"XYToggleButtonController");var keyboard;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.mLabel="",e.mLabelSize=30,e.skinName="XYInputButtonSkin",e.setBgColors(3684152,5658198),bindEuiCreateOkEventOnce_XY(e,e.onInit,e),e.isEnable=!0,e}return __extends(e,t),e.prototype.onInit=function(){setHtmlText(this.tf,this.mLabel),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onEffectBeginTouchHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEffectEndTouchHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEffectEndTouchHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEffectEndTouchHandler,this)},e.prototype.setBgColors=function(t,e){this.bgColors=[t,e],this.bg.fillColor=t},e.prototype.onEffectBeginTouchHandler=function(){this.isEnable&&(SoundManager.playEffect(__tapSound),this.bg.fillColor=this.bgColors[1],this.useTapSound&&SoundManager.playEffect(__tapSound))},e.prototype.onEffectEndTouchHandler=function(){this.isEnable&&(this.bg.fillColor=this.bgColors[0])},e.prototype.setEnalble=function(t){this.touchEnabled=t,this.touchChildren=t,this.isEnable=t},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onEffectBeginTouchHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEffectEndTouchHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEffectEndTouchHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEffectEndTouchHandler,this)},e.prototype.setHtmlLabel=function(t){this.mLabel=t,this.tf&&setHtmlText(this.tf,t)},Object.defineProperty(e.prototype,"a_label",{get:function(){return this.mLabel},set:function(t){this.mLabel=t,this.tf&&setHtmlText(this.tf,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a_labelSize",{get:function(){return this.mLabelSize},set:function(t){this.mLabelSize=t,this.tf&&(this.tf.size=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a_labelColor",{get:function(){return this.mLabelColor},set:function(t){this.mLabelColor=t,this.tf&&(this.tf.textColor=t)},enumerable:!0,configurable:!0}),e}(eui.Component);t.XYInputButton=e,__reflect(e.prototype,"keyboard.XYInputButton")}(keyboard||(keyboard={}));var keyboard;!function(t){var e=function(){function t(){}return t.a_z=["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m"],t.A_Z=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],t.CHARS=["1","2","3","4","5","6","7","8","9","0","-","/",":",";","(",")","","@",'"',"",",","","?","!",".","#"],t}();__reflect(e.prototype,"Key");var n=function(t){function n(){var n=t.call(this)||this;n.endPrix="",n.skinName="KeyboardSkin",n.okBtn.text=i18n(""),n.bigBtn.a_label=i18n(""),n.clearBtn.a_label=i18n(""),n.deleteBtn.a_label=i18n(""),n.infoText.text=i18n("");for(var i=0,r=26;r>i;i++){var o=n["key"+i];o.a_label=e.a_z[i],o.__index__=i,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onKey,n)}return bindTapEvent_XY(n.bg,n.onClose,n),bindTapEvent_XY(n.okBtn,n.onClose,n),n.bigBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onBig,n),n.switchBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onSwitch,n),n.deleteBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onDelete,n),n.clearBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onDeleteAll,n),n.bigBtn.setBgColors(5658198,7631988),n.switchBtn.setBgColors(5658198,7631988),n.deleteBtn.setBgColors(5658198,7631988),n.clearBtn.setBgColors(5658198,7631988),ResizeCall.addCall(n.onResize,n),n}return __extends(n,t),n.getInstance=function(){return this._instance||(EXML.parse('<?xml version="1.0" encoding="utf-8"?>\n				<e:Skin class="XYInputButtonSkin" width="105" height="75" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n					<e:Rect id="bg" left="0" right="0" top="0" bottom="0" ellipseWidth="20" ellipseHeight="20" fillColor="0x383738"/>\n					<e:Label id="tf" text="{this.a_label}" size="38" horizontalCenter="0" verticalCenter="0" textColor="0xffffff"/>\n				</e:Skin>'),EXML.parse('<?xml version="1.0" encoding="utf-8"?>\n							<e:Skin class="KeyboardSkin" width="1334" height="750" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" xmlns:ns1="*" xmlns:keyboard="keyboard.*">\n								<e:Rect id="bg" left="0" right="0" top="0" bottom="0" fillAlpha="0"/>\n								<e:Group id="ctx" left="0" right="0" bottom="0" height="450">\n									<e:Rect anchorOffsetY="0" fillColor="0x212121" left="0" right="0" top="0" bottom="0"/>\n									<e:Rect height="75" y="0" fillColor="0x444444" left="0" right="0"/>\n									<e:Label id="okBtn" text="" y="0" height="75" verticalAlign="middle" textAlign="center" anchorOffsetX="0" width="147" bold="true" textColor="0x5389db" right="0"/>\n									<e:Group y="101" horizontalCenter="0">\n										<keyboard:XYInputButton id="key0" x="0" y="0" skinName="XYInputButtonSkin" a_label="q"/>\n										<keyboard:XYInputButton x="118" y="0" skinName="XYInputButtonSkin" a_label="q" id="key1"/>\n										<keyboard:XYInputButton x="235" y="0" skinName="XYInputButtonSkin" a_label="q" id="key2"/>\n										<keyboard:XYInputButton x="352" y="0" skinName="XYInputButtonSkin" a_label="q" id="key3"/>\n										<keyboard:XYInputButton x="469" y="0" skinName="XYInputButtonSkin" a_label="q" id="key4"/>\n										<keyboard:XYInputButton x="586" y="0" skinName="XYInputButtonSkin" a_label="q" id="key5"/>\n										<keyboard:XYInputButton x="703" y="0" skinName="XYInputButtonSkin" a_label="q" id="key6"/>\n										<keyboard:XYInputButton x="820" y="0" skinName="XYInputButtonSkin" a_label="q" id="key7"/>\n										<keyboard:XYInputButton x="937" y="0" skinName="XYInputButtonSkin" a_label="q" id="key8"/>\n										<keyboard:XYInputButton x="1053" y="0" skinName="XYInputButtonSkin" a_label="q" id="key9"/>\n										<keyboard:XYInputButton x="58" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key10"/>\n										<keyboard:XYInputButton x="176" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key11"/>\n										<keyboard:XYInputButton x="293" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key12"/>\n										<keyboard:XYInputButton x="410" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key13"/>\n										<keyboard:XYInputButton x="527" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key14"/>\n										<keyboard:XYInputButton x="644" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key15"/>\n										<keyboard:XYInputButton x="761" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key16"/>\n										<keyboard:XYInputButton x="878" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key17"/>\n										<keyboard:XYInputButton x="995" y="86.5" skinName="XYInputButtonSkin" a_label="q" id="key18"/>\n										<keyboard:XYInputButton x="175" y="173" skinName="XYInputButtonSkin" a_label="q" id="key19"/>\n										<keyboard:XYInputButton x="293" y="173" skinName="XYInputButtonSkin" a_label="q" id="key20"/>\n										<keyboard:XYInputButton x="410" y="173" skinName="XYInputButtonSkin" a_label="q" id="key21"/>\n										<keyboard:XYInputButton x="527" y="173" skinName="XYInputButtonSkin" a_label="q" id="key22"/>\n										<keyboard:XYInputButton x="644" y="173" skinName="XYInputButtonSkin" a_label="q" id="key23"/>\n										<keyboard:XYInputButton x="761" y="173" skinName="XYInputButtonSkin" a_label="q" id="key24"/>\n										<keyboard:XYInputButton x="878" y="173" skinName="XYInputButtonSkin" a_label="q" id="key25"/>\n										<keyboard:XYInputButton id="bigBtn" x="0" y="173" skinName="XYInputButtonSkin" width="140" a_label="" a_labelSize="30"/>\n										<keyboard:XYInputButton id="switchBtn" x="0" y="262" skinName="XYInputButtonSkin" width="279" a_label="123" a_labelSize="30" anchorOffsetX="0"/>\n										<keyboard:XYInputButton id="clearBtn" x="879" y="262" skinName="XYInputButtonSkin" width="279" a_label="" a_labelSize="30" anchorOffsetX="0"/>\n										<keyboard:XYInputButton x="294" y="262" skinName="XYInputButtonSkin" width="572" a_labelSize="30" anchorOffsetX="0"/>\n										<keyboard:XYInputButton id="deleteBtn" x="1018" y="173" skinName="XYInputButtonSkin" width="140" a_label="" a_labelSize="30"/>\n									</e:Group>\n									<e:Label id="infoText" text="" y="22" textColor="0x767676" horizontalCenter="0"/>\n								</e:Group>\n							</e:Skin>'),this._instance=new n),this._instance},n.prototype.updateKeyMode=function(t){this.lastKeyMode=this.keyMode,this.keyMode=t;for(var e=this.getKeySource(),n=0,i=26;i>n;n++){var r=this["key"+n];r.a_label=e[n]}this.bigBtn.visible=!0,0==this.keyMode?(this.bigBtn.a_label=i18n(""),this.switchBtn.a_label="123"):1==this.keyMode?(this.bigBtn.a_label=i18n(""),this.switchBtn.a_label="123"):(this.bigBtn.visible=!1,this.switchBtn.a_label="abc")},n.prototype.getKeySource=function(){return 0==this.keyMode?e.a_z:1==this.keyMode?e.A_Z:e.CHARS},n.prototype.getTextNowValue=function(){return this.tfValue},n.prototype.startTextInputMovie=function(){egret.clearInterval(this.timer),this.timer=egret.setInterval(this.onTimer,this,500),this.endPrix="",this.onTimer()},n.prototype.onTimer=function(){this.endPrix=""==this.endPrix?"|":"",this.updateTextInputRender()},n.prototype.stopTextInputMovie=function(){egret.clearInterval(this.timer)},n.prototype.upTheRoot=function(){var t=egret.getDefinitionByName("Main"),e=t.instance||Global.stage.getChildAt(0);if(e){this.tf.localToGlobal(0,this.tf.height+20,__point_XY);var n=this.ctx.height,i=Global.stage.stageHeight-n-20;Tween$.removeTweens(e),__point_XY.y>i&&Tween$.get(e).to({y:i-__point_XY.y},200)}},n.prototype.gainTheRoot=function(){var t=egret.getDefinitionByName("Main"),e=t.instance||Global.stage.getChildAt(0);e&&(Tween$.removeTweens(e),Tween$.get(e).to({y:0},200))},n.prototype.onKey=function(t){var e=t.currentTarget.__index__,n=this.getKeySource(),i=n[e];if(null!=this.tf.restrict){var r=new RegExp("["+this.tf.restrict+"]","g"),o=i.match(r);if(!o)return}this.tf.inputType==egret.TextFieldInputType.TEL?(i>="0"&&"9">=i||"."==i)&&(this.tfValue+=i,this.tf.dispatchEventWith(egret.Event.CHANGE),this.updateTextInputRender()):(this.tfValue+=i,this.tf.dispatchEventWith(egret.Event.CHANGE),this.updateTextInputRender())},n.prototype.updateTextInputRender=function(){this.tf.text=this.tfValue+this.endPrix},n.prototype.onDelete=function(t){this.tfValue=this.tfValue.substr(0,Math.max(0,this.tfValue.length-1)),this.tf.dispatchEventWith(egret.Event.CHANGE),this.updateTextInputRender()},n.prototype.onDeleteAll=function(){this.tfValue="",this.tf.dispatchEventWith(egret.Event.CHANGE),this.updateTextInputRender()},n.prototype.onBig=function(){0==this.keyMode?this.updateKeyMode(1):1==this.keyMode&&this.updateKeyMode(0)},n.prototype.onSwitch=function(){0==this.keyMode||1==this.keyMode?this.updateKeyMode(2):this.updateKeyMode(this.lastKeyMode)},n.prototype.show=function(t){var e=this;t.dispatchEventWith(egret.FocusEvent.FOCUS_IN),this.tf=t,this.tfValue=t.text,Global.stage.addChild(this),this.onResize(),this.ctx.bottom=-this.height,Tween$.removeTweens(this.ctx),Tween$.get(this.ctx).to({bottom:0},200).call(function(){e.startTextInputMovie()},this),this.upTheRoot(),this.tf.inputType==egret.TextFieldInputType.TEL?this.updateKeyMode(2):this.updateKeyMode(0)},n.prototype.onClose=function(){var t=this;Tween$.removeTweens(this.ctx),Tween$.get(this.ctx).to({bottom:-this.ctx.height},200).call(function(){remove_XY(t),t.stopTextInputMovie(),t.tf.text=t.tfValue,t.tf.dispatchEventWith(egret.FocusEvent.FOCUS_OUT)},this),this.gainTheRoot()},n.prototype.onResize=function(){this.width=Global.stage.stageWidth,this.height=Global.stage.stageHeight},n}(eui.Component);t.Keyboard=n,__reflect(n.prototype,"keyboard.Keyboard")}(keyboard||(keyboard={}));var keyboard;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.mDefaultColor=16777215,t.mPwd=!1,t.mUseSysKeyboard=!1,bindEuiCreateOkEventOnce_XY(t,t.checkCreate,t),t}return __extends(n,e),n.prototype.getPlaceHoldText=function(){return this.mPlaceholdText},n.prototype.setPlaceHoldText=function(t){this.mPlaceholdText=t},n.prototype.checkCreate=function(){this.created||(this.mPlaceholdText=this.text,this.mPlaceholdColor=this.textColor,this.displayAsPassword=!1,this.created=!0,egret.Capabilities.isMobile&&!this.mUseSysKeyboard?this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this):this.type=egret.TextFieldType.INPUT,this.removeEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this),this.once(egret.Event.FOCUS_IN,this.onFocusIn,this),this.addEventListener(egret.Event.FOCUS_OUT,this.onFocusOut,this))},n.prototype.getValue=function(){var e=this.text;return this.mobileIsFocused&&(e=t.Keyboard.getInstance().getTextNowValue()),e==this.mPlaceholdText?"":e.trim()},n.prototype.getIntegerValue=function(){var e=this.text;if(this.mobileIsFocused&&(e=t.Keyboard.getInstance().getTextNowValue()),e==this.mPlaceholdText)return"";var i=e.trim(),r=i.replace(n.moneyReg,"");return r},n.prototype.onFocusOut=function(){this.mobileIsFocused=!1,""==this.getValue()?this.resetPlacehold():this.displayAsPassword=this.mPwd},n.prototype.resetPlacehold=function(){this.checkCreate(),this.clearPlacehold(),this.text=this.mPlaceholdText,this.textColor=this.mPlaceholdColor,this.displayAsPassword=!1,this.once(egret.Event.FOCUS_IN,this.onFocusIn,this)},n.prototype.setValue=function(t){this.checkCreate(),this.clearPlacehold(),this.text=t},n.prototype.clearPlacehold=function(){this.checkCreate(),this.text="",this.textColor=this.mDefaultColor,this.displayAsPassword=this.mPwd,this.removeEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this)},n.prototype.onFocusIn=function(){this.clearPlacehold()},n.prototype.onClick=function(){SoundManager.playEffect(__tapSound),this.mobileIsFocused=!0,t.Keyboard.getInstance().show(this),this.displayAsPassword=!1},Object.defineProperty(n.prototype,"a_defaultColor",{get:function(){return this.mDefaultColor},set:function(t){this.mDefaultColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"a_isPwd",{get:function(){return this.mPwd},set:function(t){this.mPwd=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"a_useSysKeyboard",{get:function(){return this.mUseSysKeyboard},set:function(t){this.mUseSysKeyboard=t},enumerable:!0,configurable:!0}),n.moneyReg=new RegExp(",","g"),n}(eui.Label);t.PlaceholdLabel=e,__reflect(e.prototype,"keyboard.PlaceholdLabel")}(keyboard||(keyboard={}));var SimpleLoading=function(t){function e(){var e=t.call(this)||this;return e.str="iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAC9FBMVEUAAABEREBFRUFEREBEREBFRUG5u71EREFEREC5vL6jpqkiHB+mqashHiG4vL9ubnGoqKdWVlLf399ubnC6vL2lp6hDQ0CjpagiHR+5vL2UlJRtbm64uryoqqyYmpyKiot+fn25u726u7y5vL62uLqBgoFqamlZWVu5u72ztLaytbaxtLWxs7S5vL6kp6ltbXC6u74lIyW3u7u6ur+3t7lub3A/P0CytLV/gIJYWFk/P0A/P0CwsbNYWFm5u725u71laGe6vL4/P0CgoaN9fX+Pj4+5u75ERERISEa4uLiytLW0tbd9fX9/f4GPkZRWVlg/Pz+5vL24ury5u766vL1/f4NYWFm5u72NkZJ9foC6ur0/P0BYWFqvsbK5u766vL4/P0A/P0CrrK6Ym5xoaGo/P0Cqq619foCMj5FpaWuSk5VXV1m2ur0/P0GbnJ6enqI7OjpZWVtzdHRVVVhmamm9vb1gYF5HR0WKioq/v7+PkZS4vL6AgYNXV1qQkZQ/Pz+4ubyQkpa5u765u76ys7S6u74/Pz+6u759fYC5u7y6u75/gIKtr7F7fX6Ji419foCusLG3uryRk5WAgIK5u72ytLVYWFqrrK2RkpV/gINAQEBnZ2knIiS6u74/P0CUlph/gYKkpqkiHyK4u75/f4KPk5VYWFi5vL2SkpZ7fXy7u71CQkGPk5a2trZsbW4+Pj+LjY+Qk5WRkpSztLeysrZXV1tYWFpXV1uLjI6Qk5axsrNAQEBXV1p8fX+QkpRYWFiusLGQk5ZXV1m5vL64urq6vLxYWFmqqqw/P0AnIiRZWVyVmJpqamyBgYRXV1qfo6JXV1eSkpN+fn24ur4+Pj+6u7yPk5RAQEGOkpV/gICRkpZ/f4NXV1iwsLR7fH6RkpWQkJOPkpWJio1ZWVtaWlqPkpWPj5KfpKMgICC6vL4iHiBAQEFub3Clp6pZWVuRk5aAgYOztba0treMjpF8fX9YWFlsbW2foaRrbG2goqS1t7mho6Zer1k9AAAA6XRSTlMADgIFCwn9AwdYVFhYVFBYBRABUHBaEPxwEglT/GFgJQ/25JElHhf6+fTg3cCzdHRnXUQ1H/757eHe3cmci4qBW0lCQT8rKCMaC/79+vXy8vDt7eDY1tXOzMzEq6qmoJeTh3x8fHtzZmVgVFRRUTs2NjQwKSIZFRUTCfnw6+ro5N3X1MnHv7q4tK2opZaRj4uHhX19e3txbm5uaWJiYF9eWldVVEdFQzw4OC4pHA79/Prh3dXMycK3tLKtn5yblJSSi3p2cWxoZ2NhXl1dUEpJOzEZ6Ojb1dO/vry8u7qxp6aenH1mXkg0JzixFLsAAAogSURBVHja7ZtVtNNAEIZpaNECbeECxd3d3d3d3d3d3d3d3d3d3d0dgpXi8sKENNnJ7gbapAde+B/uuWfuzH5/k2x37rYbyrgivlQVKVTwJEjyK4YNBFKLY6zCSvIvhg0EWotjWEJoSYJ/sYzIQIC1EDPLB+ErECR+OJvNFk6gYyCBl4cNcGtD4xjLYPk2wsKxBFMHrOXlYQO82ui5mkYnMYbB8q2SBCZmTxVGzMfJwwYW8WobvHqVq21YDiMgfvs038OIYookbB42kJFT2yHbK9Cw1X7zLRYLw0+ap/T7MCIoLZ1HGeDUDgM8aH2D6DwGy5f+SI3hbJbdK/ElZfLFIEvJwwaYWkvbV4oqzAqNaymw8myAAWaMZl6VLw5y4DEYA0xt91yviE7o8YWwgjI3mHsD+clSAV/RUTQGa4CpbYr4uULr8UPLBoTQNhvLB4UQvljRTY+BZwFdW7wCMtBWl+8zEBoMYD7JHyoSJfbFuKshXbsb8YcJOvxwPgNhJQNcfqhVyECY9nKMa4CqLYT461fr8G02MCD9Agao90aSX5/w36dxyjG+AVwbPTcy0ECHb5UMhPIZ4PNB7koq3+sNgZiuAVw7D/ErRNfhSwYE2YAuHxSN8L2pY+l3RLi2e39kYJYe3+pbk8CALh/kqKLy34c5rMk7iQ3gWjwFr4fm8SEGBnwx7Z8YvwUJX+zdFefNQQZwbfFsyEAhHb5Fb01g89OqfFGsh/OwAVxbG/Fr8/mgP/CRksRR+WKczCgPG0C1HRA/W3HTfIgdUPigWi6Sh58BUivgKdiQzwcFwLckVddEUHiSh2cBqcVTsH8J43wcm074YqKeah42oNZaruApGAw+yFldJMqv5mEDam1DxM8dPTC+s1kynfzlyEDCLHJMuxoqMe0U1OFbj4Xl9kTNvKlCdPyOQmvSLuU1vIipqoMS00xBPj9665xvn/D4v561oau41ytLQpGsCef1r2shPAVXc/MubHv79m1fJ8u35pGf9fpu3v3Kj9akMfr3tQGegjx+8T2AB+Vle8L2vv5XrBTNwT4vJRMp/NQLnfrPldA2F5mCLL/7ofJvZSXvzPSEachcq1KQfV7Dy/yUjbr9/rm2NfU1Y/PYvNY5P71VtJ3uCe3w/wdR2iT0fHHVAn6pPPH/PK9K7JanIJ3X8c4n4Ks6p+0JE6QCPlKcA0mpcTOLYYa082teC4Xg3bgDFSuxPznwkaqF1vSEUxFfvtfZp1P3emJcp398mGknGlL/J08r/wn4Gk3DPaFtAM2H9af6ch7LSGxZtU8UH1TNinvCtflS0Hy4JqOyBIPfpc4nlp88b3eqJ0ySluaDEuYvaZZvzZucw6/TmdMTZhpE80GJwrvM8IVTfd+y/GrL+D2h42hFmg8anNk4v+PWtyy/77Fwuj2hOzHhE+Uzys/7lvDJzXf+tidrn4bhh4lr9P6fYvnbO/+pJ3SGpKL4Q5zG+BDaSvFznhP86IliHe6N+aUKG+RDbJmGX35aaD97sq714pA5WdcwH2J1EH9PtwB6wsy1FH7K+Cb4ls7lFfy2joH1pK7wieT3hEYm+KBDvpvfWvgj30r9rWT+hFL/0c0UXwiXU5p6j22hAuaDsuzyehea4kOsNbzvlgjlB9/KG+P8GKdJfihh/wX4aWyfEBTE2J/3Cf8+H/eE/4SP9wn/Mp/dJ/y7fHaf8O/y2X3Cv83H+4ThWcWVJP1SLDisjrNnz24ZRauWLVueOSP9EkoMQ5Z/uieMFpzX3+Tr18+vtfoM+hXLCgb4fGLALB8MMPyvEt9ngM8nBszywQDLBwPyr+tC8fnEgGk+GGD5cE2QAZaPDZh//tPz+eQWMHxswDxfSM/hIwMsnxgIzvxPz/KRAZaPDASFDwZoPlIoho8NBIOPDWA+NoD5WEeCwQcDDB8biCyrjd0eEmJvExmrzUXzfEldYvtUQFLsqBr9vicMTux/T/i/J/zfE5roCTPVd5llufYWMfjZsbx12Mbsa13w7t29ToY+O5Y3Tyv3NMePlePdx49lxicL+LNjYe5l8ZemmLvXk4EPyrFACOyz4+XV1U/JuprhJy37i//u3buaKwP47DbLKJGonplnfbTCB42+5Cc/Wf6Emj6tsHF+EcIHlZ0cy499KmfcRFSfuiW6UX7YmpgPynHW9Sd+4SFhmD75uEG+0Jzig26u/C0/ft1SLL/0BIN8y1iGD3NibxddfrJGKd+z/DTtjL//FqlJ80FlZzq4fGtIai/LTxVibp9sQQ6aD9ek6hIO/3kaL8tPOSGZ2fUn1uSyNB80Ij7Fd8M3F1l+3aLBWP+Sjqb5oDLjE+D3YceA7+/f0/wthYO1/hapSfNBVQXcE079TvMTHae+/5BvruD3/G8xjlqTm/dBfFkzNT1hgtTfNfwUEy9R42YWxcF+vieuqPHhQxEqlmBsGS2/qkPbE0bQ8EcmoccVBktzom7RP/PXPPgAqsHkdRoBfKIldE84nOAHZWLHnSv/75ZySs8/rP+Tyn2Q5GnF5i2pSvgjmJ6wmHIJKmZwsOOWTKT871h5sUuf72q10SPzPRtjsT4dM/sokyA+2xMmlp/9xG7edZ2o8EGJ9V//Po+PD5rE89ljrGxgPKcndFeEwYcX497XLCkIX8ysf/+XEr6n1xpuXtHbwO+TgNcTZhCvFnTxn+uRiF9PGfdiY1C6X0qixHYofNB9vk/X2RzvmnN7QkcGh868ykT40KIp48b78uXbG1kRlFinDcBX1A7zkWI1dwbyfUJwtpnwxSlqXjzgIwNy7TjC99Qg19Pc9/mmEz606WpePOArBkg/189D1CI4/KTZCV9cTPLivSEGSO1TZKBfgqB8n3AM4g91kbwQZIDUCjWQg3HB4K8oRfhxVqE8OzKAalcQ/ocNnczzLXcJX6yP87ABXPtQ4cOM3GGeHwHxe7txHjaAa9eUU/igZ/7zrVx+t9R6e8fYwGlN7STC91xzmONbGiF+FQcaAxv4Nl9TG2uTh6wJM/zlW7n8+CkJXyyoHcOu8r/M19a2QmtSuR6m9gnzIP5wagy7ygcDmlrXDYUP2mdmn7BdHMKPU4waw67yv5ymaleqfFBR4/uEzlr4iAc9hl3lf4tA1z5Ca9Itl+F9wsWIX8lNj2FX+W8i0LVdynmIWhndJyxZGRnIwIxhV/lggK6dgQxsimVwnzAD4ld3MGPYFT4YYGodA/GqaHCf0JWhkmogEzuGXeGDAXauLyVrYgun4TMm7sS+aTCS8xpCVD4YYGt3yvheB3sEcMaEPRNXLK3ET1GUcxYv3jcQ6Qfo2vi9JP7O+PxzfLgn/MO5w4JVxDATeGcRwcAP0g+wtQc9noFLScz4uUfHkc09eGPE+wF8YoCpTTBwhiNgPv/cqZV7FjUe8JEBtlYgMZYR0Llbfgy3ZIHWhgvGuWNs4F+ce6Z6QpN8I2fHsQGT586NnZ1fGENVBOPn7n8CouxuDdyOdJIAAAAASUVORK5CYII=",e}return __extends(e,t),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.getInstanceMatch=function(){return this._instanceMatch||(this._instanceMatch=new e),this._instanceMatch},e.show=function(t){void 0===t&&(t="Loading..."),e.getInstance().addLoading(t)},e.showMatch=function(t,n,i,r){void 0===t&&(t="..."),void 0===n&&(n=!1),void 0===i&&(i=null),void 0===r&&(r=null),e.getInstanceMatch().addLoading(t,n,i,r)},e.hide=function(){e.getInstance().clearLoading()},e.hideMatch=function(){e.getInstanceMatch().clearLoading()},e.prototype.updateText=function(t){this.tf&&(this.tf.text=t)},e.prototype.addLoading=function(t,e,n,i){var r=this;void 0===e&&(e=!1),void 0===n&&(n=null),void 0===i&&(i=null),this.clearLoading(),this.closeCall=n,this.callObj=i,null==this.__loadingTexture&&egret.BitmapData.create("base64",this.str,function(t){r.__loadingTexture=new egret.Texture,r.__loadingTexture.bitmapData=t,r.loading.texture=r.__loadingTexture,r.str=""}),this.sp||(this.sp=new egret.Sprite,this.sp.graphics.beginFill(0,.2),this.sp.touchEnabled=!0,this.sp.graphics.drawRect(0,0,16,16),this.sp.graphics.endFill()),this.backPanel||(this.backPanel=new egret.Shape,this.backPanel.graphics.beginFill(0,.6),this.backPanel.graphics.drawRoundRect(0,0,400,260,20,20),this.backPanel.graphics.endFill(),this.backPanel.anchorOffsetX=200,this.backPanel.anchorOffsetY=130),this.closeBtn||(this.closeBtn=new egret.Sprite,this.closeBtn.graphics.beginFill(16711680,0),this.closeBtn.graphics.lineStyle(1,16777215,1),this.closeBtn.graphics.drawCircle(0,0,20),this.closeBtn.graphics.endFill(),this.closeBtn.graphics.moveTo(-10,-10),this.closeBtn.graphics.lineTo(10,10),this.closeBtn.graphics.moveTo(-10,10),this.closeBtn.graphics.lineTo(10,-10),this.closeBtn.touchEnabled=!0,bindTapEvent_XY(this.closeBtn,this.onClose,this,!0)),this.sp.alpha=0,Global.stage.addChild(this.sp),null==this.loading&&(this.loading=new egret.Bitmap,this.loading.anchorOffsetX=64,this.loading.anchorOffsetY=64,this.loading.scaleX=.7,this.loading.scaleY=.7),this.loading.rotation=0,egret.clearInterval(this.timer),this.timer=egret.setInterval(this.onTimer,this,75),this.tf||(this.tf=new egret.TextField,this.tf.size=30),this.tf.text=t,this.resizePosition(),this.addChild(this.backPanel),this.addChild(this.loading),this.addChild(this.tf),e&&this.addChild(this.closeBtn),ResizeCall.addCall(this.resizePosition,this),this.showTimer=egret.setTimeout(function(){r.sp.alpha=1,Global.stage.addChild(r)
},this,200)},e.prototype.onClose=function(){this.closeCall&&this.closeCall.apply(this.callObj)},e.prototype.resizePosition=function(){var t=Global.stage.stageWidth,e=Global.stage.stageHeight;this.sp.scaleX=t/16,this.sp.scaleY=e/16,this.backPanel.x=t/2,this.backPanel.y=e/2,this.loading.x=t/2,this.loading.y=e/2-30,this.closeBtn.x=this.backPanel.x+this.backPanel.anchorOffsetX-10-20,this.closeBtn.y=this.backPanel.y-this.backPanel.anchorOffsetY+10+20,this.tf.y=this.loading.y+this.loading.anchorOffsetY+10,this.tf.x=(t-this.tf.textWidth)/2},e.prototype.onTimer=function(){this.loading.rotation>=360&&(this.loading.rotation=0),this.loading.rotation+=30},e.prototype.clearLoading=function(){this.closeCall=null,this.callObj=null,egret.clearInterval(this.timer),egret.clearTimeout(this.showTimer),remove_XY(this.loading),remove_XY(this.backPanel),remove_XY(this.closeBtn),remove_XY(this.sp),remove_XY(this.tf),remove_XY(this),this.loading&&Tween$.removeTweens(this.loading),ResizeCall.del(this.resizePosition,this)},e}(egret.Sprite);__reflect(SimpleLoading.prototype,"SimpleLoading");var MarqueeNotice=function(t){function e(){var e=t.call(this)||this;return e.topValue=5,e.centerOffset=0,e.skinName='<?xml version="1.0" encoding="utf-8"?>\n			<e:Skin class="__MarqueeNoticeSkin" width="500" height="50" xmlns:e="http://ns.egret.com/eui">\n				<e:Rect ellipseWidth="20" ellipseHeight="20" left="0" right="0" top="0" bottom="0" fillColor="0x000000" fillAlpha="0.6"/>\n				<e:Rect id="msk" height="50" y="0" width="450" x="50"/>\n				<e:Label text="Label" size="24" id="tf" x="50" height="50" y="0" verticalAlign="middle"/>\n				<e:Label text="" x="5" verticalCenter="0"/>\n			</e:Skin>',e.tf.mask=e.msk,e.touchEnabled=!1,e.touchChildren=!1,e.msgList=[],ResizeCall.addCall(e.onResize,e),e.setup(),e}return __extends(e,t),e.getInstace=function(){return this._intance||(this._intance=new e),this._intance},e.prototype.setEnable=function(t){this.isDisabled=!t},e.prototype.setup=function(t,e,n){void 0===t&&(t=450),void 0===e&&(e=5),void 0===n&&(n=0),this.topValue=e,this.centerOffset=n,this.width=t,this.msk.width=t-this.msk.x},e.prototype.onResize=function(){this.y=this.topValue,this.x=(Global.stage.stageWidth-this.width)/2+this.centerOffset},e.prototype.addNotice=function(t){this.isDisabled||(this.msgList.push(t),this.msgList.length>50&&this.msgList.shift(),this.stage||this.showNextNotice())},e.prototype.showNextNotice=function(){var t=this;if(this.msgList.length<=0)return void this.hide();if(Global.stage){Global.stage.addChild(this),this.onResize();var e=this.msgList.shift();this.tf.width=0/0,setHtmlText(this.tf,e),Tween$.removeTweens(this.tf);var n=this.tf.textWidth;this.tf.x=this.msk.width+this.msk.x,Tween$.get(this.tf).to({x:-n+this.msk.x},10*(n+this.width)).wait(500).call(function(){t.showNextNotice()})}},e.prototype.hide=function(){Tween$.removeTweens(this.tf),remove_XY(this)},e}(eui.Component);__reflect(MarqueeNotice.prototype,"MarqueeNotice");var ShareMenu=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.skinName='\n			<?xml version="1.0" encoding="utf-8"?>\n			<e:Skin class="ShareMenuSkin" width="1334" height="750" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n				<e:Rect id="bg" left="0" right="0" top="0" bottom="0" fillAlpha="0.6"/>\n				<e:Group id="ctx" horizontalCenter="0" verticalCenter="0" width="378">\n					<e:Image id="panelBg" source="SHARE_bg_png" anchorOffsetX="0" scale9Grid="30,24,33,149" left="0" right="0" top="0" bottom="0"/>\n					<e:Group id="grp" y="70" horizontalCenter="0">\n					</e:Group>\n					<e:Image source="SHARE_title_bg_png" horizontalCenter="0" y="0"/>\n					<e:Label id="titleTf" text="" y="11.52" size="26" horizontalCenter="0"/>\n				</e:Group>\n			</e:Skin>\n		',e.titleTf.text=i18n(""),ResizeCall.addCall(e.onResize,e),bindTapEvent_XY(e.bg,e.onClose,e),e}return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.close=function(){this.onClose()},e.prototype.onClose=function(){remove_XY(this)},e.prototype.show=function(t,e,n){var i=this;if(this.gameId=t,this.roomNO=e,this.roomConfigText=n,!Global.loginDto||!Global.loginDto.permissionConf||!Global.loginDto.permissionConf.sharePopup||Global.loginDto.permissionConf.sharePopup.length<=0)return void copyGameShareText_XY(t,e,n);var r=Global.loginDto.permissionConf.sharePopup.concat();r.unshift(ShareType.copy);var o=ShareTools.buildShareData(t,e,n);this.shareInfo=o.info,this.url=o.url,this.grp.removeChildren();for(var a=32,s=50,l=0;l<r.length;l++){var h=r[l],u=this.items[l];u||(u=new ShareItem,this.items[l]=u,bindTapEvent_XY(u,this.onShare,this,!0)),u.setData(h),u.x=a,a+=u.width+s,this.grp.addChild(u)}this.ctx.width=Math.max(300,a+50);var c=function(){i.onResize(),Global.stage.addChild(i),Tween$.removeTweens(i),tween_XY_alphaShow(i)};if(DevelopMain.self&&DevelopMain.self.config&&DevelopMain.self.config.httpURI){var p=DevelopMain.self.config.httpURI+HttpProtocol.game_user_hall_get_share_config;SimpleLoading.show(i18n("...")),httpPostSmart_XY(p,function(t){SimpleLoading.hide();var e=parseJsonSafe_XY(t);e&&e.s>0&&(ShareTools.shareConfig=e.d),c()},this)}else c()},e.prototype.onShare=function(t){var e=t.currentTarget;e.shareType==ShareType.copy?copyGameShareText_XY(this.gameId,this.roomNO,this.roomConfigText,!0):(ShareTools.shareTo(e.shareType,this.gameId,this.roomNO,this.roomConfigText),this.close())},e.prototype.onResize=function(){this.width=Global.stage.stageWidth,this.height=Global.stage.stageHeight},e}(eui.Component);__reflect(ShareMenu.prototype,"ShareMenu");var ShareItem=function(t){function e(){var e=t.call(this)||this;return e.skinName='\n			<?xml version="1.0" encoding="utf-8"?>\n			<e:Skin class="ShareItemSkin" width="64" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n				<e:Image id="icon" x="0" y="0" width="64" height="64"/>\n				<e:Label id="tf" text="WhatsApp" y="80" horizontalCenter="0" size="18"/>\n			</e:Skin>\n		',e.y=e.anchorOffsetX=e.anchorOffsetY=e.width/2,e}return __extends(e,t),e.prototype.setData=function(t){this.shareType=t,this.tf.text=ShareType.toString(t),this.icon.source="SHARE_icon_"+t+"_png"},e}(eui.Component);__reflect(ShareItem.prototype,"ShareItem");var ShareTools=function(){function t(){}return t.canShowShareBtn=function(){return Global.loginDto&&Global.loginDto.permissionConf&&Global.loginDto.permissionConf.sharePopup&&Global.loginDto.permissionConf.sharePopup.length>0},t.buildShareData=function(t,e,n){var i=i18n("[]")+GameIdEnum.toString(t)+""+i18n("")+e+""+n;i+=""+i18n("{0}",15);var r="",o=i,a=Global.shareURL;return null!=a&&""!=a&&(Global.isFrom3rd?(r=a.split("${r}").join(e+""),o+=" \n"+r):-1!=a.indexOf("?")?(r=a+"&friendRoom="+e,o+=" \n"+r):(r=a+"?friendRoom="+e,o+=" \n"+r)),{info:i,url:r,all:o}},t.shareTo=function(e,n,i,r){var o=this,a=t.buildShareData(n,i,r),s=a.info,l=a.url;switch(e){case ShareType.whatsapp:this.toWhatsApp(s,l,a.all);break;case ShareType.telegram:this.toTelegram(s,l,a.all,e);break;case ShareType.skype:this.toSkype(s,l,a.all,e);break;case ShareType.qq:copyTextToClipboard_XY(a.all,function(){Toast.show(i18n("{0}",ShareType.toString(e))),egret.setTimeout(function(){o.toQQ(s,l,"","")},o,1e3)},function(){Toast.show(i18n(""))});break;case ShareType.weixin:copyTextToClipboard_XY(a.all,function(){Toast.show(i18n("{0}",ShareType.toString(e))),egret.setTimeout(function(){o.toWeChat()},o,1e3)},function(){Toast.show(i18n(""))});break;default:copyTextToClipboard_XY(a.all,function(){Toast.show(i18n("{0}",ShareType.toString(e)))},function(){Toast.show(i18n(""))})}},t.toQQ=function(t,e,n,i){if(!Global.isNative&&egret.Capabilities.isMobile){var e="mqqapi://share/to_fri?src_type=isqqBrowser&version=1&file_type=news&share_id=&url="+Base66.encode(e)+"&title="+Base66.encode(n)+"&description="+Base66.encode(t)+"&previewimageUrl="+Base66.encode(i)+"&image_url="+Base66.encode(i);openWindow_XY(this.shareConfig.qq&&""!=this.shareConfig.qq?this.shareConfig.qq:e)}},t.toWeChat=function(){!Global.isNative&&egret.Capabilities.isMobile&&openWindow_XY(this.shareConfig.wechat&&""!=this.shareConfig.wechat?this.shareConfig.wechat:"weixin://")},t.toWhatsApp=function(t,e,n){return Global.isNative||!egret.Capabilities.isMobile?void copyTextToClipboard_XY(n,function(){Toast.show(i18n("{0}",ShareType.toString(ShareType.whatsapp)))},function(){Toast.show(i18n(""))}):(copyTextToClipboard_XY(n,function(){},function(){}),void openWindow_XY(this.shareConfig.whatsApp&&""!=this.shareConfig.whatsApp?this.shareConfig.whatsApp:"whatsapp://send?text="+encodeURIComponent(t)+encodeURIComponent("\n\n"+e)+"&via=lopscoop"))},t.toTelegram=function(t,e,n,i){return Global.isNative||!egret.Capabilities.isMobile?void copyTextToClipboard_XY(n,function(){Toast.show(i18n("{0}",ShareType.toString(i)))},function(){Toast.show(i18n(""))}):(copyTextToClipboard_XY(n,function(){},function(){}),void(this.shareConfig.telegram&&""!=this.shareConfig.telegram?openWindow_XY(this.shareConfig.telegram):Toast.show(i18n("{0}",ShareType.toString(i)))))},t.toSkype=function(t,e,n,i){return Global.isNative||!egret.Capabilities.isMobile?void copyTextToClipboard_XY(n,function(){Toast.show(i18n("{0}",ShareType.toString(i)))},function(){Toast.show(i18n(""))}):(copyTextToClipboard_XY(n,function(){},function(){}),void(this.shareConfig.skype&&""!=this.shareConfig.skype?openWindow_XY(this.shareConfig.skype):Toast.show(i18n("{0}",ShareType.toString(i)))))},t}();__reflect(ShareTools.prototype,"ShareTools");var ShareConfig=function(){function t(){}return t}();__reflect(ShareConfig.prototype,"ShareConfig");var ShareType=function(){function t(){}return t.toString=function(t){var e=this.nameDic[t]||"unknown";return i18n(e)},t.copy=0,t.weixin=1,t.qq=2,t.telegram=11,t.whatsapp=12,t.skype=13,t.nameDic={0:"",1:"",2:"QQ",11:"Telegram",12:"WhatsApp",13:"Skype"},t}();__reflect(ShareType.prototype,"ShareType");var SignalStatus=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!1,e.shape=new egret.Shape,e.addChild(e.shape),e.tf=new egret.TextField,e.addChild(e.tf),e.setup(),e}return __extends(e,t),e.getInstace=function(){return this._intance||(this._intance=new e),this._intance},e.prototype.disable=function(){remove_XY(this),ResizeCall.del(this.onResize,this),Global.eventCenter.removeEventListener(EventEnum.PHONE_SIGNAL_CHANGED,this.updateSignal,this)},e.prototype.enable=function(){remove_XY(this),ResizeCall.del(this.onResize,this),Global.eventCenter.removeEventListener(EventEnum.PHONE_SIGNAL_CHANGED,this.updateSignal,this),Global.stage.addChild(this),Global.eventCenter.addEventListener(EventEnum.PHONE_SIGNAL_CHANGED,this.updateSignal,this),ResizeCall.addCall(this.onResize,this),this.updateSignal(),this.onResize()},e.prototype.setup=function(t,e,n,i){void 0===t&&(t=0/0),void 0===e&&(e=10),void 0===n&&(n=10),void 0===i&&(i=0/0),this._top=t,this._bottom=e,this._left=n,this._right=i,this.onResize()},e.prototype.onResize=function(){this.stage&&(isNaN(this._top)?isNaN(this._bottom)||(this.y=Global.stage.stageHeight-this._bottom-this.height):this.y=this._top,isNaN(this._left)?isNaN(this._right)||(this.x=Global.stage.stageWidth-this._right-this.width):this.x=this._left)},e.prototype.updateSignal=function(){var t=this.computeSignLevel(),e=getColorByPercent_XY(Global.phoneSignal/999*100),n=40,i=this.shape;i.graphics.clear();for(var r=0,o=4;o>r;r++){t>=r?(i.graphics.beginFill(e,1),i.graphics.lineStyle(0,e)):i.graphics.lineStyle(1,e);var a=r+1;i.graphics.drawRoundRect(10*r,(o-a)*(n/o),6,n-(o-a)*(n/o),5,5),i.graphics.endFill()}this.tf.text=Global.phoneSignal+"ms",this.tf.textColor=e,this.tf.size=20,this.tf.y=i.height+5,i.x=Math.max(0,(this.tf.textWidth-i.width)/2),this.onResize()},e.prototype.computeSignLevel=function(){var t=Global.phoneSignal;return 50>=t?4:200>=t?3:400>=t?2:700>=t?1:0},e}(egret.DisplayObjectContainer);__reflect(SignalStatus.prototype,"SignalStatus");var Toast=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.init=function(t){this.mContainer=t},e.getStage=function(){return e.mContainer},e.show=function(t,e){if(void 0===e&&(e=1200),this.mContainer){var n=ObjToast.make();this.mContainer.addChild(n),n.setHtmlText(t),n.x=(this.mContainer.stageWidth-n.bg.width)/2;var i=.4*(this.mContainer.stageHeight-n.bg.height);n.y=i+30,n.alpha=0,egret.Tween.get(n).to({alpha:1,y:i},500,egret.Ease.quintOut).wait(e).to({alpha:0,y:i-50},500,egret.Ease.quintIn).call(function(t){ObjToast.collect(t)},null,[n])}},e.fontSize=26,e}(egret.DisplayObjectContainer);__reflect(Toast.prototype,"Toast");var ObjToast=function(t){function e(){var e=t.call(this)||this;return e.bg=new egret.Shape,e.addChild(e.bg),e.tf=new egret.TextField,e.tf.fontFamily="Microsoft Yahei",e.tf.size=Toast.fontSize,e.tf.lineSpacing=8,e.tf.multiline=!0,e.tf.wordWrap=!0,e.addChild(e.tf),e}return __extends(e,t),e.make=function(){return e.mPool.length>0?e.mPool.shift():new e},e.collect=function(t){egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t),egret.setTimeout(function(t){e.mPool.push(t)},null,1,t)},e.prototype.setHtmlText=function(t){this.tf.width=.8*Toast.getStage().stageWidth,this.tf.height=Toast.getStage().stageHeight,this.tf&&(this.tf.textFlow=(new egret.HtmlTextParser).parser(t)),this.bg.graphics.clear(),this.tf.width=this.tf.textWidth,this.tf.height=this.tf.textHeight,this.tf.x=25,this.tf.y=15,this.bg.graphics.beginFill(1973790,.8),this.bg.graphics.drawRoundRect(0,0,this.tf.width+50,this.tf.height+30,15,15),this.bg.graphics.endFill()},e.mPool=[],e}(egret.Sprite);__reflect(ObjToast.prototype,"ObjToast");var I18N=function(){function t(t){this.gameId=t}return t.getInstance=function(e){return this.instanceDic[e]||(this.instanceDic[e]=new t(e)),this.instanceDic[e]},t.initLib=function(t){var e=I18NConfig.data;this.getInstance("lib").init(e,t)},t.IsNowModuleSupport=function(t){return t==I18NType.zh_cn?!0:window[Global.gameId]&&window[Global.gameId].isLanuageSupport&&window[Global.gameId].isLanuageSupport(t)?!0:!1},t.prototype.switchLanguage=function(t){this.i18nType=t},t.prototype.init=function(t,e){void 0===e&&(e="zh-cn"),this.wordDic=t,this.i18nType=e},t.prototype.toString=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=t;return this.wordDic?this.i18nType==I18NType.zh_cn?this.wordDic[t]&&(i=this.wordDic[t][this.i18nType]||t):this.wordDic[t]?(i=this.wordDic[t][this.i18nType],(null==i||""==i)&&(i=t,error("["+this.gameId+"]("+this.i18nType+"): "+t))):error("["+this.gameId+"]: "+t):error(""+this.gameId),format_XY2(i,e)},t.instanceDic={},t}();__reflect(I18N.prototype,"I18N");var I18NConfig=function(){function t(){}return t.data={"...":{"en-us":"Matching ...","zh-tw":"..."},"{0} 3":{"en-us":"{0} Exit in 3 seconds","zh-tw":"{0} 3"},"":{"en-us":"Exception occurred","zh-tw":""},"{0}":{"en-us":"Playback file is damaged or missing, unable to play!Error code: {0}","zh-tw":"{0}"},"HD_FastJoin: {0}":{"en-us":"Hd'fastjoin failed: {0}","zh-tw":"HD_FastJoin: {0}"},": {0}":{"en-us":"Table change failed: {0}","zh-tw":": {0}"},"!":{"en-us":"Your account has been logged in elsewhere!Please pay attention to account security!","zh-tw":"!"},"":{"en-us":"Network error. Please try again later.","zh-tw":""},"!":{"en-us":"Server internal error!","zh-tw":"!"},"!":{"en-us":"Network exception, failed to connect to game server!","zh-tw":"!"},"":{"en-us":"complete","zh-tw":""},"":{"en-us":"Capitalization","zh-tw":""},"":{"en-us":"A lowercase letter","zh-tw":""},"":{"en-us":"Eliminate","zh-tw":""},"":{"en-us":"delete","zh-tw":""},"":{"en-us":"Chess and card security input","zh-tw":""},"":{"en-us":"If the configuration is abnormal, please contact the service provider to check: [line configuration]","zh-tw":""},"ID":{"en-us":"If the configuration is abnormal, please contact the service provider to check: [game ID]","zh-tw":"ID"},"jumpType12":{"en-us":"If the configuration is abnormal, please contact the service provider to check: [when jumptype is 1 or 2, you must directly locate the game]","zh-tw":"jumpType12"},"":{"en-us":"Game hall","zh-tw":""},"":{"en-us":"Landlord","zh-tw":""},"":{"en-us":"The Big Battle","zh-tw":""},"":{"en-us":"Golden Flower","zh-tw":""},"":{"en-us":"Bloody Battle","zh-tw":""},"":{"en-us":"Pirate King","zh-tw":""},"":{"en-us":"Niu-niu For Thousands Person","zh-tw":""},"":{"en-us":"Sic Bo","zh-tw":""},"":{"en-us":"Fruit Machine","zh-tw":""},"":{"en-us":"Players Bull-Bull","zh-tw":""},"":{"en-us":"Baccarat","zh-tw":""},"":{"en-us":"Red Envelope","zh-tw":""},"":{"en-us":"Water Margin","zh-tw":""},"":{"en-us":"Texas Hold'em Poker","zh-tw":""},"21":{"en-us":"BlackJack","zh-tw":"21"},"":{"en-us":"Run Fast","zh-tw":""},"":{"en-us":"2 Person's Mahjong","zh-tw":""},"":{"en-us":"Pineapple Poker","zh-tw":""},"":{"en-us":"Bleeding Mahjong","zh-tw":""},"3D":{"en-us":"3D Fishing","zh-tw":"3D"},"":{"en-us":"Three-Rich Facecard","zh-tw":""},"":{"en-us":"Pong Kong Mahjong ","zh-tw":""},"":{"en-us":"Two-Eight Bar","zh-tw":""},"":{"en-us":"Sparrow Nine","zh-tw":""},"":{"en-us":"ChuDaDi","zh-tw":""},"":{"en-us":"Unknown game","zh-tw":""},' "{0}" ':{"en-us":"Resource &apos;{0}&apos; failed to load. Please try again later!","zh-tw":' "{0}" '},"\n":{"en-us":"The game version has been updated. Please log in again!","zh-tw":"\n"},"\n":{"en-us":"Login failed. Please login again!","zh-tw":"\n"},"IP\n":{"en-us":"IP has been blocked, please contact the administrator!","zh-tw":"IP\n"},"\n!":{"en-us":"The account has been blocked. Please contact the administrator!","zh-tw":"\n!"},"!":{"en-us":"You have been asked out of the room by the administrator!","zh-tw":"!"},"":{"en-us":"unknown error","zh-tw":""},"":{"en-us":"Please use the screenshot of mobile phone to save QR code information directly","zh-tw":""},"-{0}.png":{"en-us":"QR code - {0}.png","zh-tw":"-{0}.png"},"!":{"en-us":"Wechat has been copied, please open wechat manually to add friends!","zh-tw":"!"},"":{"en-us":"QR code has been saved to your album!","zh-tw":""},"":{"en-us":"Close","zh-tw":""},"":{"en-us":"cancel","zh-tw":""},"":{"en-us":"savings deposit card","zh-tw":""},"":{"en-us":"Credit Card","zh-tw":""},"":{"en-us":"Semi Credit Card","zh-tw":""},"":{"en-us":"Prepaid card ","zh-tw":""},"":{"en-us":"ICBC","zh-tw":""},"":{"en-us":"the Agricultural Bank of China","zh-tw":""},"":{"en-us":"Bank of China","zh-tw":""},"":{"en-us":"China Construction Bank","zh-tw":""},"":{"en-us":"Bank of communications of China","zh-tw":""},"":{"en-us":"China Post Savings Bank","zh-tw":""},"_0":{"en-us":'God, player <font color="#FBEF92">{0}</font> in <font color="#FBEF92">{1}{2}</font> draw win <font color="#FBEF92">{3}</font>, it\'s amazing!',"zh-tw":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>',"zh-cn":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>'},"_1":{"en-us":'Congratulations to players <font color="#FBEF92">{0}</font> in <font color="#FBEF92">{1}{2}</font> be calm and courageous, win in one fell swoop <font color="#FBEF92">{3}</font> !',"zh-tw":'<font color=\\"#FBEF92\\">{0}</font><font color=\\"#FBEF92\\">{1}{2}</font><font color=\\"#FBEF92\\">{3}</font>',"zh-cn":'<font color=\\"#FBEF92\\">{0}</font><font color=\\"#FBEF92\\">{1}{2}</font><font color=\\"#FBEF92\\">{3}</font>'},"_2":{"en-us":'Congratulations to players <font color="#FBEF92">{0}</font> in <font color="#FBEF92">{1}{2}</font> win <font color="#FBEF92">{3}</font>, it\'s just a drop in the sky~~',"zh-tw":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>~~',"zh-cn":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>~~'},"_3":{"en-us":'Congratulations to players <font color="#FBEF92">{0}</font> fortunately, at <font color="#FBEF92">{1}{2}</font> win <font color="#FBEF92">{3}</font>, it\'s a game for 1 minute, you never need work for 10 years!',"zh-tw":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>110',"zh-cn":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>110'},"_4":{"en-us":'Good luck is coming again, players <font color="#FBEF92">{0}</font> in <font color="#FBEF92">{1}{2}</font> win again <font color="#FBEF92">{3}</font>, the atmosphere is too hot!',"zh-tw":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>',"zh-cn":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>'},"_5":{"en-us":'Amazing my days, players <font color="#FBEF92">{0}</font> on <font color="#FBEF92">{1}{2}</font> the hand of God is easy to bet <font color="#FBEF92">{3}</font>, Gold Coins are in the bag !',"zh-tw":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>',"zh-cn":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>'},"_6":{"en-us":'The god of wealth, the player <font color="#FBEF92">{0}</font> even at <font color="#FBEF92">{1}{2}</font> win <font color="#FBEF92">{3}</font>, Gold coins waterfall!',"zh-tw":'<font color=\\"#FBEF92\\">{0}</font><font color=\\"#FBEF92\\">{1}{2}</font><font color=\\"#FBEF92\\">{3}</font>',"zh-cn":'<font color=\\"#FBEF92\\">{0}</font><font color=\\"#FBEF92\\">{1}{2}</font><font color=\\"#FBEF92\\">{3}</font>'},"_7":{"en-us":'Player <font color="#FBEF92">{0}</font> in <font color="#FBEF92">{1}{2}</font> win again <font color="#FBEF92">{3}</font>, and sure enough, one hits the jackpot !',"zh-tw":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>',"zh-cn":'<font color="#FBEF92">{0}</font><font color="#FBEF92">{1}{2}</font><font color="#FBEF92">{3}</font>'},"":{"en-us":"Network exception, please try again later","zh-tw":""},"":{},"!! {0}-{1}":{"en-us":"Network exception !! Error codes {0}-{1}","zh-tw":"!! {0}-{1}"},"":{"en-us":"Illegal parameter","zh-tw":""},"":{"en-us":"Quick join failed, illegal operation","zh-tw":""},"":{"en-us":"Network error, please try again later","zh-tw":""},"":{"en-us":"Creation failed, illegal operation","zh-tw":""},"":{"en-us":"Join failed, illegal operation","zh-tw":""},"":{"en-us":"Enter maintenance mode, please come back later","zh-tw":""},"":{"en-us":"Internal table error","zh-tw":""},"":{"en-us":"You have been banned","zh-tw":""},"":{"en-us":"You have left the game","zh-tw":""},"GM":{"en-us":"Illegal GM directive","zh-tw":"GM"},"GM":{"en-us":"GM repeatedly enters the table","zh-tw":"GM"},"":{"en-us":"Internal server error","zh-tw":""},"":{"en-us":"network anomaly","zh-tw":""},"GM":{"en-us":"GM is not allowed to join any table","zh-tw":"GM"},"":{"en-us":"Already joined another table","zh-tw":""},"":{"en-us":"Server internal error, failed to join the table","zh-tw":""},"":{"en-us":"Did not join the room","zh-tw":""},"":{"en-us":"The network is disconnected!","zh-tw":""},"":{"en-us":"Network disconnected","zh-tw":""},"":{"en-us":"The network connection is lost!","zh-tw":""},"":{"en-us":"Temporary maintenance, please forgive me","zh-tw":""},"":{"en-us":"Table creation is not allowed by default","zh-tw":""},"":{"en-us":"Network data error","zh-tw":""},"!":{"en-us":"Network data error!","zh-tw":"!"},"":{"en-us":"Invalid table","zh-tw":""},"":{"en-us":"The room is under maintenance, please come back later","zh-tw":""},"":{"en-us":"Friends table room, not allowed to join quickly","zh-tw":""},"":{"en-us":"The network is abnormal, the match fails","zh-tw":""},"":{"en-us":"Friends table room, no cancellation is allowed","zh-tw":""},"":{"en-us":"Unmatch failed","zh-tw":""},"":{"en-us":"Room creation failed, non-friend table","zh-tw":""},"":{"en-us":"Room entry failed, non-friend table","zh-tw":""},"":{"en-us":"Table does not exist","zh-tw":""},"":{"en-us":"Enter the maintenance state, please come back later","zh-tw":""},"{0}":{"en-us":"Quick join failed, illegal operation{0}","zh-tw":"{0}"},"App":{"en-us":"You cannot join the room quickly in another room game. Please refresh the page or restart the App","zh-tw":"App"},"{0}":{"en-us":"Table change failed, illegal operation{0}","zh-tw":"{0}"},"App":{"en-us":"You cannot cancel the match in another room game. Please refresh the page or restart the App","zh-tw":"App"},"{0}":{"en-us":"Cancellation failed, illegal operation{0}","zh-tw":"{0}"},"App":{"en-us":"You cannot create a friend table in another room game. Please refresh the page or restart the app","zh-tw":"App"},"{0}":{"en-us":"Creation failed, illegal operation{0}","zh-tw":"{0}"},"{0}":{"en-us":"Join failed, illegal operation{0}","zh-tw":"{0}"},"":{"en-us":"Friends table does not exist","zh-tw":""},"App":{"en-us":"You can't join the friend table already in another room game, please refresh the page or restart the app","zh-tw":"App"},"":{"en-us":"Login has timed out, please log in again","zh-tw":""},"":{"en-us":"Login has timed out, please log in again!","zh-tw":""},"0":{"en-us":"Carrying gold coins cannot be 0","zh-tw":"0"},"":{"en-us":"Carrying gold coins exceeds the upper limit","zh-tw":""},"":{"en-us":"Visitors cannot enter the game","zh-tw":""},"":{"en-us":"Illegal operation","zh-tw":""},"":{"en-us":"The game is not yet open","zh-tw":""},"{0}":{"en-us":"{0} gold coins are needed to enter the current room, you have insufficient gold coins, please recharge","zh-tw":"{0}"},"":{"en-us":"It is illegal to carry gold coins","zh-tw":""},"{0}":{"en-us":"There are not enough gold coins {0} to enter the table","zh-tw":"{0}"},"token":{"en-us":"Please exchange tokens first","zh-tw":"token"},"!":{"en-us":"network anomaly!","zh-tw":"!"},"":{"en-us":"Kicked out by the administrator","zh-tw":""},"":{"en-us":"Login has timed out, please log in again","zh-tw":""},"":{"en-us":"User does not exist","zh-tw":""},"":{"en-us":"Banned","zh-tw":""},"":{"en-us":"In the game room, no lottery","zh-tw":""},"":{"en-us":"The login session has timed out, please log in again!","zh-tw":""},"":{"en-us":"Login server internal error","zh-tw":""},"":{"en-us":"Network anomalies, please try again later!","zh-tw":""},"":{"en-us":"Illegal login header, please log in again","zh-tw":""},"":{"en-us":"Illegal login information, please log in again","zh-tw":""},"!":{"en-us":"The network connection is lost!","zh-tw":"!"},"":{"en-us":"Beginner's Room","zh-tw":""},"":{"en-us":"No-shuffle Room","zh-tw":""},"":{"en-us":"Five times Room","zh-tw":""},"":{"en-us":"Fresh Room","zh-tw":""},"":{"en-us":"Intermediate Room","zh-tw":""},"":{"en-us":"Advanced Room","zh-tw":""},"":{"en-us":"Fresh Room","zh-tw":""},"":{"en-us":"Beginner's Room","zh-tw":""},"":{"en-us":"Advanced Room","zh-tw":""},"":{"en-us":"Ten times Room","zh-tw":""},"":{"en-us":"Friends Room","zh-tw":""},"{0}":{"en-us":"Cannot create gold coins with less than {0}","zh-tw":"{0}"},"{0}":{"en-us":"There are not enough gold coins {0} to enter","zh-tw":"{0}"},"":{"en-us":"Can't enter in the game","zh-tw":""},"":{"en-us":"Can't quit while playing","zh-tw":""},"":{"en-us":"The dealer cannot quit","zh-tw":""},"":{"en-us":"You have already bet, you cannot leave the room before the end of this game","zh-tw":""},"":{"en-us":"The dealer cannot quit","zh-tw":""},"":{"en-us":"You have already bet, you cannot leave the room before the end of this game","zh-tw":""},"[]":{"en-us":"[Friend room]","zh-tw":"[]"},"":{"en-us":"Room NO:","zh-tw":""},"":{"en-us":"Room number copied","zh-tw":""},"":{"en-us":"Copy failed, please send room number to friends manually","zh-tw":""},"":{"en-us":"Lucky","zh-tw":""},"":{"en-us":"DaSiXi","zh-tw":""},"":{"en-us":"DaSanYuan","zh-tw":""},"":{"en-us":"JiuLianBaoDeng","zh-tw":""},"":{"en-us":"DaYuWu","zh-tw":""},"":{"en-us":"XiaoYuWu","zh-tw":""},"":{"en-us":"DaQiXing","zh-tw":""},"":{"en-us":"SiGang","zh-tw":""},"":{"en-us":"LianQiDui","zh-tw":""},"":{"en-us":"TianHu","zh-tw":""},"":{"en-us":"DiHu","zh-tw":""},"":{"en-us":"XiaoSiXi","zh-tw":""},"":{"en-us":"XiaoSanYuan","zh-tw":""},"":{"en-us":"SiAnKe","zh-tw":""},"":{"en-us":"ShuangLongHui","zh-tw":""},"":{"en-us":"ZiYiSe","zh-tw":""},"":{"en-us":"RenHu","zh-tw":""},"":{"en-us":"SiTongShun","zh-tw":""},"":{"en-us":"SanYuanQiDui","zh-tw":""},"":{"en-us":"SiXiQiDui","zh-tw":""},"":{"en-us":"SiLianKe","zh-tw":""},"":{"en-us":"YiSeSiBuGao","zh-tw":""},"":{"en-us":"HunYaoJiu","zh-tw":""},"":{"en-us":"SanGang","zh-tw":""},"":{"en-us":"TianTing","zh-tw":""},"":{"en-us":"SiZiKe","zh-tw":""},"":{"en-us":"DaSanFeng","zh-tw":""},"":{"en-us":"YiSeSanTongShun","zh-tw":""},"":{"en-us":"QiDuiZi","zh-tw":""},"":{"en-us":"YiSeSanJieGao","zh-tw":""},"":{"en-us":"QingLong","zh-tw":""},"":{"en-us":"YiSeSanBuGao","zh-tw":""},"":{"en-us":"QuanHua","zh-tw":""},"":{"en-us":"SanAnKe","zh-tw":""},"":{"en-us":"QingYiSe","zh-tw":""},"":{"en-us":"MiaoShouHuiChun","zh-tw":""},"":{"en-us":"HaiDiLaoYue","zh-tw":""},"":{"en-us":"GangShangHua","zh-tw":""},"":{"en-us":"QiangGangHu","zh-tw":""},"":{"en-us":"XiaoSanFeng","zh-tw":""},"":{"en-us":"ShuangJianKe","zh-tw":""},"":{"en-us":"PengPengHu","zh-tw":""},"":{"en-us":"HunYiSe","zh-tw":""},"":{"en-us":"QuanQiuRen","zh-tw":""},"":{"en-us":"QuanDaiYao","zh-tw":""},"":{"en-us":"ShuangMingGang","zh-tw":""},"":{"en-us":"BuQiuRen","zh-tw":""},"":{"en-us":"HuJueZhang","zh-tw":""},"":{"en-us":"MenFengKe","zh-tw":""},"":{"en-us":"QuanFengKe","zh-tw":""},"":{"en-us":"JianKe","zh-tw":""},"":{"en-us":"PingHu","zh-tw":""},"":{"en-us":"SiGuiYi","zh-tw":""},"":{"en-us":"DuanYaoJiu","zh-tw":""},"":{"en-us":"ShuangAnKe","zh-tw":""},"":{"en-us":"AnGang","zh-tw":""},"":{"en-us":"MenQianQing","zh-tw":""},"":{"en-us":"BaoTing","zh-tw":""},"":{"en-us":"YiBanGao","zh-tw":""},"":{"en-us":"LianLiu","zh-tw":""},"":{"en-us":"LaoShaoFu","zh-tw":""},"":{"en-us":"HuaPai","zh-tw":""},"":{"en-us":"MingGang","zh-tw":""},"":{"en-us":"BianZhang","zh-tw":""},"":{"en-us":"KanZhang","zh-tw":""},"":{"en-us":"DanDiaoJiang","zh-tw":""},"":{"en-us":"ZiMo","zh-tw":""},"":{"en-us":"WeChat","zh-tw":""},QQ:{"en-us":"QQ","zh-tw":"QQ"},Telegram:{"en-us":"Telegram","zh-tw":"Telegram"},WhatsApp:{"en-us":"WhatsApp","zh-tw":"WhatsApp"},Skype:{"en-us":"Skype","zh-tw":"Skype"},":{0}":{"en-us":"Share To:{0}","zh-tw":":{0}"},"":{"en-us":"Share To","zh-tw":""},"{0}":{"en-us":"Copy completed, Please open {0} to share","zh-tw":"{0}"},"":{"en-us":"Copy Info","zh-tw":""},"{0}":{"en-us":"valid for {0} minutes","zh-tw":"{0}"},"...":{"en-us":"Requesting ...","zh-tw":"..."},"":{"en-us":"Room full, unable to enter the game","zh-tw":""},"..":{"en-us":"Querying ...","zh-tw":".."},"":{"en-us":"The current seat is occupied and cannot enter the game","zh-tw":""}},t
}();__reflect(I18NConfig.prototype,"I18NConfig");var I18NType=function(){function t(){}return t.validate=function(t){return t==this.zh_cn||t==this.zh_tw||t==this.en_us},t.zh_cn="zh-cn",t.zh_tw="zh-tw",t.en_us="en-us",t}();__reflect(I18NType.prototype,"I18NType");var mahjong;!function(t){var e=function(){function e(e,n){this.type=e,this.point=n,this.id=t.Card.counter++,this.cardID=9*this.type+n}return e.init=function(){t.helpCard0=t.helpCard0||new e(0,0),t.helpCard1=t.helpCard1||new e(0,0),t.helpCard2=t.helpCard2||new e(0,0),t.helpCard3=t.helpCard3||new e(0,0)},e.createFromCardID=function(t){var n=new e(0,0);return n.buildByCardID(t),n},e.createFronCardIds=function(t){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n];e[n]=this.createFromCardID(r)}return e},e.createFromStr=function(n){switch(n){case"":case"":return new e(t.Type.BAMBOO,0);case"":case"":return new e(t.Type.ZI,t.Point.EAST_WIND);case"":case"":return new e(t.Type.ZI,t.Point.SOUTH_WIND);case"":case"":return new e(t.Type.ZI,t.Point.WEST_WIND);case"":case"":return new e(t.Type.ZI,t.Point.NORTH_WIND);case"":case"":case"":case"":return new e(t.Type.ZI,t.Point.GREEN_DRAGON);case"":case"":return new e(t.Type.ZI,t.Point.RED_DRAGON);case"":case"":return new e(t.Type.ZI,t.Point.WHITE_DRAGON);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_CHUN);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_XIA);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_QIU);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_DONG);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_MEI);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_LAN);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_ZHU);case"":return new e(t.Type.FLOWER,t.Point.FLOWER_JU);default:var i="",r=-1;return-1!=n.indexOf("")?(i="",r=t.Type.CHARACTER):-1!=n.indexOf("")?(i="",r=t.Type.BAMBOO):-1!=n.indexOf("")&&(i="",r=t.Type.DOT),-1==r?null:(n=n.replace(i,""),new e(r,e.numbers.indexOf(n)))}},e.prototype.reNew=function(e,n){return this.type=e,this.point=n,this.id=t.Card.counter++,this.cardID=9*this.type+n,this},e.prototype.buildByCardID=function(e){return this.cardID=e,e>=34?(this.type=t.Type.FLOWER,this.point=e):(this.type=parseInt(""+e/9),this.point=e%9),this},e.prototype.clone=function(){return new t.Card(this.type,this.point)},e.prototype.toString=function(){var e="";switch(this.type){case t.Type.BAMBOO:e=0==this.point?"":t.Card.numbers[this.point]+"";break;case t.Type.CHARACTER:e=t.Card.numbers[this.point]+"";break;case t.Type.DOT:e=t.Card.numbers[this.point]+"";break;case t.Type.ZI:switch(this.point){case t.Point.EAST_WIND:e="";break;case t.Point.SOUTH_WIND:e="";break;case t.Point.WEST_WIND:e="";break;case t.Point.NORTH_WIND:e="";break;case t.Point.GREEN_DRAGON:e="";break;case t.Point.RED_DRAGON:e="";break;case t.Point.WHITE_DRAGON:e=""}break;case t.Type.FLOWER:switch(this.point){case t.Point.FLOWER_CHUN:e="";break;case t.Point.FLOWER_XIA:e="";break;case t.Point.FLOWER_QIU:e="";break;case t.Point.FLOWER_DONG:e="";break;case t.Point.FLOWER_MEI:e="";break;case t.Point.FLOWER_LAN:e="";break;case t.Point.FLOWER_ZHU:e="";break;case t.Point.FLOWER_JU:e=""}break;default:e=""}return e},e.pool=[],e.counter=0,e.numbers=["","","","","","","","",""],e}();t.Card=e,__reflect(e.prototype,"mahjong.Card")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function t(){}return t.prototype.computeAllCount=function(){if(!this.discard)return 0;var t=0;if(this.winCount)for(var e=0,n=this.winCount.length;n>e;e++){var i=this.winCount[e];t+=i}return t},t.prototype.toString=function(){return this.discard?""+this.discard.toString()+""+this.winCards.join(",")+",:"+this.winCount.join(","):""},t}();t.CheckResult=e,__reflect(e.prototype,"mahjong.CheckResult")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function e(){}return e.compareAandB=function(t,e){var n=-1,i=-1;return n=this.getCardsType(t),i=this.getCardsType(e),n>i?1:i>n?0:(t=this.checkData(t),e=this.checkData(e),t[0].point>e[0].point?1:0)},e.checkData=function(e){return e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI?e:(e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI?e=e.reverse():e[0].point<e[1].point&&(e=e.reverse()),e)},e.getCardsType=function(e){if(null==e||0==e.length||2!=e.length)return-1;var i=!1;if(e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI&&e[1].point==t.Point.WHITE_DRAGON&&e[1].type==t.Type.ZI)return n.KING_GOD;if(e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI?(i=!0,e=e.reverse()):e[1].point==t.Point.WHITE_DRAGON&&e[1].type==t.Type.ZI?i=!0:e[0].point<e[1].point&&(e=e.reverse()),i){var r=e[0].point+1;return 2*r}if(e[0].point+1==8&&e[1].point+1==2)return n.TWO_AND_EIGHT_GANG;if(e[0].point==e[1].point)return 19+(e[0].point+1);var o=e[0].point+1+e[1].point+1;if(o%10==0)return n.TEN_POINT;var a=o%10;return 2*a-1},e}();t.EBGTool=e,__reflect(e.prototype,"mahjong.EBGTool");var n=function(){function t(){}return t.getTypeName=function(t){return t<this.nameArr.length?this.nameArr[t]:(trace(""+t),"")},t.nameArr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],t.TEN_POINT=0,t.ONE_POINT=1,t.ONE_POINT_HALF=2,t.TWO_POINT=3,t.TWO_POINT_HALF=4,t.THREE_POINT=5,t.THREE_POINT_HALF=6,t.FOUR_POINT=7,t.FOUR_POINT_HALF=8,t.FIVE_POINT=9,t.FIVE_POINT_HALF=10,t.SIX_POINT=11,t.SIX_POINT_HALF=12,t.SEVEN_POINT=13,t.SEVEN_POINT_HALF=14,t.EIGHT_POINT=15,t.EIGHT_POINT_HALF=16,t.NINE_POINT=17,t.NINE_POINT_HALF=18,t.TWO_AND_EIGHT_GANG=19,t.ONE_HONEY=20,t.TWO_HONEY=21,t.THREE_HONEY=22,t.FOUR_HONEY=23,t.FINE_HONEY=24,t.SIX_HONEY=25,t.SEVEN_HONEY=26,t.EIGHT_HONEY=27,t.NINE_HONEY=28,t.KING_GOD=29,t}();t.EBGTypeGroup=n,__reflect(n.prototype,"mahjong.EBGTypeGroup")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function e(){}return e.init=function(){this.helpCard0=new t.Card(0,0),this.helpCard1=new t.Card(0,0),this.helpCard2=new t.Card(0,0),this.helpCard3=new t.Card(0,0),this.helpCard4=new t.Card(0,0),this.helpCard5=new t.Card(0,0),this.helpCard6=new t.Card(0,0),this.helpCard7=new t.Card(0,0),this.helpCard8=new t.Card(0,0),this.helpCard9=new t.Card(0,0),this.helpCard10=new t.Card(0,0),this.helpCard11=new t.Card(0,0),this.helpCard12=new t.Card(0,0),this.helpCard13=new t.Card(0,0),this.helpCard14=new t.Card(0,0),this.findDic=[[i.DA_SI_XI,this.is_da_4_xi,[i.PENG_PENG_HU,i.QUAN_FENG_KE,i.MEN_FENG_KE,i.DA_SAN_FENG,i.XIAO_SAN_FENG,i.SI_ZI_KE]],[i.DA_SAN_YUAN,this.is_da_3_yuan,[i.JIAN_KE,i.SHUANG_JIAN_KE]],[i.JIU_LIAN_BAO_DENG,this.is_9_lian_bao_deng,[i.QING_YI_SE,i.MEN_QIAN_QING,i.ZI_MO]],[i.DA_YU_WU,this.is_da_yu_5,[]],[i.XIAO_YU_WU,this.is_xiao_yu_5,[]],[i.DA_QI_XING,this.is_da_7_xing,[i.QI_DUI_ZI,i.SAN_YUAN_QI_DUI_ZI,i.SI_XI_QI_DUI_ZI,i.QUAN_DAI_YAO,i.DAN_DIAO_JIANG,i.MEN_QIAN_QING,i.ZI_MO,i.ZI_YI_SE]],[i.SI_GANG,this.is_4_gang,[i.SAN_GANG,i.SHUANG_MING_GANG,i.MING_GANG,i.DAN_DIAO_JIANG]],[i.LIAN_QI_DUI,this.is_lian_7_dui,[i.QI_DUI_ZI,i.DAN_DIAO_JIANG,i.MEN_QIAN_QING,i.ZI_MO,i.QING_YI_SE]],[i.XIAO_SI_XI,this.is_xiao_4_xi,[i.DA_SAN_FENG,i.XIAO_SAN_FENG,i.QUAN_FENG_KE,i.MEN_FENG_KE]],[i.XIAO_SAN_YUAN,this.is_xiao_3_yuan,[i.SHUANG_JIAN_KE,i.JIAN_KE]],[i.SI_AN_KE,this.is_4_an_ke,[i.SAN_AN_KE,i.SHUANG_AN_KE,i.PENG_PENG_HU,i.MEN_QIAN_QING,i.ZI_MO]],[i.SHUANG_LONG_HUI,this.is_1_se_shuang_long_hui,[i.YI_BAN_GAO,i.QI_DUI_ZI,i.QING_YI_SE,i.LAO_SHAO_FU,i.PING_HU]],[i.ZI_YI_SE,this.is_zi_1_se,[i.PENG_PENG_HU,i.QUAN_DAI_YAO,i.HUN_YAO_JIU,i.SI_ZI_KE]],[i.SI_TONG_SHUN,this.is_1_se_4_tong_shun,[i.SAN_LIAN_KE,i.SAN_TONG_SHUN,i.QI_DUI_ZI,i.SI_GUI_YI,i.YI_BAN_GAO]],[i.SAN_YUAN_QI_DUI_ZI,this.is_3_yuan_7_dui_zi,[i.QI_DUI_ZI,i.MEN_QIAN_QING,i.DAN_DIAO_JIANG,i.ZI_MO]],[i.SI_XI_QI_DUI_ZI,this.is_4_xi_7_dui_zi,[i.QI_DUI_ZI,i.MEN_QIAN_QING,i.DAN_DIAO_JIANG,i.ZI_MO]],[i.SI_LIAN_KE,this.is_1_se_4_jie_gao,[i.SAN_LIAN_KE,i.SAN_TONG_SHUN,i.PENG_PENG_HU,i.YI_BAN_GAO]],[i.SI_BU_GAO,this.is_1_se_4_bu_gao,[i.SAN_BU_GAO,i.LIAN_LIU,i.LAO_SHAO_FU]],[i.HUN_YAO_JIU,this.is_hun_1_9,[i.PENG_PENG_HU,i.QUAN_DAI_YAO]],[i.SAN_GANG,this.is_3_gang,[i.SHUANG_MING_GANG,i.MING_GANG]],[i.SI_ZI_KE,this.is_4_zi_ke,[i.PENG_PENG_HU]],[i.DA_SAN_FENG,this.is_da_3_feng,[i.XIAO_SAN_FENG]],[i.SAN_TONG_SHUN,this.is_1_se_3_tong_shun,[i.SAN_LIAN_KE,i.YI_BAN_GAO]],[i.QI_DUI_ZI,this.is_7_dui_zi,[i.MEN_QIAN_QING,i.DAN_DIAO_JIANG,i.ZI_MO]],[i.SAN_LIAN_KE,this.is_1_se_3_jie_gao,[i.SAN_TONG_SHUN,i.YI_BAN_GAO]],[i.QING_LONG,this.is_qing_long,[i.LIAN_LIU,i.LAO_SHAO_FU]],[i.SAN_BU_GAO,this.is_1_se_3_bu_gao,[]],[i.QUAN_HUA,this.is_quan_hua,[]],[i.SAN_AN_KE,this.is_3_an_ke,[i.SHUANG_AN_KE]],[i.QING_YI_SE,this.is_qing_1_se,[]],[i.XIAO_SAN_FENG,this.is_xiao_3_feng,[]],[i.SHUANG_JIAN_KE,this.is_2_jian_ke,[i.JIAN_KE]],[i.PENG_PENG_HU,this.is_peng_peng_hu,[]],[i.HUN_YI_SE,this.is_hun_1_se,[]],[i.QUAN_DAI_YAO,this.is_quan_dai_yao,[]],[i.SHUANG_MING_GANG,this.is_2_ming_gang,[i.MING_GANG]],[i.JUE_ZHANG,this.is_hu_jue_zhang,[]],[i.MEN_FENG_KE,this.is_men_feng_ke,[]],[i.QUAN_FENG_KE,this.is_quan_feng_ke,[]],[i.JIAN_KE,this.is_jian_ke,[]],[i.PING_HU,this.is_ping_hu,[]],[i.SI_GUI_YI,this.is_4_gui_1,[]],[i.DUAN_YAO_JIU,this.is_duan_1_9,[]],[i.SHUANG_AN_KE,this.is_2_an_ke,[]],[i.AN_GANG,this.is_an_gang,[]],[i.MEN_QIAN_QING,this.is_men_qian_qing,[]],[i.YI_BAN_GAO,this.is_1_ban_gao,[]],[i.LIAN_LIU,this.is_lian_6,[]],[i.LAO_SHAO_FU,this.is_lao_shao_fu,[]],[i.MING_GANG,this.is_ming_gang,[]],[i.BIAN_ZHANG,this.is_bian_zhang,[]],[i.KAN_ZHANG,this.is_kan_zhang,[]],[i.DAN_DIAO_JIANG,this.is_dan_diao_jiang,[]]];for(var e=0,n=this.findDic.length;n>e;e++){var r=this.findDic[e],o=r[1];r[1]=o.bind(this)}},e.getWinTypeAndFactors=function(e,r,o,a,s,l,h){r=t.MahjongTool.sortHandleCard(r);var u=[];u=r.concat(),u.push(o),u=t.MahjongTool.sortHandleCard(u);for(var c=u.concat(),p=u.concat(),d=u.concat(),g=u.concat(),f=u.concat(),_=0,m=e.length;m>_;_++){var y=e[_];f=f.concat(y.models),y.type==t.Meld.SEQUENCE?(c=c.concat(y.models),d=d.concat(y.models)):(g=g.concat(y.models),y.type==t.Meld.TRIPLET&&(p=p.concat(y.models),d=d.concat(y.models)))}c=t.MahjongTool.sortHandleCard(c),p=t.MahjongTool.sortHandleCard(p),d=t.MahjongTool.sortHandleCard(d),g=t.MahjongTool.sortHandleCard(g),f=t.MahjongTool.sortHandleCard(f);var v=new n;v.handIsPure=t.MahjongTool.isPure(u),v.flowerCount=a,v.lastCardLeftCount=s,v.position=h,v.round=l,v.is7Dui=this.is7Dui(u),v.isPure7Dui=this.isPure7Dui(u),v.isPengPengHu=this.isPengPengHu(u,e,v.isPure7Dui),v.allIsPure=t.MahjongTool.isPure(f),v.allWithChi=c,v.allWithPeng=p,v.allWithChiPeng=d,v.allWithPengGang=g,v.allWithChiPengGang=f,v.allWithNothingDic=this.cardToArrDic(u),v.allWithChiDic=this.cardToArrDic(c),v.allWithChiPengGangDic=this.cardToArrDic(f),v.anKeCount=this.getAnKeCount(u,e),v.jianKeCount=this.getJianKeCount(u,e),v.anGangCount=0,v.mingGangCount=0;for(var _=0,m=e.length;m>_;_++){var C=e[_];C.type==t.Meld.CONCEALED?v.anGangCount++:C.type==t.Meld.EXPOSED&&v.mingGangCount++}for(var T=[],E=[],S=0,_=0,m=this.findDic.length;m>_;_++){var I=this.findDic[_];if(I){var D=I[0],A=I[1],b=I[2];-1==E.indexOf(D)&&A&&A(u,e,r,o,v)&&(T.push(D),S+=i.getFactor(D),E=E.concat(b))}}return 0==S&&(S=1),-1==T.indexOf(i.QUAN_HUA)&&(S+=v.flowerCount),{winTyps:T,factor:S}},e.is_da_4_xi=function(t,e,n,i,r){for(var o=0,a=0,s=e.length;s>a;a++){var l=e[a];this.isWind(l.models[0])&&o++}for(var a=0,s=t.length;s>a;a++)this.isSame(t[a],t[a+2])&&this.isWind(t[a])&&(o++,a+=2);return 4==o},e.is_da_3_yuan=function(t,e,n,i,r){for(var o=0,a=0,s=e.length;s>a;a++){var l=e[a];this.isZhong_fa_bai(l.models[0])&&o++}if(o>=3)return!0;for(var a=0,s=t.length;s>a;a++)if(this.isZhong_fa_bai(t[a])&&this.isSame(t[a],t[a+2])&&(o++,a+=2),o>=3)return!0;return!1},e.is_9_lian_bao_deng=function(e,n,i,r,o){if(13!=i.length||!o.handIsPure||e[0].type==t.Type.ZI)return!1;for(var a=[],s=0,l=o.allWithChiDic.length;l>s;s++){var h=o.allWithChiDic[s];14==h[0]&&(a=h)}var u=a.join(" ");return"14 4 1 1 1 1 1 1 1 3"==u||"14 3 2 1 1 1 1 1 1 3"==u||"14 3 1 2 1 1 1 1 1 3"==u||"14 3 1 1 2 1 1 1 1 3"==u||"14 3 1 1 1 2 1 1 1 3"==u||"14 3 1 1 1 1 2 1 1 3"==u||"14 3 1 1 1 1 1 2 1 3"==u||"14 3 1 1 1 1 1 1 2 3"==u||"14 3 1 1 1 1 1 1 1 4"==u},e.is_4_gang=function(t,e,n,i,r){return r.anGangCount+r.mingGangCount==4},e.is_lian_7_dui=function(t,e,n,i,r){if(e.length>0||!r.handIsPure||!r.is7Dui)return!1;for(var o,a=0,s=t.length;s>a;a+=2){var l=t[a];if(!this.isSame(l,t[a+1]))return!1;if(0!=a&&o+1!=l.point)return;o=l.point}return!0},e.is_da_7_xing=function(e,n,i,r,o){if(13!=i.length||!o.handIsPure||e[0].type!=t.Type.ZI||!o.is7Dui)return!1;for(var a=[0,0,1,1,2,2,3,3,4,4,5,5,6,6],s=0,l=e.length;l>s;s++)if(e[s].point!=a[s])return!1;return!0},e.is_xiao_4_xi=function(t,e,n,i,r){for(var o=0,a=!1,s=0,l=e.length;l>s;s++){var h=e[s];this.isWind(h.models[0])&&o++}for(var s=0,l=t.length;l>s;s++){var u=t[s];this.isSame(u,t[s+2])&&this.isWind(u)?(o++,s+=2):this.isSame(u,t[s+1])&&this.isWind(u)&&(a=!0,s+=1)}return 3==o&&a},e.is_xiao_3_yuan=function(t,e,n,i,r){for(var o=0,a=!1,s=0,l=e.length;l>s;s++){var h=e[s];this.isZhong_fa_bai(h.models[0])&&o++}for(var s=0,l=t.length;l>s;s++){var u=t[s];this.isSame(u,t[s+2])&&this.isZhong_fa_bai(u)?(o++,s+=2):this.isSame(u,t[s+1])&&this.isZhong_fa_bai(u)&&(a=!0,s+=1)}return 2==o&&a},e.is_zi_1_se=function(t,e,n,i,r){return r.allIsPure&&this.isZipai(t[0])},e.is_4_an_ke=function(t,e,n,i,r){return 4==r.anKeCount},e.is_1_se_shuang_long_hui=function(e,n,i,r,o){var a=o.allWithChi,s=t.MahjongTool.isPure(a);if(!s||a[0].type==t.Type.ZI)return!1;for(var l=[0,0,1,1,2,2,4,4,6,6,7,7,8,8],h=0,u=a.length;u>h;h++)if(a[h].point!=l[h])return!1;return!0},e.is_1_se_4_tong_shun=function(t,e,n,i,r){var o=r.allWithChi;if(14!=o.length)return!1;for(var a,s,l=-1,h=0,u=0,c=o.length;c>u;u++){var p=o[u];if(this.isSame(p,o[u+3])){if(!this.isZipai(p)){if(-1==l)l=p.point,a=p.type;else{if(a!=p.type||l+1!=p.point)return!1;l++}h++}u+=3}else this.isSame(p,o[u+1])&&(u++,this._is_jiang(t,p,r.isPure7Dui)&&(s=!0))}return s&&3==h},e.is_1_se_4_jie_gao=function(t,e,n,i,r){var o=r.allWithPeng;if(14!=o.length)return!1;for(var a,s,l=-1,h=0,u=0,c=o.length;c>u;u++){var p=o[u];if(this.isSame(p,o[u+2])){if(!this.isZipai(p)){if(-1==l)l=p.point,a=p.type;else{if(a!=p.type||l+1!=p.point)return!1;l++}h++}u+=2}else this.isSame(p,o[u+1])&&(u++,this._is_jiang(t,p,r.isPure7Dui)&&(s=!0))}return s&&4==h},e.is_4_xi_7_dui_zi=function(e,n,i,r,o){if(14==e.length&&o.is7Dui){for(var a=!1,s=!1,l=!1,h=!1,u=0,c=e.length;c>u;u+=2){var p=e[u];if(this.isWind(p))switch(p.point){case t.Point.EAST_WIND:a=!0;break;case t.Point.SOUTH_WIND:s=!0;break;case t.Point.WEST_WIND:l=!0;break;case t.Point.NORTH_WIND:h=!0}}return a&&s&&l&&h}},e.is_3_yuan_7_dui_zi=function(e,n,i,r,o){if(14==e.length&&o.is7Dui){for(var a=!1,s=!1,l=!1,h=0,u=e.length;u>h;h+=2){var c=e[h];if(this.isZhong_fa_bai(c))switch(c.point){case t.Point.RED_DRAGON:a=!0;break;case t.Point.GREEN_DRAGON:s=!0;break;case t.Point.WHITE_DRAGON:l=!0}}return a&&s&&l}},e.is_1_se_4_bu_gao=function(t,e,n,i,r){for(var o,a=0,s=r.allWithChiDic.length;s>a;a++){var l=r.allWithChiDic[a];l[0]>=12&&(o=l)}if(!o)return!1;for(var a=0,s=this._1_se_4_bu_gao_config.length;s>a;a++)for(var l=this._1_se_4_bu_gao_config[a],h=0,u=l.length;u>h;h++)if(o[h]>=l[h]){if(h+1==u){var c=this._configToPoints(l);return this.canWinWhenDeletesPoints(r.allWithChi,c)}}else h+=999;return!1},e.is_3_gang=function(t,e,n,i,r){return r.anGangCount+r.mingGangCount==3},e.is_hun_1_9=function(t,e,n,i,r){if(!r.isPengPengHu)return!1;for(var o,a,s,l=r.allWithPengGang,h=r.allWithChiPengGangDic[0],u=0,c=l.length;c>u;u++){var p=l[u];if(this.isZipai(p))s=!0;else if(0==p.point)o=!0;else{if(8!=p.point)return!1;a=!0}}return o&&a&&s&&h[1]>=3&&h[9]>=3},e.is_7_dui_zi=function(t,e,n,i,r){return r.is7Dui},e.is_1_se_3_tong_shun=function(t,e,n,i,r){for(var o,a=r.allWithChi,s=-1,l=0,h=0,u=a.length;u>h;h++){var c=a[h];if(this.isSame(c,a[h+2])){if(!this.isZipai(c))if(-1==s)s=c.point,o=c.type,l=1;else if(o!=c.type||s+1!=c.point){if(3==l)return p=s-2,this.canWinWhenDeletesPoints(a,[p,p,p,p+1,p+1,p+1,p+2,p+2,p+2]);if(4==l)return p=s-3,this.canWinWhenDeletesPoints(a,[p,p,p,p+1,p+1,p+1,p+2,p+2,p+2])||this.canWinWhenDeletesPoints(a,[p+1,p+1,p+1,p+2,p+2,p+2,p+3,p+3,p+3]);s=c.point,o=c.type,l=1}else o==c.type&&s+1==c.point&&(s=c.point,l++);h+=2}}var p;return 3==l?(p=s-2,this.canWinWhenDeletesPoints(a,[p,p,p,p+1,p+1,p+1,p+2,p+2,p+2])):4==l?(p=s-3,this.canWinWhenDeletesPoints(a,[p,p,p,p+1,p+1,p+1,p+2,p+2,p+2])||this.canWinWhenDeletesPoints(a,[p+1,p+1,p+1,p+2,p+2,p+2,p+3,p+3,p+3])):!1},e._isInMeldGang=function(e,n,i){for(var r=0,o=e.length;o>r;r++){var a=e[r];if(4==a.models.length&&a.models[0].point==i&&a.models[0].type==t.Type.CHARACTER)return!0}return!1},e.is_1_se_3_jie_gao=function(e,n,i,r,o){var a=o.allWithChiPengGangDic[t.Type.CHARACTER];if(!(a[0]<6)){for(var s=1;7>=s;s++){var l=a[s];if(l>=3&&a[s+1]>=3&&a[s+2]>=3){var h=[s-1,s-1,s-1,s,s,s,s+1,s+1,s+1];if(this._isInMeldGang(n,t.Type.CHARACTER,s-1)&&h.push(s-1),this._isInMeldGang(n,t.Type.CHARACTER,s)&&h.push(s),this._isInMeldGang(n,t.Type.CHARACTER,s+1)&&h.push(s+1),this.canWinWhenDeletesPoints(o.allWithChiPengGang,h))return!0}}return!1}},e.is_qing_long=function(t,e,n,i,r){return this.is_1_tiao_long(t,e,n,i,r)},e.is_da_3_feng=function(t,e,n,i,r){for(var o=r.allWithPengGang,a=0,s=0,l=o.length;l>s;s++){var h=o[s];this.isSame(h,o[s+3])?(this.isWind(h)&&a++,s+=3):this.isSame(h,o[s+2])&&(this.isWind(h)&&a++,s+=2)}return 3==a},e.is_4_zi_ke=function(t,e,n,i,r){for(var o=r.allWithPengGang,a=0,s=0,l=o.length;l>s;s++){var h=o[s];this.isSame(h,o[s+3])?(this.isZipai(h)&&a++,s+=3):this.isSame(h,o[s+2])&&(this.isZipai(h)&&a++,s+=2)}return 4==a},e.is_1_tiao_long=function(t,e,n,i,r){for(var o,a=0,s=r.allWithChiDic.length;s>a;a++){var l=r.allWithChiDic[a];l[0]>=9&&(o=l)}if(!o)return!1;for(var a=1,s=o.length;s>a;a++){var h=o[a];if(0>=h)return!1}return this.canWinWhenDeletesPoints(r.allWithChi,[0,1,2,3,4,5,6,7,8])},e.is_1_se_3_bu_gao=function(t,e,n,i,r){for(var o,a=0,s=r.allWithChiDic.length;s>a;a++){var l=r.allWithChiDic[a];l[0]>=9&&(o=l)}if(!o)return!1;for(var a=0,s=this._1_se_3_bu_gao_config.length;s>a;a++)for(var l=this._1_se_3_bu_gao_config[a],h=0,u=l.length;u>h;h++)if(o[h]>=l[h]){if(h+1==u){var c=this._configToPoints(l);if(this.canWinWhenDeletesPoints(r.allWithChi,c))return!0}}else h+=999;return!1},e.is_quan_hua=function(t,e,n,i,r){return r.flowerCount>=8},e.is_3_an_ke=function(t,e,n,i,r){return 3==r.anKeCount},e.is_qing_1_se=function(t,e,n,i,r){return r.allIsPure&&!this.isZipai(t[0])},e.is_peng_peng_hu=function(t,e,n,i,r){return r.isPengPengHu},e.is_hun_1_se=function(t,e,n,i,r){var o=r.allWithChiPengGangDic,a=o[0][0],s=o[1][0],l=o[2][0];return o[3][0]<=0?!1:0!=a&&0==s&&0==l||0==a&&0!=s&&0==l||0==a&&0==s&&0!=l},e.is_2_an_gang=function(t,e,n,i,r){return 2==r.anGangCount},e.is_2_jian_ke=function(t,e,n,i,r){return 2==r.jianKeCount},e.is_xiao_3_feng=function(e,n,i,r,o){for(var a,s=0,l=0,h=n.length;h>l;l++){var u=n[l];u.type!=t.Meld.SEQUENCE&&this.isWind(u.models[0])&&s++}for(var l=0,h=e.length;h>l;l++){var c=e[l];this.isSame(c,e[l+3])?l+=3:this.isSame(c,e[l+2])?(this.isWind(c)&&s++,l+=2):this.isSame(c,e[l+1])&&(this.isWind(c)&&(a=!0),l+=1)}return 2==s&&a},e.is_quan_dai_yao=function(t,e,n,i,r){var o=r.allWithChiPengGangDic[0];if(o[4]>0||o[5]>0||o[6]>0)return!1;var a=r.allWithNothingDic[0];if(a[2]!=a[3]||a[7]!=a[8])return!1;for(var s=0,l=e.length;l>s;s++){var h=e[s];if(!this._cardsHas1_9(h.models))return!1}for(var u=!1,s=0,l=t.length;l>s;s++){var c=t[s];this.isZipai(c)&&(t[s+2]?this.isSame(c,t[s+1])&&!this.isSame(c,t[s+2])&&(u=!0):this.isSame(c,t[s+1])&&(u=!0),this.isSame(c,t[s+2])?s+=2:this.isSame(c,t[s+1])&&(s+=1))}var p=a[1]-a[2],d=a[9]-a[7];if(!(0>p||0>d)){if(p%=3,d%=3,u){if(0==p&&0==d)return!0}else if(2==p&&0==d||0==p&&2==d)return!0;return!1}},e.is_2_ming_gang=function(t,e,n,i,r){return 2==r.mingGangCount},e.is_hu_jue_zhang=function(t,e,n,i,r){return 1==r.lastCardLeftCount},e.is_men_feng_ke=function(t,e,n,i,r){return r.allWithChiPengGangDic[3][r.position+1]>=3},e.is_quan_feng_ke=function(t,e,n,i,r){return r.allWithChiPengGangDic[3][r.round%4+1]>=3},e.is_jian_ke=function(t,e,n,i,r){return 1==r.jianKeCount},e.is_men_qian_qing=function(t,e,n,i,r){return 13==n.length},e.is_ping_hu=function(e,n,i,r,o){for(var a=0,s=n.length;s>a;a++){var l=n[a];if(l.type!=t.Meld.SEQUENCE)return!1}var h=o.allWithChiDic[0],u=h.concat();if(u[0]<14)return!1;for(var c=function(e,n){var i=e.concat();return this.helpCard0.reNew(t.Type.BAMBOO,2),this.helpCard1.reNew(t.Type.BAMBOO,2),i.push(this.helpCard0),i.push(this.helpCard1),this.canWinWhenDeleteCards(i,[n,n],!1)}.bind(this),a=1,s=h.length;s>a;a++){var p=h[a];if(p>=2&&(u=h.concat(),this.helpCard14.reNew(t.Type.CHARACTER,a-1),c(o.allWithChi,this.helpCard14))){u[a]-=2,u[0]-=2;for(var d=1,g=7;g>=d;d++){var f=u[d];f>0&&(u[d]=0,u[d+1]-=f,u[d+2]-=f,u[d+1]<0||u[d+2]<0?d+=999:u[0]-=3*f)}if(0==u[0])return!0}}return!1},e.is_4_gui_1=function(t,e,n,i,r){for(var o=r.allWithChiPeng,a=0,s=o.length;s>a;a++){var l=o[a];if(this.isSame(l,o[a+3]))return!0}return!1},e.is_2_an_ke=function(t,e,n,i,r){return 2==r.anKeCount},e.is_an_gang=function(t,e,n,i,r){return 1==r.anGangCount},e.is_duan_1_9=function(t,e,n,i,r){return 0==r.allWithChiPengGangDic[3][0]&&0==r.allWithChiPengGangDic[0][1]&&0==r.allWithChiPengGangDic[0][9]&&0==r.allWithChiPengGangDic[1][1]&&0==r.allWithChiPengGangDic[1][9]&&0==r.allWithChiPengGangDic[2][1]&&0==r.allWithChiPengGangDic[2][9]},e.is_1_ban_gao=function(t,e,n,i,r){if(!r.isPengPengHu){for(var o=0,a=r.allWithChiDic.length;a>o&&3>o;o++){var s=r.allWithChiDic[o];if(s[0]>=6)for(var l=1;7>=l;l++){var h=s[l];if(h>=2&&s[l+1]>=2&&s[l+2]>=2&&this.canWinWhenDeletesPoints(r.allWithChi,[l-1,l-1,l,l,l+1,l+1]))return!0}}return!1}},e.is_lian_6=function(e,n,i,r,o){for(var a=[t.Type.CHARACTER,t.Type.DOT,t.Type.BAMBOO],s=0,l=a.length;l>s;s++)for(var h=a[s],u=0;4>=u;u++)if(this.helpCard0.reNew(h,u),this.helpCard1.reNew(h,u+1),this.helpCard2.reNew(h,u+2),this.helpCard3.reNew(h,u+3),this.helpCard4.reNew(h,u+4),this.helpCard5.reNew(h,u+5),this.canWinWhenDeleteCards(o.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2,this.helpCard3,this.helpCard4,this.helpCard5]))return!0;return!1},e.is_lao_shao_fu=function(e,n,i,r,o){for(var a=[t.Type.CHARACTER,t.Type.DOT,t.Type.BAMBOO],s=0,l=a.length;l>s;s++){var h=(a[s],this.canWinWhenDeletesPoints(o.allWithChi,[0,1,2])),u=this.canWinWhenDeletesPoints(o.allWithChi,[6,7,8]);if(h&&u)return!0}return!1},e.is_da_yu_5=function(t,e,n,i,r){for(var o=0,a=r.allWithChiPengGang.length;a>o;o++){var s=r.allWithChiPengGang[o];if(this.isZipai(s)||s.point<=4)return!1}return!0},e.is_xiao_yu_5=function(t,e,n,i,r){for(var o=0,a=r.allWithChiPengGang.length;a>o;o++){var s=r.allWithChiPengGang[o];if(this.isZipai(s)||s.point>=4)return!1}return!0},e.is_1_9_ke=function(e,n,i,r,o){for(var a=0,s=n.length;s>a;a++){var l=n[a];if(this._is_1_9_zi(l.models[0])&&l.type!=t.Meld.SEQUENCE)return!0}for(var h=[t.Type.ZI],u=[0,1,2,3,4,5,6],a=0,s=h.length;s>a;a++)for(var c=h[a],p=0,d=u.length;d>p;p++){var g=u[p];if(this.helpCard0.reNew(c,g),this.helpCard1.reNew(c,g),this.helpCard2.reNew(c,g),this.canWinWhenDeleteCards(e,[this.helpCard0,this.helpCard1,this.helpCard2]))return!0}h=[t.Type.CHARACTER,t.Type.DOT,t.Type.BAMBOO],u=[1,9];for(var a=0,s=h.length;s>a;a++)for(var c=h[a],p=0,d=u.length;d>p;p++){var g=u[p];if(this.helpCard0.reNew(c,g),this.helpCard1.reNew(c,g),this.helpCard2.reNew(c,g),this.canWinWhenDeleteCards(e,[this.helpCard0,this.helpCard1,this.helpCard2]))return!0}return!1},e.is_ming_gang=function(t,e,n,i,r){return 1==r.mingGangCount},e.is_bian_zhang=function(t,e,n,i,r){if(this.isZipai(i))return!1;if(2==i.point){this.helpCard0.reNew(i.type,0),this.helpCard1.reNew(i.type,1),this.helpCard2.reNew(i.type,2);var o=this.canWinWhenDeleteCards(r.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2]);this.helpCard0.reNew(i.type,1),this.helpCard1.reNew(i.type,2),this.helpCard2.reNew(i.type,3);var a=this.canWinWhenDeleteCards(r.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2]);this.helpCard0.reNew(i.type,2),this.helpCard1.reNew(i.type,3),this.helpCard2.reNew(i.type,4);var s=this.canWinWhenDeleteCards(r.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2]);return o&&!a&&!s}if(6==i.point){this.helpCard0.reNew(i.type,6),this.helpCard1.reNew(i.type,7),this.helpCard2.reNew(i.type,8);var l=this.canWinWhenDeleteCards(r.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2]);this.helpCard0.reNew(i.type,5),this.helpCard1.reNew(i.type,6),this.helpCard2.reNew(i.type,7);var h=this.canWinWhenDeleteCards(r.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2]);this.helpCard0.reNew(i.type,4),this.helpCard1.reNew(i.type,5),this.helpCard2.reNew(i.type,6);var u=this.canWinWhenDeleteCards(r.allWithChi,[this.helpCard0,this.helpCard1,this.helpCard2]);return l&&!h&&!u}return!1},e.is_kan_zhang=function(t,e,n,i,r){if(0==i.point||8==i.point||this.isZipai(i))return!1;this.helpCard0.reNew(i.type,i.point-2),this.helpCard1.reNew(i.type,i.point-1),this.helpCard2.reNew(i.type,i.point);var o=!1;this.helpCard0.point>=0&&(o=this.canWinWhenDeleteCards(t,[this.helpCard0,this.helpCard1,this.helpCard2])),this.helpCard0.reNew(i.type,i.point-1),this.helpCard1.reNew(i.type,i.point),this.helpCard2.reNew(i.type,i.point+1);var a=this.canWinWhenDeleteCards(t,[this.helpCard0,this.helpCard1,this.helpCard2]);this.helpCard0.reNew(i.type,i.point),this.helpCard1.reNew(i.type,i.point+1),this.helpCard2.reNew(i.type,i.point+2);var s=!1;return this.helpCard2.point<=8&&(s=this.canWinWhenDeleteCards(t,[this.helpCard0,this.helpCard1,this.helpCard2])),!o&&a&&!s},e.is_dan_diao_jiang=function(e,n,i,r,o){if(o.isPure7Dui)return!1;var a=e.concat();return this.helpCard0.reNew(t.Type.BAMBOO,2),this.helpCard1.reNew(t.Type.BAMBOO,2),a.push(this.helpCard0),a.push(this.helpCard1),this.canWinWhenDeleteCards(a,[r,r],!1)},e._is_jiang=function(e,n,i){if(i)return!1;var r=e.concat();return this.helpCard0.reNew(t.Type.BAMBOO,2),this.helpCard1.reNew(t.Type.BAMBOO,2),r.push(this.helpCard0),r.push(this.helpCard1),this.canWinWhenDeleteCards(r,[n,n])},e._cardsHas1_9=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(this._is_1_9(i))return!0}return!1},e._is_1_9=function(t){return!this.isZipai(t)&&(0==t.point||8==t.point)},e._is_1_9_zi=function(t){return!this.isZipai(t)&&(0==t.point||8==t.point)||this.isZipai(t)},e._configToPoints=function(t){for(var e=[],n=1,i=9;i>=n;n++)for(var r=0,o=t[n];o>r;r++){t[n][r];e.push(n-1)}return e},e.canWinWhenDeletesPoints=function(e,n){for(var i=[],r=0,o=n.length;o>r;r++){var a=n[r],s=this["helpCard"+r];s.reNew(t.Type.CHARACTER,a),i[r]=s}return this.canWinWhenDeleteCards(e,i)},e.canWinWhenDeleteCards=function(e,n,i){void 0===i&&(i=!0);for(var r=e.concat(),o=0,a=n.length;a>o;o++){var s=n[o],l=this.getIndexOf(r,s);if(-1==l)return!1;r.splice(l,1)}t.MahjongTool.allow_7dui=i;var h=t.MahjongTool.canWin(r);return t.MahjongTool.allow_7dui=!0,h},e.getIndexOf=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(this.isSame(r,e))return n}return-1},e.getJianKeCount=function(e,n){for(var i=0,r=0,o=n.length;o>r;r++){var a=n[r];a.type!=t.Meld.SEQUENCE&&this.isZhong_fa_bai(a.models[0])&&i++}for(var r=0,o=e.length;o>r;r++){var s=e[r];this.isSame(s,e[r+2])&&(this.isZhong_fa_bai(s)&&i++,r+=2)}return i},e.getAnKeCount=function(e,n){for(var i=0,r=0,o=n.length;o>r;r++){var a=n[r];a.type==t.Meld.CONCEALED&&i++}for(var s=[],r=0,o=e.length;o>r;r++){var l=e[r];this.isSame(l,e[r+2])&&(r+=2,s.push([l,l,l]))}for(var h={"4_4":[[0,1,2,3]],"4_3":[[0,1,2],[0,1,3],[0,2,3],[1,2,3]],"4_2":[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]],"4_1":[[0],[1],[2],[3]],"3_3":[[0,1,2]],"3_2":[[0,1],[0,2],[1,2]],"3_1":[[0],[1],[2]],"2_2":[[0,1]],"2_1":[[0],[1]],"1_1":[[0]]},u=s.length,r=u;r>=1;r--)for(var c=u+"_"+r,p=h[c],d=0;d<p.length;d++){for(var g=p[d],f=[],_=0;_<g.length;_++)f=f.concat(s[g[_]]);if(this.canWinWhenDeleteCards(e,f))return i+r}return i},e.cardToArrDic=function(e){for(var n=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],i=0,r=e.length;r>i;i++){var o=e[i];o.type==t.Type.CHARACTER?(n[0][0]++,n[0][o.point+1]++):o.type==t.Type.DOT?(n[1][0]++,n[1][o.point+1]++):o.type==t.Type.BAMBOO?(n[2][0]++,n[2][o.point+1]++):o.type==t.Type.ZI&&(n[3][0]++,n[3][o.point+1]++)}return n},e.is7Dui=function(t){if(14!=t.length)return!1;for(var e=0,n=t.length;n>e;e++){var i=t[e];if(!this.isSame(i,t[e+1]))return!1;e++}return!0},e.isPure7Dui=function(t){if(14!=t.length)return!1;for(var e=0,n=t.length;n>e;e++){var i=t[e];if(this.isSame(i,t[e+2])||this.isSame(i,t[e+3]))return!1;if(!this.isSame(i,t[e+1]))return!1;e++}return!0},e.isPengPengHu=function(e,n,i){if(i)return!1;for(var r=0,o=n.length;o>r;r++){var a=n[r];if(a.type==t.Meld.SEQUENCE)return!1}for(var s,r=0,o=e.length;o>r;r++){var l=e[r];if(this.isSame(l,e[r+2]))r+=2;else{if(!this.isSame(l,e[r+1]))return!1;if(!this._is_jiang(e,l,i))return!1;if(s)return!1;s=!0,r++}}return s},e.isSame=function(t,e){return t&&e?t.type==e.type&&t.point==e.point:!1},e.isZhong_fa_bai=function(e){return e?e.type==t.Type.ZI&&(e.point==t.Point.GREEN_DRAGON||e.point==t.Point.RED_DRAGON||e.point==t.Point.WHITE_DRAGON):!1},e.isWind=function(e){return e?e.type==t.Type.ZI&&(e.point==t.Point.EAST_WIND||e.point==t.Point.NORTH_WIND||e.point==t.Point.SOUTH_WIND||e.point==t.Point.WEST_WIND):!1},e.isZipai=function(e){return e?e.type==t.Type.ZI:!1},e.findDic=[],e._1_se_4_bu_gao_config=[[12,1,2,3,3,2,1,0,0,0],[12,0,1,2,3,3,2,1,0,0],[12,0,0,1,2,3,3,2,1,0],[12,0,0,0,1,2,3,3,2,1],[12,1,1,2,1,2,1,2,1,1]],e._1_se_3_bu_gao_config=[[9,1,2,3,2,1,0,0,0,0],[9,0,1,2,3,2,1,0,0,0],[9,0,0,1,2,3,2,1,0,0],[9,0,0,0,1,2,3,2,1,0],[9,0,0,0,0,1,2,3,2,1],[9,1,1,2,1,2,1,1,0,0],[9,0,1,1,2,1,2,1,1,0],[9,0,0,1,1,2,1,2,1,1]],e}();t.ERMJTool=e,__reflect(e.prototype,"mahjong.ERMJTool");var n=function(){function t(){this.anGangCount=0,this.mingGangCount=0,this.anKeCount=0,this.jianKeCount=0}return t}();__reflect(n.prototype,"ERMJ_Config");var i=function(){function t(){}return t.getFactor=function(t){return int_XY(t/1e3)},t.toString=function(t){return i18n(this.nameDic[t])},t.toStrings=function(t){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n];e[n]=i18n(this.nameDic[r])}return e},t.DA_SI_XI=88990,t.DA_SAN_YUAN=88980,t.JIU_LIAN_BAO_DENG=88970,t.DA_YU_WU=88960,t.XIAO_YU_WU=88950,t.DA_QI_XING=88940,t.SI_GANG=88930,t.LIAN_QI_DUI=88920,t.TIAN_HU=88910,t.DI_HU=88900,t.XIAO_SI_XI=64990,t.XIAO_SAN_YUAN=64980,t.SI_AN_KE=64970,t.SHUANG_LONG_HUI=64960,t.ZI_YI_SE=64950,t.REN_HU=64940,t.SI_TONG_SHUN=48990,t.SAN_YUAN_QI_DUI_ZI=48980,t.SI_XI_QI_DUI_ZI=48970,t.SI_LIAN_KE=48960,t.SI_BU_GAO=32990,t.HUN_YAO_JIU=32980,t.SAN_GANG=32970,t.TIAN_TING=32960,t.SI_ZI_KE=24990,t.DA_SAN_FENG=24980,t.SAN_TONG_SHUN=24970,t.QI_DUI_ZI=24960,t.SAN_LIAN_KE=24950,t.QING_LONG=16990,t.SAN_BU_GAO=16980,t.QUAN_HUA=16970,t.SAN_AN_KE=16960,t.QING_YI_SE=16950,t.MIAO_SHOU_HUI_CHUN=8990,t.HAI_DI_LAO_YUE=8980,t.GANG_SHANG_KAI_HUA=8970,t.QIANG_GANG_HU=8960,t.XIAO_SAN_FENG=6990,t.SHUANG_JIAN_KE=6980,t.PENG_PENG_HU=6970,t.HUN_YI_SE=6960,t.QUAN_QIU_REN=6950,t.QUAN_DAI_YAO=4990,t.SHUANG_MING_GANG=4980,t.BU_QIU_REN=4970,t.JUE_ZHANG=4960,t.MEN_FENG_KE=2990,t.QUAN_FENG_KE=2980,t.JIAN_KE=2970,t.PING_HU=2960,t.SI_GUI_YI=2950,t.DUAN_YAO_JIU=2940,t.SHUANG_AN_KE=2930,t.AN_GANG=2920,t.MEN_QIAN_QING=2910,t.BAO_TING=2900,t.YI_BAN_GAO=1990,t.LIAN_LIU=1980,t.LAO_SHAO_FU=1970,t.HUA_PAI=1960,t.MING_GANG=1950,t.BIAN_ZHANG=1940,t.KAN_ZHANG=1930,t.DAN_DIAO_JIANG=1920,t.ZI_MO=1910,t.nameDic={88990:"",88980:"",88970:"",88960:"",88950:"",88940:"",88930:"",88920:"",88910:"",88900:"",64990:"",64980:"",64970:"",64960:"",64950:"",64940:"",48990:"",48980:"",48970:"",48960:"",32990:"",32980:"",32970:"",32960:"",24990:"",24980:"",24970:"",24960:"",24950:"",16990:"",16980:"",16970:"",16960:"",16950:"",8990:"",8980:"",8970:"",8960:"",6990:"",6980:"",6970:"",6960:"",6950:"",4990:"",4980:"",4970:"",4960:"",2990:"",2980:"",2970:"",2960:"",2950:"",2940:"",2930:"",2920:"",2910:"",2900:"",1990:"",1980:"",1970:"",1960:"",1950:"",1940:"",1930:"",1920:"",1910:""},t
}();t.ERMJ_WinType=i,__reflect(i.prototype,"mahjong.ERMJ_WinType")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function e(){}return e.init=function(e,n,i){void 0===i&&(i=!1),t.Card.init(),this.tmpJoker=e,this.tmpTableSource=n,this.tmpJokerByCardis=[],this.allow_7dui=i;for(var r=0,o=e.length;o>r;r++){var a=e[r];this.tmpJokerByCardis[r]=a.cardID}},e.recordDisCard=function(t){this.discardCounter=this.discardCounter||{},this.discardCounter[t.cardID]||(this.discardCounter[t.cardID]=0),this.discardCounter[t.cardID]++},e.updateDiscard=function(t){this.discardCounter={};for(var e=0,n=t.length;n>e;e++){var i=t[e];this.discardCounter[i]||(this.discardCounter[i]=0),this.discardCounter[i]++}},e.testDiscard=function(){trace(this.discardCounter)},e.getDiscardCounter=function(){return this.getDiscardCounter},e.clearRecord=function(){this.discardCounter=null},e.dispose=function(){this.tmpJoker=null,this.tmpTableSource=null},e.isPure=function(t){for(var e=-1,n=0;n<t.length;n++)if(-1==this.tmpJokerByCardis.indexOf(t[n].cardID))if(-1==e)e=t[n].type;else if(e!=t[n].type)return!1;return!0},e.hasFlower=function(e,n){void 0===n&&(n=null);for(var i=0,r=e.length;r>i;i++){var o=e[i];if(o.type==t.Type.FLOWER)return!0}return n&&n.type==t.Type.FLOWER?!0:!1},e.hasDisableType=function(t,e){if(void 0===e&&(e=null),this.disableType<0)return!1;if(e&&e.type==this.disableType)return!0;for(var n=0,i=t.length;i>n;n++){var r=t[n];if(r.type==this.disableType)return!0}return!1},e.getDisableTypeCount=function(t,e){if(void 0===e&&(e=null),this.disableType<0)return 0;var n=0;e&&e.type==this.disableType&&n++;for(var i=0,r=t.length;r>i;i++){var o=t[i];o.type==this.disableType&&n++}return n},e.canWin_7dui=function(t){if(14!=t.length||this.hasFlower(t)||this.hasDisableType(t))return!1;for(var e={},n=0,i=0,r=t.length;r>i;i++){var o=t[i];-1!=this.tmpJokerByCardis.indexOf(o.cardID)?n++:(e[o.cardID]||(e[o.cardID]=0),e[o.cardID]++)}for(var a in e){var s=e[a];if(s%2!=0){if(!(n>0))return!1;n--}}return!0},e.findWinCardsWhenDraw=function(e,n,i,r,o,a){if(void 0===a&&(a=!0),this.hasFlower(e,n)||this.getDisableTypeCount(e,n)>=2)return null;for(var s,l={},h=[],u=!1,c=0,p=e.length+1;p>c;c++){if(s=e[c]||n,l[s.cardID])110==l[s.cardID]?h[c]=null:h[c]=l[s.cardID];else{p-1>c&&(s=e[c],e[c]=n);var d=this.findWinCards(e,i,r,o,a);if(d){u=!0;var g=new t.CheckResult;g.discard=s,g.winCards=d.cards,g.winCount=d.count;for(var f=0,_=g.winCards.length;_>f;f++)g.winCards[f].cardID==s.cardID&&g.winCount[f]--;l[s.cardID]=g,h[c]=g}else l[s.cardID]=110}p-1>c&&(e[c]=s)}return u?h:null},e.findWinCards=function(e,n,i,r,o){if(void 0===o&&(o=!0),this.hasFlower(e)||this.hasDisableType(e))return null;var a=this.canReadyHand(e,i,r,!1);if(!a)return null;e=e.concat(),i=i||this.tmpJoker,r=r||this.tmpTableSource;var s=[];e.splice(0,0,new t.Card(0,0));for(var l=0,h=n.length;h>l;l++){var u=n[l];e[0]=u;var c=this.canWin(e,i,r,!1,!0);o?c&&s.push(u):c&&!this.isSame(i[0],u)&&s.push(u)}if(s.length<=0)return null;for(var p={},l=1,h=e.length;h>l;l++){var u=e[l],d=u.cardID;p[d]||(p[d]=0),p[d]++}for(var g=[],f=[],l=0,h=s.length;h>l;l++){var u=s[l],d=u.cardID,_=4;this.discardCounter&&this.discardCounter[d]&&(_-=this.discardCounter[d]),p&&p[d]&&(_-=p[d]),(_>0||!this.skipZeroAtFindWinCard)&&(g.push(u),f.push(_))}return g.length<=0?null:{cards:g,count:f}},e.getCardLeftInRecord=function(t){return this.discardCounter?4-this.discardCounter[t]:4},e.isSame=function(t,e){return t&&e&&t.type==e.type&&t.point==e.point},e.canReadyHand=function(e,n,i,r){if(void 0===r&&(r=!1),this.hasFlower(e)||this.hasDisableType(e))return!1;e=e.concat(),n=n||this.tmpJoker,i=i||this.tmpTableSource;var o=n[0]||new t.Card(t.Type.ZI,t.Point.RED_DRAGON);return e.splice(0,0,o),this.canWin(e,n,i,r,!1)},e.canWin=function(t,e,n,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=!0),this.hasFlower(t)||this.hasDisableType(t))return null;if(this.allow_7dui&&this.canWin_7dui(t))return!0;t=t.concat(),e=e||this.tmpJoker,n=n||this.tmpTableSource;var o=t.length%3;if(2!=o)return!1;i||(t=this.sortHandleCard(t,e));var a=this.split(t,e,i),s=a[0],l=s.length;if(l>=9)return!0;for(var h,u,c=0,p=1,d=a.length;d>p;p++){var g=a[p],f=this.makeKey(g);if(""!=f&&1!=p){2==p?(h=n.fengTableDics,u=this.eye258Limit?[]:n.fengEyeTableDics):(h=n.tableDics,u=n.eyeTableDics);for(var _,m=!1,y=0,v=l;!m&&v>=y;y++){var C=(g.length+y)%3;_=null;var T=!1;0==C?(_=h[y]||{},T=_&&_[f]):2==C&&1>c&&(_=u[y]||{},T=this.eye258Limit?_&&_[f+"1"]:2==p?_&&_[f]:_&&(_[f+"1"]||_[f+"0"])),T&&(l-=y,m=!0,2==C&&c++)}if(!m||0>l||c>1)return!1}}return!0},e.makeKey=function(e){if(!e||e.length<=0)return"";var n=e[0].type;if(n==t.Type.FLOWER)return trace(" key"),"";for(var i="",r=n==t.Type.ZI?[0,0,0,0,0,0,0]:[0,0,0,0,0,0,0,0,0],o=n==t.Type.ZI?7:9,a=0;o>a;a++)for(var s=0,l=e.length;l>s;s++){var h=e[s];h.point==a&&r[a]++}for(var u=!1,a=0,o=r.length;o>a;a++){var c=r[a];(u||c>0)&&(u=!0,i+=c)}return i},e.split=function(e,n,i){void 0===i&&(i=!1),n=n||this.tmpJoker;var r=[[],[],[],[],[],[]];i||(e=this.sortHandleCard(e,n));for(var o=function(t){for(var e=0,i=n.length;i>e;e++){var r=n[e];if(r.type==t.type&&r.point==t.point)return!0}return!1},a=[[],[],[]],s=0,l=e.length;l>s;s++){var h=e[s];o(h)?r[0].push(h):h.type==t.Type.FLOWER?r[1].push(h):h.type==t.Type.ZI?r[2].push(h):h.type==t.Type.DOT?a[0].push(h):h.type==t.Type.BAMBOO?a[1].push(h):h.type==t.Type.CHARACTER&&a[2].push(h)}return a.sort(function(t,e){return t.length<e.length?-1:t.length>e.length?1:0}),r[3]=a[0],r[4]=a[1],r[5]=a[2],r},e.makeFullTiles=function(){var t=e.makeBasics();return t=t.concat(e.makeAllWinds()),t=t.concat(e.makeAllDragons())},e.makeOnlyRedDragonTiles=function(){var t=e.makeBasics();return t=t.concat(e.makeAllRedDragons())},e.shuffle=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e],r=this.randomInt_XY(0,n-1),o=i;t[e]=t[r],t[r]=o}return t},e.makeBasics=function(){var e=[t.Type.BAMBOO,t.Type.CHARACTER,t.Type.DOT];if(this.disableType>=0){var n=e.indexOf(this.disableType);-1!=n&&e.splice(n,1)}for(var i=[],r=0;8>=r;r++)for(var o=0,a=e.length;a>o;o++){var s=e[o],l=new t.Card(s,r);i.push(l),i.push(l.clone()),i.push(l.clone()),i.push(l.clone())}return i},e.makeAllWinds=function(){for(var e=[],n=[t.Point.EAST_WIND,t.Point.NORTH_WIND,t.Point.SOUTH_WIND,t.Point.WEST_WIND],i=0,r=n.length;r>i;i++){var o=n[i],a=new t.Card(t.Type.ZI,o);e.push(a),e.push(a.clone()),e.push(a.clone()),e.push(a.clone())}return e},e.makeAllDragons=function(){for(var e=[],n=[t.Point.GREEN_DRAGON,t.Point.RED_DRAGON,t.Point.WHITE_DRAGON],i=0,r=n.length;r>i;i++){var o=n[i],a=new t.Card(t.Type.ZI,o);e.push(a),e.push(a.clone()),e.push(a.clone()),e.push(a.clone())}return e},e.makeAllRedDragons=function(){var e=[],n=new t.Card(t.Type.ZI,t.Point.RED_DRAGON);return e.push(n),e.push(n.clone()),e.push(n.clone()),e.push(n.clone()),e},e.buildCardsByStr=function(e){for(var n=[],i=e.split(","),r=0,o=i.length;o>r;r++){var a=i[r],s=t.Card.createFromStr(a);n[r]=s}return n},e.sortTypePoint=function(t){return t.sort(this.compare)},e.testHandlePai=function(){var t=this.makeOnlyRedDragonTiles();return this.randomUniqueFromArray_XY(t,13)},e.sortHandleCard=function(t,n){return n=n||e.tmpJoker,e.tmpJoker=n||[],t.sort(e.compareWithJoker),t},e.sortHandleCardByCardI=function(t,n){return n&&(e.tmpJokerByCardis=n),t.sort(e.compareWithJokerByCardId),t},e.getTargetModel=function(t,e){for(var n,i=0;i<e.length;i++)if(n=e[i],n.type==t.type&&n.point==t.point)return n;return null},e.exitsTargetCard=function(t,e){for(var n,i=0;i<e.length;i++)if(n=e[i],n.type==t.type&&n.point==t.point)return!0;return!1},e.compare=function(t,e){return t.type<e.type?-1:t.type>e.type?1:t.type==e.type?t.point<e.point?-1:1:void 0},e.compareWithJoker=function(e,n){var i=t.MahjongTool.exitsTargetCard(e,t.MahjongTool.tmpJoker),r=t.MahjongTool.exitsTargetCard(n,t.MahjongTool.tmpJoker);return i&&!r?-1:!i&&r?1:e.type<n.type?-1:e.type>n.type?1:e.type==n.type?e.point<n.point?-1:1:0},e.compareWithJokerByCardId=function(e,n){var i=-1!=t.MahjongTool.tmpJokerByCardis.indexOf(e),r=-1!=t.MahjongTool.tmpJokerByCardis.indexOf(n);return i&&!r?-1:!i&&r?1:n>e?-1:e==n?0:1},e.canPongByCardId=function(t,e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r==t&&n++}return n>=2?!0:!1},e.canPong=function(t,e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r.type==t.type&&r.point==t.point&&n++}return n>=2?!0:!1},e.canKongByCardId=function(t,e){for(var n=0,i=0;i<e.length;i++){var r=e[i];t==r&&n++}return n>=3?!0:!1},e.canKong=function(t,e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r.type==t.type&&r.point==t.point&&n++}return n>=3?!0:!1},e.canChowByCardId=function(e,n){if(t.helpCard0.buildByCardID(e),t.helpCard0.type>=t.Type.ZI)return!1;for(var i=[],r=0,o=n.length;o>r;r++){var a=n[r];t.helpCard1.buildByCardID(a),t.helpCard0.type==t.helpCard1.type&&i.push(a)}var s=-1!=i.indexOf(e-2),l=-1!=i.indexOf(e-1),h=-1!=i.indexOf(e+1),u=-1!=i.indexOf(e+2);return s&&l||l&&h||h&&u},e.findAllChow=function(e,n){if(t.helpCard0.buildByCardID(e),t.helpCard0.type>=t.Type.ZI)return null;for(var i=[],r=[],o=0,a=n.length;a>o;o++){var s=n[o];t.helpCard1.buildByCardID(s),t.helpCard0.type==t.helpCard1.type&&r.push(s)}var l=-1!=r.indexOf(e-2),h=-1!=r.indexOf(e-1),u=-1!=r.indexOf(e+1),c=-1!=r.indexOf(e+2);return l&&h&&i.push([e-2,e-1,e]),h&&u&&i.push([e-1,e,e+1]),u&&c&&i.push([e,e+1,e+2]),i},e.canChow=function(e,n){if(e.type>=t.Type.ZI)return!1;var i=new t.Card(e.type,e.point-2),r=new t.Card(e.type,e.point-1),o=new t.Card(e.type,e.point+1),a=new t.Card(e.type,e.point+2),s=this.exitsTargetCard(i,n),l=this.exitsTargetCard(r,n),h=this.exitsTargetCard(o,n),u=this.exitsTargetCard(a,n);return s&&l||l&&h||h&&u},e.Win=function(){return!1},e.randomInt_XY=function(t,e){return Math.floor(t+(e-t+1)*Math.random())},e.randomFromArray_XY=function(t){return t[this.randomInt_XY(0,t.length-1)]},e.verifyRange_XY=function(t,e,n){return Math.max(Math.min(t,n),e)},e.randomUniqueFromArray_XY=function(t,e){e=this.verifyRange_XY(e,0,t.length);for(var n=[],i=1e3;e>0&&i>0;){var r=this.randomFromArray_XY(t);-1==n.indexOf(r)&&(n.push(r),e--),i--}return n},e.disableType=-1,e}();t.MahjongTool=e,__reflect(e.prototype,"mahjong.MahjongTool")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function e(){}return e.fromServerMelds=function(n){for(var i=[],r=0,o=n.length;o>r;r++){var a=n[r],s=new e;3==a.length?a[0]==a[1]?(s.type=this.TRIPLET,s.models=t.Card.createFronCardIds(a),i.push(s)):(s.type=this.SEQUENCE,s.models=t.Card.createFronCardIds(a),i.push(s)):4==a.length&&(-1!=a[0]?(s.type=this.EXPOSED,s.models=t.Card.createFronCardIds(a),i.push(s)):-1!=a[3]&&(s.type=this.CONCEALED,s.models=t.Card.createFronCardIds([a[3],a[3],a[3],a[3]]),i.push(s)))}return i},e.EXPOSED=0,e.CONCEALED=1,e.TRIPLET=2,e.SEQUENCE=3,e}();t.Meld=e,__reflect(e.prototype,"mahjong.Meld")}(mahjong||(mahjong={}));var mahjong;!function(t){var e;!function(t){t[t.EAST_WIND=0]="EAST_WIND",t[t.SOUTH_WIND=1]="SOUTH_WIND",t[t.WEST_WIND=2]="WEST_WIND",t[t.NORTH_WIND=3]="NORTH_WIND",t[t.RED_DRAGON=4]="RED_DRAGON",t[t.GREEN_DRAGON=5]="GREEN_DRAGON",t[t.WHITE_DRAGON=6]="WHITE_DRAGON",t[t.FLOWER_CHUN=34]="FLOWER_CHUN",t[t.FLOWER_XIA=35]="FLOWER_XIA",t[t.FLOWER_QIU=36]="FLOWER_QIU",t[t.FLOWER_DONG=37]="FLOWER_DONG",t[t.FLOWER_MEI=38]="FLOWER_MEI",t[t.FLOWER_LAN=39]="FLOWER_LAN",t[t.FLOWER_ZHU=40]="FLOWER_ZHU",t[t.FLOWER_JU=41]="FLOWER_JU"}(e=t.Point||(t.Point={}))}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function e(){}return e.compareAandB=function(t,e){var n=-1,i=-1;return n=this.getCardsType(t),i=this.getCardsType(e),n>i?1:i>n?0:(t=this.checkData(t),e=this.checkData(e),t[0].point>e[0].point?1:0)},e.checkData=function(e){return e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI?e:(e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI?e=e.reverse():e[0].point<e[1].point&&(e=e.reverse()),e)},e.getCardsType=function(e){if(null==e||0==e.length||2!=e.length)return-1;var i=!1;if(e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI&&e[1].point==t.Point.WHITE_DRAGON&&e[1].type==t.Type.ZI)return n.KING_GOD;if(e[0].point==t.Point.WHITE_DRAGON&&e[0].type==t.Type.ZI?(i=!0,e=e.reverse()):e[1].point==t.Point.WHITE_DRAGON&&e[1].type==t.Type.ZI?i=!0:e[0].point<e[1].point&&(e=e.reverse()),i){var r=e[0].point+1;return 2*r}if(e[0].point==e[1].point)return 18+(e[0].point+1);var o=e[0].point+1+e[1].point+1;if(o%10==0)return n.TEN_POINT;var a=o%10;return 2*a-1},e}();t.Q9Tool=e,__reflect(e.prototype,"mahjong.Q9Tool");var n=function(){function t(){}return t.TEN_POINT=0,t.ONE_POINT=1,t.ONE_POINT_HALF=2,t.TWO_POINT=3,t.TWO_POINT_HALF=4,t.THREE_POINT=5,t.THREE_POINT_HALF=6,t.FOUR_POINT=7,t.FOUR_POINT_HALF=8,t.FIVE_POINT=9,t.FIVE_POINT_HALF=10,t.SIX_POINT=11,t.SIX_POINT_HALF=12,t.SEVEN_POINT=13,t.SEVEN_POINT_HALF=14,t.EIGHT_POINT=15,t.EIGHT_POINT_HALF=16,t.NINE_POINT=17,t.NINE_POINT_HALF=18,t.ONE_HONEY=19,t.TWO_HONEY=20,t.THREE_HONEY=21,t.FOUR_HONEY=22,t.FINE_HONEY=23,t.SIX_HONEY=24,t.SEVEN_HONEY=25,t.EIGHT_HONEY=26,t.NINE_HONEY=27,t.KING_GOD=28,t}();t.Q9TypeGroup=n,__reflect(n.prototype,"mahjong.Q9TypeGroup")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function t(){}return t.GetCombination6=function(e,n,i,r,o,a){for(var s=i;s>=r;s--)if(o[r-1]=s-1,r>1)this.GetCombination6(e,n,s-1,r-1,o,a);else{null==e&&(e=[]);for(var l=[],h=0;h<o.length;h++)l[h]=n[o[h]];t.sortFun?l.sort(t.sortFun):l.sort(function(t,e){return e>t?-1:1}),this.arrHas(e,l)||e.push(l)}},t.arrHas=function(e,n){for(var i=0,r=e.length;r>i;i++){for(var o=e[i],a=!0,s=0,l=n.length;l>s&&a;s++){var h=n[s];t.compareFun?t.compareFun(o[s],h)||(a=!1):o[s]==h||(a=!1)}if(a)return!0}return!1},t.GetPermutation4Void=function(t,e,n,i){if(n==i){null==t&&(t=[]);for(var r=[],o=0,a=e.length;a>o;o++)r[o]=e[o];t.push(r)}else for(var o=n;i>=o;o++){var s=e[n];e[n]=e[o],e[o]=s,this.GetPermutation4Void(t,e,n+1,i);var s=e[n];e[n]=e[o],e[o]=s}},t.GetPermutation3Re=function(t,e,n){if(0>e||n>t.length-1)return null;var i=[];return this.GetPermutation4Void(i,t,e,n),i},t.GetPermutation1=function(t){return this.GetPermutation3Re(t,0,t.length-1)},t.GetPermutation2=function(t,e){if(e>t.length)return null;for(var n=[],i=this.GetCombination(t,e),r=0;r<i.length;r++){var o=[];this.GetPermutation4Void(o,i[r],0,e-1),n.push(o)}return n},t.GetCombination=function(t,e){if(t.length<e)return null;var n=[],i=[];return this.GetCombination6(i,t,t.length,e,n,e),i},t}();t.RandomAll=e,__reflect(e.prototype,"mahjong.RandomAll")}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function t(){this.keys=[],this.tables=[],this.feng_tables=[],this.eye_tables=[],this.feng_eye_tables=[]}return t.prototype.buildFromZipFile=function(t){var e=new JSZip(t),n=e.files,i=[],r=[],o=[],a=[];for(var s in n){var l=n[s],h=l.asText(),u=h.split("\n");-1!=s.indexOf("feng_eye_table_")?a.push(u):-1!=s.indexOf("feng_table_")?r.push(u):-1!=s.indexOf("eye_table_")?o.push(u):-1!=s.indexOf("table_")&&i.push(u)}this.build(i,r,o,a)},t.prototype.buildFromZipFileAysn=function(t,e,n){this.callback=e,this.thisObj=n;var i=new JSZip(t);this.zipFiles=i.files,this.tables=[],this.feng_tables=[],this.eye_tables=[],this.feng_eye_tables=[],this.keys=[];for(var r in this.zipFiles)this.keys.push(this.zipFiles[r]);this.parseIndex=-1,this.parseNext()},t.prototype.parseNext=function(){this.parseIndex++,this.parseIndex>=this.keys.length&&(this.build(this.tables,this.feng_tables,this.eye_tables,this.feng_eye_tables),this.callback&&this.callback.apply(this.thisObj),this.callback=null,this.thisObj=null,this.zipFiles=null,this.tables=null,this.feng_tables=null,this.eye_tables=null,this.feng_eye_tables=null,this.keys=null)},t.prototype.build=function(t,e,n,i){this.eyeTableDics=[];for(var r=0,o=n.length;o>r;r++){for(var a=n[r],s={},l=0,h=a.length;h>l;l++){var u=a[l];s[u]=!0}this.eyeTableDics[r]=s}this.tableDics=[];for(var r=0,o=t.length;o>r;r++){for(var a=t[r],s={},l=0,h=a.length;h>l;l++){var u=a[l];s[u]=!0}this.tableDics[r]=s}this.fengEyeTableDics=[];for(var r=0,o=i.length;o>r;r++){for(var a=i[r],s={},l=0,h=a.length;h>l;l++){var u=a[l];s[u]=!0}this.fengEyeTableDics[r]=s}this.fengTableDics=[];for(var r=0,o=e.length;o>r;r++){for(var a=e[r],s={},l=0,h=a.length;h>l;l++){var u=a[l];s[u]=!0}this.fengTableDics[r]=s}},t}();t.TableSource=e,__reflect(e.prototype,"mahjong.TableSource")}(mahjong||(mahjong={}));var mahjong;!function(t){var e;!function(t){t[t.CHARACTER=0]="CHARACTER",t[t.DOT=1]="DOT",t[t.BAMBOO=2]="BAMBOO",t[t.ZI=3]="ZI",t[t.FLOWER=4]="FLOWER"}(e=t.Type||(t.Type={}))}(mahjong||(mahjong={}));var mahjong;!function(t){var e=function(){function e(){}return e.init=function(){this.helpCard0=new t.Card(0,0),this.helpCard1=new t.Card(0,0),this.helpCard2=new t.Card(0,0),this.helpCard3=new t.Card(0,0),this.helpCard4=new t.Card(0,0),this.helpCard5=new t.Card(0,0),this.helpCard6=new t.Card(0,0),this.helpCard7=new t.Card(0,0),this.helpCard8=new t.Card(0,0),this.helpCard9=new t.Card(0,0),this.helpCard10=new t.Card(0,0),this.helpCard11=new t.Card(0,0),this.helpCard12=new t.Card(0,0),this.helpCard13=new t.Card(0,0),this.helpCard14=new t.Card(0,0),this.huIdArr=[i.MAHJONG_XZDD_HU_PING,i.MAHJONG_XZDD_HU_DUI_DUI,i.MAHJONG_XZDD_HU_QING_YI_SE,i.MAHJONG_XZDD_HU_DAI_YAO_JIU,i.MAHJONG_XZDD_HU_QI_DUI,i.MAHJONG_XZDD_HU_DA_QING_DUI,i.MAHJONG_XZDD_HU_JIANG_DUI,i.MAHJONG_XZDD_HU_LONG_QI_DUI,i.MAHJONG_XZDD_HU_QING_QI_DUI,i.MAHJONG_XZDD_HU_QING_YAO_JIU,i.MAHJONG_XZDD_HU_QING_LONG_QI_DUI,i.MAHJONG_XZDD_HU_DI_HU,i.MAHJONG_XZDD_HU_TIAN_HU],this.idArr=[i.MAHJONG_XZDD_HU_PING,i.MAHJONG_XZDD_HU_DUI_DUI,i.MAHJONG_XZDD_HU_QING_YI_SE,i.MAHJONG_XZDD_HU_DAI_YAO_JIU,i.MAHJONG_XZDD_HU_QI_DUI,i.MAHJONG_XZDD_HU_DA_QING_DUI,i.MAHJONG_XZDD_HU_JIANG_DUI,i.MAHJONG_XZDD_HU_LONG_QI_DUI,i.MAHJONG_XZDD_HU_QING_QI_DUI,i.MAHJONG_XZDD_HU_QING_YAO_JIU,i.MAHJONG_XZDD_HU_QING_LONG_QI_DUI,i.MAHJONG_XZDD_HU_DI_HU,i.MAHJONG_XZDD_HU_TIAN_HU,i.MAHJONG_XZDD_GUA_FENG,i.MAHJONG_XZDD_ADD_KONG,i.MAHJONG_XZDD_XIA_YU,i.MAHJONG_XZDD_HU_HAI_DI_LAO_YUE,i.MAHJONG_XZDD_HU_GANG_SHANG_HUA,i.MAHJONG_XZDD_ZI_MO,i.MAHJONG_XZDD_HU_GANG_SHANG_PAO,i.MAHJONG_XZDD_HU_QIANG_GANG,i.MAHJONG_XZDD_ONE_GEN,i.MAHJONG_XZDD_TWO_GEN,i.MAHJONG_XZDD_THREE_GEN,i.MAHJONG_XZDD_JIN_GOU_GOU,i.MAHJONG_XZDD_GANG,i.MAHJONG_XZDD_CHA_DA_JIAO,i.MAHJONG_XZDD_CHA_HUA_ZHU,i.MAHJONG_XZDD_DRAW_BACK],this.findDic=[[i.MAHJONG_XZDD_HU_QING_LONG_QI_DUI,this.is_qing_long_qi_dui],[i.MAHJONG_XZDD_HU_LONG_QI_DUI,this.is_long_qi_dui],[i.MAHJONG_XZDD_HU_QING_QI_DUI,this.is_qing_qi_dui],[i.MAHJONG_XZDD_HU_QING_YAO_JIU,this.is_qing_yao_jiu],[i.MAHJONG_XZDD_HU_DA_QING_DUI,this.is_da_qing_dui],[i.MAHJONG_XZDD_HU_JIANG_DUI,this.is_jiang_dui],[i.MAHJONG_XZDD_HU_QING_YI_SE,this.is_qing_yi_se],[i.MAHJONG_XZDD_HU_DAI_YAO_JIU,this.is_dai_yao_jiu],[i.MAHJONG_XZDD_HU_QI_DUI,this.is_qi_dui],[i.MAHJONG_XZDD_HU_DUI_DUI,this.is_dui_dui]];for(var e=0,n=this.findDic.length;n>e;e++){var r=this.findDic[e],o=r[1];r[1]=o.bind(this)}},e.getHuFanShu=function(t){var e=this.idArr.indexOf(t);return-1!=e?this.fanshuArr[e]:0},e.getWinTypeAndFactors=function(e,i,r){i=t.MahjongTool.sortHandleCard(i);var o=[];o=i.concat(),o.push(r),o=t.MahjongTool.sortHandleCard(o);for(var a=o.concat(),s=o.concat(),l=0,h=e.length;h>l;l++){var u=e[l];s=s.concat(u.models),u.type==t.Meld.TRIPLET&&(a=a.concat(u.models))}a=t.MahjongTool.sortHandleCard(a),s=t.MahjongTool.sortHandleCard(s);var c=new n;c.handIsPure=t.MahjongTool.isPure(o),c.is7Dui=this.is7Dui(o),c.isPure7Dui=this.isPure7Dui(o),c.isPengPengHu=this.isPengPengHu(o,e,c.isPure7Dui),c.allIsPure=t.MahjongTool.isPure(s),c.allWithPeng=a,c.allWithPengGang=s,c.allWithNothingDic=this.cardToArrDic(o),c.anGangCount=0,c.mingGangCount=0;for(var l=0,h=e.length;h>l;l++){var p=e[l];p.type==t.Meld.CONCEALED?c.anGangCount++:p.type==t.Meld.EXPOSED&&c.mingGangCount++}for(var d=[],g=[],f=0,l=0,h=this.findDic.length;h>l;l++){var _=this.findDic[l];if(_){var m=_[0],y=_[1];if(-1==g.indexOf(m)&&y&&y(o,e,i,r,c)){d.push(m),f+=this.getHuFanShu(m);break}}}if(0==f){var v=2;f=Math.pow(2,v)}else f=Math.pow(2,f+1);return{winTyps:d,factor:f}},e.cardToArrDic=function(e){for(var n=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],i=0,r=e.length;r>i;i++){var o=e[i];o.type==t.Type.CHARACTER?(n[0][0]++,n[0][o.point+1]++):o.type==t.Type.DOT?(n[1][0]++,n[1][o.point+1]++):o.type==t.Type.BAMBOO?(n[2][0]++,n[2][o.point+1]++):o.type==t.Type.ZI&&(n[3][0]++,n[3][o.point+1]++)}return n},e.is7Dui=function(t){if(14!=t.length)return!1;for(var e=0,n=t.length;n>e;e++){var i=t[e];if(!this.isSame(i,t[e+1]))return!1;e++}return!0},e.isPure7Dui=function(t){if(14!=t.length)return!1;for(var e=0,n=t.length;n>e;e++){var i=t[e];if(this.isSame(i,t[e+2])||this.isSame(i,t[e+3]))return!1;if(!this.isSame(i,t[e+1]))return!1;e++}return!0},e.isPengPengHu=function(e,n,i){if(i)return!1;for(var r=0,o=n.length;o>r;r++){var a=n[r];if(a.type==t.Meld.SEQUENCE)return!1}for(var s,r=0,o=e.length;o>r;r++){var l=e[r];if(this.isSame(l,e[r+2]))r+=2;else{if(!this.isSame(l,e[r+1]))return!1;if(!this._is_jiang(e,l,i))return!1;if(s)return!1;s=!0,r++}}return s},e.isSame=function(t,e){return t&&e?t.type==e.type&&t.point==e.point:!1},e._is_jiang=function(e,n,i){if(i)return!1;var r=e.concat();return this.helpCard0.reNew(t.Type.BAMBOO,2),this.helpCard1.reNew(t.Type.BAMBOO,2),r.push(this.helpCard0),r.push(this.helpCard1),this.canWinWhenDeleteCards(r,[n,n])},e.canWinWhenDeleteCards=function(e,n,i){void 0===i&&(i=!0);for(var r=e.concat(),o=0,a=n.length;a>o;o++){var s=n[o],l=this.getIndexOf(r,s);if(-1==l)return!1;r.splice(l,1)}t.MahjongTool.allow_7dui=i;var h=t.MahjongTool.canWin(r);return t.MahjongTool.allow_7dui=!0,h},e.getIndexOf=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(this.isSame(r,e))return n}return-1},e.is_qing_long_qi_dui=function(t,e,n,i,r){return r.allIsPure&&r.is7Dui&&!r.isPure7Dui},e.is_long_qi_dui=function(t,e,n,i,r){return r.is7Dui&&!r.isPure7Dui},e.is_qing_qi_dui=function(t,e,n,i,r){return r.allIsPure&&r.is7Dui},e.is_qing_yao_jiu=function(t,e,n,i,r){return r.allIsPure&&this.is_dai_yao_jiu(t,e,n,i,r)},e.is_da_qing_dui=function(t,e,n,i,r){return r.allIsPure&&r.isPengPengHu},e.is_jiang_dui=function(t,e,n,i,r){for(var o=0;o<r.allWithPengGang.length;o++)if(2!=r.allWithPengGang[o].point&&5!=r.allWithPengGang[o].point&&8!=r.allWithPengGang[o].point)return!1;return r.isPengPengHu},e.is_qing_yi_se=function(t,e,n,i,r){return r.allIsPure},e.is_dai_yao_jiu=function(t,e,n,i,r){for(var o=0;3>o;o++){var a=r.allWithPengGang[o];if(a[4]>0||a[5]>0||a[6]>0)return!1}for(var o=0;3>o;o++){var s=r.allWithNothingDic[o];if(s[2]!=s[3]||s[7]!=s[8])return!1}for(var o=0,l=e.length;l>o;o++){var h=e[o];if(!this._cardsHas1_9(h.models))return!1}for(var o=0;3>o;o++){var u=r.allWithNothingDic[o][1]-r.allWithNothingDic[o][2],c=r.allWithNothingDic[o][9]-r.allWithNothingDic[o][7];if(0>u||0>c)return!1}var p=r.allWithNothingDic[0][0],d=r.allWithNothingDic[1][0],g=r.allWithNothingDic[2][0];return p%3==0&&d%3==0&&g%3==2?!0:d%3==0&&g%3==0&&p%3==2?!0:p%3==0&&g%3==0&&d%3==2?!0:!1},e._cardsHas1_9=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(this._is_1_9(i))return!0}return!1},e._is_1_9=function(t){return 0==t.point||8==t.point},e.is_qi_dui=function(t,e,n,i){return i.is7Dui},e.is_dui_dui=function(t,e,n,i){return i.isPengPengHu},e.huIdArr=[],e.idArr=[],e.findDic=[],e.fanshuArr=[1,2,3,3,3,4,4,5,5,5,6,6,6,1,1,1,1,1,1,1,1,1,2,3,1,1],e}();t.XZDDTool=e,__reflect(e.prototype,"mahjong.XZDDTool");var n=function(){function t(){this.anGangCount=0,this.mingGangCount=0}return t}();t.XZDD_Config=n,__reflect(n.prototype,"mahjong.XZDD_Config");var i=function(){function t(){}return t.MAHJONG_XZDD_HU_PING=100001,t.MAHJONG_XZDD_HU_DUI_DUI=100002,t.MAHJONG_XZDD_HU_QING_YI_SE=100003,t.MAHJONG_XZDD_HU_DAI_YAO_JIU=100004,t.MAHJONG_XZDD_HU_QI_DUI=100005,t.MAHJONG_XZDD_HU_DA_QING_DUI=100006,t.MAHJONG_XZDD_HU_JIANG_DUI=100007,t.MAHJONG_XZDD_HU_LONG_QI_DUI=100008,t.MAHJONG_XZDD_HU_QING_QI_DUI=100009,t.MAHJONG_XZDD_HU_QING_YAO_JIU=100010,t.MAHJONG_XZDD_HU_QING_LONG_QI_DUI=100011,t.MAHJONG_XZDD_HU_DI_HU=100012,t.MAHJONG_XZDD_HU_TIAN_HU=100013,t.MAHJONG_XZDD_GUA_FENG=200001,t.MAHJONG_XZDD_ADD_KONG=200002,t.MAHJONG_XZDD_XIA_YU=200003,t.MAHJONG_XZDD_HU_HAI_DI_LAO_YUE=300001,t.MAHJONG_XZDD_HU_GANG_SHANG_HUA=300002,t.MAHJONG_XZDD_ZI_MO=300003,t.MAHJONG_XZDD_HU_GANG_SHANG_PAO=300004,t.MAHJONG_XZDD_HU_QIANG_GANG=300005,t.MAHJONG_XZDD_ONE_GEN=300006,t.MAHJONG_XZDD_TWO_GEN=300007,t.MAHJONG_XZDD_THREE_GEN=300008,t.MAHJONG_XZDD_JIN_GOU_GOU=300009,t.MAHJONG_XZDD_GANG=300010,t.MAHJONG_XZDD_HU_YI_PAO_DUO_XIANG=100014,t.MAHJONG_XZDD_CHA_DA_JIAO=400001,t.MAHJONG_XZDD_CHA_HUA_ZHU=400002,t.MAHJONG_XZDD_DRAW_BACK=400003,t}();t.XZDD_WinType=i,__reflect(i.prototype,"mahjong.XZDD_WinType")}(mahjong||(mahjong={}));var mahjong;!function(t){var e;!function(e){var n=function(){function e(){}return e.init=function(e){void 0===e&&(e=-1),this.clean(),t.Card.init(),this.lackType=e},e.computeLeftCards=function(){this.remainTiles={};for(var e=this.handCards.concat(),n=0,i=this.fullCardWithOutJoker.length;i>n;n++){var r=this.fullCardWithOutJoker[n];this.remainTiles[r.cardID]||(this.remainTiles[r.cardID]=4)}for(var n=0,i=this.fullCardWithOutJoker.length;i>n;n++){var r=this.fullCardWithOutJoker[n],o=null!=t.MahjongTool.getTargetModel(r,e);o&&this.remainTiles[r.cardID]--}},e.clean=function(){this.remainTiles={},this.lackType=null},e.getSuggest=function(e,n,i,r,o){var a=this;this.fullCardWithOutJoker=i,this.jokers=r||t.MahjongTool.tmpJoker;for(var s=[],l=0,h=e.length;h>l;l++){var u=e[l],c=null!=t.MahjongTool.getTargetModel(u,this.jokers);c||s.push(u)}null==t.MahjongTool.getTargetModel(n,this.jokers)&&s.push(n),s=this.handCards=a.makeSort(s),this.computeLeftCards();var p;if(-1!=a.lackType)for(var l=s.length-1;l>=0;l--){var u=s[l];if(u.type==a.lackType)return u}var d=t.MahjongTool.findWinCardsWhenDraw(e,n,i,r,o),g=-1;if(d){for(var f=0,l=0,h=d.length;h>l;l++){var _=d[l];if(_&&_.discard){var m=_.computeAllCount();if(m>f)f=m,p=_.discard;else if(m==f){var y=this.getSingleCardWeight(_.discard.cardID);(-1==g||g>y)&&(p=_.discard,g=y)}}}return p}return a.suggestByAIPlatinum(s)},e.suggestByAIPlatinum=function(t){var e=this.getCardsMapWeight(this.sliceToMap(t));return this.suggestByWeightAndRemain(e)},e.getCardsMapWeight=function(t,e){void 0===e&&(e=null);var n={};for(var i in t){var r=int_XY(i),o=t[r];if(null==e||-1!=e.indexOf(r)){var a=0;this.isSuit(r)?a+=this.isSideCard(r)?10:this.isSideNeighborCard(r)?20:30:a-=10,this.isSuit(r)&&(t[r-1]&&t[r-1]>0&&(a+=50),t[r+1]&&t[r+1]>0&&(a+=50),!this.isLeftSideCards(r)&&t[r+2]&&t[r+2]>0&&(a+=40),!this.isRightSideCards(r)&&t[r-2]&&t[r-2]>0&&(a+=40)),o>=2&&(a+=80*(o-1)),n[r]=a}}return n},e.getSingleCardWeight=function(t){var e=0;return this.isSuit(t)&&(e+=this.isSideCard(t)?10:this.isSideNeighborCard(t)?20:30),e},e.isSuit=function(e){return t.helpCard0.buildByCardID(e),t.helpCard0.type==t.Type.BAMBOO||t.helpCard0.type==t.Type.DOT||t.helpCard0.type==t.Type.CHARACTER},e.isSideCard=function(e){return t.helpCard0.buildByCardID(e),!(t.helpCard0.type!=t.Type.BAMBOO&&t.helpCard0.type!=t.Type.DOT&&t.helpCard0.type!=t.Type.CHARACTER||0!=t.helpCard0.point&&8!=t.helpCard0.point)},e.isSideNeighborCard=function(e){return t.helpCard0.buildByCardID(e),!(t.helpCard0.type!=t.Type.BAMBOO&&t.helpCard0.type!=t.Type.DOT&&t.helpCard0.type!=t.Type.CHARACTER||1!=t.helpCard0.point&&7!=t.helpCard0.point)},e.isLeftSideCards=function(e){return t.helpCard0.buildByCardID(e),(t.helpCard0.type==t.Type.BAMBOO||t.helpCard0.type==t.Type.DOT||t.helpCard0.type==t.Type.CHARACTER)&&0==t.helpCard0.point},e.isLeftSideNeighborCards=function(e){return t.helpCard0.buildByCardID(e),(t.helpCard0.type==t.Type.BAMBOO||t.helpCard0.type==t.Type.DOT||t.helpCard0.type==t.Type.CHARACTER)&&1==t.helpCard0.point},e.isRightSideNeighborCards=function(e){return t.helpCard0.buildByCardID(e),(t.helpCard0.type==t.Type.BAMBOO||t.helpCard0.type==t.Type.DOT||t.helpCard0.type==t.Type.CHARACTER)&&7==t.helpCard0.point},e.isRightSideCards=function(e){return t.helpCard0.buildByCardID(e),(t.helpCard0.type==t.Type.BAMBOO||t.helpCard0.type==t.Type.DOT||t.helpCard0.type==t.Type.CHARACTER)&&8==t.helpCard0.point},e.suggestByWeightAndRemain=function(e){var n=this.getMapMinValue(e),i=n[1],r=1e6,o=0;for(var a in i){var s=i[a],l=this.getRemainTilesCnt(this.getRelationTiles(s));r>l&&(r=l,o=s)}return t.Card.createFromCardID(o)},e.getRemainTilesCnt=function(t){var e=0;t=createUniqueArray_XY(t);for(var n=0,i=t.length;i>n;n++){var r=t[n];e+=this.remainTiles[r]||0}return e},e.getRelationTiles=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],i=0,r=arguments.length;r>i;i++){var o=arguments[i];n.push(o),this.isSuit(o)&&(this.isLeftSideCards(o)?n.push(o+1,o+2):this.isLeftSideNeighborCards(o)?n.push(o+1,o+2,o-1):this.isRightSideNeighborCards(o)?n.push(o-1,o-2,o+1):this.isRightSideCards(o)?n.push(o-1,o-2):n.push(o-1,o-2,o+1,o+2))}return createUniqueArray_XY(n)},e.getMapMinValue=function(t){var e=[],n=-1;for(var i in t){var r=int_XY(i),o=t[i];-1==n||n>o?(n=o,e=[r]):o==n&&e.push(r)}return[n,e]},e.sliceToMap=function(t){for(var e={},n=0,i=t.length;i>n;n++){var r=t[n];e[r.cardID]?e[r.cardID]++:e[r.cardID]=1}return e},e.makeSort=function(t){var t=t.concat();return t.sort(function(t,e){return t.cardID<e.cardID?-1:t.cardID>e.cardID?1:0}),t},e}();e.MSelector=n,__reflect(n.prototype,"mahjong.ai.MSelector")}(e=t.ai||(t.ai={}))}(mahjong||(mahjong={}));var Global=function(){function t(){}return t.checkLocalStorageInit=function(){return t.isNative&&!t.isLocalStorgeDataInited?(t.platform.getAppInfo(),!0):!1},t.localStorageSetItem=function(e,n){return egret.localStorage.setItem(e,n),this.checkLocalStorageInit()?t.eventCenter.once("localStorgeDataInited",function(){t.platform.localStorageSetItem(e,n)},this):t.platform.localStorageSetItem(e,n),!0},t.localStorageRemoveItem=function(e){egret.localStorage.removeItem(e),this.checkLocalStorageInit()?t.eventCenter.once("localStorgeDataInited",function(){t.platform.localStorageRemoveItem(e)},this):t.platform.localStorageRemoveItem(e)},t.localStorageGetItem=function(e){return this.checkLocalStorageInit(),t.platform.localStorageGetItem(e)||egret.localStorage.getItem(e)},t.localStorageClear=function(){egret.localStorage.clear(),this.checkLocalStorageInit(),t.platform.localStorageClear()},t.initSkeleton2=function(e,n){if(t.addedSkeletonDic[e]||(t.addedSkeletonDic[e]={}),1!=t.addedSkeletonDic[e][n]){var i=RES.getRes(n+"_ske_dbbin"),r=RES.getRes(n+"_tex_json"),o=RES.getRes(n+"_tex_png");t.addedSkeletonDic[e][n]=1;var a=t.dbFactoryDic[e];a||(a=t.dbFactoryDic[e]=new dragonBones.EgretFactory),a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),a.addTextureAtlasData(new dragonBones.EgretTextureAtlas(o,r))}},t.initSkeleton=function(e,n){if(t.addedSkeletonDic[e]||(t.addedSkeletonDic[e]={}),1!=t.addedSkeletonDic[e][n]){var i=RES.getRes(n+"_ske_json"),r=RES.getRes(n+"_tex_json"),o=RES.getRes(n+"_tex_png");t.addedSkeletonDic[e][n]=1;var a=t.dbFactoryDic[e];a||(a=t.dbFactoryDic[e]=new dragonBones.EgretFactory),a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),a.addTextureAtlasData(new dragonBones.EgretTextureAtlas(o,r))}},t.buildArmature=function(e,n,i){void 0===i&&(i="armatureName"),this.initSkeleton(e,n);var r=t.dbFactoryDic[e],o=r.buildArmature(i,n);return o},t.buildArmature2=function(e,n,i){void 0===i&&(i="armatureName"),this.initSkeleton2(e,n);var r=t.dbFactoryDic[e],o=r.buildArmatureDisplay(i);return o},t.isFullScreenMode=function(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1},t.clearDragonBones=function(e){var n=t.dbFactoryDic[e];n&&n.clear(!0),t.dbFactoryDic[e]=null,delete t.dbFactoryDic[e],t.addedSkeletonDic[e]=null,delete t.addedSkeletonDic[e]},t.initRESEvent=function(){this.defaultHallType=int_XY(this.localStorageGetItem("business_default_hall_type")||"0"),t.mEventAdded||(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onGroupOk,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onProgress,t),t.mEventAdded=!0,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,t.onError,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onError,t))
},t.updateServerTime=function(t){this._serverTimeUpdateMark=egret.getTimer(),this._serverTime=t},t.getNowServerTime=function(){return isNaN(this._serverTime)?(new Date).getTime():this._serverTime+(egret.getTimer()-this._serverTimeUpdateMark)},t.onError=function(e){try{SimpleLoading.hide(),BadJSReporter.addTextError(""+JSON.stringify(e.resItem)),Toast.show(i18n(' "{0}" ',e.resItem.name)),trace(e.type+","+JSON.stringify(e.resItem))}catch(e){trace("error:"+JSON.stringify(e))}t.onEvent(EventEnum.RES_LOAD_FAILED),t.platform.sendMsgToHall(EventEnum.RES_LOAD_FAILED)},t.onProgress=function(e){if(t.isInGame&&stringEndWith_XY(e.groupName,".all")){var n=e.itemsLoaded/e.itemsTotal;t.platform.sendMsgToHall(EventEnum.E_MODULE_ALL_LOAD_PROGRESS,n),t.eventCenter.dispatchEventWith(EventEnum.E_MODULE_ALL_LOAD_PROGRESS,!1,n)}},t.onGroupOk=function(e){setTimeout(function(){if(trace(e.groupName+" load complete!"),t.isInGame&&stringEndWith_XY(e.groupName,".all")?t.eventCenter.dispatchEventWith(t.E_MODULE_ALL_LOAD_OK,!1,e.groupName):t.eventCenter.dispatchEventWith(e.groupName),e.groupName==t.mAutoQueueLoaderGroupName&&(t.mAutoQueueLoaderGroupName=null),null==t.mAutoQueueLoaderGroupName&&t.all.length>0){var n=t.all.shift();t.mAutoQueueLoaderGroupName=n,trace("start load",n),RES.loadGroup(n)}},1)},t.onEvent=function(e,n){e!=EventEnum.E_MODULE_ALL_LOAD_PROGRESS&&e!=EventEnum.RUN_MODE_CHANGE_P_to_G&&trace(":"+e+", ",n),t.eventCenter.dispatchEventWith(e,!1,n),puremvc.Facade.hasCore(GameIdEnum.HALL)&&puremvc.Facade.getInstance(GameIdEnum.HALL).sendNotification(e,n)},t.clone=function(t){var e={};for(var n in t)e[n]=t[n];return e},t.E_MODULE_ALL_LOAD_OK="E_MODULE_ALL_LOAD_OK",t.eventCenter=new egret.EventDispatcher,t.isNative=!1,t.browser={versions:function(){var t=navigator.userAgent.toLocaleLowerCase();navigator.appVersion;return{trident:t.indexOf("trident")>-1,presto:t.indexOf("presto")>-1,webKit:t.indexOf("applewebKit")>-1,gecko:t.indexOf("gecko")>-1&&-1==t.indexOf("khtml"),mobile:!!t.match(/applebebKit.*mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? cpu.+mac os x/),android:t.indexOf("android")>-1||t.indexOf("adr")>-1,iPhone:t.indexOf("iphone")>-1,iPad:t.indexOf("ipad")>-1,webApp:-1==t.indexOf("safari"),weixin:t.indexOf("micromessenger")>-1}}()},t.lifeProcess=0,t.allowReconnect=!0,t.avatarURI="",t.defaultHallType=0,t.sourceVer="",t.all=[],t.isInGame=!1,t.isFrom3rd=!1,t.isGameInitCompleted=!1,t.gameId="",t.phonePower=100,t.phoneSignal=20,t.isLocalStorgeDataInited=!1,t.blobKey="_blob",t.dbFactoryDic={},t.addedSkeletonDic={},t}();__reflect(Global.prototype,"Global"),Global.isNative=!1;var ParamOf3rd=function(){function t(){}return t.buildFromUrlParam=function(){var e=new t;return e.account=decodeURIComponent(egret.getOption("account")),e.token=decodeURIComponent(egret.getOption("token")),e.lang=decodeURIComponent(egret.getOption("lang")),e.time=parseInt(egret.getOption("time")||"0"),e.backUrl=decodeURIComponent(egret.getOption("backUrl")),e.jumpType=parseInt(egret.getOption("jumpType")||"0"),e.gameHandler=decodeURIComponent(egret.getOption("gameHandler")||"").toUpperCase(),e.route=decodeURIComponent(egret.getOption("route")),e},t.prototype.validate=function(){return null==this.route||""==this.route?i18n(""):null==this.gameHandler||""==this.gameHandler||GameIdEnum.hasGame(this.gameHandler)?GameIdEnum.hasGame(this.gameHandler)||1!=this.jumpType&&2!=this.jumpType?null:i18n("jumpType12"):i18n("ID")},t}();__reflect(ParamOf3rd.prototype,"ParamOf3rd");var Bank=function(){function t(){}return t.getBankInfoByCardNo=function(t){for(var e=0,n=this.bankcardList.length;n>e;e++)for(var i=this.bankcardList[e],r=i.patterns,o=0,a=r.length;a>o;o++){var s=r[o];if(new RegExp(s.reg).test(t)){var l=this.getCardTypeName(s.cardType);return{bankName:i18n(i.bankName),bankType:i18n(l),bankCode:i.bankCode}}}return null},t.getCardTypeName=function(t){return this.cardTypeMap[t]?this.cardTypeMap[t]:void 0},t.cardTypeMap={DC:"",CC:"",SCC:"",PC:""},t.bankcardList=[{bankName:"",bankCode:"PSBC",patterns:[{reg:/^(621096|621098|622150|622151|622181|622188|622199|955100|621095|620062|621285|621798|621799|621797|620529|621622|621599|621674|623218|623219)\d{13}$/g,cardType:"DC"},{reg:/^(62215049|62215050|62215051|62218850|62218851|62218849)\d{11}$/g,cardType:"DC"},{reg:/^(622812|622810|622811|628310|625919)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"ICBC",patterns:[{reg:/^(620200|620302|620402|620403|620404|620406|620407|620409|620410|620411|620412|620502|620503|620405|620408|620512|620602|620604|620607|620611|620612|620704|620706|620707|620708|620709|620710|620609|620712|620713|620714|620802|620711|620904|620905|621001|620902|621103|621105|621106|621107|621102|621203|621204|621205|621206|621207|621208|621209|621210|621302|621303|621202|621305|621306|621307|621309|621311|621313|621211|621315|621304|621402|621404|621405|621406|621407|621408|621409|621410|621502|621317|621511|621602|621603|621604|621605|621608|621609|621610|621611|621612|621613|621614|621615|621616|621617|621607|621606|621804|621807|621813|621814|621817|621901|621904|621905|621906|621907|621908|621909|621910|621911|621912|621913|621915|622002|621903|622004|622005|622006|622007|622008|622010|622011|622012|621914|622015|622016|622003|622018|622019|622020|622102|622103|622104|622105|622013|622111|622114|622017|622110|622303|622304|622305|622306|622307|622308|622309|622314|622315|622317|622302|622402|622403|622404|622313|622504|622505|622509|622513|622517|622502|622604|622605|622606|622510|622703|622715|622806|622902|622903|622706|623002|623006|623008|623011|623012|622904|623015|623100|623202|623301|623400|623500|623602|623803|623901|623014|624100|624200|624301|624402|623700|624000)\d{12}$/g,cardType:"DC"},{reg:/^(622200|622202|622203|622208|621225|620058|621281|900000|621558|621559|621722|621723|620086|621226|621618|620516|621227|621288|621721|900010|623062|621670|621720|621379|621240|621724|621762|621414|621375|622926|622927|622928|622929|622930|622931|621733|621732|621372|621369|621763)\d{13}$/g,cardType:"DC"},{reg:/^(402791|427028|427038|548259|621376|621423|621428|621434|621761|621749|621300|621378|622944|622949|621371|621730|621734|621433|621370|621764|621464|621765|621750|621377|621367|621374|621731|621781)\d{10}$/g,cardType:"DC"},{reg:/^(9558)\d{15}$/g,cardType:"DC"},{reg:/^(370246|370248|370249|370247|370267|374738|374739)\d{9}$/g,cardType:"CC"},{reg:/^(427010|427018|427019|427020|427029|427030|427039|438125|438126|451804|451810|451811|458071|489734|489735|489736|510529|427062|524091|427064|530970|530990|558360|524047|525498|622230|622231|622232|622233|622234|622235|622237|622239|622240|622245|622238|451804|451810|451811|458071|628288|628286|622206|526836|513685|543098|458441|622246|544210|548943|356879|356880|356881|356882|528856|625330|625331|625332|622236|524374|550213|625929|625927|625939|625987|625930|625114|622159|625021|625022|625932|622889|625900|625915|625916|622171|625931|625113|625928|625914|625986|625925|625921|625926|625942|622158|625917|625922|625934|625933|625920|625924|625017|625018|625019)\d{10}$/g,cardType:"CC"},{reg:/^(45806|53098|45806|53098)\d{11}$/g,cardType:"CC"},{reg:/^(622210|622211|622212|622213|622214|622220|622223|622225|622229|622215|622224)\d{10}$/g,cardType:"SCC"},{reg:/^(620054|620142|620184|620030|620050|620143|620149|620124|620183|620094|620186|620148|620185)\d{10}$/g,cardType:"PC"},{reg:/^(620114|620187|620046)\d{13}$/g,cardType:"PC"}]},{bankName:"",bankCode:"ABC",patterns:[{reg:/^(622841|622824|622826|622848|620059|621282|622828|622823|621336|621619|622821|622822|622825|622827|622845|622849|623018|623206|621671|622840|622843|622844|622846|622847|620501)\d{13}$/g,cardType:"DC"},{reg:/^(95595|95596|95597|95598|95599)\d{14}$/g,cardType:"DC"},{reg:/^(103)\d{16}$/g,cardType:"DC"},{reg:/^(403361|404117|404118|404119|404120|404121|463758|519412|519413|520082|520083|552599|558730|514027|622836|622837|628268|625996|625998|625997|622838|625336|625826|625827|544243|548478|628269)\d{10}$/g,cardType:"CC"},{reg:/^(622820|622830)\d{10}$/g,cardType:"SCC"}]},{bankName:"",bankCode:"BOC",patterns:[{reg:/^(621660|621661|621662|621663|621665|621667|621668|621669|621666|456351|601382|621256|621212|621283|620061|621725|621330|621331|621332|621333|621297|621568|621569|621672|623208|621620|621756|621757|621758|621759|621785|621786|621787|621788|621789|621790|622273|622274|622771|622772|622770|621741|621041)\d{13}$/g,cardType:"DC"},{reg:/^(621293|621294|621342|621343|621364|621394|621648|621248|621215|621249|621231|621638|621334|621395|623040|622348)\d{10}$/g,cardType:"DC"},{reg:/^(625908|625910|625909|356833|356835|409665|409666|409668|409669|409670|409671|409672|512315|512316|512411|512412|514957|409667|438088|552742|553131|514958|622760|628388|518377|622788|628313|628312|622750|622751|625145|622479|622480|622789|625140|622346|622347)\d{10}$/g,cardType:"CC"},{reg:/^(518378|518379|518474|518475|518476|524865|525745|525746|547766|558868|622752|622753|622755|524864|622757|622758|622759|622761|622762|622763|622756|622754|622764|622765|558869|625905|625906|625907|625333)\d{10}$/g,cardType:"SCC"},{reg:/^(53591|49102|377677)\d{11}$/g,cardType:"SCC"},{reg:/^(620514|620025|620026|620210|620211|620019|620035|620202|620203|620048|620515|920000)\d{10}$/g,cardType:"PC"},{reg:/^(620040|620531|620513|921000|620038)\d{13}$/g,cardType:"PC"}]},{bankName:"",bankCode:"CCB",patterns:[{reg:/^(621284|436742|589970|620060|621081|621467|621598|621621|621700|622280|622700|623211|623668)\d{13}$/g,cardType:"DC"},{reg:/^(421349|434061|434062|524094|526410|552245|621080|621082|621466|621488|621499|622966|622988|622382|621487|621083|621084|620107)\d{10}$/g,cardType:"DC"},{reg:/^(436742193|622280193)\d{10}$/g,cardType:"DC"},{reg:/^(553242)\d{12}$/g,cardType:"CC"},{reg:/^(625362|625363|628316|628317|356896|356899|356895|436718|436738|436745|436748|489592|531693|532450|532458|544887|552801|557080|558895|559051|622166|622168|622708|625964|625965|625966|628266|628366|622381|622675|622676|622677)\d{10}$/g,cardType:"CC"},{reg:/^(5453242|5491031|5544033)\d{11}$/g,cardType:"CC"},{reg:/^(622725|622728|436728|453242|491031|544033|622707|625955|625956)\d{10}$/g,cardType:"SCC"},{reg:/^(53242|53243)\d{11}$/g,cardType:"SCC"}]},{bankName:"",bankCode:"COMM",patterns:[{reg:/^(622261|622260|622262|621002|621069|621436|621335)\d{13}$/g,cardType:"DC"},{reg:/^(620013)\d{10}$/g,cardType:"DC"},{reg:/^(405512|601428|405512|601428|622258|622259|405512|601428)\d{11}$/g,cardType:"DC"},{reg:/^(49104|53783)\d{11}$/g,cardType:"CC"},{reg:/^(434910|458123|458124|520169|522964|552853|622250|622251|521899|622253|622656|628216|622252|955590|955591|955592|955593|628218|625028|625029)\d{10}$/g,cardType:"CC"},{reg:/^(622254|622255|622256|622257|622284)\d{10}$/g,cardType:"SCC"},{reg:/^(620021|620521)\d{13}$/g,cardType:"PC"}]},{bankName:"",bankCode:"CMB",patterns:[{reg:/^(402658|410062|468203|512425|524011|622580|622588|622598|622609|95555|621286|621483|621485|621486|621299)\d{10}$/g,cardType:"DC"},{reg:/^(690755)\d{9}$/g,cardType:"DC"},{reg:/^(690755)\d{12}$/g,cardType:"DC"},{reg:/^(356885|356886|356887|356888|356890|439188|439227|479228|479229|521302|356889|545620|545621|545947|545948|552534|552587|622575|622576|622577|622578|622579|545619|622581|622582|545623|628290|439225|518710|518718|628362|439226|628262|625802|625803)\d{10}$/g,cardType:"CC"},{reg:/^(370285|370286|370287|370289)\d{9}$/g,cardType:"CC"},{reg:/^(620520)\d{13}$/g,cardType:"PC"}]},{bankName:"",bankCode:"CMBC",patterns:[{reg:/^(622615|622616|622618|622622|622617|622619|415599|421393|421865|427570|427571|472067|472068|622620)\d{10}$/g,cardType:"DC"},{reg:/^(545392|545393|545431|545447|356859|356857|407405|421869|421870|421871|512466|356856|528948|552288|622600|622601|622602|517636|622621|628258|556610|622603|464580|464581|523952|545217|553161|356858|622623|625912|625913|625911)\d{10}$/g,cardType:"CC"},{reg:/^(377155|377152|377153|377158)\d{9}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CEB",patterns:[{reg:/^(303)\d{13}$/g,cardType:"DC"},{reg:/^(90030)\d{11}$/g,cardType:"DC"},{reg:/^(620535)\d{13}$/g,cardType:"DC"},{reg:/^(620085|622660|622662|622663|622664|622665|622666|622667|622669|622670|622671|622672|622668|622661|622674|622673|620518|621489|621492)\d{10}$/g,cardType:"DC"},{reg:/^(356837|356838|486497|622657|622685|622659|622687|625978|625980|625981|625979|356839|356840|406252|406254|425862|481699|524090|543159|622161|622570|622650|622655|622658|625975|625977|628201|628202|625339|625976)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CITIC",patterns:[{reg:/^(433670|433680|442729|442730|620082|622690|622691|622692|622696|622698|622998|622999|433671|968807|968808|968809|621771|621767|621768|621770|621772|621773|622453|622456)\d{10}$/g,cardType:"DC"},{reg:/^(622459)\d{11}$/g,cardType:"DC"},{reg:/^(376968|376969|376966)\d{9}$/g,cardType:"CC"},{reg:/^(400360|403391|403392|404158|404159|404171|404172|404173|404174|404157|433667|433668|433669|514906|403393|520108|433666|558916|622678|622679|622680|622688|622689|628206|556617|628209|518212|628208|356390|356391|356392|622916|622918|622919)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HXBANK",patterns:[{reg:/^(622630|622631|622632|622633|999999|621222|623020|623021|623022|623023)\d{10}$/g,cardType:"DC"},{reg:/^(523959|528709|539867|539868|622637|622638|628318|528708|622636|625967|625968|625969)\d{10}$/g,cardType:"CC"}]},{bankName:"/",bankCode:"SPABANK",patterns:[{reg:/^(621626|623058)\d{13}$/g,cardType:"DC"},{reg:/^(602907|622986|622989|622298|627069|627068|627066|627067|412963|415752|415753|622535|622536|622538|622539|998800|412962|622983)\d{10}$/g,cardType:"DC"},{reg:/^(531659|622157|528020|622155|622156|526855|356869|356868|625360|625361|628296|435744|435745|483536|622525|622526|998801|998802)\d{10}$/g,cardType:"CC"},{reg:/^(620010)\d{10}$/g,cardType:"PC"}]},{bankName:"",bankCode:"CIB",patterns:[{reg:/^(438589)\d{12}$/g,cardType:"DC"},{reg:/^(90592)\d{11}$/g,cardType:"DC"},{reg:/^(966666|622909|438588|622908)\d{12}$/g,cardType:"DC"},{reg:/^(461982|486493|486494|486861|523036|451289|527414|528057|622901|622902|622922|628212|451290|524070|625084|625085|625086|625087|548738|549633|552398|625082|625083|625960|625961|625962|625963)\d{10}$/g,cardType:"CC"},{reg:/^(620010)\d{10}$/g,cardType:"PC"}]},{bankName:"",bankCode:"SHBANK",patterns:[{reg:/^(621050|622172|622985|622987|620522|622267|622278|622279|622468|622892|940021)\d{12}$/g,cardType:"DC"},{reg:/^(438600)\d{10}$/g,cardType:"DC"},{reg:/^(356827|356828|356830|402673|402674|486466|519498|520131|524031|548838|622148|622149|622268|356829|622300|628230|622269|625099|625953)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SPDB",patterns:[{reg:/^(622516|622517|622518|622521|622522|622523|984301|984303|621352|621793|621795|621796|621351|621390|621792|621791)\d{10}$/g,cardType:"DC"},{reg:/^(84301|84336|84373|84385|84390|87000|87010|87030|87040|84380|84361|87050|84342)\d{11}$/g,cardType:"DC"},{reg:/^(356851|356852|404738|404739|456418|498451|515672|356850|517650|525998|622177|622277|628222|622500|628221|622176|622276|622228|625957|625958|625993|625831)\d{10}$/g,cardType:"CC"},{reg:/^(622520|622519)\d{10}$/g,cardType:"SCC"},{reg:/^(620530)\d{13}$/g,cardType:"PC"}]},{bankName:"",bankCode:"GDB",patterns:[{reg:/^(622516|622517|622518|622521|622522|622523|984301|984303|621352|621793|621795|621796|621351|621390|621792|621791)\d{10}$/g,cardType:"DC"},{reg:/^(622568|6858001|6858009|621462)\d{13}$/g,cardType:"DC"},{reg:/^(9111)\d{15}$/g,cardType:"DC"},{reg:/^(406365|406366|428911|436768|436769|436770|487013|491032|491033|491034|491035|491036|491037|491038|436771|518364|520152|520382|541709|541710|548844|552794|493427|622555|622556|622557|622558|622559|622560|528931|558894|625072|625071|628260|628259|625805|625806|625807|625808|625809|625810)\d{10}$/g,cardType:"CC"},{reg:/^(685800|6858000)\d{13}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BOHAIB",patterns:[{reg:/^(621268|622684|622884|621453)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"GCB",patterns:[{reg:/^(603445|622467|940016|621463)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"JHBANK",patterns:[{reg:/^(622449|940051)\d{10}$/g,cardType:"DC"},{reg:/^(622450|628204)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"WZCB",patterns:[{reg:/^(621977)\d{10}$/g,cardType:"DC"},{reg:/^(622868|622899|628255)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HSBANK",patterns:[{reg:/^(622877|622879|621775|623203)\d{13}$/g,cardType:"DC"},{reg:/^(603601|622137|622327|622340|622366)\d{11}$/g,cardType:"DC"},{reg:/^(628251|622651|625828)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"JSBANK",patterns:[{reg:/^(621076|622173|622131|621579|622876)\d{13}$/g,cardType:"DC"},{reg:/^(504923|622422|622447|940076)\d{10}$/g,cardType:"DC"},{reg:/^(628210|622283|625902)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"NJCB",patterns:[{reg:/^(621777|622305|621259)\d{10}$/g,cardType:"DC"},{reg:/^(622303|628242|622595|622596)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"NBBANK",patterns:[{reg:/^(621279|622281|622316|940022)\d{10}$/g,cardType:"DC"},{reg:/^(621418)\d{13}$/g,cardType:"DC"},{reg:/^(625903|622778|628207|512431|520194|622282|622318)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BJBANK",patterns:[{reg:/^(623111|421317|422161|602969|422160|621030|621420|621468)\d{10}$/g,cardType:"DC"},{reg:/^(522001|622163|622853|628203|622851|622852)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BJRCB",patterns:[{reg:/^(620088|621068|622138|621066|621560)\d{13}$/g,cardType:"DC"},{reg:/^(625526|625186|628336)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HSBC",patterns:[{reg:/^(622946)\d{10}$/g,cardType:"DC"},{reg:/^(622406|621442)\d{11}$/g,cardType:"DC"},{reg:/^(622407|621443)\d{13}$/g,cardType:"DC"},{reg:/^(622360|622361|625034|625096|625098)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SCB",patterns:[{reg:/^(622948|621740|622942|622994)\d{10}$/g,cardType:"DC"},{reg:/^(622482|622483|622484)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CITI",patterns:[{reg:/^(621062|621063)\d{10}$/g,cardType:"DC"},{reg:/^(625076|625077|625074|625075|622371|625091)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HKBEA",patterns:[{reg:/^(622933|622938|623031|622943|621411)\d{13}$/g,cardType:"DC"},{reg:/^(622372|622471|622472|622265|622266|625972|625973)\d{10}$/g,cardType:"CC"},{reg:/^(622365)\d{11}$/g,cardType:"CC"}]},{bankName:"",bankCode:"GHB",patterns:[{reg:/^(621469|621625)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"SRCB",patterns:[{reg:/^(622128|622129|623035)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"GZRCU",patterns:[{reg:/^(909810|940035|621522|622439)\d{12}$/g,cardType:"DC"}]},{bankName:"",bankCode:"DRCBCL",patterns:[{reg:/^(622328|940062|623038)\d{13}$/g,cardType:"DC"},{reg:/^(625288|625888)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BOD",patterns:[{reg:/^(622333|940050)\d{10}$/g,cardType:"DC"},{reg:/^(621439|623010)\d{13}$/g,cardType:"DC"},{reg:/^(622888)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"GDRCC",patterns:[{reg:/^(622302)\d{10}$/g,cardType:"DC"},{reg:/^(622477|622509|622510|622362|621018|621518)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"DSB",patterns:[{reg:/^(622297|621277)\d{10}$/g,cardType:"DC"},{reg:/^(622375|622489)\d{11}$/g,cardType:"DC"},{reg:/^(622293|622295|622296|622373|622451|622294|625940)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"WHB",patterns:[{reg:/^(622871|622958|622963|622957|622861|622932|622862|621298)\d{10}$/g,cardType:"DC"},{reg:/^(622798|625010|622775|622785)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"DBS",patterns:[{reg:/^(621016|621015)\d{13}$/g,cardType:"DC"},{reg:/^(622487|622490|622491|622492)\d{10}$/g,cardType:"DC"},{reg:/^(622487|622490|622491|622492|621744|621745|621746|621747)\d{11}$/g,cardType:"DC"}]},{bankName:"",bankCode:"EGBANK",patterns:[{reg:/^(623078)\d{13}$/g,cardType:"DC"},{reg:/^(622384|940034)\d{11}$/g,cardType:"DC"}]},{bankName:"",bankCode:"TCCB",patterns:[{reg:/^(940015|622331)\d{12}$/g,cardType:"DC"},{reg:/^(6091201)\d{11}$/g,cardType:"DC"},{reg:/^(622426|628205)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BDCBANK",patterns:[{reg:/^(621091)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"CZBANK",patterns:[{reg:/^(621019|622309|621019)\d{13}$/g,cardType:"DC"},{reg:/^(6223091100|6223092900|6223093310|6223093320|6223093330|6223093370|6223093380|6223096510|6223097910)\d{9}$/g,cardType:"DC"}]},{bankName:"",bankCode:"NCB",patterns:[{reg:/^(621213|621289|621290|621291|621292|621042|621743)\d{13}$/g,cardType:"DC"},{reg:/^(623041|622351)\d{10}$/g,cardType:"DC"},{reg:/^(625046|625044|625058|622349|622350)\d{10}$/g,cardType:"CC"},{reg:/^(620208|620209|625093|625095)\d{10}$/g,cardType:"PC"}]},{bankName:"",bankCode:"XMBANK",patterns:[{reg:/^(622393|940023)\d{10}$/g,cardType:"DC"},{reg:/^(6886592)\d{11}$/g,cardType:"DC"},{reg:/^(623019|621600|)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"FJHXBC",patterns:[{reg:/^(622388)\d{10}$/g,cardType:"DC"},{reg:/^(621267|623063)\d{12}$/g,cardType:"DC"},{reg:/^(620043|)\d{12}$/g,cardType:"PC"}]},{bankName:"",bankCode:"JLBANK",patterns:[{reg:/^(622865|623131)\d{13}$/g,cardType:"DC"},{reg:/^(940012)\d{10}$/g,cardType:"DC"},{reg:/^(622178|622179|628358)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HKB",patterns:[{reg:/^(990027)\d{12}$/g,cardType:"DC"},{reg:/^(622325|623105|623029)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"SJBANK",patterns:[{reg:/^(566666)\d{12}$/g,cardType:"DC"},{reg:/^(622455|940039)\d{13}$/g,cardType:"DC"},{reg:/^(623108|623081)\d{10}$/g,cardType:"DC"},{reg:/^(622466|628285)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"DLB",patterns:[{reg:/^(603708)\d{11}$/g,cardType:"DC"},{reg:/^(622993|623069|623070|623172|623173)\d{13}$/g,cardType:"DC"},{reg:/^(622383|622385|628299)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BHB",patterns:[{reg:/^(622498|622499|623000|940046)\d{13}$/g,cardType:"DC"},{reg:/^(622921|628321)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"URMQCCB",patterns:[{reg:/^(621751|622143|940001|621754)\d{13}$/g,cardType:"DC"},{reg:/^(622476|628278)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SXCB",patterns:[{reg:/^(622486)\d{10}$/g,cardType:"DC"},{reg:/^(603602|623026|623086)\d{12}$/g,cardType:"DC"},{reg:/^(628291)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CDCB",patterns:[{reg:/^(622152|622154|622996|622997|940027|622153|622135|621482|621532)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"FSCB",patterns:[{reg:/^(622442)\d{11}$/g,cardType:"DC"},{reg:/^(940053)\d{12}$/g,cardType:"DC"},{reg:/^(622442|623099)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"ZZBANK",patterns:[{reg:/^(622421)\d{13}$/g,cardType:"DC"},{reg:/^(940056)\d{11}$/g,cardType:"DC"},{reg:/^(96828)\d{11}$/g,cardType:"DC"}]},{bankName:"",bankCode:"NXBANK",patterns:[{reg:/^(621529|622429|621417|623089|623200)\d{13}$/g,cardType:"DC"},{reg:/^(628214|625529|622428)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CQBANK",patterns:[{reg:/^(9896)\d{12}$/g,cardType:"DC"},{reg:/^(622134|940018|623016)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"HRBANK",patterns:[{reg:/^(621577|622425)\d{13}$/g,cardType:"DC"},{reg:/^(940049)\d{12}$/g,cardType:"DC"},{reg:/^(622425)\d{11}$/g,cardType:"DC"}]},{bankName:"",bankCode:"LZYH",patterns:[{reg:/^(622139|940040|628263)\d{10}$/g,cardType:"DC"},{reg:/^(621242|621538|621496)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"QDCCB",patterns:[{reg:/^(621252|622146|940061|628239)\d{10}$/g,cardType:"DC"},{reg:/^(621419|623170)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"QHDCCB",patterns:[{reg:/^(62249802|94004602)\d{11}$/g,cardType:"DC"},{reg:/^(621237|623003)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"BOQH",patterns:[{reg:/^(622310|940068)\d{11}$/g,cardType:"DC"},{reg:/^(622817|628287|625959)\d{10}$/g,cardType:"CC"},{reg:/^(62536601)\d{8}$/g,cardType:"CC"}]},{bankName:"",bankCode:"TZCB",patterns:[{reg:/^(622427)\d{10}$/g,cardType:"DC"},{reg:/^(940069)\d{11}$/g,cardType:"DC"},{reg:/^(623039)\d{13}$/g,cardType:"DC"},{reg:/^(622321|628273)\d{10}$/g,cardType:"CC"},{reg:/^(625001)\d{10}$/g,cardType:"SCC"}]},{bankName:"",bankCode:"CSCB",patterns:[{reg:/^(694301)\d{12}$/g,cardType:"DC"},{reg:/^(940071|622368|621446)\d{13}$/g,cardType:"DC"},{reg:/^(625901|622898|622900|628281|628282|622806|628283)\d{10}$/g,cardType:"CC"},{reg:/^(620519)\d{13}$/g,cardType:"PC"}]},{bankName:"",bankCode:"BOQZ",patterns:[{reg:/^(683970|940074)\d{12}$/g,cardType:"DC"},{reg:/^(622370)\d{13}$/g,cardType:"DC"},{reg:/^(621437)\d{13}$/g,cardType:"DC"},{reg:/^(628319)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BSB",patterns:[{reg:/^(622336|621760)\d{11}$/g,cardType:"DC"},{reg:/^(622165)\d{10}$/g,cardType:"DC"},{reg:/^(622315|625950|628295)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"DAQINGB",patterns:[{reg:/^(621037|621097|621588|622977)\d{13}$/g,cardType:"DC"},{reg:/^(62321601)\d{11}$/g,cardType:"DC"},{reg:/^(622860)\d{10}$/g,cardType:"DC"},{reg:/^(622644|628333)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SHRCB",patterns:[{reg:/^(622478|940013|621495)\d{10}$/g,cardType:"DC"},{reg:/^(625500)\d{10}$/g,cardType:"SCC"},{reg:/^(622611|622722|628211|625989)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"ZJQL",patterns:[{reg:/^(622717)\d{10}$/g,cardType:"SCC"},{reg:/^(628275|622565|622287)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"H3CB",patterns:[{reg:/^(622147|621633)\d{13}$/g,cardType:"DC"},{reg:/^(628252)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BGB",patterns:[{reg:/^(623001)\d{10}$/g,cardType:"DC"},{reg:/^(628227)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"GLBANK",patterns:[{reg:/^(621456)\d{11}$/g,cardType:"DC"},{reg:/^(621562)\d{13}$/g,cardType:"DC"},{reg:/^(628219)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"DAQINGB",patterns:[{reg:/^(621037|621097|621588|622977)\d{13}$/g,cardType:"DC"},{reg:/^(62321601)\d{11}$/g,cardType:"DC"},{reg:/^(622475|622860)\d{10}$/g,cardType:"DC"},{reg:/^(625588)\d{10}$/g,cardType:"SCC"},{reg:/^(622270|628368|625090|622644|628333)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CDRCB",patterns:[{reg:/^(623088)\d{13}$/g,cardType:"DC"},{reg:/^(622829|628301|622808|628308)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"FJNX",patterns:[{reg:/^(622127|622184|621701|621251|621589|623036)\d{13}$/g,cardType:"DC"},{reg:/^(628232|622802|622290)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"TRCB",patterns:[{reg:/^(622531|622329)\d{13}$/g,cardType:"DC"},{reg:/^(622829|628301)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"JSRCU",patterns:[{reg:/^(621578|623066|622452|622324)\d{13}$/g,cardType:"DC"},{reg:/^(622815|622816|628226)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SLH",patterns:[{reg:/^(622906|628386|625519|625506)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"JXNCX",patterns:[{reg:/^(621592)\d{10}$/g,cardType:"DC"},{reg:/^(628392)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SCBBANK",patterns:[{reg:/^(621748)\d{13}$/g,cardType:"DC"},{reg:/^(628271)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HRXJB",patterns:[{reg:/^(621366|621388)\d{13}$/g,cardType:"DC"},{reg:/^(628328)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HSBK",patterns:[{reg:/^(621239|623068)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"CQNCSYCZ",patterns:[{reg:/^(621653004)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"HNRCC",patterns:[{reg:/^(622169|621519|621539|623090)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"XTB",patterns:[{reg:/^(621238|620528)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"LPRDNCXYS",patterns:[{reg:/^(628382|625158)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"DYCCB",patterns:[{reg:/^(621004)\d{12}$/g,cardType:"DC"},{reg:/^(628217)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"SRBANK",patterns:[{reg:/^(621416)\d{10}$/g,cardType:"DC"},{reg:/^(628217)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"DZBANK",patterns:[{reg:/^(622937)\d{13}$/g,cardType:"DC"},{reg:/^(628397)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CDB",patterns:[{reg:/^(628229)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"YNRCC",patterns:[{reg:/^(622469|628307)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"LZCCB",patterns:[{reg:/^(622292|622291|621412)\d{12}$/g,cardType:"DC"},{reg:/^(622880|622881)\d{10}$/g,cardType:"DC"},{reg:/^(62829)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"WHSYBANK",patterns:[{reg:/^(623102)\d{10}$/g,cardType:"DC"},{reg:/^(628234)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HZBANK",patterns:[{reg:/^(628306)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BANKWF",patterns:[{reg:/^(622391|940072)\d{10}$/g,cardType:"DC"},{reg:/^(628391)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"GZB",patterns:[{reg:/^(622967|940073)\d{13}$/g,cardType:"DC"},{reg:/^(628233)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"RZGWYBANK",patterns:[{reg:/^(628257)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"NCB",patterns:[{reg:/^(621269|622275)\d{10}$/g,cardType:"DC"},{reg:/^(940006)\d{11}$/g,cardType:"DC"},{reg:/^(628305)\d{11}$/g,cardType:"CC"}]},{bankName:"",bankCode:"GYCB",patterns:[{reg:/^(622133|621735)\d{13}$/g,cardType:"DC"},{reg:/^(888)\d{13}$/g,cardType:"DC"},{reg:/^(628213)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"BOJZ",patterns:[{reg:/^(622990|940003)\d{11}$/g,cardType:"DC"},{reg:/^(628261)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"QSBANK",patterns:[{reg:/^(622311|940057)\d{11}$/g,cardType:"DC"},{reg:/^(628311)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"RBOZ",patterns:[{reg:/^(622363|940048)\d{13}$/g,cardType:"DC"},{reg:/^(628270)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HLDCCB",patterns:[{reg:/^(622398|940054)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"HBC",patterns:[{reg:/^(940055)\d{11}$/g,cardType:"DC"},{reg:/^(622397)\d{11}$/g,cardType:"CC"}]},{bankName:"",bankCode:"HZCB",patterns:[{reg:/^(603367|622878|623061)\d{12}$/g,cardType:"DC"},{reg:/^(622397|622286|628236|625800)\d{11}$/g,cardType:"CC"}]},{bankName:"",bankCode:"JSBANK",patterns:[{reg:/^(603506)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"LYCB",patterns:[{reg:/^(622399|940043)\d{11}$/g,cardType:"DC"}]},{bankName:"",bankCode:"LYB",patterns:[{reg:/^(622420|940041)\d{11}$/g,cardType:"DC"}]},{bankName:"",bankCode:"JZCBANK",patterns:[{reg:/^(622338)\d{13}$/g,cardType:"DC"},{reg:/^(940032)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"ZJCCB",patterns:[{reg:/^(622394|940025)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"FGXYBANK",patterns:[{reg:/^(621245)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"DYBANK",patterns:[{reg:/^(621328)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"DIYEBANK",patterns:[{reg:/^(621651)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"HQBANK",patterns:[{reg:/^(621077)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"HSB",patterns:[{reg:/^(622409|621441)\d{13}$/g,cardType:"DC"},{reg:/^(622410|621440)\d{11}$/g,cardType:"DC"},{reg:/^(622950|622951)\d{10}$/g,cardType:"DC"},{reg:/^(625026|625024|622376|622378|622377|625092)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"LSB",patterns:[{reg:/^(622359|940066)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"YTCB",patterns:[{reg:/^(622886)\d{10}$/g,cardType:"DC"}]},{bankName:"",bankCode:"QLB",patterns:[{reg:/^(940008|622379)\d{13}$/g,cardType:"DC"},{reg:/^(628379)\d{10}$/g,cardType:"CC"}]},{bankName:"BC",bankCode:"BCCC",patterns:[{reg:/^(620011|620027|620031|620039|620103|620106|620120|620123|620125|620220|620278|620812|621006|621011|621012|621020|621023|621025|621027|621031|620132|621039|621078|621220|621003)\d{10}$/g,cardType:"DC"},{reg:/^(625003|625011|625012|625020|625023|625025|625027|625031|621032|625039|625078|625079|625103|625106|625006|625112|625120|625123|625125|625127|625131|625032|625139|625178|625179|625220|625320|625111|625132|625244)\d{10}$/g,cardType:"CC"}]},{bankName:"",bankCode:"CYB",patterns:[{reg:/^(622355|623042)\d{10}$/g,cardType:"DC"},{reg:/^(621043|621742)\d{13}$/g,cardType:"DC"},{reg:/^(622352|622353|625048|625053|625060)\d{10}$/g,cardType:"CC"},{reg:/^(620206|620207)\d{10}$/g,cardType:"PC"}]},{bankName:"",bankCode:"TFB",patterns:[{reg:/^(622547|622548|622546)\d{13}$/g,cardType:"DC"},{reg:/^(625198|625196|625147)\d{10}$/g,cardType:"CC"},{reg:/^(620072)\d{13}$/g,cardType:"PC"},{reg:/^(620204|620205)\d{10}$/g,cardType:"PC"}]},{bankName:"AEON",bankCode:"AEON",patterns:[{reg:/^(621064|622941|622974)\d{10}$/g,cardType:"DC"},{reg:/^(622493)\d{10}$/g,cardType:"CC"}]},{bankName:"BDA",bankCode:"MABDA",patterns:[{reg:/^(621274|621324)\d{13}$/g,cardType:"DC"}]},{bankName:"",bankCode:"ZJTLCB",patterns:[{reg:/^(622287)\d{10}$/g,cardType:"CC"},{reg:/^(622717)\d{10}$/g,cardType:"SCC"},{reg:/^(621480)\d{13}$/g,cardType:"DC"},{reg:/^(622141)\d{10}$/g,cardType:"DC"}]}],t
}();__reflect(Bank.prototype,"Bank");var EventEnum=function(){function t(){}return t.LOAD_COMPLETE_AND_TRY_JOIN_GAME_G_to_P="LOAD_COMPLETE_AND_TRY_JOIN_GAME_G_to_P",t.TRY_JOIN_GAME_FAILED_G_to_P="TRY_JOIN_GAME_FAILED_G_to_P",t.CLOSE_GAME_INIT_LOADING_G_to_P="CLOSE_GAME_INIT_LOADING_G_to_P",t.EXIT_GAME_G_to_P="EXIT_GAME_G_to_P",t.RUN_MODE_CHANGE_P_to_G="RUN_MODE_CHANGE_P_to_G",t.CHANGE_HALL_G_to_P="CHANGE_HALL_G_to_P",t.SHOW_GAME_RULE_G_to_P="SHOW_GAME_RULE_G_to_P",t.SHOW_BANK_G_to_P="SHOW_BANK_G_to_P",t.SHOW_SHOP_G_to_P="SHOW_SHOP_G_to_P",t.BUY_ITEM_G_to_P="BUY_ITEM_G_to_P",t.ENTER_GAME_G_to_P="ENTER_GAME_G_to_P",t.SOME_ONE_PLAY_VOICE_P_to_G="SOME_ONE_PLAY_VOICE_P_to_G",t.SOME_ONE_PLAY_VOICE_OK_P_to_G="SOME_ONE_PLAY_VOICE_OK_P_to_G",t.TRY_INVITE_CLUB_PLAYER_G_to_P="TRY_INVITE_CLUB_PLAYER_G_to_P",t.ACCOUNT_BEEN_KICKED="ACCOUNT_BEEN_KICKED",t.SERVER_ERROR_MESSAGE="SERVER_ERROR_MESSAGE",t.SWITCH_TABLE_P_to_G="SWITCH_TABLE_P_to_G",t.PHONE_POWER_CHANGED="PHONE_POWER_CHANGED",t.PHONE_SIGNAL_CHANGED="PHONE_SIGNAL_CHANGED",t.E_MODULE_ALL_LOAD_PROGRESS="E_MODULE_ALL_LOAD_PROGRESS",t.RES_LOAD_FAILED="RES_LOAD_FAILED",t.GAME_PACKAGE_DOWNLOAD_INFO="GAME_PACKAGE_DOWNLOAD_INFO",t.INPUT_ON_FOCUS="INPUT_ON_FOCUS",t.INPUT_ON_BLUR="INPUT_ON_BLUR",t}();__reflect(EventEnum.prototype,"EventEnum");var GameIdEnum=function(){function t(){}return t.getModuleType=function(t){var e=this.dic[t];return e?e[2]:i18n("")},t.getPlayerCountMax=function(t){var e=this.dic[t];return e?e[3]:-1},t.hasGame=function(t){return null!=this.dic[t]},t.toString=function(t){var e=this.dic[t];return i18n(e?e[1]:"")},t.HALL="HALL",t.XLCH="XLCH",t.XZDD="XZDD",t.HZG="HZG",t.ERMJ="ERMJ",t.KWX="KWX",t.P10="P10",t.P3="P3",t.TTZ="TTZ",t.LHD="LHD",t.LHH="LHH",t.BZW="BZW",t.DDZ="DDZ",t.SGJ="SGJ",t.BJL="BJL",t.HDW="HDW",t.HBSL="HBSL",t.SHZ="SHZ",t.BRNN="BRNN",t.BRSB="BRSB",t.QZNN="QZNN",t.TEENPATTI="TEENPATTI",t.ZJH="ZJH",t.DZPK="DZPK",t.ESYD="ESYD",t.PDK="PDK",t.SSS="SSS",t.CAIP="CAIP",t.TXFFC="TXFFC",t.BY3D="BY3D",t.EBG="EBG",t.SG="SG",t.PGP="PGP",t.CDD="CDD",t.BY2D="BY2D",t.Q9="Q9",t.SGJ_GINAR="SGJ_GINAR",t.BRNN_GINAR="BRNN_GINAR",t.NO_MORE="NO_MORE",t.dic={HZG:[0,"",ModuleType.MODULE_MAHJONG,4],KWX:[0,"",ModuleType.MODULE_MAHJONG,5],P10:[0,"",ModuleType.MODULE_POKER,5],P3:[0,"",ModuleType.MODULE_POKER,5],TTZ:[0,"",ModuleType.MODULE_HUNDRED,999],LHD:[0,"",ModuleType.MODULE_HUNDRED,999],BZW:[0,"",ModuleType.MODULE_HUNDRED,999],HDW:[0,"",ModuleType.MODULE_ARCADE,999],HALL:[1,""],XLCH:[0,"",ModuleType.MODULE_MAHJONG,4],XZDD:[0,"",ModuleType.MODULE_MAHJONG,4],LHH:[0,"",ModuleType.MODULE_HUNDRED,999],DDZ:[0,"",ModuleType.MODULE_POKER,3],SGJ:[0,"",ModuleType.MODULE_ARCADE,999],BJL:[0,"",ModuleType.MODULE_HUNDRED,999],HBSL:[0,"",ModuleType.MODULE_ARCADE,999],SHZ:[0,"",ModuleType.MODULE_ARCADE,999],BRNN:[0,"",ModuleType.MODULE_HUNDRED,999],BRSB:[0,"",ModuleType.MODULE_HUNDRED,999],QZNN:[0,"",ModuleType.MODULE_POKER,5],ZJH:[0,"",ModuleType.MODULE_POKER,5],DZPK:[0,"",ModuleType.MODULE_POKER,9],ESYD:[0,"21",ModuleType.MODULE_POKER,5],PDK:[0,"",ModuleType.MODULE_POKER,3],ERMJ:[0,"",ModuleType.MODULE_MAHJONG,2],SSS:[0,"",ModuleType.MODULE_POKER,4],CAIP:[0,"",ModuleType.MODULE_POKER,999],TXFFC:[0,"",ModuleType.MODULE_POKER,999],BY3D:[0,"3D",ModuleType.MODULE_ARCADE,999],EBG:[0,"",ModuleType.MODULE_MAHJONG,4],SG:[0,"",ModuleType.MODULE_POKER,5],PGP:[0,"",ModuleType.MODULE_MAHJONG,4],CDD:[0,"",ModuleType.MODULE_POKER,4],BY2D:[0,"2D",ModuleType.MODULE_POKER,999],Q9:[0,"",ModuleType.MODULE_MAHJONG,5],SGJ_GINAR:[0,"",ModuleType.MODULE_ARCADE,999],BRNN_GINAR:[0,"",ModuleType.MODULE_HUNDRED,999],NO_MORE:[0,"","",0]},t}();__reflect(GameIdEnum.prototype,"GameIdEnum");var HallEvent=function(){function t(){}return t.NOTICE_UPDATE="HallEvent_NOTICE_UPDATE",t}();__reflect(HallEvent.prototype,"HallEvent");var Merchants=function(){function t(){}return t.TW="TW",t}();__reflect(Merchants.prototype,"Merchants");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(e,n,i,r){function o(t){n.call(r,t)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(r))}var s=this;return t.isDebug?(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),void RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)):void("undefined"!=typeof generateEUI?egret.callLater(function(){n.call(r,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,e){window.JSONParseClass.setData(t),o(t),egret.callLater(function(){n.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)))},t.isDebug=!1,t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ServerErrorCode=function(){function t(){}return t.ERROR_STATE_DUPLICATE_LOGIN=1,t.ERROR_STATE_GAME_MODULE_NOT_READY=999,t.ERROR_DISCONNECTED_TOAST=998,t.ERROR_KICK_ASS_TOAST=997,t}();__reflect(ServerErrorCode.prototype,"ServerErrorCode");var SGJConfig=function(){function t(){}return t.getChanceRange=function(t){if(!this.changceRange){this.changceRange=[];for(var e=1,n=0;24>n;n++)this.changceRange[n]=[e,e+this.chanceConfig[n]-1],e+=this.chanceConfig[n]}return this.changceRange[t]},t.chanceConfig=[25,15,1,1,50,88,25,15,88,100,40,90,25,15,100,10,40,90,15,95,10,2,40,20],t.fruitConfig=[{pic:"sgj_room_sgys_gz_png",sum:0,pushIndex:6,sound:"juzi"},{pic:"sgj_room_sgys_ld_png",sum:0,pushIndex:4,sound:"lingdang"},{pic:"sgj_room_sgys_bar_png",sum:50,pushIndex:0,sound:"bar"},{pic:"sgj_room_sgys_bar_png",sum:0,pushIndex:0,sound:"bar"},{pic:"sgj_room_sgys_pg_png",sum:0,pushIndex:7,sound:"pingguo"},{pic:"sgj_room_sgys_pg_png",sum:2,pushIndex:7,sound:"pingguo"},{pic:"sgj_room_sgys_nm_png",sum:0,pushIndex:5,sound:"ningmeng"},{pic:"sgj_room_sgys_xg_png",sum:0,pushIndex:3,sound:"xigua"},{pic:"sgj_room_sgys_xg_png",sum:2,pushIndex:3,sound:"xiaoxigua"},{pic:"sgj_room_sgys_lkh_png",sum:0,pushIndex:-1,sound:"lucky"},{pic:"sgj_room_sgys_pg_png",sum:0,pushIndex:7,sound:"pingguo"},{pic:"sgj_room_sgys_gz_png",sum:2,pushIndex:6,sound:"xiaojuzi"},{pic:"sgj_room_sgys_gz_png",sum:0,pushIndex:6,sound:"juzi"},{pic:"sgj_room_sgys_ld_png",sum:0,pushIndex:4,sound:"lingdang"},{pic:"sgj_room_sgys_77_png",sum:2,pushIndex:1,sound:"xiao77"},{pic:"sgj_room_sgys_77_png",sum:0,pushIndex:1,sound:"77"},{pic:"sgj_room_sgys_pg_png",sum:0,pushIndex:7,sound:"pingguo"},{pic:"sgj_room_sgys_nm_png",sum:2,pushIndex:5,sound:"xiaoningmeng"},{pic:"sgj_room_sgys_nm_png",sum:0,pushIndex:5,sound:"ningmeng"},{pic:"sgj_room_sgys_xx_png",sum:2,pushIndex:2,sound:"xiaoxingxing"},{pic:"sgj_room_sgys_xx_png",sum:0,pushIndex:2,sound:"xingxing"},{pic:"sgj_room_sgys_lkl_png",sum:0,pushIndex:-1,sound:"lucky"},{pic:"sgj_room_sgys_pg_png",sum:0,pushIndex:7,sound:"pingguo"},{pic:"sgj_room_sgys_ld_png",sum:2,pushIndex:4,sound:"xiaolingdang"}],t.factorConfig=[100,20,20,20,10,10,10,5],t}();__reflect(SGJConfig.prototype,"SGJConfig");var SGJFruitConfig=function(){function t(){}return t}();__reflect(SGJFruitConfig.prototype,"SGJFruitConfig");var TopicType=function(){function t(){}return t.ERROR="ERROR",t.COMMON_TOPIC="COMMON",t.HD_LOGIC="/HD_Logic",t.FAST_JOIN="/HD_FastJoin",t.HD_Create="/HD_Create",t.HD_Join="/HD_Join",t.HD_SWITCHTABLE="/HD_SwitchTable",t.HD_Cancel="/HD_Cancel",t}();__reflect(TopicType.prototype,"TopicType");var WSConnectErrorCode=function(){function t(){}return t.isWSConnectErrorCode=function(t){return t==this.VERSION_NOT_MATCH||t==this.TOKEN_NOT_MATCH||t==this.IP_BEEN_BAN||t==this.ACCOUNT_BEEN_BAN||t==this.KICKED_BY_ADMIN},t.toString=function(t){switch(t){case this.VERSION_NOT_MATCH:return i18n("\n");case this.TOKEN_NOT_MATCH:return i18n("\n");case this.IP_BEEN_BAN:return i18n("IP\n");case this.ACCOUNT_BEEN_BAN:return i18n("\n!");case this.KICKED_BY_ADMIN:return i18n("!");default:return i18n("")}},t.KICKED_BY_ADMIN=88,t.VERSION_NOT_MATCH=98,t.TOKEN_NOT_MATCH=99,t.IP_BEEN_BAN=100,t.ACCOUNT_BEEN_BAN=101,t}();__reflect(WSConnectErrorCode.prototype,"WSConnectErrorCode");var BasicConfig=function(){function t(){}return t}();__reflect(BasicConfig.prototype,"BasicConfig");var ShareVo=function(){function t(){}return t}();__reflect(ShareVo.prototype,"ShareVo");var VoiceVo=function(){function t(){}return t.initUserInfo="initUserInfo",t.startRecord="startRecord",t.stopRecord="stopRecord",t.cancelRecord="cancelRecord",t}();__reflect(VoiceVo.prototype,"VoiceVo");var bridge_iframe;!function(t){function e(t,e){Global.platform.sendMsgToGame(t,e)}function n(t,e){Global.platform.sendMsgToHall(t,e),t==EventEnum.CLOSE_GAME_INIT_LOADING_G_to_P&&(Global.isGameInitCompleted=!0)}function i(){return Global.platform.getShareedParamFromHall()}var r=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.startLoadGame=function(t){var e=this;this.removeIframe();var n=document.createElement("iframe");document.body.appendChild(n),n.style.zIndex="-999",n.style.position="absolute",n.style.top=n.style.left="0px",n.style.padding=n.style.margin=n.style.border="0px",n.width=n.height="100%";try{n.border="none"}catch(i){}n.onload=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];try{n.contentDocument||e.iframeError()}catch(r){e.iframeError()}},n.src=t,this.iframe=n},t.prototype.iframeError=function(){Global.onEvent(EventEnum.RES_LOAD_FAILED)},t.prototype.showGame=function(){this.iframe.style.zIndex="9999",egret.ticker.pause()},t.prototype.removeIframe=function(){this.iframe&&(this.iframe.src="about:blank",document.body.removeChild(this.iframe),this.iframe.onerror=null),this.iframe=null},t.prototype.unloadGame=function(){this.removeIframe(),egret.ticker.resume()},t.prototype.sendMsgToGame=function(t,e){try{this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.Global&&this.iframe.contentWindow.Global.onEvent(t,e)}catch(n){}},t}();t.Hall=r,__reflect(r.prototype,"bridge_iframe.Hall"),t.sendMsgToGame=e,t.sendMsgToHall=n,t.getShareedParamFromHall=i}(bridge_iframe||(bridge_iframe={}));var NativePlatform=function(){function t(){var t=this;this.fullCahceJson={},egret.ExternalInterface.addCallback(JSCallEnum.shareOK,function(t){Toast.show("!")}),egret.ExternalInterface.addCallback(JSCallEnum.shareFailed,function(t){Toast.show("")}),egret.ExternalInterface.addCallback(JSCallEnum.shareCancel,function(t){trace("!")}),egret.ExternalInterface.addCallback(JSCallEnum.errMsg,function(t){Toast.show(t)}),egret.ExternalInterface.addCallback(JSCallEnum.runGame,function(t){}),egret.ExternalInterface.addCallback(JSCallEnum.noPermisionOfVoice,function(t){Toast.show("")}),egret.ExternalInterface.addCallback(JSCallEnum.voiceLessThen1S,function(t){Toast.show("")}),egret.ExternalInterface.addCallback(JSCallEnum.voiceSendOK,function(t){trace("")}),egret.ExternalInterface.addCallback(JSCallEnum.voiceSendFailed,function(t){trace("",t)}),egret.ExternalInterface.addCallback(JSCallEnum.someOnePlayVoice,function(t){var e=parseJsonSafe_XY(t);e&&Global.onEvent(EventEnum.SOME_ONE_PLAY_VOICE_P_to_G,e.uid)}),egret.ExternalInterface.addCallback(JSCallEnum.someOnePlayVoiceOK,function(t){var e=parseJsonSafe_XY(t);e&&Global.onEvent(EventEnum.SOME_ONE_PLAY_VOICE_OK_P_to_G,e.uid)}),egret.ExternalInterface.addCallback(JSCallEnum.fullCache,function(e){t.fullCahceJson=parseJsonSafe_XY(e)||{},Global.isLocalStorgeDataInited=!0,Global.onEvent("localStorgeDataInited"),SoundManager.init(),Global.initRESEvent()}),egret.ExternalInterface.addCallback(JSCallEnum.recieveGlobalEvent,function(t){var e="__$__",n=t.split(e);Global.onEvent(n[0],parseJsonSafe_XY(n[1])||n[1])}),egret.ExternalInterface.addCallback(JSCallEnum.gameDownloadProgressEvent,function(t){var e=parseJsonSafe_XY(t);e&&Global.onEvent(EventEnum.GAME_PACKAGE_DOWNLOAD_INFO,e)}),egret.ExternalInterface.addCallback(JSCallEnum.layoutWithNoKeyboard,function(t){OpenWindowInGame.hasSomeWindowOpened()&&OpenWindowInGame.setMaxHeight(1)}),egret.ExternalInterface.addCallback(JSCallEnum.layoutWithKeyboard,function(e){var n=parseJsonSafe_XY(e),i=int_XY(n.offsetY),r=int_XY(n.maxHeight);if(OpenWindowInGame.hasSomeWindowOpened())return void OpenWindowInGame.setMaxHeight((r-i)/r);var o=getEgretInputBottomPercent_XY();i=Math.max(0,i-r*o+20),setTimeout(function(){t.layoutWithKeyboard(i)},1)});var e=navigator.userAgent.toLowerCase(),n=e.indexOf("android")>-1||e.indexOf("adr")>-1;Global.isNative&&n&&(egret.HttpRequest.prototype.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var e=t.status>=400||0==t.status;0==t.status&&null!=t.response&&(e=!1);var n=this._url,i=this;window.setTimeout(function(){e?(i.hasEventListener(egret.IOErrorEvent.IO_ERROR)||egret.$error(1011,n),i.dispatchEventWith(egret.IOErrorEvent.IO_ERROR)):i.dispatchEventWith(egret.Event.COMPLETE)},0)}},trace("android egret.HttpRequest.prototype.onReadyStateChange")),trace("NativePlatform ")}return t.prototype.exitApp=function(){egret.ExternalInterface.call("exitApp","")},t.prototype.init=function(){egret.ExternalInterface.call("initApp","")},t.prototype.sendMsgToGame=function(t,e){egret.ExternalInterface.call("sendMsgToGame",t+"__$__"+JSON.stringify(e))},t.prototype.sendMsgToHall=function(t,e){egret.ExternalInterface.call("sendMsgToHall",t+"__$__"+JSON.stringify(e))},t.prototype.getShareedParamFromHall=function(){var t=egret.ExternalInterface.call("getShareedParamFromHall",""),e=new bridge_iframe.SharedParam;return e.config=parseJsonSafe_XY(t+""),e},t.prototype.getUdid=function(t){var e=Global.localStorageGetItem("udid")||egret.ExternalInterface.call("getUdid","");Global.localStorageSetItem("udid",e),t(e)},t.prototype.share=function(t){egret.ExternalInterface.call("share",JSON.stringify(t))},t.prototype.setPhoneStatusBar=function(t){egret.ExternalInterface.call("setPhoneStatusBar",t?"1":"0")},t.prototype.imVoice=function(t){egret.ExternalInterface.call("imVoice",JSON.stringify(t))},t.prototype.closePreloading=function(){egret.ExternalInterface.call("closePreloading","")},t.prototype.localStorageSetItem=function(t,e){return this.fullCahceJson[t]=e,egret.ExternalInterface.call("updateFullCache",JSON.stringify(this.fullCahceJson)),!0},t.prototype.localStorageRemoveItem=function(t){delete this.fullCahceJson[t],egret.ExternalInterface.call("updateFullCache",JSON.stringify(this.fullCahceJson))},t.prototype.localStorageGetItem=function(t){return this.fullCahceJson[t]},t.prototype.localStorageClear=function(){this.fullCahceJson={},egret.ExternalInterface.call("updateFullCache",JSON.stringify(this.fullCahceJson))},t.prototype.startLoadGame=function(t){egret.ExternalInterface.call("startLoadGame",JSON.stringify(t))},t.prototype.showGame=function(){egret.ExternalInterface.call("showGame","")},t.prototype.unloadGame=function(){egret.ExternalInterface.call("unloadGame","")},t.prototype.openWindow=function(t){egret.ExternalInterface.call("openWindow",t)},t.prototype.getPhonePower=function(){var t=egret.ExternalInterface.call("getPhonePower","");return!t||0>=t?1:t},t.prototype.getAppInfo=function(){var t=egret.ExternalInterface.call("getAppInfo","");return t},t.prototype.downloadGamePackage=function(t){egret.ExternalInterface.call("downloadGamePackage",t)},t.prototype.layoutWithKeyboard=function(t){egret.ExternalInterface.call("layoutWithKeyboard",t+"")},t.prototype.savePic=function(t){egret.ExternalInterface.call("savePic",t),Toast.show(i18n(""))},t.prototype.takePhoto=function(){egret.ExternalInterface.call("takePhoto","")},t.prototype.copyText=function(t,e,n){egret.ExternalInterface.call("copyText",t),e&&e()},t.prototype.copyAndOpenWeixin=function(t){egret.ExternalInterface.call("copyAndOpenWeixin",t)},t.prototype.copyAndOpenQQ=function(t){egret.ExternalInterface.call("copyAndOpenQQ",t)},t.prototype.copyAndOpenWhatsApp=function(t){egret.ExternalInterface.call("copyText",t)},t.prototype.setLoginSuccessUrl=function(t){egret.ExternalInterface.call("setLoginSuccessUrl",t)},t}();__reflect(NativePlatform.prototype,"NativePlatform",["IPlatform"]);var H5Platform=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(DefaultPlatform);__reflect(H5Platform.prototype,"H5Platform");var JSCallEnum=function(){function t(){}return t.shareOK="shareOK",t.shareFailed="shareFailed",t.shareCancel="shareCancel",t.errMsg="errMsg",t.runGame="runGame",t.noPermisionOfVoice="noPermisionOfVoice",t.voiceLessThen1S="voiceLessThen1S",t.voiceSendOK="voiceSendOK",t.voiceSendFailed="voiceSendFailed",t.someOnePlayVoice="someOnePlayVoice",t.someOnePlayVoiceOK="someOnePlayVoiceOK",t.fullCache="fullCache",t.recieveGlobalEvent="recieveGlobalEvent",t.gameDownloadProgressEvent="gameDownloadProgressEvent",t.layoutWithKeyboard="layoutWithKeyboard",t.layoutWithNoKeyboard="layoutWithNoKeyboard",t}();__reflect(JSCallEnum.prototype,"JSCallEnum");var XYExternalInterface=function(){function t(){}return t.call=function(t,e){return window&&window.xyNative&&window.xyNative[t]?(trace("app"+t+",:"+e),null==e||""==e?window.xyNative[t]():window.xyNative[t](e)):(warn("XYExternalInterface:appXYNativeJSInterface"+t+", "+e),"")},t.addCallback=function(e,n){t.callBackDic[e]=n},t.callBackDic={},t}();__reflect(XYExternalInterface.prototype,"XYExternalInterface");var SocketManager=function(t){function e(){var e=t.call(this)||this;return e.handlers={},e.sendDataCache={},Global.eventCenter.addEventListener(EventEnum.RUN_MODE_CHANGE_P_to_G,e.onRunModeChange,e),e}return __extends(e,t),e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.startSocket=function(t,e,n,i,r,o){if(void 0===o&&(o=60),(void 0==r||null==r)&&(r=!1),this.mqtt&&(this.mqtt.onConnectionLost=function(){},this.mqtt.onMessageArrived=function(){}),this.mqtt=new Paho.Client(t,e,(Math.random()+"").substr(0,22)),this.mqtt.onConnectionLost=this.onSocketClose.bind(this),this.mqtt.onMessageArrived=this.socketDataHandler.bind(this),this.mqtt.isConnected())trace("ws");else{var a={};a.mqttVersion=3,a.reconnect=!0,a.userName=n,a.password=i,a.gameVersion=Global.sourceVer,a.timeout=5,a.keepAliveInterval=o,a.useSSL=r,a.onSuccess=this.onSocketOpen.bind(this),a.onFailure=this.onSocketError.bind(this),this.opt=a,this.mqtt.connect(a)}},e.prototype.addHandler=function(t,e){this.handlers[t]||(this.handlers[t]=[]),-1==this.handlers[t].indexOf(e)&&this.handlers[t].push(e)},e.prototype.clearHandlers=function(t){this.handlers[t]=null},e.prototype.reconnect=function(){Global.allowReconnect=!0,this.mqtt&&!this.mqtt.isConnected()&&this.mqtt.connect(this.opt)},e.prototype.disconnect=function(){SimpleLoading.hide(),Global.allowReconnect=!1,this.mqtt&&this.mqtt.isConnected()&&this.mqtt.disconnect()},e.prototype.socketDataHandler=function(t){var e=t.destinationName,n=parseJsonSafe_XY(t.payloadString);if(!n)return void warn("json:"+t.payloadString);var i=n.c,r=n.d;if(null==i)return void error("",n);e.substr(0,ModuleType.MODULE_LOBBY.length+1)==ModuleType.MODULE_LOBBY+"/"&&(i=e.substr(ModuleType.MODULE_LOBBY.length),e=ModuleType.MODULE_LOBBY);var o=this.handlers[e];if(o)for(var a=0,s=o.length;s>a;a++){var l=o[a],h=this.sendDataCache[n.z];if(this.sendDataCache[n.z]=null,l.handle(i,r,h))break}else warn("handler"+e,n)},e.prototype.onSocketClose=function(t){this.socketConnectErrorCall&&this.socketConnectErrorCall()},e.prototype.onSocketError=function(t){this.socketConnectErrorCall&&this.socketConnectErrorCall()},e.prototype.onRunModeChange=function(){},e.prototype.onSocketOpen=function(t){trace("ws"),this.dispatchEventWith(e.E_CONNECTED_COMPLETE)},e.prototype.sendMessage=function(t,n,i,r,o){void 0===o&&(o="");var a={c:r,t:n,a:i,d:o,z:e.counter++};if(!this.mqtt.isConnected())return void warn(":",a);this.sendDataCache[a.z]=o;var s=JSON.stringify(a);trace("ws send:",s),this.mqtt.send(t,s)},e.E_CONNECTED_COMPLETE="E_CONNECTED_COMPLETE",e.counter=1,e}(egret.EventDispatcher);__reflect(SocketManager.prototype,"SocketManager");var SocketProxy=function(){function t(t){this.socketManager=t,this.replayModeHandlers=[]}return t.prototype.addHandler=function(t,e){this.isReplayMode?this.replayModeHandlers.push(e):this.socketManager.addHandler(t,e)},t.prototype.replayData=function(e){for(var n=0,i=this.replayModeHandlers.length;i>n;n++){var r=this.replayModeHandlers[n];r.handle(t.CMD_REPLAY,e,null)}},t.prototype.clearHandlers=function(t){this.isReplayMode?this.replayModeHandlers=[]:this.socketManager.clearHandlers(t)},t.prototype.sendMessage=function(t,e,n,i,r){this.isReplayMode?trace("replay "):this.socketManager.sendMessage(t,e,n,i,r)},t.CMD_REPLAY=-9999,t}();__reflect(SocketProxy.prototype,"SocketProxy");var GameBasicDataDTO=function(){function t(){}return t}();__reflect(GameBasicDataDTO.prototype,"GameBasicDataDTO");var JoinDTO=function(){function t(t,e,n,i){void 0===e&&(e=""),void 0===n&&(n=""),void 0===i&&(i=-1),this.moduleType=t,this.serverId=e,this.data=n,this.seat=i}return t}();__reflect(JoinDTO.prototype,"JoinDTO");var bridge_iframe;!function(t){var e=function(){function t(){}return t}();t.SharedParam=e,__reflect(e.prototype,"bridge_iframe.SharedParam")}(bridge_iframe||(bridge_iframe={}));var LoginDTO_S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UserDTO);__reflect(LoginDTO_S.prototype,"LoginDTO_S");var PermissionDTO=function(){function t(){}return t}();__reflect(PermissionDTO.prototype,"PermissionDTO");var ResponseDTO_S=function(){function t(){}return t}();__reflect(ResponseDTO_S.prototype,"ResponseDTO_S");var ResultDTO=function(){function t(){}return t}();__reflect(ResultDTO.prototype,"ResultDTO");var CommonProtocol=function(){function t(){}return t.SERVER_TIME=1,t.HORSE_RACE_LAMP=888,t.COMMON_COMMAND_AVATAR_UPDATE=101,t}();__reflect(CommonProtocol.prototype,"CommonProtocol");var HttpProtocol=function(){function t(){}return t.LOGIN="/game/login",t.GET_CONFIGS="/game/get/configs",t.GET_MY_INFO="/game/user/account/my",t.web_log_report="game/log/report",t.game_user_hall_get_share_config="game/user/hall/get/share/config",t.game_user_hall_3rd_get_ginar_mtxhash="game/user/hall/3rd/get/ginar/mtxhash",t}();__reflect(HttpProtocol.prototype,"HttpProtocol");var NoticeDTO=function(){function t(){}return t.toString=function(t){var e=t.data,n="";return n=1==t.type?i18n("_"+e.idx,e.nick,i18n(e.game),i18n(e.room),coin2Str_XY(e.win)):i18n("_"+e.idx,e.nick,i18n(""),"",coin2Str_XY(e.win))},t}();__reflect(NoticeDTO.prototype,"NoticeDTO");var NoticeMarqueeDTO=function(){function t(){}return t}();__reflect(NoticeMarqueeDTO.prototype,"NoticeMarqueeDTO");var SocketResultDTO=function(){function t(){}return t}();__reflect(SocketResultDTO.prototype,"SocketResultDTO");var HowlerControllerMerge=function(){function t(){}return t.prototype.init=function(t,e){var n=this;if(this.howler)return void e();var i="./resource/assets/"+Global.gameId+"/sound/output",r=Global.isNative?"":"?v="+Global.sourceVer;RES.getResByUrl(i+".json"+r,function(o,a){var s=o;if(!s||!s.spritemap)return void e();var l={};for(var h in s.spritemap){var u=s.spritemap[h];l[h+"_mp3"]=[1e3*u.start,1e3*u.end-1e3*u.start]}var c=[i+".ogg"+r,i+".mp3"+r];n.howler=new Howl({src:c,sprite:l,preload:!0,onload:function(){n.enable=!0,t()},onloaderror:e})},this,RES.ResourceItem.TYPE_JSON)},t.prototype.play=function(t,e,n,i,r){if(void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=!1),void 0===r&&(r=1),this.enable){if(!this.howler._sprite[t])return void warn("missing sound:"+t);0==n||n>=100||-1==n?this.howler._sprite[t][2]=!0:this.howler._sprite[t][2]=!1;var o=this.howler.play(t);return this.howler.volume(r,o),0!=e&&this.howler.seek(e,o),o}},t.prototype.isPlaying=function(t,e){return this.howler.playing(e)},t.prototype.setVolume=function(t,e,n,i){this.enable&&this.howler.playing(e)&&this.howler.volume(n,e)},t.prototype.stop=function(t,e){this.enable&&this.howler.stop(e)},t.prototype.unload=function(){this.enable&&(this.enable=!1,this.howler.unload())},t}();__reflect(HowlerControllerMerge.prototype,"HowlerControllerMerge",["IHowlerContoller"]);var HowlerControllerZip=function(){function t(){this.mp3Dic={},this.howlerDic={}}return t.prototype.init=function(t,e){var n=this;if(this.inited)return void error("HowlerControllerZip");this.inited=!0;var i="./resource/assets/"+Global.gameId+"/sound/output.ac3";RES.getResourceInfo("output_ac3")&&(i="./resource/"+RES.getResourceInfo("output_ac3").url);var r=Global.isNative?"":"?v="+Global.sourceVer;RES.getResByUrl(i+r,function(e,i){var r=new JSZip(e),o=r.files;n.zipFiles=o,n.mp3Dic={},n.enable=!0,t()},this,RES.ResourceItem.TYPE_BIN)},t.prototype.makeBlobFile=function(t){var e=t.replace("_mp3",".mp3"),n=this.zipFiles[e];if(n){var i=n.asArrayBuffer(),t=n.name.replace(".mp3","_mp3"),r=URL.createObjectURL(new Blob([i],{type:"application/octet-stream"}));this.mp3Dic[t]=r}},t.prototype.play=function(t,e,n,i,r){if(void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=!1),void 0===r&&(r=1),this.enable){if(!this.mp3Dic[t]&&(this.makeBlobFile(t),!this.mp3Dic[t]))return void error("missing sound:"+t);this.howlerDic[t]||(this.howlerDic[t]=new Howl({src:[this.mp3Dic[t]],preload:!0,autoplay:!0}));var o=this.howlerDic[t],a=!Global.isNative&&Global.browser.versions.ios;a&&i&&(r/=5),o.volume(r),0==n||n>=100||-1==n?o.loop(!0):o.loop(!1);var s=o.play();return s}},t.prototype.isPlaying=function(t,e){return this.howlerDic[t]&&this.howlerDic[t].playing()},t.prototype.setVolume=function(t,e,n,i){if(this.enable){var r=!Global.isNative&&Global.browser.versions.ios;r&&i&&(n/=5);var o=this.howlerDic[t];o&&o.playing()&&o.volume(n)}},t.prototype.stop=function(t,e){if(this.enable){var n=this.howlerDic[t];n&&n.stop()}},t.prototype.unload=function(){if(this.enable){for(var t in this.howlerDic){var e=this.howlerDic[t];e&&e.unload()}this.enable=!1,this.howlerDic={}}},t}();__reflect(HowlerControllerZip.prototype,"HowlerControllerZip",["IHowlerContoller"]);var SoundManager=function(){function t(){}return t.dispose=function(t){if(this.howlerCtrl&&this.howlerCtrl.enable)return void this.howlerCtrl.unload();var e=function(e,n){var i=[];for(var r in e)if(r.substr(0,t.length)==t){if(n){e[r]}else{var o=e[r];o&&o.stop()}i.push(r)}for(var a=0,s=i.length;s>a;a++){var l=i[a];e[l]=null,delete e[l]}};e(this.effectChannels,!1),e(this.bgChannels,!1),e(this.effectSounds,!0),e(this.bgSounds,!0)},t.isProxiedByHowler=function(){return t.howlerCtrl&&t.howlerCtrl.enable},t.loadGroupProxy=function(e,n,i){stringEndWith_XY(e,".sound")?(warn(",howler.js(assets/{gameId}/{i18n}/soundaudiosprite output.json,output.mp3):"+e),t.howlerCtrl||(t.howlerCtrl=new HowlerControllerZip),t.howlerCtrl.init(function(){warn("howler.jsoutput.json,output.mp3 "+e),Global.onEvent(e)},function(){warn("howler.jsoutput.json,output.mp3RES.loadGroup"),t.__loadGroupFun__(e,n,i)})):t.__loadGroupFun__(e,n,i)},t.getResProxy=function(e){return stringEndWith_XY(e,"_mp3")&&t.howlerCtrl&&t.howlerCtrl.enable?e:t.__getResFun__(e)},t.hasResProxy=function(e){return stringEndWith_XY(e,"_mp3")&&t.howlerCtrl&&t.howlerCtrl.enable?!0:t.__hasResFun__(e)},t.init=function(){t.__loadGroupFun__||(t.__loadGroupFun__=RES.loadGroup.bind(RES),RES.loadGroup=t.loadGroupProxy,t.__getResFun__=RES.getRes.bind(RES),RES.getRes=t.getResProxy,t.__hasResFun__=RES.hasRes.bind(RES),RES.hasRes=t.hasResProxy),this.bgVolume=1,this.effectVolume=1,this.bgMute=!1,this.effectMute=!1,Global.localStorageGetItem("cy_bgVolume")&&(this.bgVolume=parseFloat(Global.localStorageGetItem("cy_bgVolume"))),Global.localStorageGetItem("cy_effectVolume")&&(this.effectVolume=parseFloat(Global.localStorageGetItem("cy_effectVolume"))),"1"==Global.localStorageGetItem("cy_bgMute")&&(this.bgMute=!0),"1"==Global.localStorageGetItem("cy_effectMute")&&(this.effectMute=!0),Global.eventCenter.addEventListener(EventEnum.RUN_MODE_CHANGE_P_to_G,this.onRunModeChange,this),bindTapEventOnce_XY(Global.stage,function(){t.stageClicked=!0},this)},t.onRunModeChange=function(){var t=this;Global.runAtBackGround?(this.backgroundCacheBgMute=this.bgMute,this.backgroundCacheEffectMute=this.effectMute,this.muteAll(),this.allowPlay=!1,egret.clearTimeout(this.allowPlayTimer)):(this.bgMute="1"==Global.localStorageGetItem("cy_bgMute"),this.effectMute="1"==Global.localStorageGetItem("cy_effectMute"),this.gainAll(),this.allowPlay=!1,egret.clearTimeout(this.allowPlayTimer),this.allowPlayTimer=egret.setTimeout(function(){t.allowPlay=!0},this,500))},t.muteAll=function(){for(var t in this.effectChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(t,this.effectChannels[t],0,!1);else{var e=this.effectChannels[t];0!=e.position&&(e.volume=0)}for(var t in this.bgChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(t,this.bgChannels[t],0,!0);else{var e=this.bgChannels[t];0!=e.position&&(e.volume=0)}},t.gainAll=function(){for(var t in this.effectChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(t,this.effectChannels[t],this.getEffectVolume(),!1);else{var e=this.effectChannels[t];0!=e.position&&(e.volume=this.getEffectVolume())}for(var t in this.bgChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(t,this.bgChannels[t],this.getBgVolume(),!0);else{var e=this.bgChannels[t];0!=e.position&&(e.volume=this.getBgVolume())}},t.updateCahce=function(){Global.localStorageSetItem("cy_bgVolume",this.bgVolume+""),Global.localStorageSetItem("cy_effectVolume",this.effectVolume+""),Global.localStorageSetItem("cy_bgMute",this.bgMute?"1":"0"),Global.localStorageSetItem("cy_effectMute",this.effectMute?"1":"0")},t.playBg=function(t,e,n,i){if(void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=!0),this.addItem(t,!0),this.howlerCtrl&&this.howlerCtrl.enable){if(this.isBgPlaying(t))return}else this.stop(t,!0);if(this.play(t,e,n,!0),0>n&&i){this.bgPlayerTimerDic[t]&&egret.clearInterval(this.bgPlayerTimerDic[t]),delete this.bgPlayerTimerDic[t];var r=egret.setInterval(this.checkBgIsPlaying,this,500,t);this.bgPlayerTimerDic[t]=r}},t.checkBgIsPlaying=function(t){this.checkedCount++,this.isBgPlaying(t)?(this.bgPlayerTimerDic[t]&&egret.clearInterval(this.bgPlayerTimerDic[t]),delete this.bgPlayerTimerDic[t]):this.playBg(t,0,-1,!1)},t.isBgPlaying=function(t){return this.howlerCtrl&&this.howlerCtrl.enable?void 0==this.bgChannels[t]?!1:this.howlerCtrl.isPlaying(t,this.bgChannels[t]):!0},t.playEffect=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1),this.addItem(t),this.play(t,e,n,!1)},t.stop=function(t,e){void 0===e&&(e=!1);var n=e?this.bgChannels:this.effectChannels;if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.stop(t,n[t]);else if(n[t]){var i=n[t];i.stop()}e&&(this.bgPlayerTimerDic[t]&&egret.clearInterval(this.bgPlayerTimerDic[t]),delete this.bgPlayerTimerDic[t])},t.stopAll=function(t){var e=t?this.bgChannels:this.effectChannels;for(var n in e)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.stop(n,e[n]);else{var i=e[n];i.stop()}},t.setBgMute=function(t){this.bgMute=t;for(var e in this.bgChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(e,this.bgChannels[e],this.getBgVolume(),!0);else{var n=this.bgChannels[e];0!=n.position&&(n.volume=this.getBgVolume())}this.updateCahce()},t.getBgMute=function(){return this.bgMute},t.setEffectMute=function(t){this.effectMute=t;for(var e in this.effectChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(e,this.effectChannels[e],this.getEffectVolume(),!1);else{var n=this.effectChannels[e];0!=n.position&&(n.volume=this.getEffectVolume())}this.updateCahce()},t.getEffectMute=function(){return this.effectMute},t.setBgVolume=function(t){this.bgVolume=t,this.bgMute=0>=t;
for(var e in this.bgChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(e,this.bgChannels[e],this.bgMute?0:t,!0);else{var n=this.bgChannels[e];0!=n.position&&(n.volume=this.bgMute?0:t)}this.updateCahce()},t.getBgVolume=function(){return this.bgMute?0:this.bgVolume},t.getEffectVolume=function(){return this.effectMute?0:this.effectVolume},t.setEffectVolume=function(t){this.effectVolume=t,this.effectMute=0>=t;for(var e in this.effectChannels)if(this.howlerCtrl&&this.howlerCtrl.enable)this.howlerCtrl.setVolume(e,this.effectChannels[e],this.effectMute?0:t,!1);else{var n=this.effectChannels[e];0!=n.position&&(n.volume=this.effectMute?0:t)}this.updateCahce()},t.addItem=function(t,e){if(void 0===e&&(e=!1),!this.howlerCtrl||!this.howlerCtrl.enable){var n=t,i=e?this.bgSounds:this.effectSounds;if(!i[n]){var r=RES.getRes(t);r&&(i[n]=r)}}},t.play=function(t,e,n,i){if(void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=!1),(i||!Global.runAtBackGround)&&this.allowPlay&&(Global.isNative||this.stageClicked)){var r=i?this.bgMute?0:this.bgVolume:this.effectMute?0:this.effectVolume,o=i?this.bgSounds:this.effectSounds,a=i?this.bgChannels:this.effectChannels;if(Global.isNative&&Global.runAtBackGround&&(r=0),this.howlerCtrl&&this.howlerCtrl.enable)a[t]=this.howlerCtrl.play(t,e,n,i,r);else if(o[t]){var s=o[t];a[t]=s.play(e,n),a[t].volume=r}}},t.effectSounds={},t.effectChannels={},t.bgSounds={},t.bgChannels={},t.bgVolume=1,t.effectVolume=1,t.bgMute=!1,t.effectMute=!1,t.stageClicked=!1,t.allowPlay=!0,t.allowPlayTimer=0,t.bgPlayerTimerDic={},t.checkedCount=0,t}();__reflect(SoundManager.prototype,"SoundManager");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var r=RES.getRes(t);XYFontAnalyzer.parsedFont[t]&&(r=XYFontAnalyzer.parsedFont[t]),r?i(r):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BadJSReporter=function(){function t(){}return t.init=function(t,e){var n=this;this.isInit||(this.isInit=!0,this.projectId=t,this.reportURL=e,window.onerror=function(t,e,i,r,o){var a=new ErrorData;a.uid=Global.uid,a.projectId=n.projectId,a.time=formatDate_XY((new Date).getTime()),a.version=Global.sourceVer,a.userAgent=window.navigator.userAgent,a.errorMessage=t,a.scriptURI=e,a.lineNumber=i,a.columnNumber=r,a.errorObj=o.toString(),n.addError(a)})},t.addTextError=function(t){var e=new ErrorData;e.uid=Global.uid,e.projectId=this.projectId,e.time=formatDate_XY((new Date).getTime()),e.version=Global.sourceVer,e.userAgent=window.navigator.userAgent,e.errorMessage=t,e.errorObj="from code",this.addError(e)},t.addError=function(t){var e=this;this.errorArr.push(t),egret.getTimer()-this.lastReportTime>=6e4?this.report():(egret.clearTimeout(this.timer),this.timer=egret.setTimeout(function(){e.report()},this,6e4-(egret.getTimer()-this.lastReportTime)))},t.report=function(){if(egret.clearTimeout(this.timer),!(this.errorArr.length<=0)){var t=JSON.stringify(this.errorArr);t=t.substr(0,2048),httpPostSmart_XY(this.reportURL,function(){},this,{content:t}),this.lastReportTime=egret.getTimer(),this.errorArr=[]}},t.isInit=!1,t.lastReportTime=0,t.errorArr=[],t}();__reflect(BadJSReporter.prototype,"BadJSReporter");var ErrorData=function(){function t(){}return t}();__reflect(ErrorData.prototype,"ErrorData");var BornProperty=function(){function t(t,e,n,i){this.x=t,this.y=e,this.scaleX=n,this.scaleY=i}return t.buildFor=function(e){if(e&&!e.__bornProperty__){var n=new t(e.x,e.y,e.scaleX,e.scaleY);e.__bornProperty__=n}},t.resetToBornProperty=function(t,e){if(void 0===e&&(e=!0),t){e&&Tween$.removeTweens(t);var n=t.__bornProperty__;n&&(t.x=n.x,t.y=n.y,t.scaleX=n.scaleX,t.scaleY=n.scaleY)}},t.getBornPropertyOf=function(t){return t?t.__bornProperty__:null},t.tweenFrom=function(t,e,n,i){if(t&&e){var r=t.__bornProperty__;if(r){var o;for(var a in e)t[a]=e[a],o=a;Tween$.removeTweens(t),Tween$.get(t).set({lastKey:e[o]}).wait(i).to({x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY},n)}}},t}();__reflect(BornProperty.prototype,"BornProperty");var CubicBezier=function(){function t(t,e,n,i){this.segments=100,this.color=0,this.thikness=1,this.anchor1=t||new egret.Point,this.anchor2=e||new egret.Point,this.control1=n||new egret.Point,this.control2=i||new egret.Point,this.color=16711680,this.thikness=5}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setAsTwoPointUp=function(){var t=Math.min(this.anchor1.x,this.anchor2.x),e=Math.max(this.anchor1.x,this.anchor2.x),n=t+(e-t)/2,i=Math.min(this.anchor1.y,this.anchor2.y);this.control1.setTo(n,i),this.control2.setTo(n,i)},t.prototype.setAsTwoPointBottom=function(){var t=Math.min(this.anchor1.x,this.anchor2.x),e=Math.max(this.anchor1.x,this.anchor2.x),n=t+(e-t)/2,i=Math.max(this.anchor1.y,this.anchor2.y);this.control1.setTo(n,i),this.control2.setTo(n,i)},t.prototype.draw=function(){var t=1/this.segments,e=new egret.Shape;e.graphics.lineStyle(this.thikness,this.color),e.graphics.moveTo(this.anchor1.x,this.anchor1.y);for(var n,i,r=this.anchor1,o=this.anchor2,a=this.control1,s=this.control2,l=0;1>=l;l+=t)n=Math.pow(l,3)*(o.x+3*(a.x-s.x)-r.x)+3*Math.pow(l,2)*(r.x-2*a.x+s.x)+3*l*(a.x-r.x)+r.x,i=Math.pow(l,3)*(o.y+3*(a.y-s.y)-r.y)+3*Math.pow(l,2)*(r.y-2*a.y+s.y)+3*l*(a.y-r.y)+r.y,e.graphics.lineTo(n,i);return e.graphics.lineTo(o.x,o.y),e},t.prototype.calRoadPoints=function(t){var e=[];t||(t=this.segments);var n=1/t;e.push([this.anchor1.x,this.anchor1.y]);for(var i,r,o=this.anchor1,a=this.anchor2,s=this.control1,l=this.control2,h=0;1>=h;h+=n)i=Math.pow(h,3)*(a.x+3*(s.x-l.x)-o.x)+3*Math.pow(h,2)*(o.x-2*s.x+l.x)+3*h*(s.x-o.x)+o.x,r=Math.pow(h,3)*(a.y+3*(s.y-l.y)-o.y)+3*Math.pow(h,2)*(o.y-2*s.y+l.y)+3*h*(s.y-o.y)+o.y,e.push([i,r]);return e.push([this.anchor2.x,this.anchor2.y]),e},t.prototype.setSegments=function(t){this.segments=t},t.prototype.setColor=function(t){this.color=t},t.prototype.setThikness=function(t){this.thikness=t},t}();__reflect(CubicBezier.prototype,"CubicBezier");var DebugTrigger=function(){function t(t){this.stageTouchCount=0,this.lastTouchTime=0,this.stage=t,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStage,this)}return t.prototype.onTouchStage=function(t){if(!(t.stageX>130||t.stageY<this.stage.stageHeight-130)){if(egret.getTimer()-this.lastTouchTime<=200){if(this.stageTouchCount++,this.stageTouchCount>=7){this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStage,this);try{loadJs_XY(Global.isNative?"../hall/corelib/vconsole.min.js":"../hall/corelib/vconsole.min.js?v="+Math.random());var e=document.querySelectorAll(".egret-player")[0]["egret-player"];e.player.displayFPS(!0,e.playerOption.showLog,e.playerOption.logFilter,e.playerOption.fpsStyles)}catch(t){}}}else this.stageTouchCount=1;this.lastTouchTime=egret.getTimer()}},t}();__reflect(DebugTrigger.prototype,"DebugTrigger");var EnterFrameCall=function(){function t(){}return t.init=function(t){},t.mInit=function(){this.inited||(this.inited=!0,Global.stage.addEventListener(egret.Event.ENTER_FRAME,t.onEnterFrame,t))},t.onEnterFrame=function(e){for(var n=0;n<t.mCalls.length;n++){var i=t.mCalls[n];i[0].apply(i[1])}},t.add=function(e,n){this.mInit();for(var i=0;i<t.mCalls.length;i++){var r=t.mCalls[i];if(r[0]==e&&r[1]==n)return}t.mCalls.push([e,n])},t.del=function(e,n){for(var i=0;i<t.mCalls.length;i++){var r=t.mCalls[i];if(r[0]==e&&r[1]==n)return void t.mCalls.splice(i,1)}},t.mCalls=[],t}();__reflect(EnterFrameCall.prototype,"EnterFrameCall");var EnterFrameRepairCall=function(){function t(){}return t.init=function(){this.inited||(this.inited=!0,this.excutor=new FrameExcutor(Global.stage.frameRate,this.onEnterFrame,this),this.excutor.start())},t.onEnterFrame=function(){for(var t=0;t<this.mCalls.length;t++){var e=this.mCalls[t];e[0].apply(e[1])}},t.add=function(t,e){this.init();for(var n=0;n<this.mCalls.length;n++){var i=this.mCalls[n];if(i[0]==t&&i[1]==e)return}this.mCalls.push([t,e])},t.del=function(t){for(var e=0;e<this.mCalls.length;e++){var n=this.mCalls[e];if(n[0]==t)return void this.mCalls.splice(e,1)}},t.mCalls=[],t}();__reflect(EnterFrameRepairCall.prototype,"EnterFrameRepairCall");var Filters=function(){function t(){}return t.init=function(){this.gray=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),this.blur=new egret.BlurFilter(1,1),this.light=new egret.ColorMatrixFilter([1,0,0,0,100,0,1,0,0,100,0,0,1,0,100,0,0,0,1,0]),this.drak=new egret.ColorMatrixFilter([1,0,0,0,-100,0,1,0,0,-100,0,0,1,0,-100,0,0,0,1,0]),this.littleDark=new egret.ColorMatrixFilter([1,0,0,0,-50,0,1,0,0,-50,0,0,1,0,-50,0,0,0,1,0])},t}();__reflect(Filters.prototype,"Filters");var FrameExcutor=function(){function t(t,e,n,i){void 0===i&&(i=!1),this.callback=e,this.callbackObj=n,this.forceRender=i,this.setFrameRate(t)}return t.prototype.start=function(){this.mTimeStamp=egret.getTimer(),this.running=!0,egret.stopTick(this.onTick,this),egret.startTick(this.onTick,this)},t.prototype.stop=function(){this.running=!1,egret.stopTick(this.onTick,this)},t.prototype.onTick=function(t){for(var e=this,n=t-e.mTimeStamp,i=Math.floor(n/e.eachFrameCostMs),r=0;i>r;r++)e.running&&e.callback&&e.callback.apply(e.callbackObj);return e.mTimeStamp+=i*e.eachFrameCostMs,e.forceRender},t.prototype.setFrameRate=function(t){this.frameRate=t,this.eachFrameCostMs=1e3/t},t.prototype.getFrameRate=function(){return this.frameRate},t.prototype.isRunning=function(){return this.running},t.prototype.dispose=function(){egret.stopTick(this.onTick,this),this.frameRate=null,this.callback=null,this.callbackObj=null,this.running=!1},t}();__reflect(FrameExcutor.prototype,"FrameExcutor");var Bitmap$=egret.Bitmap,BitmapFillMode$=egret.BitmapFillMode,BitmapFont$=egret.BitmapFont,BitmapText$=egret.BitmapText,BlendMode$=egret.BlendMode,BlurFilter$=egret.BlurFilter,ByteArray$=egret.ByteArray,Capabilities$=egret.Capabilities,CapsStyle$=egret.CapsStyle,ColorMatrixFilter$=egret.ColorMatrixFilter,DeviceOrientation$=egret.DeviceOrientation,DisplayObject$=egret.DisplayObject,DisplayObjectContainer$=egret.DisplayObjectContainer,DropShadowFilter$=egret.DropShadowFilter,Endian$=egret.Endian,Event$=egret.Event,EventDispatcher$=egret.EventDispatcher,ExternalInterface$=egret.ExternalInterface,FocusEvent$=egret.FocusEvent,Geolocation$=egret.Geolocation,GeolocationEvent$=egret.GeolocationEvent,GlowFilter$=egret.GlowFilter,GradientType$=egret.GradientType,Graphics$=egret.Graphics,HashObject$=egret.HashObject,HorizontalAlign$=egret.HorizontalAlign,HtmlTextParser$=egret.HtmlTextParser,HttpMethod$=egret.HttpMethod,HttpRequest$=egret.HttpRequest,HttpResponseType$=egret.HttpResponseType,HTTPStatusEvent$=egret.HTTPStatusEvent,ImageLoader$=egret.ImageLoader,IOErrorEvent$=egret.IOErrorEvent,JointStyle$=egret.JointStyle,Logger$=egret.Logger,Matrix$=egret.Matrix,Motion$=egret.Motion,MotionEvent$=egret.MotionEvent,NumberUtils$=egret.NumberUtils,OrientationEvent$=egret.OrientationEvent,Point$=egret.Point,ProgressEvent$=egret.ProgressEvent,Rectangle$=egret.Rectangle,RenderTexture$=egret.RenderTexture,RuntimeType$=egret.RuntimeType,Shape$=egret.Shape,Sound$=egret.Sound,Sprite$=egret.Sprite,SpriteSheet$=egret.SpriteSheet,Stage$=egret.Stage,StageOrientationEvent$=egret.StageOrientationEvent,StageScaleMode$=egret.StageScaleMode,TextEvent$=egret.TextEvent,TextField$=egret.TextField,TextFieldInputType$=egret.TextFieldInputType,TextFieldType$=egret.TextFieldType,Texture$=egret.Texture,Timer$=egret.Timer,TimerEvent$=egret.TimerEvent,TouchEvent$=egret.TouchEvent,VerticalAlign$=egret.VerticalAlign,Video$=egret.Video,XML$=egret.XML,MovieClip$=egret.MovieClip,MovieClipData$=egret.MovieClipData,MovieClipDataFactory$=egret.MovieClipDataFactory,MovieClipEvent$=egret.MovieClipEvent,ScrollView$=egret.ScrollView,Ticker$=egret.Ticker,URLLoader$=egret.URLLoader,URLLoaderDataFormat$=egret.URLLoaderDataFormat,URLRequest$=egret.URLRequest,URLRequestHeader$=egret.URLRequestHeader,URLRequestMethod$=egret.URLRequestMethod,URLVariables$=egret.URLVariables,AddItems$=eui.AddItems,ArrayCollection$=eui.ArrayCollection,BasicLayout$=eui.BasicLayout,Binding$=eui.Binding,BitmapLabel$=eui.BitmapLabel,Button$=eui.Button,CheckBox$=eui.CheckBox,CollectionEvent$=eui.CollectionEvent,CollectionEventKind$=eui.CollectionEventKind,ColumnAlign$=eui.ColumnAlign,Component$=eui.Component,DataGroup$=eui.DataGroup,DefaultAssetAdapter$=eui.DefaultAssetAdapter,DefaultThemeAdapter$=eui.DefaultThemeAdapter,Direction$=eui.Direction,EditableText$=eui.EditableText,Group$=eui.Group,HorizontalLayout$=eui.HorizontalLayout,HScrollBar$=eui.HScrollBar,HSlider$=eui.HSlider,Image$=eui.Image,ItemRenderer$=eui.ItemRenderer,ItemTapEvent$=eui.ItemTapEvent,JustifyAlign$=eui.JustifyAlign,Label$=eui.Label,LayoutBase$=eui.LayoutBase,LinearLayoutBase$=eui.LinearLayoutBase,List$=eui.List,ListBase$=eui.ListBase,Panel$=eui.Panel,ProgressBar$=eui.ProgressBar,PropertyEvent$=eui.PropertyEvent,RadioButton$=eui.RadioButton,RadioButtonGroup$=eui.RadioButtonGroup,Range$=eui.Range,Rect$=eui.Rect,RowAlign$=eui.RowAlign,ScrollBarBase$=eui.ScrollBarBase,Scroller$=eui.Scroller,ScrollPolicy$=eui.ScrollPolicy,SetProperty$=eui.SetProperty,SetStateProperty$=eui.SetStateProperty,Skin$=eui.Skin,SliderBase$=eui.SliderBase,State$=eui.State,TabBar$=eui.TabBar,TextInput$=eui.TextInput,Theme$=eui.Theme,TileLayout$=eui.TileLayout,TileOrientation$=eui.TileOrientation,ToggleButton$=eui.ToggleButton,ToggleSwitch$=eui.ToggleSwitch,UIEvent$=eui.UIEvent,UILayer$=eui.UILayer,VerticalLayout$=eui.VerticalLayout,ViewStack$=eui.ViewStack,VScrollBar$=eui.VScrollBar,VSlider$=eui.VSlider,Watcher$=eui.Watcher,Ease$=egret.Ease,Tween$=egret.Tween,ResourceEvent$=RES.ResourceEvent,ResourceItem$=RES.ResourceItem,AnimationData$=dragonBones.AnimationData,AnimationEvent$=dragonBones.AnimationEvent,AnimationState$=dragonBones.AnimationState,Armature$=dragonBones.Armature,ArmatureData$=dragonBones.ArmatureData,BaseFactory$=dragonBones.BaseFactory,BaseObject$=dragonBones.BaseObject,Bone$=dragonBones.Bone,BoneData$=dragonBones.BoneData,DragonBones$=dragonBones.DragonBones,DragonBonesData$=dragonBones.DragonBonesData,EgretArmatureDisplay$=dragonBones.EgretArmatureDisplay,EgretEvent$=dragonBones.EgretEvent,EgretFactory$=dragonBones.EgretFactory,EgretSheetAtlas$=dragonBones.EgretSheetAtlas,EgretSlot$=dragonBones.EgretSlot,EgretTextureAtlas$=dragonBones.EgretTextureAtlas,EgretTextureAtlasData$=dragonBones.EgretTextureAtlasData,EventObject$=dragonBones.EventObject,FrameEvent$=dragonBones.FrameEvent,SkinData$=dragonBones.SkinData,Slot$=dragonBones.Slot,SlotData$=dragonBones.SlotData,SoundEvent$=dragonBones.SoundEvent,SoundEventManager$=dragonBones.SoundEventManager,TextureAtlasData$=dragonBones.TextureAtlasData,Transform$=dragonBones.Transform,TransformObject$=dragonBones.TransformObject,WorldClock$=dragonBones.WorldClock,InputKeyBoardAutoUp=function(){function t(){Global.eventCenter.addEventListener(EventEnum.RUN_MODE_CHANGE_P_to_G,this.onRunChange,this),Global.eventCenter.addEventListener(EventEnum.INPUT_ON_BLUR,this.clearTimer,this),Global.eventCenter.addEventListener(EventEnum.INPUT_ON_FOCUS,this.onFocus,this)}return t.prototype.onFocus=function(){var t=document.getElementsByTagName("input")[0];t.scrollIntoView&&(clearInterval(this.timer),this.timer=setInterval(function(){t.scrollIntoView()},500))},t.prototype.clearTimer=function(){clearInterval(this.timer)},t.prototype.onRunChange=function(){Global.runAtBackGround&&clearInterval(this.timer)},t}();__reflect(InputKeyBoardAutoUp.prototype,"InputKeyBoardAutoUp");var KYTools=function(){function t(){}return t.maskNick=function(t){return maskNick_XY(t)},t.translateMahjong=function(t){if(this.mahjong||(this.mahjong=new mahjong.Card(0,0)),t>=11&&19>=t)this.mahjong.reNew(mahjong.Type.CHARACTER,t-11);else if(t>=21&&29>=t)this.mahjong.reNew(mahjong.Type.BAMBOO,t-21);else if(t>=31&&39>=t)this.mahjong.reNew(mahjong.Type.DOT,t-31);else if(t>=41&&47>=t)this.mahjong.reNew(mahjong.Type.ZI,t-41+mahjong.Point.EAST_WIND);else{if(!(t>=51&&58>=t))return warn(":"+t),null;this.mahjong.reNew(mahjong.Type.FLOWER,t-51+mahjong.Point.FLOWER_CHUN)}return this.mahjong},t.mahjongToImageSource=function(t){var e=this.translateMahjong(t);if(!e)return"";var n=0;switch(e.type){case mahjong.Type.BAMBOO:n=e.point+1;break;case mahjong.Type.DOT:n=e.point+11;break;case mahjong.Type.CHARACTER:n=e.point+21;break;case mahjong.Type.ZI:case mahjong.Type.FLOWER:switch(e.point){case mahjong.Point.RED_DRAGON:n=31;break;case mahjong.Point.GREEN_DRAGON:n=32;break;case mahjong.Point.WHITE_DRAGON:n=33;break;case mahjong.Point.EAST_WIND:n=34;break;case mahjong.Point.SOUTH_WIND:n=35;break;case mahjong.Point.WEST_WIND:n=36;break;case mahjong.Point.NORTH_WIND:n=37;break;case mahjong.Point.FLOWER_CHUN:n=42;break;case mahjong.Point.FLOWER_XIA:n=43;break;case mahjong.Point.FLOWER_QIU:n=44;break;case mahjong.Point.FLOWER_DONG:n=45;break;case mahjong.Point.FLOWER_MEI:n=38;break;case mahjong.Point.FLOWER_LAN:n=39;break;case mahjong.Point.FLOWER_ZHU:n=40;break;case mahjong.Point.FLOWER_JU:n=41}}return"mahjong_card_"+n+"_png"},t.translatePoker=function(t){if(null==t||2!=t.length)return warn(": "+t),null;t=t.toUpperCase(),this.poker||(this.poker=new card.Card(0,0));var e=parseInt(t.charAt(0)),n=parseInt(t.charAt(1),16);return e==card.Type.JOKER&&(2==n&&(n=card.Point.BlackJoker),3==n&&(n=card.Point.RedJoker)),this.poker.reNew(e,n),this.poker},t.pokerToImageSource=function(t){var e=this.translatePoker(t);if(!e)return"";if(e.point==card.Point.BlackJoker)return"poker_card_little_king_png";if(e.point==card.Point.RedJoker)return"poker_card_big_king_png";var n=["a","c","b","d"],i="";if(2<=e.point&&e.point<=10)i=e.point+"";else switch(e.point){case card.Point.A:case 1:i="1";break;case card.Point.J:i="J";break;case card.Point.Q:i="Q";break;case card.Point.K:i="K"}return"poker_card_"+i+n[e.type]+"_png"},t.tranTypeToCardsType_sss=function(t){var e;switch(t){case 0:e="";break;case 1:e="";break;case 2:e="";break;case 3:e="";break;case 4:e="";break;case 5:e="";break;case 6:e="";break;case 7:e="";break;case 8:e="";break;case 14:e="";break;case 15:e="";break;case 16:e="";break;case 17:e="";break;case 18:e="";break;case 19:e="";break;case 20:e="";break;case 21:e="";break;case 22:e="";break;case 23:e="";break;case 24:e="";break;case 25:e="";break;case 26:e=""}return i18n(e)},t}();__reflect(KYTools.prototype,"KYTools");var LatAndLonDistance=function(){function t(){}return t.distance=function(t,e,n,i){t=this.convertDegreesToRadians(t),e=this.convertDegreesToRadians(e),n=this.convertDegreesToRadians(n),i=this.convertDegreesToRadians(i);var r=Math.abs(e-i),o=Math.abs(t-n),a=this.haverSin(o)+Math.cos(t)*Math.cos(n)*this.haverSin(r),s=2*this.EARTH_RADIUS*Math.asin(Math.sqrt(a));return s},t.haverSin=function(t){var e=Math.sin(t/2);return e*e},t.convertDegreesToRadians=function(t){return t*Math.PI/180},t.convertRadiansToDegrees=function(t){return 180*t/Math.PI},t.EARTH_RADIUS=6371e3,t}();__reflect(LatAndLonDistance.prototype,"LatAndLonDistance");var MovieclipController=function(t){function e(e,n,i){var r=t.call(this)||this;return r.mFrameCounter=0,r.mImg=e,r.mFrameRate=n,r.backupRes=i,r.mResLoop=r.backupRes,r.mResCount=i.length,r.frameExcutor=new FrameExcutor(n,r.onRender,r),r}return __extends(e,t),e.makeResLoop=function(t,e,n){var i=[];if(n>e)for(var r=e;n>=r;r++)i.push(format_XY(t,r));else for(var r=e;r>=n;r--)i.push(format_XY(t,r));return i},e.prototype.gotoAndStop=function(t){this.stop(),0>t&&(t=0),t>this.mResCount-1&&(t=this.mResCount-1),this.mFrameCounter=t,this.mImg.texture=RES.getRes(this.mResLoop[t])},e.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=!1),this.gotoAndStop(t),this.play(e)},e.prototype.updateResLoop=function(t){this.backupRes=t,this.backupResOfReverse=null,this.yoyoMode&&(this.backupResOfReverse=this.backupRes.reverse()),this.mResLoop=this.backupRes,this.mResCount=t.length,this.mPlayed&&(this.mFrameCounter=0,this.mImg.texture=RES.getRes(this.mResLoop[0]))},e.prototype.playAsYoyo=function(){this.yoyoMode=!0,this.backupResOfReverse||(this.backupResOfReverse=this.backupRes.reverse()),this.mResLoop=this.backupRes,this.mLoop=!0,this.mFrameCounter=0,this.mPlayed=!0,this.frameExcutor.start()},e.prototype.play=function(t){this.yoyoMode=!1,this.mResLoop=this.backupRes,this.mLoop=t,this.frameExcutor.start(),this.mPlayed=!0},e.prototype.stop=function(){this.frameExcutor.stop(),this.mFrameCounter=0,this.mPlayed=!1,this.yoyoMode=!1},e.prototype.onRender=function(){var t=this;if(t.mPlayed){t.mFrameCounter++;var e=t.mFrameCounter%t.mResCount;return t.mImg.texture=RES.getRes(t.mResLoop[e]),!t.mLoop&&t.mFrameCounter>=t.mResCount-1?(t.stop(),void t.dispatchEventWith(egret.Event.COMPLETE)):void(t.yoyoMode&&e>=t.mResCount-1&&(t.mResLoop=t.mResLoop==t.backupRes?t.backupResOfReverse:t.backupRes))}},e.prototype.setFrameRate=function(t){this.mFrameRate=t,this.frameExcutor&&this.frameExcutor.setFrameRate(t)},e.prototype.getFrameRate=function(){return this.mFrameRate},e.prototype.getResLoop=function(){return this.mResLoop},e.prototype.getTarget=function(){return this.mImg},e.prototype.dispose=function(){this.frameExcutor&&(this.frameExcutor.stop(),this.frameExcutor.dispose()),this.mImg=null,this.mResLoop=null,this.backupRes=null,this.backupResOfReverse=null,this.frameExcutor=null},e}(egret.EventDispatcher);__reflect(MovieclipController.prototype,"MovieclipController");var OpenWindowInGame=function(){function t(){}return t.hasSomeWindowOpened=function(){var t=document.getElementById("__openedWindowDiv__");return t&&t.parentNode?!0:!1},t.setMaxHeight=function(t){var e=document.getElementById("__openedIframeDiv__"),n=document.getElementById("__openedIframe__");e&&(this.lastHeight=100==this.lastHeight?99:100,t>=1?e.style.bottom="0px":e.style.bottom=100*Math.min(1,1-t)+"%",n.style.height=this.lastHeight+"%")},t.open=function(t,e){var n='	<div style="width:100%;text-align:center;background:#dddddd;height:40px;line-height:40px;">'+t+"</div>"+(egret.Capabilities.isMobile?"":'	<div  onclick="OpenWindowInGame.hide()" style="text-align:center;background:#dddddd;height:40px;line-height:40px;position:absolute;top:0px;right:10px;color:blue;cursor:pointer">['+i18n("")+"]</div>")+'	<div id="__openedIframeDiv__" style="position:absolute;top:40px;left:0px;right:0px;bottom:0px;width:100%;">		<iframe id="__openedIframe__" style="width:100%;height:100%;border:0px;" src="'+e+'"></iframe>	</div>';egret.Capabilities.isMobile&&(n+='	<div onclick="OpenWindowInGame.hide()" style="cursor:pointer;color:blue;position:absolute;top:35%;right:10px; width: 50px;height: 50px;line-height:50px;text-align:center;background-color:#eeeeee;border:red;border-radius: 50%;-moz-border-radius: 50%;-webkit-border-radius: 50%;">['+i18n("")+"]</div>");var i=document.createElement("div");i.id="__openedWindowDiv__",i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.backgroundColor="white",i.innerHTML=n,this.hide(),document.body.appendChild(i),this.lastHeight=100},t.hide=function(){var t=document.getElementById("__openedWindowDiv__");t&&t.parentNode&&(t.parentNode.removeChild(t),egret.lifecycle.onResume())},t.lastHeight=100,t}();__reflect(OpenWindowInGame.prototype,"OpenWindowInGame");var SGJTool=function(){function t(){}return t.checkSetLanguage=function(){var t=Global.localStorageGetItem("lastSetLanguage")||"";if(t!=Global.i18nType){var e=this.SET_LANGUAGE_URL;e+=Global.i18nType==I18NType.en_us?"en":"zh-CN";var n=document.createElement("iframe");document.body.appendChild(n),n.style.zIndex="-999",n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="1px",Global.localStorageSetItem("lastSetLanguage",Global.i18nType),egret.setTimeout(function(){n.onload=null,n.onerror=null,document.body.removeChild(n)},this,1e4),n.src=e}},t.getBlock=function(t,e){var n=this.httpURI+HttpProtocol.game_user_hall_3rd_get_ginar_mtxhash;httpPostSmart_XY(n,function(t){var n=parseJsonSafe_XY(t);e(n&&n.s>0?n.d:null)},this,{ticketId:t})},t.verifyBC=function(t){openWindow_XY(this.VERIFY_URL+t)},t.SET_LANGUAGE_URL="https://cn.etherscan.com?lang=",t.CHANGE_HASH_URL="https://api.ginar.io/rng/pod/m/",t.VERIFY_URL="https://cn.etherscan.com/block/",t.httpURI="",t}();__reflect(SGJTool.prototype,"SGJTool");var UploadImageTool=function(){function t(){}return t.showChoose=function(e,n,i){void 0===i&&(i=null),t.mCall=e,t.mObj=n,t.loadingFun=i;var r=document.getElementById("fileInput_xy");r||(r=document.createElement("input"),r.type="file",r.accept="image/gif,image/jpeg,image/jpg,image/png,image/svg",r.capture&&(r.capture="capture"),r.style.zIndex="-999",r.style.position="absolute;",r.style.display="none",r.id="fileInput_xy",r.onchange=t.onSelectFile,document.body.appendChild(r)),t.mInit||(t.mInit=!0),r.click()},t.disposeFileInput=function(){var t=document.getElementById("fileInput_xy");t&&(document.body.removeChild(t),t.oncuechange=null)},t.onSelectFile=function(e){var n=document.getElementById("fileInput_xy"),i=n.files[0];if(i){var r=i.type;r||(r=t.mime[i.name.match(/\.([^\.]+)$/i)[1]]);var o=t.getUrlOf(i);t.tmpCreateImage(o,i)}},t.getUrlOf=function(t){return void 0!=window.URL?window.URL.createObjectURL(t):window.webkitURL.createObjectURL(t)},t.tmpCreateImage=function(e,n){t.loadingFun&&t.loadingFun();var i=document.createElement("img");i.onload=function(){EXIF.getData(n,function(){var e=EXIF.getTag(n,"Orientation"),r=new egret.RenderTexture,o=new egret.BitmapData(i),a=new egret.Texture;a.bitmapData=o;var s=new egret.Bitmap(a),l=new egret.DisplayObjectContainer;l.addChild(s);var h=e+"",u=s.width,c=s.height,p=Math.max(t.imageSize.y/c,t.imageSize.x/u);u*=p,c*=p,u=Math.round(u),c=Math.round(c),s.width=u,s.height=c;var d=Math.min(u,c),g=(u-d)/2,f=(c-d)/2,_=new egret.Rectangle(g,f,d,d);switch(h){case"3":s.rotation=180,s.x=u,s.y=c;break;case"6":s.rotation=90,s.x=c,_.x=f,_.y=g;break;case"8":s.rotation=-90,s.y=u,_.x=f,_.y=g}r.drawToTexture(l,_),t.mCall.apply(t.mObj,[r]),t.mCall=null,t.mObj=null,t.loadingFun=null,t.disposeFileInput()}),document.body.removeChild(i),i.onload=null},i.src=e,i.style.display="none",document.body.appendChild(i)},t.imageSize=new egret.Point(100,100),t.mime={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",bmp:"image/bmp"},t}();__reflect(UploadImageTool.prototype,"UploadImageTool");var VirtualLoadingCall=function(){function t(){}return t.start=function(e,n,i){void 0===i&&(i=2.2),t.mCall=e,t.mObj=n,EnterFrameCall.add(t.onRender,t),t.startTime=egret.getTimer(),this.estimatedTimeSecond=i},t.stop=function(){EnterFrameCall.del(t.onRender,t),t.mCall=null,t.mObj=null},t.onRender=function(){var e=Math.sqrt(t.estimatedTimeSecond*(egret.getTimer()-t.startTime));e>=99&&(e=99,t.stop()),t.mCall&&t.mCall.apply(t.mObj,[e])},t}();__reflect(VirtualLoadingCall.prototype,"VirtualLoadingCall");for(var __rect_XY=new egret.Rectangle,__point_XY=new egret.Point,__httpHeaderMap=[],__httpLoggerOn=!0,__soundIdMap={},__soundIdCounter=0,__shakeInfo,__htmlTextParser=new egret.HtmlTextParser,__wheelEvent=[],__clipboard,__helpMaskRect,__copyTextSource,__copyCompleteCall,__copyFailedcall,__helpDate=new Date,__helpLink,__tapSound="",__designConfig={designW:750,designH:1334,minH:1008},__formatRegs=[],i=0;100>i;i++)__formatRegs[i]=new RegExp("\\{"+i+"\\}","g");var __moveSwipeDic=[],__moveStartLocation=new egret.Point,__change={ary0:["","","","","","","","","",""],ary1:["","","",""],ary2:["","","",""],init:function(t){this.name=t+""},strrev:function(){for(var t=[],e=this.name.length;e>=0;e--)t.push(this.name[e]);return t.join("")},pri_ary:function(){for(var t=this.strrev(),e="",n="",i=-1,r=0;r<t.length;r++)if(r%4==0&&(i++,n=this.ary2[i]+n,e=""),"0"==t[r]){switch(r%4){case 0:break;case 1:case 2:case 3:"0"!=t[r-1]&&(e="")}n=e+n,e=""}else n=this.ary0[parseInt(t[r])]+this.ary1[r%4]+n;return 0==n.indexOf("")&&(n=n.substr(1)),n}};!egret.Capabilities.isMobile&&window&&document.addEventListener("mousewheel",function(t){var e=-1*t.wheelDelta,n=__wheelEvent[__wheelEvent.length-1];n&&n.call.apply(n.obj,[e])}),Date.prototype.format=function(t){var e={"Y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var ResizeCall=function(){function t(){}return t.init=function(t){},t.mInit=function(){this.inited||(this.inited=!0,Global.stage.addEventListener(egret.Event.RESIZE,t.onCall,t))},t.addCall=function(e,n){this.mInit(),t.mCalls.push({fun:e,obj:n})},t.del=function(e,n){for(var i=0;i<t.mCalls.length;i++){var r=t.mCalls[i];r.fun==e&&r.obj==n&&(t.mCalls.splice(i,1),i--)}},t.onCall=function(){for(var e=0;e<t.mCalls.length;e++){var n=t.mCalls[e].fun,i=t.mCalls[e].obj;n.apply(i)}},t.mCalls=[],t.inited=!1,t}();__reflect(ResizeCall.prototype,"ResizeCall");var Http=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.make=function(){return e.mPool.length>0?e.mPool.shift():new e},e.prototype.start=function(t,e,n,i,r,o){var a=this;this.url=t,r||(r=egret.URLLoaderDataFormat.TEXT),i||(i=egret.URLRequestMethod.GET),a.mCall=e,a.mObj=n,a.dataFormat=r;var s=new egret.URLRequest(t);if(s.method=i,__httpHeaderMap&&__httpHeaderMap.length>0)for(var l=0,h=__httpHeaderMap.length;h>l;l++){var u=__httpHeaderMap[l];s.requestHeaders.push(new egret.URLRequestHeader(u[0],u[1]))}o?(s.data=o,__httpLoggerOn&&-1==t.indexOf("/ping")&&trace("http send:"+t+"\n param:",o.variables)):__httpLoggerOn&&-1==t.indexOf("/ping")&&trace("http send:"+t+"\n no param"),a.load(s),a.addEventListener(egret.Event.COMPLETE,a.onComplete,a),a.addEventListener(egret.IOErrorEvent.IO_ERROR,a.onError,a)},e.prototype.onComplete=function(){__httpLoggerOn&&-1==this.url.indexOf("/ping")&&trace("http recieved:",this.data),this.mCall&&this.mCall.apply(this.mObj,[this.data]),this.collect()},e.prototype.onError=function(t){this.mCall&&this.mCall.apply(this.mObj,[null]),this.collect(),__httpLoggerOn&&-1==this.url.indexOf("/ping")&&trace("http failed")},e.prototype.collect=function(){this.mCall=null,this.mObj=null,this.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),this.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),egret.setTimeout(e.mPool.push,e.mPool,1,this)},e.mPool=[],e}(egret.URLLoader);__reflect(Http.prototype,"Http");var XYFontAnalyzer={isInMerged:!1,waitFonts:[],parsedFont:{},onLoadStart:function(t,e){return t.load(e,"text").then(function(n){var i;try{i=JSON.parse(n)}catch(r){i=n}if(-1!=e.url.indexOf("merge"))return XYFontAnalyzer.isInMerged=!0,XYFontAnalyzer.waitFonts.push(e.name),i;var o;o="string"==typeof i?XYFontAnalyzer.__fontGetTexturePath__(e.url,i):XYFontAnalyzer.__getRelativePath__(e.url,i.file);var a=t.resourceConfig.getResource(RES.nameSelector(o));return a||(a={name:o,url:o,type:"image",root:e.root}),t.load(a).then(function(e){var n=new egret.BitmapFont(e,i);return n.$resourceInfo=a,t.save(a,e),n},function(e){throw t.remove(a),e})})},onRemoveStart:function(t,e){if(!XYFontAnalyzer.isInMerged){var n=t.get(e),i=n.$resourceInfo;t.unload(i)}},__getRelativePath__:function(t,e){if(-1!=e.indexOf("://"))return e;t=t.split("\\").join("/");var n=t.match(/#.*|\?.*/),i="";n&&(i=n[0]);var r=t.lastIndexOf("/");return t=-1!=r?t.substring(0,r+1)+e:e,t+i},__fontGetTexturePath__:function(t,e){var n="",i=e.split("\n"),r=i[2],o=r.indexOf('file="');-1!=o&&(r=r.substring(o+6),o=r.indexOf('"'),n=r.substring(0,o)),t=t.split("\\").join("/");var o=t.lastIndexOf("/");return t=-1!=o?t.substring(0,o+1)+n:n}};egret.StageText.prototype.setElementStyle=function(t,e){("height"==t||"lineHeight"==t)&&(e="100%"),this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e)
},egret.TextField.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",n=0,i=t.length;i>n;n++)switch(t.charAt(n)){case"\n":e+="\n";break;case"\r":break;default:e+=""}return e}return t},egret.InputController.prototype.blurHandler=function(t){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new egret.FocusEvent(egret.FocusEvent.FOCUS_OUT,!0))),Global.onEvent(EventEnum.INPUT_ON_BLUR)},egret.InputController.prototype.focusHandler=function(t){this._isFocus||(this._isFocus=!0,t.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new egret.FocusEvent(egret.FocusEvent.FOCUS_IN,!0))),Global.onEvent(EventEnum.INPUT_ON_FOCUS)},egret.HtmlTextParser.prototype.parse=function(t){null==t&&(t=""),this.stackArray=[],this.resutlArr=[];for(var e=0,n=t.length;n>e;){var i=t.indexOf("<",e);if(0>i)this.addToResultArr(t.substring(e)),e=n;else{var r=t.indexOf(">",i);if(-1==r){this.addToResultArr(t.substring(e,e+1)),e+=1;continue}this.addToResultArr(t.substring(e,i)),-1==r?(egret.$error(1038),r=i):"/"==t.charAt(i+1)?this.stackArray.pop():this.addToArray(t.substring(i+1,r)),e=r+1}}return this.resutlArr};var __$imageLoadFailedDic$__={};egret.web.WebImageLoader.prototype.onLoadError=function(t){var e=this,n=this.getImage(t);if(n){var i=egret.web.WebImageLoader,r=this,o=__$imageLoadFailedDic$__;o[n.src]?o[n.src]++:o[n.src]=1;var a=RES.queue?RES.queue.maxRetryTimes:3;o[n.src]>=a?(BadJSReporter.addTextError(""+n.src+", "),i.__$default_image_bitmapdata$__?(this.data=i.__$default_image_bitmapdata$__,window.setTimeout(function(){r.dispatchEventWith(egret.Event.COMPLETE)},0)):egret.BitmapData.create("base64","iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAAA1BMVEX/WQBym+8qAAAACklEQVQI12NAAwAAEAABtKqAHwAAAABJRU5ErkJggg==",function(t){i.__$default_image_bitmapdata$__=t,e.data=i.__$default_image_bitmapdata$__,window.setTimeout(function(){r.dispatchEventWith(egret.Event.COMPLETE)},0)})):this.dispatchIOError(n.src)}};

//js/puremvcMulticore.min_36c2a8f2.js
var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},puremvc;!function(t){"use strict";var e=function(){function e(){this.multitonKey=null}return e.prototype.initializeNotifier=function(t){this.multitonKey=t},e.prototype.sendNotification=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.facade()&&this.facade().sendNotification(t,e,i)},e.prototype.facade=function(){if(null===this.multitonKey)throw Error(e.MULTITON_MSG);return t.Facade.getInstance(this.multitonKey)},e.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",e}();t.Notifier=e,__reflect(e.prototype,"puremvc.Notifier",["puremvc.INotifier"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function t(t,e){this.notify=null,this.context=null,this.setNotifyMethod(t),this.setNotifyContext(e)}return t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.setNotifyMethod=function(t){this.notify=t},t.prototype.getNotifyContext=function(){return this.context},t.prototype.setNotifyContext=function(t){this.context=t},t.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},t.prototype.compareNotifyContext=function(t){return t===this.context},t}();t.Observer=e,__reflect(e.prototype,"puremvc.Observer",["puremvc.IObserver"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(t){if(this.mediatorMap=null,this.observerMap=null,this.multitonKey=null,e.instanceMap[t])throw Error(e.MULTITON_MSG);e.instanceMap[t]=this,this.multitonKey=t,this.mediatorMap={},this.observerMap={},this.initializeView()}return e.prototype.initializeView=function(){},e.prototype.registerObserver=function(t,e){var i=this.observerMap[t];i?i.push(e):this.observerMap[t]=[e]},e.prototype.removeObserver=function(t,e){for(var i=this.observerMap[t],o=i.length;o--;){var n=i[o];if(n.compareNotifyContext(e)){i.splice(o,1);break}}0==i.length&&delete this.observerMap[t]},e.prototype.notifyObservers=function(t){var e=t.getName(),i=this.observerMap[e];if(i)for(var o=i.slice(0),n=o.length,r=0;n>r;r++){var a=o[r];a.notifyObserver(t)}},e.prototype.registerMediator=function(e){var i=e.getMediatorName();if(!this.mediatorMap[i]){e.initializeNotifier(this.multitonKey),this.mediatorMap[i]=e;var o=e.listNotificationInterests(),n=o.length;if(n>0)for(var r=new t.Observer(e.handleNotification,e),a=0;n>a;a++)this.registerObserver(o[a],r);e.onRegister()}},e.prototype.retrieveMediator=function(t){return this.mediatorMap[t]||null},e.prototype.removeMediator=function(t){var e=this.mediatorMap[t];if(!e)return null;for(var i=e.listNotificationInterests(),o=i.length;o--;)this.removeObserver(i[o],e);return delete this.mediatorMap[t],e.onRemove(),e},e.prototype.hasMediator=function(t){return null!=this.mediatorMap[t]},e.getInstance=function(t){return e.instanceMap[t]||(e.instanceMap[t]=new e(t)),e.instanceMap[t]},e.removeView=function(t){delete e.instanceMap[t]},e.MULTITON_MSG="View instance for this multiton key already constructed!",e.instanceMap={},e}();t.View=e,__reflect(e.prototype,"puremvc.View",["puremvc.IView"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(t){if(this.view=null,this.commandMap=null,this.multitonKey=null,e.instanceMap[t])throw Error(e.MULTITON_MSG);e.instanceMap[t]=this,this.multitonKey=t,this.commandMap={},this.initializeController()}return e.prototype.initializeController=function(){this.view=t.View.getInstance(this.multitonKey)},e.prototype.executeCommand=function(t){var e=this.commandMap[t.getName()];if(e){var i=new e;i.initializeNotifier(this.multitonKey),i.execute(t)}},e.prototype.registerCommand=function(e,i){this.commandMap[e]||this.view.registerObserver(e,new t.Observer(this.executeCommand,this)),this.commandMap[e]=i},e.prototype.hasCommand=function(t){return null!=this.commandMap[t]},e.prototype.removeCommand=function(t){this.hasCommand(t)&&(this.view.removeObserver(t,this),delete this.commandMap[t])},e.getInstance=function(t){return e.instanceMap[t]||(e.instanceMap[t]=new e(t)),e.instanceMap[t]},e.removeController=function(t){delete e.instanceMap[t]},e.MULTITON_MSG="Controller instance for this multiton key already constructed!",e.instanceMap={},e}();t.Controller=e,__reflect(e.prototype,"puremvc.Controller",["puremvc.IController"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function t(e){if(this.proxyMap=null,this.multitonKey=null,t.instanceMap[e])throw Error(t.MULTITON_MSG);t.instanceMap[e]=this,this.multitonKey=e,this.proxyMap={},this.initializeModel()}return t.prototype.initializeModel=function(){},t.prototype.registerProxy=function(t){t.initializeNotifier(this.multitonKey),this.proxyMap[t.getProxyName()]=t,t.onRegister()},t.prototype.removeProxy=function(t){var e=this.proxyMap[t];return e&&(delete this.proxyMap[t],e.onRemove()),e},t.prototype.retrieveProxy=function(t){return this.proxyMap[t]||null},t.prototype.hasProxy=function(t){return null!=this.proxyMap[t]},t.getInstance=function(e){return t.instanceMap[e]||(t.instanceMap[e]=new t(e)),t.instanceMap[e]},t.removeModel=function(e){delete t.instanceMap[e]},t.MULTITON_MSG="Model instance for this multiton key already constructed!",t.instanceMap={},t}();t.Model=e,__reflect(e.prototype,"puremvc.Model",["puremvc.IModel"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function t(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.name=null,this.body=null,this.type=null,this.name=t,this.body=e,this.type=i}return t.prototype.getName=function(){return this.name},t.prototype.setBody=function(t){this.body=t},t.prototype.getBody=function(){return this.body},t.prototype.setType=function(t){this.type=t},t.prototype.getType=function(){return this.type},t.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.getBody()?"null":this.getBody().toString()),t+="\nType:"+(null==this.getType()?"null":this.getType())},t}();t.Notification=e,__reflect(e.prototype,"puremvc.Notification",["puremvc.INotification"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(t){if(this.model=null,this.view=null,this.controller=null,this.multitonKey=null,e.instanceMap[t])throw Error(e.MULTITON_MSG);this.initializeNotifier(t),e.instanceMap[t]=this,this.initializeFacade()}return e.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},e.prototype.initializeModel=function(){this.model||(this.model=t.Model.getInstance(this.multitonKey))},e.prototype.initializeController=function(){this.controller||(this.controller=t.Controller.getInstance(this.multitonKey))},e.prototype.initializeView=function(){this.view||(this.view=t.View.getInstance(this.multitonKey))},e.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},e.prototype.removeCommand=function(t){this.controller.removeCommand(t)},e.prototype.hasCommand=function(t){return this.controller.hasCommand(t)},e.prototype.registerProxy=function(t){this.model.registerProxy(t)},e.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},e.prototype.removeProxy=function(t){var e;return this.model&&(e=this.model.removeProxy(t)),e},e.prototype.hasProxy=function(t){return this.model.hasProxy(t)},e.prototype.registerMediator=function(t){this.view&&this.view.registerMediator(t)},e.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},e.prototype.removeMediator=function(t){var e;return this.view&&(e=this.view.removeMediator(t)),e},e.prototype.hasMediator=function(t){return this.view.hasMediator(t)},e.prototype.notifyObservers=function(t){this.view&&this.view.notifyObservers(t)},e.prototype.sendNotification=function(e,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.notifyObservers(new t.Notification(e,i,o))},e.prototype.initializeNotifier=function(t){this.multitonKey=t},e.getInstance=function(t){return e.instanceMap[t]||(e.instanceMap[t]=new e(t)),e.instanceMap[t]},e.hasCore=function(t){return e.instanceMap[t]?!0:!1},e.removeCore=function(i){e.instanceMap[i]&&(t.Model.removeModel(i),t.View.removeView(i),t.Controller.removeController(i),delete e.instanceMap[i])},e.MULTITON_MSG="Facade instance for this multiton key already constructed!",e.instanceMap={},e}();t.Facade=e,__reflect(e.prototype,"puremvc.Facade",["puremvc.IFacade","puremvc.INotifier"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(){var e=t.call(this)||this;return e.subCommands=null,e.subCommands=new Array,e.initializeMacroCommand(),e}return __extends(e,t),e.prototype.initializeMacroCommand=function(){},e.prototype.addSubCommand=function(t){this.subCommands.push(t)},e.prototype.execute=function(t){for(var e=this.subCommands.slice(0),i=this.subCommands.length,o=0;i>o;o++){var n=e[o],r=new n;r.initializeNotifier(this.multitonKey),r.execute(t)}this.subCommands.splice(0)},e}(t.Notifier);t.MacroCommand=e,__reflect(e.prototype,"puremvc.MacroCommand",["puremvc.ICommand"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){},e}(t.Notifier);t.SimpleCommand=e,__reflect(e.prototype,"puremvc.SimpleCommand",["puremvc.ICommand"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(i,o){void 0===i&&(i=null),void 0===o&&(o=null);var n=t.call(this)||this;return n.mediatorName=null,n.viewComponent=null,n.mediatorName=null!=i?i:e.NAME,n.viewComponent=o,n}return __extends(e,t),e.prototype.getMediatorName=function(){return this.mediatorName},e.prototype.getViewComponent=function(){return this.viewComponent},e.prototype.setViewComponent=function(t){this.viewComponent=t},e.prototype.listNotificationInterests=function(){return new Array},e.prototype.handleNotification=function(t){},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.NAME="Mediator",e}(t.Notifier);t.Mediator=e,__reflect(e.prototype,"puremvc.Mediator",["puremvc.IMediator"])}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(i,o){void 0===i&&(i=null),void 0===o&&(o=null);var n=t.call(this)||this;return n.proxyName=null,n.data=null,n.proxyName=null!=i?i:e.NAME,null!=o&&n.setData(o),n}return __extends(e,t),e.prototype.getProxyName=function(){return this.proxyName},e.prototype.setData=function(t){this.data=t},e.prototype.getData=function(){return this.data},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.NAME="Proxy",e}(t.Notifier);t.Proxy=e,__reflect(e.prototype,"puremvc.Proxy",["puremvc.IProxy"])}(puremvc||(puremvc={}));

//js/jszip.min_dee3e14a.js
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof __global?e=__global:"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}(function(){return function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){var d="function"==typeof require&&require;if(!o&&d)return d(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,a,s,o,d,l="",h=0;h<t.length;)e=t.charCodeAt(h++),r=t.charCodeAt(h++),i=t.charCodeAt(h++),a=e>>2,s=(3&e)<<4|r>>4,o=(15&r)<<2|i>>6,d=63&i,isNaN(r)?o=d=64:isNaN(i)&&(d=64),l=l+n.charAt(a)+n.charAt(s)+n.charAt(o)+n.charAt(d);return l},r.decode=function(t){var e,r,i,a,s,o,d,l="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)a=n.indexOf(t.charAt(h++)),s=n.indexOf(t.charAt(h++)),o=n.indexOf(t.charAt(h++)),d=n.indexOf(t.charAt(h++)),e=a<<2|s>>4,r=(15&s)<<4|o>>2,i=(3&o)<<6|d,l+=String.fromCharCode(e),64!=o&&(l+=String.fromCharCode(r)),64!=d&&(l+=String.fromCharCode(i));return l}},{}],2:[function(t,e){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=r},{}],3:[function(t,e,r){"use strict";r.STORE={magic:"\x00\x00",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},r.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e){"use strict";var r=t("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var i="string"!==r.getTypeOf(t);"undefined"==typeof e&&(e=0);var a=0,s=0,o=0;e=-1^e;for(var d=0,l=t.length;l>d;d++)o=i?t[d]:t.charCodeAt(d),s=255&(e^o),a=n[s],e=e>>>8^a;return-1^e}},{"./utils":21}],5:[function(t,e){"use strict";function r(){this.data=null,this.length=0,this.index=0}var n=t("./utils");r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=r},{"./utils":21}],6:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],7:[function(t,e,r){"use strict";var n=t("./utils");r.string2binary=function(t){return n.string2binary(t)},r.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},r.uint8Array2String=function(t){return n.transformTo("string",t)},r.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},r.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},r.transformTo=function(t,e){return n.transformTo(t,e)},r.getTypeOf=function(t){return n.getTypeOf(t)},r.checkSupport=function(t){return n.checkSupport(t)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(t){return n.pretty(t)},r.findCompression=function(t){return n.findCompression(t)},r.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":21}],8:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\x00",r.compress=function(t,e){return i.deflateRaw(t,{level:e.level||-1})},r.uncompress=function(t){return i.inflateRaw(t)}},{pako:24}],9:[function(t,e){"use strict";function r(t,e){return this instanceof r?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new r(t,e)}var n=t("./base64");r.prototype=t("./object"),r.prototype.load=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.utils=t("./deprecatedPublicUtils"),r.base64={encode:function(t){return n.encode(t)},decode:function(t){return n.decode(t)}},r.compressions=t("./compressions"),e.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e){"use strict";var r=t("./base64"),n=t("./zipEntries");e.exports=function(t,e){var i,a,s,o;for(e=e||{},e.base64&&(t=r.decode(t)),a=new n(t,e),i=a.files,s=0;s<i.length;s++)o=i[s],this.file(o.fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileComment.length?o.fileComment:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e){(function(t){"use strict";e.exports=function(e,r){return new t(e,r)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e){"use strict";function r(t){this.data=t,this.length=this.data.length,this.index=0}var n=t("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./uint8ArrayReader":18}],13:[function(t,e){"use strict";var r=t("./support"),n=t("./utils"),i=t("./crc32"),a=t("./signature"),s=t("./defaults"),o=t("./base64"),d=t("./compressions"),l=t("./compressedObject"),h=t("./nodeBuffer"),f=t("./utf8"),u=t("./stringWriter"),c=t("./uint8ArrayWriter"),p=function(t){if(t._data instanceof l&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===n.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},_=function(t){var e=p(t),i=n.getTypeOf(e);return"string"===i?!t.options.binary&&r.nodebuffer?h(e,"utf-8"):t.asBinary():e},m=function(t){var e=p(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=o.decode(e)),e=t&&this.options.binary?B.utf8decode(e):n.transformTo("string",e),t||this.options.binary||(e=n.transformTo("string",B.utf8encode(e))),e)},g=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};g.prototype={asText:function(){return m.call(this,!0)},asBinary:function(){return m.call(this,!1)},asNodeBuffer:function(){var t=_(this);return n.transformTo("nodebuffer",t)},asUint8Array:function(){var t=_(this);return n.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(t,e){var r,n="";for(r=0;e>r;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},w=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof r[e]&&(r[e]=arguments[t][e]);return r},v=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=w(t,s),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},y=function(t,e,r){var i,a=n.getTypeOf(e);if(r=v(r),"string"==typeof r.unixPermissions&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&16384&r.unixPermissions&&(r.dir=!0),r.dosPermissions&&16&r.dosPermissions&&(r.dir=!0),r.dir&&(t=x(t)),r.createFolders&&(i=k(t))&&z.call(this,i,!0),r.dir||null===e||"undefined"==typeof e)r.base64=!1,r.binary=!1,e=null,a=null;else if("string"===a)r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(e=n.string2binary(e));else{if(r.base64=!1,r.binary=!0,!(a||e instanceof l))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===a&&(e=n.transformTo("uint8array",e))}var s=new g(t,e,r);return this.files[t]=s,s},k=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},x=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},z=function(t,e){return e="undefined"!=typeof e?e:!1,t=x(t),this.files[t]||y.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},C=function(t,e,r){var a,s=new l;return t._data instanceof l?(s.uncompressedSize=t._data.uncompressedSize,s.crc32=t._data.crc32,0===s.uncompressedSize||t.dir?(e=d.STORE,s.compressedContent="",s.crc32=0):t._data.compressionMethod===e.magic?s.compressedContent=t._data.getCompressedContent():(a=t._data.getContent(),s.compressedContent=e.compress(n.transformTo(e.compressInputType,a),r))):(a=_(t),(!a||0===a.length||t.dir)&&(e=d.STORE,a=""),s.uncompressedSize=a.length,s.crc32=i(a),s.compressedContent=e.compress(n.transformTo(e.compressInputType,a),r)),s.compressedSize=s.compressedContent.length,s.compressionMethod=e.magic,s},A=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16},E=function(t){return 63&(t||0)},S=function(t,e,r,s,o){var d,l,h,u,c=(r.compressedContent,n.transformTo("string",f.utf8encode(e.name))),p=e.comment||"",_=n.transformTo("string",f.utf8encode(p)),m=c.length!==e.name.length,g=_.length!==p.length,w=e.options,v="",y="",k="";h=e._initialMetadata.dir!==e.dir?e.dir:w.dir,u=e._initialMetadata.date!==e.date?e.date:w.date;var x=0,z=0;h&&(x|=16),"UNIX"===o?(z=798,x|=A(e.unixPermissions,h)):(z=20,x|=E(e.dosPermissions,h)),d=u.getHours(),d<<=6,d|=u.getMinutes(),d<<=5,d|=u.getSeconds()/2,l=u.getFullYear()-1980,l<<=4,l|=u.getMonth()+1,l<<=5,l|=u.getDate(),m&&(y=b(1,1)+b(i(c),4)+c,v+="up"+b(y.length,2)+y),g&&(k=b(1,1)+b(this.crc32(_),4)+_,v+="uc"+b(k.length,2)+k);var C="";C+="\n\x00",C+=m||g?"\x00\b":"\x00\x00",C+=r.compressionMethod,C+=b(d,2),C+=b(l,2),C+=b(r.crc32,4),C+=b(r.compressedSize,4),C+=b(r.uncompressedSize,4),C+=b(c.length,2),C+=b(v.length,2);var S=a.LOCAL_FILE_HEADER+C+c+v,B=a.CENTRAL_FILE_HEADER+b(z,2)+C+b(_.length,2)+"\x00\x00\x00\x00"+b(x,4)+b(s,4)+c+v+_;return{fileRecord:S,dirRecord:B,compressedObject:r}},B={load:function(){throw new Error("Load method is not defined. Is the file jszip.json-load.js included ?")},filter:function(t){var e,r,n,i,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],i=new g(n.name,n._data,w(n.options)),r=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(r,i)&&a.push(i));return a},file:function(t,e,r){if(1===arguments.length){if(n.isRegExp(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}return this.filter(function(e,r){return!r.dir&&e===t})[0]||null}return t=this.root+t,y.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(n.isRegExp(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,r=z.call(this,e),i=this.clone();return i.root=r.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){t=w(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),n.checkSupport(t.type),("darwin"===t.platform||"freebsd"===t.platform||"linux"===t.platform||"sunos"===t.platform)&&(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,r,i=[],s=0,l=0,h=n.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var f in this.files)if(this.files.hasOwnProperty(f)){var p=this.files[f],_=p.options.compression||t.compression.toUpperCase(),m=d[_];if(!m)throw new Error(_+" is not a valid compression method !");var g=p.options.compressionOptions||t.compressionOptions||{},v=C.call(this,p,m,g),y=S.call(this,f,p,v,s,t.platform);s+=y.fileRecord.length+v.compressedSize,l+=y.dirRecord.length,i.push(y)}var k="";k=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+b(i.length,2)+b(i.length,2)+b(l,4)+b(s,4)+b(h.length,2)+h;var x=t.type.toLowerCase();for(e="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new c(s+l+k.length):new u(s+l+k.length),r=0;r<i.length;r++)e.append(i[r].fileRecord),e.append(i[r].compressedObject.compressedContent);for(r=0;r<i.length;r++)e.append(i[r].dirRecord);e.append(k);var z=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(t.type.toLowerCase(),z);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",z),t.mimeType);case"base64":return t.base64?o.encode(z):z;default:return z}},crc32:function(t,e){return i(t,e)},utf8encode:function(t){return n.transformTo("string",f.utf8encode(t))},utf8decode:function(t){return f.utf8decode(t)}};e.exports=B},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e){"use strict";function r(t,e){this.data=t,e||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=t("./dataReader"),i=t("./utils");r.prototype=new n,r.prototype.byteAt=function(t){return this.data.charCodeAt(t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5,"./utils":21}],16:[function(t,e){"use strict";var r=t("./utils"),n=function(){this.data=[]};n.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=n},{"./utils":21}],17:[function(t,e,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var e=new ArrayBuffer(0);try{r.blob=0===new Blob([e],{type:"application/zip"}).size}catch(n){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,a=new i;a.append(e),r.blob=0===a.getBlob("application/zip").size}catch(n){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e){"use strict";function r(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var n=t("./dataReader");r.prototype=new n,r.prototype.byteAt=function(t){return this.data[t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a;return-1},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5}],19:[function(t,e){"use strict";var r=t("./utils"),n=function(t){this.data=new Uint8Array(t),this.index=0};n.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=n},{"./utils":21}],20:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),a=t("./nodeBuffer"),s=new Array(256),o=0;256>o;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;s[254]=s[254]=1;var d=function(t){var e,r,n,a,s,o=t.length,d=0;for(a=0;o>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),d+=128>r?1:2048>r?2:65536>r?3:4;for(e=i.uint8array?new Uint8Array(d):new Array(d),s=0,a=0;d>s;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?e[s++]=r:2048>r?(e[s++]=192|r>>>6,e[s++]=128|63&r):65536>r?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},l=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+s[t[r]]>e?r:e},h=function(t){var e,r,i,a,o=t.length,d=new Array(2*o);for(r=0,e=0;o>e;)if(i=t[e++],128>i)d[r++]=i;else if(a=s[i],a>4)d[r++]=65533,e+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&o>e;)i=i<<6|63&t[e++],a--;a>1?d[r++]=65533:65536>i?d[r++]=i:(i-=65536,d[r++]=55296|i>>10&1023,d[r++]=56320|1023&i)}return d.length!==r&&(d.subarray?d=d.subarray(0,r):d.length=r),n.applyFromCharCode(d)};r.utf8encode=function(t){return i.nodebuffer?a(t,"utf-8"):d(t)},r.utf8decode=function(t){if(i.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(i.uint8array?"uint8array":"array",t);for(var e=[],r=0,a=t.length,s=65536;a>r;){var o=l(t,Math.min(r+s,a));e.push(h(i.uint8array?t.subarray(r,o):t.slice(r,o))),r=o}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,r){"use strict";function n(t){return t}function i(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function a(t){var e=65536,n=[],i=t.length,a=r.getTypeOf(t),s=0,o=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0))}}catch(d){o=!1}if(!o){for(var h="",f=0;f<t.length;f++)h+=String.fromCharCode(t[f]);return h}for(;i>s&&e>1;)try{n.push("array"===a||"nodebuffer"===a?String.fromCharCode.apply(null,t.slice(s,Math.min(s+e,i))):String.fromCharCode.apply(null,t.subarray(s,Math.min(s+e,i)))),s+=e}catch(d){e=Math.floor(e/2)}return n.join("")}function s(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var o=t("./support"),d=t("./compressions"),l=t("./nodeBuffer");r.string2binary=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},r.arrayBuffer2Blob=function(t,e){r.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,a=new i;return a.append(t),a.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var h={};h.string={string:n,array:function(t){return i(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return i(t,new Uint8Array(t.length))},nodebuffer:function(t){return i(t,l(t.length))}},h.array={string:a,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(t)}},h.arraybuffer={string:function(t){return a(new Uint8Array(t))},array:function(t){return s(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(new Uint8Array(t))}},h.uint8array={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return l(t)}},h.nodebuffer={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:n},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e),i=h[n][t](e);return i},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&l.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){var e=o[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)e=t.charCodeAt(r),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},r.findCompression=function(t){for(var e in d)if(d.hasOwnProperty(e)&&d[e].magic===t)return d[e];return null},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e){"use strict";function r(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var n=t("./stringReader"),i=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),s=t("./utils"),o=t("./signature"),d=t("./zipEntry"),l=t("./support"),h=t("./object");r.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(e)+", expected "+s.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=h.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44,i=0;n>i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===o.CENTRAL_FILE_HEADER;)t=new d({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(o.LOCAL_FILE_HEADER),e=!1}catch(r){}throw new Error(e?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip.json/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=s.getTypeOf(t);this.reader="string"!==e||l.uint8array?"nodebuffer"===e?new i(t):new a(s.transformTo("uint8array",t)):new n(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var n=t("./stringReader"),i=t("./utils"),a=t("./compressedObject"),s=t("./object"),o=0,d=3;r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,r){return function(){var n=t.index;t.setIndex(e);var i=t.readData(r);return t.setIndex(n),i}},prepareContent:function(t,e,r,n,a){return function(){var t=i.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==a)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=i.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,t===o&&(this.dosPermissions=63&this.externalFileAttributes),t===d&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),r=t.readInt(2),n=t.readString(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=s.utf8decode(this.fileName),this.fileComment=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new n(t.value);
return 1!==e.readInt(1)?null:s.crc32(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:s.crc32(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readString(t.length-5))}return null}},e.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e){"use strict";var r=t("./lib/utils/common").assign,n=t("./lib/deflate"),i=t("./lib/inflate"),a=t("./lib/zlib/constants"),s={};r(s,n,i,a),e.exports=s},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,r){"use strict";function n(t,e){var r=new b(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}function a(t,e){return e=e||{},e.gzip=!0,n(t,e)}var s=t("./zlib/deflate.js"),o=t("./utils/common"),d=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),f=0,u=4,c=0,p=1,_=-1,m=0,g=8,b=function(t){this.options=o.assign({level:_,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==c)throw new Error(l[r]);e.header&&s.deflateSetHeader(this.strm,e.header)};b.prototype.push=function(t,e){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?u:f,i.input="string"==typeof t?d.string2buf(t):t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(a),i.next_out=0,i.avail_out=a),r=s.deflate(i,n),r!==p&&r!==c)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&n===u)&&this.onData("string"===this.options.to?d.buf2binstring(o.shrinkBuf(i.output,i.next_out)):o.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&r!==p);return n===u?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===c&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=b,r.deflate=n,r.deflateRaw=i,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,r){"use strict";function n(t,e){var r=new u(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}var a=t("./zlib/inflate.js"),s=t("./utils/common"),o=t("./utils/strings"),d=t("./zlib/constants"),l=t("./zlib/messages"),h=t("./zlib/zstream"),f=t("./zlib/gzheader"),u=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==d.Z_OK)throw new Error(l[r]);this.header=new f,a.inflateGetHeader(this.strm,this.header)};u.prototype.push=function(t,e){var r,n,i,l,h,f=this.strm,u=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?d.Z_FINISH:d.Z_NO_FLUSH,f.input="string"==typeof t?o.binstring2buf(t):t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(u),f.next_out=0,f.avail_out=u),r=a.inflate(f,d.Z_NO_FLUSH),r!==d.Z_STREAM_END&&r!==d.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0===f.avail_out||r===d.Z_STREAM_END||0===f.avail_in&&n===d.Z_FINISH)&&("string"===this.options.to?(i=o.utf8border(f.output,f.next_out),l=f.next_out-i,h=o.buf2string(f.output,i),f.next_out=l,f.avail_out=u-l,l&&s.arraySet(f.output,f.output,i,l,0),this.onData(h)):this.onData(s.shrinkBuf(f.output,f.next_out)))}while(f.avail_in>0&&r!==d.Z_STREAM_END);return r===d.Z_STREAM_END&&(n=d.Z_FINISH),n===d.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d.Z_OK):!0},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===d.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=u,r.inflate=n,r.inflateRaw=i,r.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var a=0;n>a;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;r>e;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;r>e;e++)a=t[e],s.set(a,i),i+=a.length;return s}},a={arraySet:function(t,e,r,n,i){for(var a=0;n>a;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],28:[function(t,e,r){"use strict";function n(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;e>n;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(o){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){s=!1}for(var d=new i.Buf8(256),l=0;256>l;l++)d[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;d[254]=d[254]=1,r.string2buf=function(t){var e,r,n,a,s,o=t.length,d=0;for(a=0;o>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),d+=128>r?1:2048>r?2:65536>r?3:4;for(e=new i.Buf8(d),s=0,a=0;d>s;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?e[s++]=r:2048>r?(e[s++]=192|r>>>6,e[s++]=128|63&r):65536>r?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;n>r;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,a,s,o=e||t.length,l=new Array(2*o);for(i=0,r=0;o>r;)if(a=t[r++],128>a)l[i++]=a;else if(s=d[a],s>4)l[i++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&o>r;)a=a<<6|63&t[r++],s--;s>1?l[i++]=65533:65536>a?l[i++]=a:(a-=65536,l[i++]=55296|a>>10&1023,l[i++]=56320|1023&a)}return n(l,i)},r.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+d[t[r]]>e?r:e}},{"./common":27}],29:[function(t,e){"use strict";function r(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0}e.exports=r},{}],30:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e){"use strict";function r(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,n){var a=i,s=n+r;t=-1^t;for(var o=n;s>o;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}var i=r();e.exports=n},{}],32:[function(t,e,r){"use strict";function n(t,e){return t.msg=O[e],e}function i(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(S.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function o(t,e){B._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function h(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,S.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=I(t.adler,e,i,r):2===t.state.wrap&&(t.adler=T(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,d=t.strstart>t.w_size-le?t.strstart-(t.w_size-le):0,l=t.window,h=t.w_mask,f=t.prev,u=t.strstart+de,c=l[a+s-1],p=l[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do if(r=e,l[r+s]===p&&l[r+s-1]===c&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do;while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&u>a);if(n=de-(u-a),a=u-de,n>s){if(t.match_start=e,s=n,n>=o)break;c=l[a+s-1],p=l[a+s]}}while((e=f[e&h])>d&&0!==--i);return s<=t.lookahead?s:t.lookahead}function u(t){var e,r,n,i,a,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-le)){S.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--r);r=s,e=r;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--r);i+=s}if(0===t.strm.avail_in)break;if(r=h(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=oe)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+oe-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<oe)););}while(t.lookahead<le&&0!==t.strm.avail_in)}function c(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(u(t),0===t.lookahead&&e===R)return be;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return be;if(t.strstart-t.block_start>=t.w_size-le&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=0,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?be:be}function p(t,e){for(var r,n;;){if(t.lookahead<le){if(u(t),t.lookahead<le&&e===R)return be;if(0===t.lookahead)break}if(r=0,t.lookahead>=oe&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-le&&(t.match_length=f(t,r)),t.match_length>=oe)if(n=B._tr_tally(t,t.strstart-t.match_start,t.match_length-oe),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=oe){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=t.strstart<oe-1?t.strstart:oe-1,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function _(t,e){for(var r,n,i;;){if(t.lookahead<le){if(u(t),t.lookahead<le&&e===R)return be;if(0===t.lookahead)break}if(r=0,t.lookahead>=oe&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=oe-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-le&&(t.match_length=f(t,r),t.match_length<=5&&(t.strategy===X||t.match_length===oe&&t.strstart-t.match_start>4096)&&(t.match_length=oe-1)),t.prev_length>=oe&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-oe,n=B._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-oe),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=oe-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return be}else if(t.match_available){if(n=B._tr_tally(t,0,t.window[t.strstart-1]),n&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return be}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=B._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<oe-1?t.strstart:oe-1,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function m(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=de){if(u(t),t.lookahead<=de&&e===R)return be;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=oe&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+de;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&a>i);t.match_length=de-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=oe?(r=B._tr_tally(t,1,t.match_length-oe),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=0,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function g(t,e){for(var r;;){if(0===t.lookahead&&(u(t),0===t.lookahead)){if(e===R)return be;break}if(t.match_length=0,r=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=0,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function b(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=oe-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=G,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*ae),this.dyn_dtree=new S.Buf16(2*(2*ne+1)),this.bl_tree=new S.Buf16(2*(2*ie+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(se+1),this.heap=new S.Buf16(2*re+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*re+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?fe:me,t.adler=2===e.wrap?0:1,e.last_flush=R,B._tr_init(e),F):n(t,P)}function y(t){var e=v(t);return e===F&&b(t.state),e}function k(t,e){return t&&t.state?2!==t.state.wrap?P:(t.state.gzhead=e,F):P}function x(t,e,r,i,a,s){if(!t)return P;var o=1;if(e===H&&(e=6),0>i?(o=0,i=-i):i>15&&(o=2,i-=16),1>a||a>J||r!==G||8>i||i>15||0>e||e>9||0>s||s>Y)return n(t,P);8===i&&(i=9);var d=new w;return t.state=d,d.strm=t,d.wrap=o,d.gzhead=null,d.w_bits=i,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+oe-1)/oe),d.window=new S.Buf8(2*d.w_size),d.head=new S.Buf16(d.hash_size),d.prev=new S.Buf16(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new S.Buf8(d.pending_buf_size),d.d_buf=d.lit_bufsize>>1,d.l_buf=3*d.lit_bufsize,d.level=e,d.strategy=s,d.method=r,y(t)}function z(t,e){return x(t,e,G,Q,$,W)}function C(t,e){var r,o,h,f;if(!t||!t.state||e>U||0>e)return t?n(t,P):P;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===ge&&e!==N)return n(t,0===t.avail_out?j:P);if(o.strm=t,r=o.last_flush,o.last_flush=e,o.status===fe)if(2===o.wrap)t.adler=0,d(o,31),d(o,139),d(o,8),o.gzhead?(d(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),d(o,255&o.gzhead.time),d(o,o.gzhead.time>>8&255),d(o,o.gzhead.time>>16&255),d(o,o.gzhead.time>>24&255),d(o,9===o.level?2:o.strategy>=K||o.level<2?4:0),d(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(d(o,255&o.gzhead.extra.length),d(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=T(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ue):(d(o,0),d(o,0),d(o,0),d(o,0),d(o,0),d(o,9===o.level?2:o.strategy>=K||o.level<2?4:0),d(o,ke),o.status=me);else{var u=G+(o.w_bits-8<<4)<<8,c=-1;c=o.strategy>=K||o.level<2?0:o.level<6?1:6===o.level?2:3,u|=c<<6,0!==o.strstart&&(u|=he),u+=31-u%31,o.status=me,l(o,u),0!==o.strstart&&(l(o,t.adler>>>16),l(o,65535&t.adler)),t.adler=1}if(o.status===ue)if(o.gzhead.extra){for(h=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>h&&(t.adler=T(t.adler,o.pending_buf,o.pending-h,h)),s(t),h=o.pending,o.pending!==o.pending_buf_size));)d(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>h&&(t.adler=T(t.adler,o.pending_buf,o.pending-h,h)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ce)}else o.status=ce;if(o.status===ce)if(o.gzhead.name){h=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>h&&(t.adler=T(t.adler,o.pending_buf,o.pending-h,h)),s(t),h=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,d(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>h&&(t.adler=T(t.adler,o.pending_buf,o.pending-h,h)),0===f&&(o.gzindex=0,o.status=pe)}else o.status=pe;if(o.status===pe)if(o.gzhead.comment){h=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>h&&(t.adler=T(t.adler,o.pending_buf,o.pending-h,h)),s(t),h=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,d(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>h&&(t.adler=T(t.adler,o.pending_buf,o.pending-h,h)),0===f&&(o.status=_e)}else o.status=_e;if(o.status===_e&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(d(o,255&t.adler),d(o,t.adler>>8&255),t.adler=0,o.status=me)):o.status=me),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,F}else if(0===t.avail_in&&i(e)<=i(r)&&e!==N)return n(t,j);if(o.status===ge&&0!==t.avail_in)return n(t,j);if(0!==t.avail_in||0!==o.lookahead||e!==R&&o.status!==ge){var p=o.strategy===K?g(o,e):o.strategy===V?m(o,e):E[o.level].func(o,e);if((p===ve||p===ye)&&(o.status=ge),p===be||p===ve)return 0===t.avail_out&&(o.last_flush=-1),F;if(p===we&&(e===L?B._tr_align(o):e!==U&&(B._tr_stored_block(o,0,0,!1),e===D&&(a(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,F}return e!==N?F:o.wrap<=0?Z:(2===o.wrap?(d(o,255&t.adler),d(o,t.adler>>8&255),d(o,t.adler>>16&255),d(o,t.adler>>24&255),d(o,255&t.total_in),d(o,t.total_in>>8&255),d(o,t.total_in>>16&255),d(o,t.total_in>>24&255)):(l(o,t.adler>>>16),l(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?F:Z)}function A(t){var e;return t&&t.state?(e=t.state.status,e!==fe&&e!==ue&&e!==ce&&e!==pe&&e!==_e&&e!==me&&e!==ge?n(t,P):(t.state=null,e===me?n(t,M):F)):P}var E,S=t("../utils/common"),B=t("./trees"),I=t("./adler32"),T=t("./crc32"),O=t("./messages"),R=0,L=1,D=3,N=4,U=5,F=0,Z=1,P=-2,M=-3,j=-5,H=-1,X=1,K=2,V=3,Y=4,W=0,q=2,G=8,J=9,Q=15,$=8,te=29,ee=256,re=ee+1+te,ne=30,ie=19,ae=2*re+1,se=15,oe=3,de=258,le=de+oe+1,he=32,fe=42,ue=69,ce=73,pe=91,_e=103,me=113,ge=666,be=1,we=2,ve=3,ye=4,ke=3,xe=function(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i};E=[new xe(0,0,0,0,c),new xe(4,4,8,4,p),new xe(4,5,16,8,p),new xe(4,6,32,32,p),new xe(4,4,16,16,_),new xe(8,16,32,32,_),new xe(8,16,128,128,_),new xe(8,32,128,256,_),new xe(32,128,258,1024,_),new xe(32,258,258,4096,_)],r.deflateInit=z,r.deflateInit2=x,r.deflateReset=y,r.deflateResetKeep=v,r.deflateSetHeader=k,r.deflate=C,r.deflateEnd=A,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],34:[function(t,e){"use strict";var r=30,n=12;e.exports=function(t,e){var i,a,s,o,d,l,h,f,u,c,p,_,m,g,b,w,v,y,k,x,z,C,A,E,S;i=t.state,a=t.next_in,E=t.input,s=a+(t.avail_in-5),o=t.next_out,S=t.output,d=o-(e-t.avail_out),l=o+(t.avail_out-257),h=i.dmax,f=i.wsize,u=i.whave,c=i.wnext,p=i.window,_=i.hold,m=i.bits,g=i.lencode,b=i.distcode,w=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{15>m&&(_+=E[a++]<<m,m+=8,_+=E[a++]<<m,m+=8),y=g[_&w];e:for(;;){if(k=y>>>24,_>>>=k,m-=k,k=y>>>16&255,0===k)S[o++]=65535&y;else{if(!(16&k)){if(0===(64&k)){y=g[(65535&y)+(_&(1<<k)-1)];continue e}if(32&k){i.mode=n;break t}t.msg="invalid literal/length code",i.mode=r;break t}x=65535&y,k&=15,k&&(k>m&&(_+=E[a++]<<m,m+=8),x+=_&(1<<k)-1,_>>>=k,m-=k),15>m&&(_+=E[a++]<<m,m+=8,_+=E[a++]<<m,m+=8),y=b[_&v];r:for(;;){if(k=y>>>24,_>>>=k,m-=k,k=y>>>16&255,!(16&k)){if(0===(64&k)){y=b[(65535&y)+(_&(1<<k)-1)];continue r}t.msg="invalid distance code",i.mode=r;break t}if(z=65535&y,k&=15,k>m&&(_+=E[a++]<<m,m+=8,k>m&&(_+=E[a++]<<m,m+=8)),z+=_&(1<<k)-1,z>h){t.msg="invalid distance too far back",i.mode=r;break t}if(_>>>=k,m-=k,k=o-d,z>k){if(k=z-k,k>u&&i.sane){t.msg="invalid distance too far back",i.mode=r;break t}if(C=0,A=p,0===c){if(C+=f-k,x>k){x-=k;do S[o++]=p[C++];while(--k);C=o-z,A=S}}else if(k>c){if(C+=f+c-k,k-=c,x>k){x-=k;do S[o++]=p[C++];while(--k);if(C=0,x>c){k=c,x-=k;do S[o++]=p[C++];while(--k);C=o-z,A=S}}}else if(C+=c-k,x>k){x-=k;do S[o++]=p[C++];while(--k);C=o-z,A=S}for(;x>2;)S[o++]=A[C++],S[o++]=A[C++],S[o++]=A[C++],x-=3;x&&(S[o++]=A[C++],x>1&&(S[o++]=A[C++]))}else{C=o-z;do S[o++]=S[C++],S[o++]=S[C++],S[o++]=S[C++],x-=3;while(x>2);x&&(S[o++]=S[C++],x>1&&(S[o++]=S[C++]))}break}}break}}while(s>a&&l>o);x=m>>3,a-=x,m-=x<<3,_&=(1<<m)-1,t.next_in=a,t.next_out=o,t.avail_in=s>a?5+(s-a):5-(a-s),t.avail_out=l>o?257+(l-o):257-(o-l),i.hold=_,i.bits=m}},{}],35:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=N,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new g.Buf32(pe),e.distcode=e.distdyn=new g.Buf32(_e),e.sane=1,e.back=-1,S):T}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):T}function o(t,e){var r,n;return t&&t.state?(n=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?T:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):T}function d(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=o(t,e),r!==S&&(t.state=null),r):T}function l(t){return d(t,ge)}function h(t){if(be){var e;for(_=new g.Buf32(512),m=new g.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(y(x,t.lens,0,288,_,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;y(z,t.lens,0,32,m,0,t.work,{bits:5}),be=!1}t.lencode=_,t.lenbits=9,t.distcode=m,t.distbits=5}function f(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new g.Buf8(a.wsize)),n>=a.wsize?(g.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),g.arraySet(a.window,e,r-n,i,a.wnext),n-=i,n?(g.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function u(t,e){var r,i,a,s,o,d,l,u,c,p,_,m,pe,_e,me,ge,be,we,ve,ye,ke,xe,ze,Ce,Ae=0,Ee=new g.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;r=t.state,r.mode===Y&&(r.mode=W),o=t.next_out,a=t.output,l=t.avail_out,s=t.next_in,i=t.input,d=t.avail_in,u=r.hold,c=r.bits,p=d,_=l,xe=S;t:for(;;)switch(r.mode){case N:if(0===r.wrap){r.mode=W;break}for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(2&r.wrap&&35615===u){r.check=0,Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0),u=0,c=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=fe;break}if((15&u)!==D){t.msg="unknown compression method",r.mode=fe;break}if(u>>>=4,c-=4,ke=(15&u)+8,0===r.wbits)r.wbits=ke;else if(ke>r.wbits){t.msg="invalid window size",r.mode=fe;break}r.dmax=1<<ke,t.adler=r.check=1,r.mode=512&u?K:Y,u=0,c=0;break;case U:for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(r.flags=u,(255&r.flags)!==D){t.msg="unknown compression method",r.mode=fe;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=fe;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0)),u=0,c=0,r.mode=F;case F:for(;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.head&&(r.head.time=u),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,Ee[2]=u>>>16&255,Ee[3]=u>>>24&255,r.check=w(r.check,Ee,4,0)),u=0,c=0,r.mode=Z;case Z:for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0)),u=0,c=0,r.mode=P;case P:if(1024&r.flags){for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=M;case M:if(1024&r.flags&&(m=r.length,m>d&&(m=d),m&&(r.head&&(ke=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),g.arraySet(r.head.extra,i,s,m,ke)),512&r.flags&&(r.check=w(r.check,i,m,s)),d-=m,s+=m,r.length-=m),r.length))break t;r.length=0,r.mode=j;case j:if(2048&r.flags){if(0===d)break t;m=0;do ke=i[s+m++],r.head&&ke&&r.length<65536&&(r.head.name+=String.fromCharCode(ke));while(ke&&d>m);if(512&r.flags&&(r.check=w(r.check,i,m,s)),d-=m,s+=m,ke)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=H;case H:if(4096&r.flags){if(0===d)break t;m=0;do ke=i[s+m++],r.head&&ke&&r.length<65536&&(r.head.comment+=String.fromCharCode(ke));while(ke&&d>m);if(512&r.flags&&(r.check=w(r.check,i,m,s)),d-=m,s+=m,ke)break t}else r.head&&(r.head.comment=null);r.mode=X;case X:if(512&r.flags){for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=fe;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Y;break;case K:for(;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}t.adler=r.check=n(u),u=0,c=0,r.mode=V;case V:if(0===r.havedict)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,I;t.adler=r.check=1,r.mode=Y;case Y:if(e===A||e===E)break t;case W:if(r.last){u>>>=7&c,c-=7&c,r.mode=de;break}for(;3>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}switch(r.last=1&u,u>>>=1,c-=1,3&u){case 0:r.mode=q;break;case 1:if(h(r),r.mode=ee,e===E){u>>>=2,c-=2;break t}break;case 2:r.mode=Q;break;case 3:t.msg="invalid block type",r.mode=fe}u>>>=2,c-=2;break;case q:for(u>>>=7&c,c-=7&c;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if((65535&u)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=fe;break}if(r.length=65535&u,u=0,c=0,r.mode=G,e===E)break t;case G:r.mode=J;case J:if(m=r.length){if(m>d&&(m=d),m>l&&(m=l),0===m)break t;g.arraySet(a,i,s,m,o),d-=m,s+=m,l-=m,o+=m,r.length-=m;break}r.mode=Y;break;case Q:for(;14>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(r.nlen=(31&u)+257,u>>>=5,c-=5,r.ndist=(31&u)+1,u>>>=5,c-=5,r.ncode=(15&u)+4,u>>>=4,c-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=fe;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.lens[Se[r.have++]]=7&u,u>>>=3,c-=3}for(;r.have<19;)r.lens[Se[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ze={bits:r.lenbits},xe=y(k,r.lens,0,19,r.lencode,0,r.work,ze),r.lenbits=ze.bits,xe){t.msg="invalid code lengths set",r.mode=fe;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Ae=r.lencode[u&(1<<r.lenbits)-1],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(16>be)u>>>=me,c-=me,r.lens[r.have++]=be;else{if(16===be){for(Ce=me+2;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u>>>=me,c-=me,0===r.have){t.msg="invalid bit length repeat",r.mode=fe;break}ke=r.lens[r.have-1],m=3+(3&u),u>>>=2,c-=2}else if(17===be){for(Ce=me+3;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=me,c-=me,ke=0,m=3+(7&u),u>>>=3,c-=3}else{for(Ce=me+7;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=me,c-=me,ke=0,m=11+(127&u),u>>>=7,c-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=fe;break}for(;m--;)r.lens[r.have++]=ke}}if(r.mode===fe)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=fe;break}if(r.lenbits=9,ze={bits:r.lenbits},xe=y(x,r.lens,0,r.nlen,r.lencode,0,r.work,ze),r.lenbits=ze.bits,xe){t.msg="invalid literal/lengths set",r.mode=fe;break}if(r.distbits=6,r.distcode=r.distdyn,ze={bits:r.distbits},xe=y(z,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ze),r.distbits=ze.bits,xe){t.msg="invalid distances set",r.mode=fe;break}if(r.mode=ee,e===E)break t;case ee:r.mode=re;case re:if(d>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,v(t,_),o=t.next_out,a=t.output,l=t.avail_out,s=t.next_in,i=t.input,d=t.avail_in,u=r.hold,c=r.bits,r.mode===Y&&(r.back=-1);
break}for(r.back=0;Ae=r.lencode[u&(1<<r.lenbits)-1],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(ge&&0===(240&ge)){for(we=me,ve=ge,ye=be;Ae=r.lencode[ye+((u&(1<<we+ve)-1)>>we)],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=we+me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=we,c-=we,r.back+=we}if(u>>>=me,c-=me,r.back+=me,r.length=be,0===ge){r.mode=oe;break}if(32&ge){r.back=-1,r.mode=Y;break}if(64&ge){t.msg="invalid literal/length code",r.mode=fe;break}r.extra=15&ge,r.mode=ne;case ne:if(r.extra){for(Ce=r.extra;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ie;case ie:for(;Ae=r.distcode[u&(1<<r.distbits)-1],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(0===(240&ge)){for(we=me,ve=ge,ye=be;Ae=r.distcode[ye+((u&(1<<we+ve)-1)>>we)],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=we+me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=we,c-=we,r.back+=we}if(u>>>=me,c-=me,r.back+=me,64&ge){t.msg="invalid distance code",r.mode=fe;break}r.offset=be,r.extra=15&ge,r.mode=ae;case ae:if(r.extra){for(Ce=r.extra;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=fe;break}r.mode=se;case se:if(0===l)break t;if(m=_-l,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=fe;break}m>r.wnext?(m-=r.wnext,pe=r.wsize-m):pe=r.wnext-m,m>r.length&&(m=r.length),_e=r.window}else _e=a,pe=o-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do a[o++]=_e[pe++];while(--m);0===r.length&&(r.mode=re);break;case oe:if(0===l)break t;a[o++]=r.length,l--,r.mode=re;break;case de:if(r.wrap){for(;32>c;){if(0===d)break t;d--,u|=i[s++]<<c,c+=8}if(_-=l,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?w(r.check,a,_,o-_):b(r.check,a,_,o-_)),_=l,(r.flags?u:n(u))!==r.check){t.msg="incorrect data check",r.mode=fe;break}u=0,c=0}r.mode=le;case le:if(r.wrap&&r.flags){for(;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=fe;break}u=0,c=0}r.mode=he;case he:xe=B;break t;case fe:xe=O;break t;case ue:return R;case ce:default:return T}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,(r.wsize||_!==t.avail_out&&r.mode<fe&&(r.mode<de||e!==C))&&f(t,t.output,t.next_out,_-t.avail_out)?(r.mode=ue,R):(p-=t.avail_in,_-=t.avail_out,t.total_in+=p,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?w(r.check,a,_,t.next_out-_):b(r.check,a,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Y?128:0)+(r.mode===ee||r.mode===G?256:0),(0===p&&0===_||e===C)&&xe===S&&(xe=L),xe)}function c(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,S}function p(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?T:(r.head=e,e.done=!1,S)):T}var _,m,g=t("../utils/common"),b=t("./adler32"),w=t("./crc32"),v=t("./inffast"),y=t("./inftrees"),k=0,x=1,z=2,C=4,A=5,E=6,S=0,B=1,I=2,T=-2,O=-3,R=-4,L=-5,D=8,N=1,U=2,F=3,Z=4,P=5,M=6,j=7,H=8,X=9,K=10,V=11,Y=12,W=13,q=14,G=15,J=16,Q=17,$=18,te=19,ee=20,re=21,ne=22,ie=23,ae=24,se=25,oe=26,de=27,le=28,he=29,fe=30,ue=31,ce=32,pe=852,_e=592,me=15,ge=me,be=!0;r.inflateReset=s,r.inflateReset2=o,r.inflateResetKeep=a,r.inflateInit=l,r.inflateInit2=d,r.inflate=u,r.inflateEnd=c,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e){"use strict";var r=t("../utils/common"),n=15,i=852,a=592,s=0,o=1,d=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,c,p,_,m,g,b){var w,v,y,k,x,z,C,A,E,S=b.bits,B=0,I=0,T=0,O=0,R=0,L=0,D=0,N=0,U=0,F=0,Z=null,P=0,M=new r.Buf16(n+1),j=new r.Buf16(n+1),H=null,X=0;for(B=0;n>=B;B++)M[B]=0;for(I=0;p>I;I++)M[e[c+I]]++;for(R=S,O=n;O>=1&&0===M[O];O--);if(R>O&&(R=O),0===O)return _[m++]=20971520,_[m++]=20971520,b.bits=1,0;for(T=1;O>T&&0===M[T];T++);for(T>R&&(R=T),N=1,B=1;n>=B;B++)if(N<<=1,N-=M[B],0>N)return-1;if(N>0&&(t===s||1!==O))return-1;for(j[1]=0,B=1;n>B;B++)j[B+1]=j[B]+M[B];for(I=0;p>I;I++)0!==e[c+I]&&(g[j[e[c+I]]++]=I);if(t===s?(Z=H=g,z=19):t===o?(Z=l,P-=257,H=h,X-=257,z=256):(Z=f,H=u,z=-1),F=0,I=0,B=T,x=m,L=R,D=0,y=-1,U=1<<R,k=U-1,t===o&&U>i||t===d&&U>a)return 1;for(var K=0;;){K++,C=B-D,g[I]<z?(A=0,E=g[I]):g[I]>z?(A=H[X+g[I]],E=Z[P+g[I]]):(A=96,E=0),w=1<<B-D,v=1<<L,T=v;do v-=w,_[x+(F>>D)+v]=C<<24|A<<16|E|0;while(0!==v);for(w=1<<B-1;F&w;)w>>=1;if(0!==w?(F&=w-1,F+=w):F=0,I++,0===--M[B]){if(B===O)break;B=e[c+g[I]]}if(B>R&&(F&k)!==y){for(0===D&&(D=R),x+=T,L=B-D,N=1<<L;O>L+D&&(N-=M[L+D],!(0>=N));)L++,N<<=1;if(U+=1<<L,t===o&&U>i||t===d&&U>a)return 1;y=F&k,_[y]=R<<24|L<<16|x-m|0}}return 0!==F&&(_[x+F]=B-D<<24|64<<16|0),b.bits=R,0}},{"../utils/common":27}],37:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t){return 256>t?se[t]:se[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,r){t.bi_valid>Y-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>Y-t.bi_valid,t.bi_valid+=r-Y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function o(t,e,r){s(t,r[2*e],r[2*e+1])}function d(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function l(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var r,n,i,a,s,o,d=e.dyn_tree,l=e.max_code,h=e.stat_desc.static_tree,f=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,_=0;for(a=0;V>=a;a++)t.bl_count[a]=0;for(d[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;K>r;r++)n=t.heap[r],a=d[2*d[2*n+1]+1]+1,a>p&&(a=p,_++),d[2*n+1]=a,n>l||(t.bl_count[a]++,s=0,n>=c&&(s=u[n-c]),o=d[2*n],t.opt_len+=o*(a+s),f&&(t.static_len+=o*(h[2*n+1]+s)));if(0!==_){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,_-=2}while(_>0);for(a=p;0!==a;a--)for(n=t.bl_count[a];0!==n;)i=t.heap[--r],i>l||(d[2*i+1]!==a&&(t.opt_len+=(a-d[2*i+1])*d[2*i],d[2*i+1]=a),n--)}}function f(t,e,r){var n,i,a=new Array(V+1),s=0;for(n=1;V>=n;n++)a[n]=s=s+r[n-1]<<1;for(i=0;e>=i;i++){var o=t[2*i+1];0!==o&&(t[2*i]=d(a[o]++,o))}}function u(){var t,e,r,n,i,a=new Array(V+1);for(r=0,n=0;P-1>n;n++)for(de[n]=r,t=0;t<1<<$[n];t++)oe[r++]=n;for(oe[r-1]=n,i=0,n=0;16>n;n++)for(le[n]=i,t=0;t<1<<te[n];t++)se[i++]=n;for(i>>=7;H>n;n++)for(le[n]=i<<7,t=0;t<1<<te[n]-7;t++)se[256+i++]=n;for(e=0;V>=e;e++)a[e]=0;for(t=0;143>=t;)ie[2*t+1]=8,t++,a[8]++;for(;255>=t;)ie[2*t+1]=9,t++,a[9]++;for(;279>=t;)ie[2*t+1]=7,t++,a[7]++;for(;287>=t;)ie[2*t+1]=8,t++,a[8]++;for(f(ie,j+1,a),t=0;H>t;t++)ae[2*t+1]=5,ae[2*t]=d(t,5);he=new ce(ie,$,M+1,j,V),fe=new ce(ae,te,0,H,V),ue=new ce(new Array(0),ee,0,X,W)}function c(t){var e;for(e=0;j>e;e++)t.dyn_ltree[2*e]=0;for(e=0;H>e;e++)t.dyn_dtree[2*e]=0;for(e=0;X>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _(t,e,r,n){p(t),n&&(a(t,r),a(t,~r)),I.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function m(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function g(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&m(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!m(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function b(t,e,r){var n,a,d,l,h=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],a=t.pending_buf[t.l_buf+h],h++,0===n?o(t,a,e):(d=oe[a],o(t,d+M+1,e),l=$[d],0!==l&&(a-=de[d],s(t,a,l)),n--,d=i(n),o(t,d,r),l=te[d],0!==l&&(n-=le[d],s(t,n,l)));while(h<t.last_lit);o(t,q,e)}function w(t,e){var r,n,i,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,d=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=K,r=0;d>r;r++)0!==a[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>l?++l:0,a[2*i]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)g(t,a,r);i=d;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],g(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,g(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),f(a,l,t.bl_count)}function v(t,e,r){var n,i,a=-1,s=e[1],o=0,d=7,l=4;for(0===s&&(d=138,l=3),e[2*(r+1)+1]=65535,n=0;r>=n;n++)i=s,s=e[2*(n+1)+1],++o<d&&i===s||(l>o?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*G]++):10>=o?t.bl_tree[2*J]++:t.bl_tree[2*Q]++,o=0,a=i,0===s?(d=138,l=3):i===s?(d=6,l=3):(d=7,l=4))}function y(t,e,r){var n,i,a=-1,d=e[1],l=0,h=7,f=4;for(0===d&&(h=138,f=3),n=0;r>=n;n++)if(i=d,d=e[2*(n+1)+1],!(++l<h&&i===d)){if(f>l){do o(t,i,t.bl_tree);while(0!==--l)}else 0!==i?(i!==a&&(o(t,i,t.bl_tree),l--),o(t,G,t.bl_tree),s(t,l-3,2)):10>=l?(o(t,J,t.bl_tree),s(t,l-3,3)):(o(t,Q,t.bl_tree),s(t,l-11,7));l=0,a=i,0===d?(h=138,f=3):i===d?(h=6,f=3):(h=7,f=4)}}function k(t){var e;for(v(t,t.dyn_ltree,t.l_desc.max_code),v(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=X-1;e>=3&&0===t.bl_tree[2*re[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function x(t,e,r,n){var i;for(s(t,e-257,5),s(t,r-1,5),s(t,n-4,4),i=0;n>i;i++)s(t,t.bl_tree[2*re[i]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}function z(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return O;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return R;for(e=32;M>e;e++)if(0!==t.dyn_ltree[2*e])return R;return O}function C(t){_e||(u(),_e=!0),t.l_desc=new pe(t.dyn_ltree,he),t.d_desc=new pe(t.dyn_dtree,fe),t.bl_desc=new pe(t.bl_tree,ue),t.bi_buf=0,t.bi_valid=0,c(t)}function A(t,e,r,n){s(t,(D<<1)+(n?1:0),3),_(t,e,r,!0)}function E(t){s(t,N<<1,3),o(t,q,ie),l(t)}function S(t,e,r,n){var i,a,o=0;t.level>0?(t.strm.data_type===L&&(t.strm.data_type=z(t)),w(t,t.l_desc),w(t,t.d_desc),o=k(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,i>=a&&(i=a)):i=a=r+5,i>=r+4&&-1!==e?A(t,e,r,n):t.strategy===T||a===i?(s(t,(N<<1)+(n?1:0),3),b(t,ie,ae)):(s(t,(U<<1)+(n?1:0),3),x(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),b(t,t.dyn_ltree,t.dyn_dtree)),c(t),n&&p(t)}function B(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(oe[r]+M+1)]++,t.dyn_dtree[2*i(e)]++),t.last_lit===t.lit_bufsize-1}var I=t("../utils/common"),T=4,O=0,R=1,L=2,D=0,N=1,U=2,F=3,Z=258,P=29,M=256,j=M+1+P,H=30,X=19,K=2*j+1,V=15,Y=16,W=7,q=256,G=16,J=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=512,ie=new Array(2*(j+2));n(ie);var ae=new Array(2*H);n(ae);var se=new Array(ne);n(se);var oe=new Array(Z-F+1);n(oe);var de=new Array(P);n(de);var le=new Array(H);n(le);var he,fe,ue,ce=function(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length},pe=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},_e=!1;r._tr_init=C,r._tr_stored_block=A,r._tr_flush_block=S,r._tr_tally=B,r._tr_align=E},{"../utils/common":27}],39:[function(t,e){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}]},{},[9])(9)});

//js/mqtt.min_a12f110f.js
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports=t():e.Paho=t()}(this,function(){var e=function(e){function t(e,t){var n=t,s=e[t],o=s>>4,r=s&=15;t+=1;var a,h=0,u=1;do{if(t==e.length)return[null,n];a=e[t++],h+=(127&a)*u,u*=128}while(0!==(128&a));var l=t+h;if(l>e.length)return[null,n];var f=new v(o);switch(o){case d.CONNACK:var g=e[t++];1&g&&(f.sessionPresent=!0),f.returnCode=e[t++];break;case d.PUBLISH:var _=r>>1&3,p=i(e,t);t+=2;var w=c(e,t,p);t+=p,_>0&&(f.messageIdentifier=i(e,t),t+=2);var m=new N(e.subarray(t,l));1==(1&r)&&(m.retained=!0),8==(8&r)&&(m.duplicate=!0),m.qos=_,m.destinationName=w,f.payloadMessage=m;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:case d.PRE_CONNECT:f.messageIdentifier=i(e,t);break;case d.SUBACK:f.messageIdentifier=i(e,t),t+=2,f.returnCode=e.subarray(t,l)}return[f,l]}function n(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function s(e,t,s,i){return i=n(t,s,i),a(e,s,i),i+t}function i(e,t){return 256*e[t]+e[t+1]}function o(e){var t=new Array(1),n=0;do{var s=e%128;e>>=7,e>0&&(s|=128),t[n++]=s}while(e>0&&4>n);return t}function r(e){for(var t=0,n=0;n<e.length;n++){var s=e.charCodeAt(n);s>2047?(s>=55296&&56319>=s&&(n++,t++),t+=3):s>127?t+=2:t++}return t}function a(e,t,n){for(var s=n,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=55296&&56319>=o){var r=e.charCodeAt(++i);if(isNaN(r))throw new Error(p(g.MALFORMED_UNICODE,[o,r]));o=(o-55296<<10)+(r-56320)+65536}127>=o?t[s++]=o:2047>=o?(t[s++]=o>>6&31|192,t[s++]=63&o|128):65535>=o?(t[s++]=o>>12&15|224,t[s++]=o>>6&63|128,t[s++]=63&o|128):(t[s++]=o>>18&7|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=63&o|128)}return t}function c(e,t,n){for(var s,i="",o=t;t+n>o;){var r=e[o++];if(128>r)s=r;else{var a=e[o++]-128;if(0>a)throw new Error(p(g.MALFORMED_UTF,[r.toString(16),a.toString(16),""]));if(224>r)s=64*(r-192)+a;else{var c=e[o++]-128;if(0>c)throw new Error(p(g.MALFORMED_UTF,[r.toString(16),a.toString(16),c.toString(16)]));if(240>r)s=4096*(r-224)+64*a+c;else{var h=e[o++]-128;if(0>h)throw new Error(p(g.MALFORMED_UTF,[r.toString(16),a.toString(16),c.toString(16),h.toString(16)]));if(!(248>r))throw new Error(p(g.MALFORMED_UTF,[r.toString(16),a.toString(16),c.toString(16),h.toString(16)]));s=262144*(r-240)+4096*a+64*c+h}}}s>65535&&(s-=65536,i+=String.fromCharCode(55296+(s>>10)),s=56320+(1023&s)),i+=String.fromCharCode(s)}return i}var h="@VERSION@-@BUILDLEVEL@",u=e.localStorage||function(){var e={};return{setItem:function(t,n){e[t]=n},getItem:function(t){return e[t]},removeItem:function(t){delete e[t]}}}(),d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14,PRE_CONNECT:15},l=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var s="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(s=s+" "+i);throw new Error(s)}if(typeof e[n]!==t[n])throw new Error(p(g.INVALID_TYPE,[typeof e[n],n]))}},f=function(e,t){return function(){return e.apply(t,arguments)}},g={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},_={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},p=function(e,t){var n=e.text;if(t)for(var s,i,o=0;o<t.length;o++)if(s="{"+o+"}",i=n.indexOf(s),i>0){var r=n.substring(0,i),a=n.substring(i+s.length);n=r+t[o]+a}return n},w=[0,6,77,81,73,115,100,112,3],m=[0,4,77,81,84,84,4],v=function(e,t){this.type=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};v.prototype.encode=function(){var e,t=(15&this.type)<<4,i=0,a=[],c=0;switch(void 0!==this.messageIdentifier&&(i+=2),this.type){case d.CONNECT:switch(this.mqttVersion){case 3:i+=w.length+3;break;case 4:i+=m.length+3}i+=r(this.clientId)+2,void 0!==this.willMessage&&(i+=r(this.willMessage.destinationName)+2,e=this.willMessage.payloadBytes,e instanceof Uint8Array||(e=new Uint8Array(u)),i+=e.byteLength+2),void 0!==this.userName&&(i+=r(this.userName)+2),void 0!==this.password&&(i+=r(this.password)+2),void 0!==this.gameVersion&&(i+=r(this.gameVersion)+2),void 0!==this.hash&&(i+=r(this.hash)+2);break;case d.SUBSCRIBE:t|=2;for(var h=0;h<this.topics.length;h++)a[h]=r(this.topics[h]),i+=a[h]+2;i+=this.requestedQos.length;break;case d.UNSUBSCRIBE:t|=2;for(var h=0;h<this.topics.length;h++)a[h]=r(this.topics[h]),i+=a[h]+2;break;case d.PUBREL:t|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),c=r(this.payloadMessage.destinationName),i+=c+2;var u=this.payloadMessage.payloadBytes;i+=u.byteLength,u instanceof ArrayBuffer?u=new Uint8Array(u):u instanceof Uint8Array||(u=new Uint8Array(u.buffer));break;case d.DISCONNECT:}var l=o(i),f=l.length+1,g=new ArrayBuffer(i+f),_=new Uint8Array(g);if(_[0]=t,_.set(l,1),this.type==d.PUBLISH)f=s(this.payloadMessage.destinationName,c,_,f);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:_.set(w,f),f+=w.length;break;case 4:_.set(m,f),f+=m.length}var p=0;this.cleanSession&&(p=2),void 0!==this.willMessage&&(p|=4,p|=this.willMessage.qos<<3,this.willMessage.retained&&(p|=32)),void 0!==this.userName&&(p|=128),void 0!==this.password&&(p|=64),_[f++]=p,f=n(this.keepAliveInterval,_,f)}switch(void 0!==this.messageIdentifier&&(f=n(this.messageIdentifier,_,f)),this.type){case d.CONNECT:f=s(this.clientId,r(this.clientId),_,f),void 0!==this.willMessage&&(f=s(this.willMessage.destinationName,r(this.willMessage.destinationName),_,f),f=n(e.byteLength,_,f),_.set(e,f),f+=e.byteLength),void 0!==this.userName&&(f=s(this.userName,r(this.userName),_,f)),void 0!==this.password&&(f=s(this.password,r(this.password),_,f)),void 0!==this.gameVersion&&(f=s(this.gameVersion,r(this.gameVersion),_,f)),void 0!==this.hash&&(f=s(this.hash,r(this.hash),_,f));break;case d.PUBLISH:_.set(u,f);break;case d.SUBSCRIBE:for(var h=0;h<this.topics.length;h++)f=s(this.topics[h],a[h],_,f),_[f++]=this.requestedQos[h];break;case d.UNSUBSCRIBE:for(var h=0;h<this.topics.length;h++)f=s(this.topics[h],a[h],_,f)}return g};var I=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new v(d.PINGREQ).encode(),s=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),window.Global&&window.egret&&(window.Global.pingSendTimeMs=egret.getTimer()),this.timeout=setTimeout(s(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(g.PING_TIMEOUT.code,p(g.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(s(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},E=function(e,t,n,s){t||(t=30);var i=function(e,t,n){return function(){return e.apply(t,n)}};this.timeout=setTimeout(i(n,e,s),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},y=function(t,n,s,i,o){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(p(g.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(p(g.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.Client",t,n,s,i,o),this.host=n,this.port=s,this.path=i,this.uri=t,this.clientId=o,this._wsuri=null,this._localKey=n+":"+s+("/ws"!=i?":"+i:"")+":"+o+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0;for(var r in u)(0===r.indexOf("Sent:"+this._localKey)||0===r.indexOf("Received:"+this._localKey))&&this.restore(r)};y.prototype.host=null,y.prototype.port=null,y.prototype.path=null,y.prototype.uri=null,y.prototype.clientId=null,y.prototype.socket=null,y.prototype.connected=!1,y.prototype.maxMessageIdentifier=65536,y.prototype.connectOptions=null,y.prototype.hostIndex=null,y.prototype.onConnected=null,y.prototype.onConnectionLost=null,y.prototype.onMessageDelivered=null,y.prototype.onMessageArrived=null,y.prototype.traceFunction=null,y.prototype._msg_queue=null,y.prototype._buffered_msg_queue=null,y.prototype._connectTimeout=null,y.prototype.sendPinger=null,y.prototype.receivePinger=null,y.prototype._reconnectInterval=1,y.prototype._reconnecting=!1,y.prototype._reconnectTimeout=null,y.prototype.disconnectedPublishing=!1,y.prototype.disconnectedBufferSize=5e3,y.prototype.receiveBuffer=null,y.prototype._traceBuffer=null,y.prototype._MAX_TRACE_ENTRIES=100,y.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(p(g.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(p(g.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},y.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(p(g.INVALID_STATE,["not connected"]));var n=new v(d.SUBSCRIBE);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var s=0;s<n.topics.length;s++)n.requestedQos[s]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:p(e)})}),t.timeout&&(n.timeOut=new E(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:g.SUBSCRIBE_TIMEOUT.code,errorMessage:p(g.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},y.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(p(g.INVALID_STATE,["not connected"]));var n=new v(d.UNSUBSCRIBE);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new E(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:g.UNSUBSCRIBE_TIMEOUT.code,errorMessage:p(g.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},y.prototype.send=function(e){this._trace("Client.send",e);var t=new v(d.PUBLISH);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(p(g.INVALID_STATE,["not connected"]));var n=Object.keys(this._sentMessages).length+this._buffered_msg_queue.length;if(n>this.disconnectedBufferSize)throw new Error(p(g.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},y.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(p(g.INVALID_STATE,["not connecting or connected"]));var e=new v(d.DISCONNECT);this._notify_msg_sent[e]=f(this._disconnected,this),this._schedule_message(e)},y.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var e in this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},y.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,h)},y.prototype.stopTrace=function(){delete this._traceBuffer},y.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,null!=this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null),null!=this.sendPinger&&this.sendPinger.cancel(),null!=this.receivePinger&&this.sendPinger.cancel(),this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=f(this._on_socket_open,this),this.socket.onmessage=f(this._on_socket_message,this),this.socket.onerror=f(this._on_socket_error,this),this.socket.onclose=f(this._on_socket_close,this),this.sendPinger=new I(this,this.connectOptions.keepAliveInterval),this.receivePinger=new I(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new E(this,this.connectOptions.timeout,this._disconnected,[g.CONNECT_TIMEOUT.code,p(g.CONNECT_TIMEOUT)])},y.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},y.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case d.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var s="",i=t.payloadMessage.payloadBytes,o=0;o<i.length;o++)i[o]<=15?s=s+"0"+i[o].toString(16):s+=i[o].toString(16);n.payloadMessage.payloadHex=s,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(p(g.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,n]))}u.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},y.prototype.restore=function(e){var t=u.getItem(e),n=JSON.parse(t),s=new v(n.type,n);switch(n.type){case d.PUBLISH:for(var i=n.payloadMessage.payloadHex,o=new ArrayBuffer(i.length/2),r=new Uint8Array(o),a=0;i.length>=2;){var c=parseInt(i.substring(0,2),16);i=i.substring(2,i.length),r[a++]=c}var h=new N(r);h.qos=n.payloadMessage.qos,h.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(h.duplicate=!0),n.payloadMessage.retained&&(h.retained=!0),s.payloadMessage=h;break;default:throw Error(p(g.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(s.payloadMessage.duplicate=!0,this._sentMessages[s.messageIdentifier]=s):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[s.messageIdentifier]=s)},y.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},y.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===d.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},y.prototype._on_socket_open=function(){},y.prototype._do_send_CONNECT=function(){var e=new v(d.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},y.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},y.prototype._deframeMessages=function(e){var n=new Uint8Array(e),s=[];if(this.receiveBuffer){var i=new Uint8Array(this.receiveBuffer.length+n.length);i.set(this.receiveBuffer),i.set(n,this.receiveBuffer.length),n=i,delete this.receiveBuffer}try{for(var o=0;o<n.length;){var r=t(n,o),a=r[0];if(o=r[1],null===a)break;s.push(a)}o<n.length&&(this.receiveBuffer=n.subarray(o))}catch(c){var h="undefined"==c.hasOwnProperty("stack")?c.stack.toString():"No Error Stack Available";return void this._disconnected(g.INTERNAL_ERROR.code,p(g.INTERNAL_ERROR,[c.message,h]))}return s},y.prototype._handleMessage=function(e){switch(this._trace("Client._handleMessage",e),e.type){case d.PRE_CONNECT:var t=e.messageIdentifier+this.connectOptions.password+"!@#$%^&*IH",n=CRC32.str(t)>>>0;this.connectOptions.hash=n+"",this._do_send_CONNECT();break;case d.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var s in this._sentMessages){var i=this._sentMessages[s];u.removeItem("Sent:"+this._localKey+i.messageIdentifier)}this._sentMessages={};for(var s in this._receivedMessages){var o=this._receivedMessages[s];u.removeItem("Received:"+this._localKey+o.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(g.CONNACK_RETURNCODE.code,p(g.CONNACK_RETURNCODE,[e.returnCode,_[e.returnCode]]),e.returnCode);break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var r=[];for(var a in this._sentMessages)this._sentMessages.hasOwnProperty(a)&&r.push(this._sentMessages[a]);if(this._buffered_msg_queue.length>0)for(var c=null;c=this._buffered_msg_queue.pop();)r.push(c),this.onMessageDelivered&&(this._notify_msg_sent[c]=this.onMessageDelivered(c.payloadMessage));for(var r=r.sort(function(e,t){return e.sequence-t.sequence}),h=0,l=r.length;l>h;h++){var i=r[h];if(i.type==d.PUBLISH&&i.pubRecReceived){var f=new v(d.PUBREL,{messageIdentifier:i.messageIdentifier});this._schedule_message(f)}else this._schedule_message(i)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var w=!1;this._reconnecting&&(w=!0,this._reconnectInterval=1,this._reconnecting=!1,window&&window.Global&&(window.Global.onEvent("mqtt_reconnect_ok"),console.warn("ws"+(new Date).getTime()))),this._connected(w,this._wsuri),this._process_queue();break;case d.PUBLISH:this._receivePublish(e);break;case d.PUBACK:var i=this._sentMessages[e.messageIdentifier];i&&(delete this._sentMessages[e.messageIdentifier],u.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(i.payloadMessage));break;case d.PUBREC:var i=this._sentMessages[e.messageIdentifier];if(i){i.pubRecReceived=!0;var f=new v(d.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",i),this._schedule_message(f)}break;case d.PUBREL:var o=this._receivedMessages[e.messageIdentifier];u.removeItem("Received:"+this._localKey+e.messageIdentifier),o&&(this._receiveMessage(o),delete this._receivedMessages[e.messageIdentifier]);var m=new v(d.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(m);break;case d.PUBCOMP:var i=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],u.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(i.payloadMessage);break;case d.SUBACK:var i=this._sentMessages[e.messageIdentifier];i&&(i.timeOut&&i.timeOut.cancel(),128===e.returnCode[0]?i.onFailure&&i.onFailure(e.returnCode):i.onSuccess&&i.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case d.UNSUBACK:var i=this._sentMessages[e.messageIdentifier];i&&(i.timeOut&&i.timeOut.cancel(),i.callback&&i.callback(),delete this._sentMessages[e.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(g.INVALID_MQTT_MESSAGE_TYPE.code,p(g.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(g.INVALID_MQTT_MESSAGE_TYPE.code,p(g.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}},y.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(g.SOCKET_ERROR.code,p(g.SOCKET_ERROR,[e.data]))},y.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(g.SOCKET_CLOSE.code,p(g.SOCKET_CLOSE))},y.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},y.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new v(d.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new v(d.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},y.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},y.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},y.prototype._reconnect=function(){(!window||!window.Global||!window.Global.isAccountBeenReplaced&&window.Global.allowReconnect)&&(this._trace("Client._reconnect"),this.connected||(window&&window.Global&&(window.Global.onEvent("mqtt_reconnecting"),console.warn("ws"+(new Date).getTime())),this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&this._reconnectInterval++,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)))},y.prototype._disconnected=function(e,t,n){if(this._trace("Client._disconnected",e,t),window&&window.Global&&(window.Global.onEvent("mqtt_disconnect",[n,t]),console.warn("ws"+(new Date).getTime()+" "+t)),void 0!==e&&this._reconnecting)return void(this._reconnectTimeout=new E(this,this._reconnectInterval,this._reconnect));if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=g.OK.code,t=p(g.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==g.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void(window&&window.Global&&(window.Global.isAccountBeenReplaced||!window.Global.allowReconnect)||this._reconnect())}else 4===this.connectOptions.mqttVersion&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},y.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)"undefined"!=typeof e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer)for(var t=0,s=arguments.length;s>t;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):"undefined"==typeof arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))},y.prototype._traceMask=function(e,t){var n={};for(var s in e)e.hasOwnProperty(s)&&(s==t?n[s]="******":n[s]=e[s]);return n};var M=function(e,t,n,s){var i;if("string"!=typeof e)throw new Error(p(g.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){s=t,i=e;var o=i.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!o)throw new Error(p(g.INVALID_ARGUMENT,[e,"host"]));e=o[4]||o[2],t=parseInt(o[7]),n=o[8]}else{if(3==arguments.length&&(s=n,n="/ws"),"number"!=typeof t||0>t)throw new Error(p(g.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(p(g.INVALID_TYPE,[typeof n,"path"]));var r=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(r?"["+e+"]":e)+":"+t+n}for(var a=0,c=0;c<s.length;c++){var h=s.charCodeAt(c);h>=55296&&56319>=h&&c++,a++}if("string"!=typeof s||a>65535)throw new Error(p(g.INVALID_ARGUMENT,[s,"clientId"]));var u=new y(i,e,t,n,s);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(p(g.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(p(g.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(p(g.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(p(g.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return u.clientId},set:function(){throw new Error(p(g.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return u.onConnected},set:function(e){if("function"!=typeof e)throw new Error(p(g.INVALID_TYPE,[typeof e,"onConnected"]));u.onConnected=e}},disconnectedPublishing:{get:function(){return u.disconnectedPublishing},set:function(e){u.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return u.disconnectedBufferSize},set:function(e){u.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return u.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(p(g.INVALID_TYPE,[typeof e,"onConnectionLost"]));u.onConnectionLost=e}},onMessageDelivered:{get:function(){return u.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(p(g.INVALID_TYPE,[typeof e,"onMessageDelivered"]));u.onMessageDelivered=e}},onMessageArrived:{get:function(){return u.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(p(g.INVALID_TYPE,[typeof e,"onMessageArrived"]));u.onMessageArrived=e}},trace:{get:function(){return u.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(p(g.INVALID_TYPE,[typeof e,"onTrace"]));u.traceFunction=e}}}),this.connect=function(e){if(e=e||{},l(e,{timeout:"number",userName:"string",password:"string",gameVersion:"string",hash:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(p(g.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(p(g.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof N))throw new Error(p(g.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,"undefined"==typeof e.willMessage.destinationName)throw new Error(p(g.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if("undefined"==typeof e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(p(g.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(p(g.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,s=0;s<e.hosts.length;s++){if("string"!=typeof e.hosts[s])throw new Error(p(g.INVALID_TYPE,[typeof e.hosts[s],"connectOptions.hosts["+s+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[s])){if(0===s)t=!0;else if(!t)throw new Error(p(g.INVALID_ARGUMENT,[e.hosts[s],"connectOptions.hosts["+s+"]"]))}else if(t)throw new Error(p(g.INVALID_ARGUMENT,[e.hosts[s],"connectOptions.hosts["+s+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(p(g.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(p(g.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(p(g.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(var s=0;s<e.hosts.length;s++){if("number"!=typeof e.ports[s]||e.ports[s]<0)throw new Error(p(g.INVALID_TYPE,[typeof e.ports[s],"connectOptions.ports["+s+"]"]));var o=e.hosts[s],r=e.ports[s],a=-1!==o.indexOf(":");i="ws://"+(a?"["+o+"]":o)+":"+r+n,e.uris.push(i)}}}u.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(t=t||{},l(t,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if("undefined"!=typeof t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(p(g.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));u.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(t=t||{},l(t,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");u.unsubscribe(e,t)},this.send=function(e,t,n,s){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof N)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(i=e,"undefined"==typeof i.destinationName)throw new Error(p(g.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));u.send(i)}else i=new N(t),i.destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=s),u.send(i)},this.publish=function(e,t,n,s){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof N)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(i=e,"undefined"==typeof i.destinationName)throw new Error(p(g.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));u.send(i)}else i=new N(t),i.destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=s),u.send(i)
},this.disconnect=function(){u.disconnect()},this.getTraceLog=function(){return u.getTraceLog()},this.startTrace=function(){u.startTrace()},this.stopTrace=function(){u.stopTrace()},this.isConnected=function(){return u.connected}},N=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw p(g.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var n,s=0,i=!1,o=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:c(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(r(t)),n=new Uint8Array(e);return a(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(p(g.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return s},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);s=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(p(g.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return o},set:function(e){o=e}}})};return{Client:M,Message:N}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});return e});

